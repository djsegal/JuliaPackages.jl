resourcecontexts experimental julia package composable resource management blocks resources objects cleanup code run finalize example file handles temporary files directories background task currently handled macro calls defines context functions abstractcontext argument associate provides based overrides base mktemp mktempdir lock redirect stdout stderr stdin associates current block passed invoked exits associated runs defer defers arbitrary expression examples manging read lines close function readlines tmp txt create ensure cleaned afterward path write content flush info output ispath isopen string acquire pair locks release opposite reentrantlock begin locked section islocked outside start ten external processes wait finish continuing sleep rand pass callers called foo args defined using automatically caller returning bare ptr buffer raw len buf vector uint undef preserve pointer preserved regardless call unsafe store xff zeroing secret secretbuffer super seek shred byte interop available enter steal inside repl func arg setting fake tear normal usage ready safely access finalizer special detach finalization instead lexical dynamic directory return name clean dir finalized joinpath design standard solution julian severe ergonomic disadvantages extremely inconvenient intermediate entering creates highly nested visually confusing excess nesting leads deep stack traces custom separated creation finally factors mean people prefer scoped form argued suffers disadantages leak forget guard try finalizers restricted environment errors occur original created makes unstructured error handling impossible propagate natural alive holding references returned object hold reference bad implementer reduces composability combine desired type multiple returns unnatural forces user unpack values proxy proposed postfix syntax adds ideas able prevent introducing calling convention scope syntactic sugar compose preserves rejecting conflation break familiar apis filename stream interface language integration look feature replaced keyword behavior ignoring value similar sense particular observed frequently introduction variables simply transfer result occurring prior line implicit boundaries global potentially scopes getting correct tricky looping constructs introduce disable shredded concerned definition hides explicitly annotating transparent existing annotations nospecialize attach metadata arguments passcontext ctx default benefits drawbacks discussed length previous prototype structured concurrency cancellation closely related viewing async tasks nursury