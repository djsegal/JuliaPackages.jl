lightbson performance encoding decoding bson data allocation free api reading writing natural mapping julia types corresponding convenience read write dict string ordereddict default roundtrip consistency struct tunable tradeoffs flexibility evolution configurable validation levels light weight indexing larger documents transducers compatible tested conformance corpus generic serialization functionality aims representations suitable interop languages term persistence integrated fileio adding semantics confusing mutation entirely separate complete written conversion extended json added level sensitive focus package available concern perform optimally simple strings arrays fields require src reads densevector uint object path file dst writes type maps dictionary named tuple list pair names field values byte buffer return buf int specific namedtuple joinpath homedir test low bsonreader bsonwriter immutable instantiated append destination array user responsible duplicate reader foo returns materializes writer appends name value close finalizes document length terminating null prefer symbols unfortunately constant time example nested assigning function takes index begin generators materialized accessed vector elements dictionaries recursively appropriate leaf directly abstract integer abstractfloat materialize numeric unsafe weakrefstring aliased unsafebsonstring create pointers underlying performing allocations care safety preserve true binary represented bsonbinary subtype unsafebsonbinary zero alocations unsafearray iteration iterated foreach using apis map sum println access involves linear scan matching depending size structure migh preferable build bsonindex provides partial collisions evict previous entries designed means reset indexedbsonreader wraps accelerate misses fall wrapped built indexbsonreader constructed empty throws keyerror configured validator processing input provided strictbsonvalidator validates error lightbsonvalidator lengths parent scope guard invalid memory uncheckedbsonvalidator performs strict protected structs automatically translated traits functions select mode serve extension defined bool set serialized fieldnames declaration defaults structtypes structtype nostructtype false iterate construct details trait generate faster code explicitly nestedsimple float root schema lived advisable encode information versions implement evolve schemas strategies beyond advise impose users mechanisms fit version current unversioned storing versioned handle respect mismatched otherwise evolving defaulting nan abstractbsonreader elseif else real world application instead mechanism allow forward compatibility breaking change info unsupported const tuples makes frequent calls resize track head position optimized operation resolving manipulating bsonwritebuffer purely avoid implements minimum implementation naturally depend nature processed main overarching goal enable requires willing sacrifice achieve target advice short avoiding nesting reduce search complexity apply specifically variants allocating buffers reuse indexes plain applicable benchmark run ryzen utc uuid btime bytes typeof observe material difference reasonable effect final lines indexed breaks roughly half unchecked impact caution objectid bsonobjectid accordance spec ids process generated construction range efficient batch generation datetime timestamp truncated unique collect equal sequence related packages mongoc mongodb client decfp dec decimal transformation weakrefstrings pointer based unsafearrays utilities structures