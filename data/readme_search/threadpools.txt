threadpools improved thread management background nonuniform tasks overview documentation simple package exposes macros functions mimic base threads map foreach underlying api handle built suited user primary duration bthreads macro behaves identically job free related bmap bforeach counterparts usage qthreads queued scheduling strategy help jobs divide incoming list equal chunks launch chunk separate processing uniform lead getting assigned delaying completion pre assign starts finishes comes operating shorter ones cousin qbthreads qmap qforeach qbmap qbforeach lower level tspawnat mimics spawn allows direct assignment users develop function selection foreground allowed forbidden tmap itrs tforeach logging performance tuning version analyze chosen count logthreads logtmap logtforeach logbthreads logbmap logbforeach logqthreads logqmap logqforeach logqbthreads logqbmap logqbforeach please examples advanced invoke structures staticpool queuepool subset available composition pwith pthreads command complex scenarios stack detail versions julia println threadid element array int task runnable fetch note seen execution guaranteed result course match input logger produce abstractthreadpool object memory log start stop times ran pool plotrecipe recipesbase exposed generate visualization plot plots shown index time color corresponding using sleep strategies started previous completes stacked results method taking