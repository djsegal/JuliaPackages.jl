gentracekerneldsl package provides dsl constructing trace kernels stochastic maps traces gen generative functions generalized metropolis hastings proposal distributions sequential monte carlo specifically define type algorithm called smcp viewed refactoring translator functionality described marco cusumano towner thesis arxiv preprint automating involutive mcmc using probabilistic differentiable programming unlike transform enforce separation probablistic components users freely mix sampling deterministic transformations describe arbitrary kernel function declared macro body contain julia code expressions familiar dist args samples distribution address evaluates return value calls defined shortened syntax splice choices top level caller choicemap intended proposals accept current argument tuple proposed values update specifying reverse move inteded smc written pairs forward backward previous subsequent model containing recover gensmcp details inter operation particle filtering library example split merge looks currently means switch mean false else uniform continuous true passed