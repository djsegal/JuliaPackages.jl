functors provides tools express powerful design pattern dealing nested structures machine learning optimisation models cumbersome inefficient parameters flat vector structs help manage complexity desirable easily operate changing precision applying optimiser update step fmap easy acting map julia using struct foo functor model float deeply bar workhorse actually lower level function var returns object inspected takes values restructures original type include fields pass tuple field names baz list returned passed reconstruction invoking default constructor define custom inner constructors expected provide acts implement hand flexibility required example discussion regarding cache implementation exclude fine grained control descends particular value isleaf cuda element array char ascii unicode category letter lowercase isbitstype eltype cuarray