air tomic mmutable esource julia light air author noah benson nbenuwedu description air immutable data structure software transactional memory tool julia provides persistent data structures including dictionaries sets dimensional arrays heaps weighted dictionaries weighted sets includes transaction system allows compose atomic operations data air currently development includes substantial testing stable inspiration air design derived paradigms clojure documentation documentation air ongoing endeavor found examples following code blocks demonstrate simple examples air library pdict persistent dictionaries julia using air creating persistent dictionary using dict julia cube pdict symbolfloat pdictsymbolfloat entries instead push setindex pdict objects efficiently produce persistent duplicates requested updates using functions push setindex julia cube push cube height pdictsymbolfloat entry height julia cube push cube width depth pdictsymbolfloat entries depth height width delete function replaced delete julia delete cube height pdictsymbolfloat entries depth width modify original object julia cube pdictsymbolfloat entries depth height width lookup operations nearly fast native dict objects julia cube height behavior pdict similar dict julia cube name error keyerror key name found parray persistent arrays julia using air persistent arrays commonly arrays julia parray element parrayfloat using pfill pones pzeros similar persistent counterparts fill ones zeros julia pfill parrayint operations push pushfirst pop popfirst similar mutable equivalents push pushfirst pop popfirst efficient pvector parray objects julia push element parrayfloat julia pushfirst element parrayfloat julia pop element parrayfloat updates performed setindex setindex julia setindex parrayint actor volatile tx threadsafe transactions julia using air volatile objects ref objects designed safe read settable inside transaction julia vol volatile pdict volatile pdictsymbolint cjkybeekum pdict ref objects volatiles accessed getindex inside outside transaction julia vol pdictsymbolint entries outside transaction error change volatile julia vol push vol error set volatile outside transaction inside transaction guaranteed thread change volatile read changed transaction safe time edit volatiles julia tx vol push vol pdictsymbolint entries julia vol pdictsymbolint entries tx function alternate write transactions julia tx vol push vol julia vol pdictsymbolint entries actors managing effects transactions managing data updated sequential singlethreaded operations julia notes actor pvectorstring pfill actor parraystring jngqzgach string safe read actors time similar reading volatile values julia notes element parraystring define function sends message log send function requires argument function run actor thread parameter current value actor return value updated value actor julia logmsg begin send val pushfirst val notes logmsg generic function method test logmsg function note pushfirst action logmsg function run separate thread actor thread julia logmsg log initialized julia notes element parraystring log initialized actors run read transactions guaranteed unchanged duration transaction thread send functions transaction julia tx logmsg log message julia notes element parraystring log message log initialized transaction fails reason sends occur actors sent functions transacton succeeds julia tx logmsg failure message error error julia notes element parraystring log message log initialized plans note core components air implementations currently undergoing testing particular existing persistent data structures fairly tested performance comparable clojure counterparts additionally initial tests threadsafe transaction system using transaction block macro actor volatile appear fine author expert testing multithreaded code caution advisable completed plans persistent data structures parray persistent array type mimics julia native array pdict persistent dictionary type mimics julia native dict pset persistent set type pwset weighted persistent set type element pwset weight set acts piority queue pwset yields element weight time distribution randpwset yields random element set probability element proportional weight pwdict persistent weighted dictionary type pwset type instead elements weights dictionary contains keyvalue pairs weights lazydict persistent lazy dictionary type composable multithreading utilities inspired clojure volatile type operates transaction blocks ensure updates references synchronized block performed atomically actor type sending asynchronous jobs independent threads respects atomic requirements transactional blocks threadlocal var type threadsafe delay type plans incomplete testing threadsafe promise types plans implemented improved persistent array methods currently methods persistent arrays yield mutable julia arrays instead persistent arrays parray class explicitly overload functions broadcasting functions ensure creates parray objects example parray yield parray currently yields array forms arbitrarilydeep nested persistent dictionaries vectors common data organization paradigm persistent data volatile objects embedded datastructure multithreaded operations transparent form trait subsystem structures using various persistent types querybuildupdate api tools data structures setindex push functions nice nested persistent data structures single coherent updating querying persistent record types tool defining data structures support lazy reification updates properties style persistent data structure inheritable method parameters common languages api function calls lowerlevel function support subset argument preprocessing occurs lowerlevel function preprocessing documentation shared arguments duplicated multiple simple macro easy common parameters occur documented identically julia entirely settled documented difference async spawn macros suspicion actor constructor additional parameter asyncfalse set true force threads created using async instead spawn clojure similar distinction send send functions license mit license copyright noah benson permission hereby granted free charge person obtaining copy software associated documentation files software deal software restriction including limitation rights copy modify merge publish distribute sublicense sell copies software permit persons software furnished subject following conditions copyright notice permission notice included copies substantial portions software software provided warranty express implied including limited warranties merchantability fitness particular purpose noninfringement event authors copyright holders liable claim damages liability action contract tort otherwise arising connection software dealings softwar