twostageoptimalcontroljl juliapackage allows solution stage optimal control vintagestructured optimal control installation package available julia repository package installed simply using following commands julia using pkg julia pkgaddtwostageoptimalcontrol documentation information toolbox examples please look documentation class package designed solve form maxc mathbbnquad cmathbbnint exprho fcs dt hspacecm d int dsds qquaddots gcs hspacecm s s hspacecm fracdt s gcs qquad s cs qquad qquad int fcs ds underlinec leq c leq overlinec qquadforall ldotsn quadquadforall underlinec leq c leq overlinec qquadforall ldotsn quadquadforall quadquadforall variable function explanations model consist types variables concentrated control variables depending time distributed control variables depending time vintage aggregated variables depending time concentrated variables concentrated variables consist n dimensional control variable c m dimensional variable s initial value s s dynamics affected c furthermore c affects initial values distributed variables distributed variables analogous concentrated variables distributed variables consist n dimensional control variable c m dimensional variable s strictly speaking partial differential equation solved characteristic lines fixed vintage overline dynamics s affected distributed controls c initial values s beginning vintage determined value concentrated s time concentrated control c aggregated variables finally aggregated variable aggregates time functional form f vintages startet algorithm principles algorithm gradient based approach following sequence steps start guess optimal solution control variables calculate corresponding profiles variables co variables based maximum principle calculate gradient based hamiltonian adjust guess control direction gradient optimal adjustment step direction gradient define currently solution iterate step improvement found anymore stage optimal control random switching time package based project solution stage optimal control random switching time class takes following form maxc mathbbnmathbb tauint tau exprho fcs dt exprhotautauctaustau qquaddots gcs hspacecm s s underlinec leq c leq overlinec qquadforall ldotsn taustau valuefunction stage taustau maxctaumathbbninttau exprhotauftaucs dt hspacecm dots gtaucs qquad stau tauctaustau underlinec leq c leq overlinec qquadforall ldotsn quadquadforall tau tau random switching time stages stochastic properties described mathbblefttau gt probability surviving stage hazard rate eta thereby depend time variables s control variablee c dot etacscdot overall type transformed vintagestructed optimal control details wrzaczek kuhn frankovic planned extensions toolbox generalise agestructured optimal control initial distribution variables intial boundary controls generalised version aggregated variables allow complicated feasible regions control variables include option define equilibrium conditions solution fulfil