argtool argtool provid tool creat consist flexibl api various kind function argument current version help deal argument core handl allow user specifi direct file name command pipelin cours raw handl write argument write temporari file path return api argtool api function type help defin flexibl function api function help test api defin abl defin flexibil api suppos benefit verbos test combinatori explos method argtool provid tool help test tool call intent argument handl api help defe flexibl function signatur consist type helper function argread argwrit arg read arg write arg isdir arg mkdir argread argread union abstractstr abstractcmd argread type union type arg read function convert readabl handl arg read detail argwrit argwrit union abstractstr abstractcmd argwrit type union type arg write function convert writeabl handl except arg write handl generat temporari file arg write detail arg read arg read function arg argread arg arg read function accept argument arg abstractstr file path read abstractcmd command run read standard output handl read bodi return normal throw error path close return arg read handl flush close return arg read arg write arg write function arg argwrit arg arg write function arg tempnam arg write function accept argument arg abstractstr file path write abstractcmd command run write standard input handl written temporari path written bodi return normal path close complet handl argument left flush return argument temporari path write close complet path return arg write arg return use pattern consist return whatev written argument pass error evalu bodi path arg write write delet pass string temporari path generat arg arg isdir arg isdir function arg abstractstr arg arg isdir function take arg path exist directori error rais otherwis pass path final return result arg definit use tool offer argtool exist symmetri arg mkdir consist error messag arg mkdir arg mkdir function arg abstractstr arg arg mkdir function arg mktempdir arg mkdir function take arg path exist empti directori exist path creat directori temporari directori creat path directori return error occur arg directori return origin exist empti empti exist delet function test use argtool easi thorough test flexibl function defin use argtool bit trickier packag includ test tool help api test function defin argument handl api consist function macro arg reader arg writer arg test arg reader arg reader arg abstractstr type argread arg function pre test setup arg test arg begin arg argread test use arg post test cleanup arg reader function take path read singl argument block invok test reader type arg read handl option type argument block invok reader produc argument type arg pass block argument valu test argument type initi final test consid file handl argument test close file test function arg convert argread instanc use arg test arg begin arg writer arg writer type argwrit path string arg function pre test setup arg test arg begin arg argwrit test use arg post test cleanup arg writer function take block invok test writer type arg write handl temporari exist path arg convert various writabl argument type write path option type argument block invok writer produc argument type arg pass block argument valu test argument type initi final test consid file handl argument test close file test function arg convert argwrit instanc use arg test arg begin arg writer method take path name arg reader arg writer path abstractstr type argwrit arg function pre test setup arg test arg begin arg argwrit test use arg post test cleanup method use specifi path instead use path name generat tempnam path pass outsid arg writer path argument block form arg test arg test arg arg bodi arg test macro convert arg function provid arg reader arg writer actual argument valu write arg test arg bodi equival arg arg bodi exampl exampl api split exampl defin function flexibl api use main api exampl thorough test function use test util usag exampl explan exampl test use argtool function send data src argread dst union argwrit arg read src src arg write dst dst buffer vector uint undef eof src readbyt src buffer write dst view buffer defin send data function read data sourc write destin specifi src dst argument respect thank argtool relat simpl definit act swiss armi knife send data sourc destin exampl julia mktempdir julia write hello txt hello world julia run cat hello txt hello world julia send data hello txt hello copi txt hello copi txt julia run cat an hello world julia hello copi txt julia send data hello txt stdout hello world julia send data hello txt pipelin gzip hello julia run gzcat hello hello world julia hello copi send data gzcat hello var folder mhp cguepi julia run cat hello copi hello world understand definit send data insid main bodi function oper src dst handl use buffer read data former latter mib block call arg read arg write transform src dst argument various type src dst handl allow inner bodi handl core deal handl worri various incom argument type api section detail arg read arg write type argument send data src argread dst argwrit dst option default argread type union includ type arg read handl similar argwrit type union includ type arg write handl except explicit opt arg write creat temporari file return path altogeth allow send data function combinator explos type signatur send data src abstractstr send data src abstractcmd send data src send data src abstractstr dst abstractstr send data src abstractcmd dst abstractstr send data src dst abstractstr send data src abstractstr dst abstractcmd send data src abstractcmd dst abstractcmd send data src dst abstractcmd send data src abstractstr dst send data src abstractcmd dst send data src dst combin guarante proper initi cleanup argument file close complet error creat temporari output file return complet delet error argument command pipelin correct read write option test exampl defin send data function test kind argument accept produc test combin argtool offer tool help test api defin exampl test assum definit send data evalu julia session use test creat sourc file src file tempnam data rand uint write src file data print sig arg println send data join map typeof arg arg reader src file src test arg method arg test src begin print sig src dst file send data src test data read dst file dst file test arg method arg writer dst file dst arg test src dst begin print sig src dst test dst send data src dst test data read dst file cleanup src file evalu test code print follow output send data string send data string string send data string cmd send data string base cmdredirect send data string iostream send data string base process send data cmd send data cmd string send data cmd cmd send data cmd base cmdredirect send data cmd iostream send data cmd base process send data base cmdredirect send data base cmdredirect string send data base cmdredirect cmd send data base cmdredirect base cmdredirect send data base cmdredirect iostream send data base cmdredirect base process send data iostream send data iostream string send data iostream cmd send data iostream base cmdredirect send data iostream iostream send data iostream base process send data base process send data base process string send data base process cmd send data base process base cmdredirect send data base process iostream send data base process base process test code doesn isn normal verbos exampl help understand happen output various short bit code test invok send data function detail happen call arg reader src file evalu attach block five arg valu convert readabl argument type string cmd cmdredirect iostream process call arg test src begin convert src readabl argument type close final call arg writer evalu attach block five arg valu convert writabl argument type string cmd cmdredirect iostream process call arg test src dst begin convert src readabl argument dst writeabl argument set type close otherwis final block exampl test code illustr reason featur test api initi puzzl exampl arg reader arg writer don simpli produc argument valu pass function test instead requir convers arg test macro reason valu return arg reader arg writer multipl test argument type handl initi test final arg test block delimit initi final occur sometim oper arg test block enclos arg reader arg writer block test dst file expect content test data read dst file reliabl insid arg test block data guarante written dst file dst final issu dst process exampl arg write leav process reciev write data flush handl guarante process data final destin process exit put test arg test block ensur process termin reliabl test content dst file