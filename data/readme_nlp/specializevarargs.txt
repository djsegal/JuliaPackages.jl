specializevarargsjl specializevarargsjl force julia create specialize varadic arguments useful people complicated codegen performance situations cassette overdub methods forwarddiffjl install simply pkg repl mode regular julia repl type pkg add specializevarargs julia using pkg pkg add specializevarargs julia repl performance example cassettejl example manual contextual dispatch specializevarargsjl performance boost using specializevarargs using cassette cassette context tracectx mutable struct trace current vector stack vector trace function enter trace args pair args push current pair push stack current current pair return function exit trace current pop stack return cassette prehook ctx tracectx args enter ctx metadata args cassette posthook ctx tracectx args exit ctx metadata trace trace rand julia btime cassette overdub tracectx metadata trace s allocations kib redefine enter function using specializevarargs macro specializevararg julia specializevararg function enter trace args pair args push current pair push stack current current pair return enter generic function methods julia btime cassette overdub tracectx metadata trace s allocations kib nice macro macro specializevararg called specializevararg fdef integer literal fdef varadic function definition create literal methods function defined fdef arguments falling traditional vararg definition exapand macro exactly julia using specializevarargs julia macroexpand specializevararg myvarargs length myvarargs quote function vararg vart vart myvarargs vararg length myvarargs function vararg vart vararg vart vart vart myvarargs vararg vararg length myvarargs function vararg vart vararg vart vararg vart varargs vart vart vart myvarargs vararg vararg vararg varargs length myvarargs nested macros specializevarargs handle functions defined macros front inbounds forward macros created methods julia macroexpand specializevararg foo bar function args typeof args quote foo bar function vararg vart vart args vararg typeof args foo bar function vararg vart vararg vart vart vart args vararg vararg typeof args foo bar function vararg vart vararg vart vararg vart varargs vart vart vart args vararg vararg vararg varargs typeof args fallback code specify fallback code run splatting occurs including code fallback function definition julia macroexpand specializevararg function args args fallback return false quote function vararg vart vart args vararg args function vararg vart vararg vart varargs vart vart args vararg vararg varargs return false args notice method function immediately exit return false noted re applying macro function definition fallback method enclose macro parentheses example specializevararg inline sum fallback hi parsed specializevararg inline sum fallback hi instead desired specializevararg inline sum fallback hi vararg type constraints specializevararg macro supports adding type constraints varargs julia macroexpand specializevararg function args int args quote function vararg vart int vart args vararg args function vararg vart vararg vart int vart vart args vararg vararg args function vararg vart vararg vart vararg vart varargs int vart vart vart args vararg vararg vararg varargs arg