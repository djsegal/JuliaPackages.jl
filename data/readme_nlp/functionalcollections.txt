functionalcollections functional persistent data structures julia progress currently optimized performance note master branch functionalcollections julia v earlier julia versions please functionalcollections v installation julia pkg add functionalcollections julia using functionalcollections exports collection abbrev persistentvector pvec persistenthashmap phmap persistentarraymap persistentset pset persistentlist plist persistentqueue pqueue srcfunctionalcollectionsjl contains package exports builtins implemented persistentvector persistent vectors immutable sequential randomaccess data structures performance characteristics similar arrays julia persistent persistentint persistent vectors immutable changing operations return vector instead modifying original julia append persistentint changed julia persistentint persistent vectors randomaccess structures indexed arrays julia immutable sense define index assignment assignment implies change instead assoc returns persistent vector value associated index julia assoc persistentint functions push peek pop persistent vector stack interface push adds single element whereas append adds elements collection starting left peek returns element vector pop returns vector element julia push persistentint julia peek julia pop persistentint persistent vectors support iteration sequence operations julia el persistent foo bar baz println el foo bar baz julia map persistentint julia filter iseven persistentint persistenthashmap persistent hash maps immutable unordered associative structures similar built dict type julia name persistent dict zach allaun persistentsymbol string allaun zach queried manner similar dictionaries julia name zach julia name middle persistent vectors assoc associate value index persistent hash maps associate value arbitrary key dissociate keyvalue pair dissoc julia fullname assoc name middle randall persistentsymbol string allaun zach middle randall julia dissoc fullname middle persistentsymbol string allaun zach basemap defined persistent hash maps function argument expect key value tuple return key value tuple function applied keyvalue pair hash map construct julia mapkeys persistenthashmap map kv kv kv julia mapkeys string fullname persistentstring string allaun middle randall zach persistentarraymap persistentarraymaps immutable dictionaries implemented arrays keyvalue pairs means time complexity operations quickly created useful sizes julia persistentarraymap persistentint stringpairintstring julia m assoc persistentint stringpairintstring julia m false julia dissoc m persistentint stringpairintstring julia dissoc m true persistentset persistentsets immutable sets usual set interface conjpersistentset val returns set element added conjoined disjpersistentset val returns set element removed disjoined todo ints vs uints bitwise operations children instead arrayof standardize shortfn interfaces lastchild instead arrayofnode peek pop pop butlast base arrays boundscheck drop boundcheck iteration currently pvec pset pvec pset persistent macro sugar hijacking built syntax persistent dict foo bar baz creates phmap persistent creates pvec persistentqueue queue pqueue bitmappedtrie comment mask indicate index assumption persistentvector constant time rest adding initial index offset quick slicing initial offset structure deletion pvec mask pvec move extra pvec constructor type definition persistenthashmap repr values printed string printing breaks dissoc