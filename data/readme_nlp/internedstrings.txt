internedstrings string interning julia avoid duplicating strings memory linux macos windows package evaluator codecov license usage intern returns interned string short call intern strings expect multiple copies memory enjoy memory savings enjoy faster equality checks via pointer comparison julia via shortcutting simple example clarifying interning julia gold gold julia gold gold julia pointer pointer false julia pointer intern pointer intern true exist separately memory pointers intern intern strings refer piece data memory pointers interned strings content equal referentially equal convenience macro string amounts internstring julia julia intern julia true note substring type julia wk wikipedia wikipedia julia pointer intern pedia pointer intern substring wk true immutable types example natural language processing string interning particularly useful natural language processing nlp tokenization texts creates vectors individual components words text components repeat texts interning lead memory overall example consider splitting paragraphs wikipedia article string interning julia raw computer science string interning method storing copy distinct string computer sciencestring value immutable objectimmutablerefcite webtitlestringintern method stringurl developer networkaccessdate march ref interning strings makes string processing tasks time spaceefficient cost requiring time string created interned distinct values stored string intern pool julia raw string interning supported modern objectoriented programming language including python programming languagepython php lua programming languageluaref immutable objects luaref ruby programming languageruby symbols java programming languagejava juliaprogramminglanguagejulia list cli languagesnet languagesref immutable objects netref lisp programming languagelisp scheme programming languagescheme smalltalk languages symbol programmingsymbol type basically interned strings library standard ml jersey contains ttatomtt type objective selectors mainly method names interned strings julia splita splitb split split julia isplita isplitb intern splita intern splitb julia length union pointer splita pointer splitb julia length union pointer isplita pointer isplitb julia length splita length splitb interning leads pointers pointer individual component interning leads pointers pointers reused recurring individual components string appears multiple times nlp discussed details garbage collection interned strings transparent normal references original string references string copies interning scope garbage collected interned string goes scope garbage collected worry types interned intern type string recommended immutable types unexpected behavior happen mutating objects interned types interning pool except substring interned parent string type holding reference parent string interned reference exists overload behavior internmytype usual intern strings strsjl motivation nlp nlp looking text document common task break tokens tokenization simply using split using regex bespoke tools wordtokenizersjl issue tokens costing memory math section bit handwavy simplification gist consider mb bytes text file string object takes approximately bytes discounting pointer length marker etc simplify average token length bytes meaning text contains tokens tokens string takes total bytes content string object accompanied pointers length markers etc bytes simplify bytes using substring tokens helps takes bytes avoids memory allocations content token object contains pointers original string catch substring holds strong reference original string substring survives mb stay memory common discard lot tokens example stopwords common words content practice track tokens words text substring tokens text memory considering word embeddings conclusion lots string objects lots allocations substring unlike string worry mistakenly keeping original huge source string memory string unlike substring worry managing memory strings memory hood value returned intern strong reference real string unlike normal string objects ss pointerinterns pointerinterns strings content equal reference equal interned string interned check interned string content return interning string ongoing allocations pointer length marker substring solves worry mistakenly keeping huge source string memory substring reference huge string unless huge source string solves worry managing memory normal reference content string content goes scope garbage collected removing copy interning pool handled automatically weakref alive final original byte document words probably unique words cleaning looking real world data tokens wikipedia words rare words etc removed average bytes keeping bytes content plus bytes pointerslength markers plus byte null terminating grand total bytes vs original bytes difference memorywise tokenizing strings substrings memory content substrings contiguous strings reallocated faq comments original idea direct implementation method described wikipedia plenty languages allow string interning cut token cost pointers decrease size pointers bit julia build costs halved cutting changing system pointer type requires using manual pointer requires writing manual memory management reference counting considered reasonable bit pointers probably nlp tasks mllabelutilsjl top internedstringsjl encode strings int symbols interned strings symbols semantically strings semantically names subtype abstractstring support string operations build interned string knowledge garbage collected serialization interning transparent interning string serializes completely fine string deserialize string creates interned string serialized content means interning strings processes via pmap completely safe intern strings thread code threadsafe factor packages categoricalarray etc pretty similar focused pooling single array unmaintained unregistered pooledelementsjl global pools automatic garbage collection referentially sane magic required serialization etc downside basically downside interning string overhead compute hash string check interned downsides vs substring substrings avoid allocating memory segments content means potentially outright avoid expensive alloc