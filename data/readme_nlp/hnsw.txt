hnsw approxim nearest neighbor search use hierarch navig world hnsw algorithm describ https arxiv org ab highlight written julia julian depend support increment index creation arbitrari distanc function data agnost data arbitrari type correspond distanc function creat index index librari struct type hierarchicalnsw construct use hnsw hierarchicalnsw data metric efconstruct data abstractvector data metric euclidean metric distanc calcul metric defin distanc type evalu custommetr implement maximum link node level note valu high influenc recal depend data maximum link bottom layer default efconstruct maximum length dynam link list index creation low valu reduc recal valu increas runtim index creation maximum length dynam link list search chang afterward use set hnsw valu log prefactor random level generat max element length data set larger valu add element structur initi creation hierarchicalnsw struct initi search graph built call add graph hnsw indic iter insert data graph option provid indic subset indic data partial construct graph search initi hierarchicalnsw search approxim nearest neighbor use idx dist knn search hnsw queri queri singl type eltyp data vector simpl exampl use hnsw dim num element data rand dim num element intial hnsw struct hnsw hierarchicalnsw data efconstruct add data graph option pass subset indic data partial construct graph add graph hnsw queri rand dim approxim nearest neighbor queri idx dist knn search hnsw queri multi thread multi thread version algorithm avail checkout branch multi thread start index add graph hnsw multithread true multi thread search add multithread true keyword argument knn search