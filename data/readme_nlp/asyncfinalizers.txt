asyncfinalizers asyncfinalizersjl extends finalizer allowing executing arbitrary code including garbage collection object safe unsafe apis avoiding escaping resurrecting object collected otherwise information documentation internally implementation strategy api asyncfinalizersonfinalize finalizer allows asyncfinalizersunsafeunwrap unwrap shim wrapper example julia using asyncfinalizers julia mutable struct refint value int julia object refint julia asyncfinalizers onfinalize object shim unpack shim finalized object allowed value shim value return thunk return function arbitrary println refint value finalized julia object julia gc gc sleep refint finalized note callback passed asyncfinalizersonfinalize receives shim wrapper original object original object wrapped shim asyncfinalizersunsafeunwrap implementation strategy asyncfinalizersjl internally background worker task processes queued async finalizers returned thunks finalize callback registered using asyncfinalizersonfinalize queue lockfree called standard finalizer callback passed basefinalize lockfree strict sense modulo gc called standard finalizer eventually forward progress independent worker task encounters gc safepoint