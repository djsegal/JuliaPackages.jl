transmutedimsjl package provides generalisations julia permutedims function permuteddimsarray wrapper allow permutations replace dropdims reshape generalisation introduce trivial dimensions repositioning implicit trivial dimensions beyond ndims th th dimensions ones ntuple size permutedims size using transmutedims transmute size valid permutation positions matter normalised zeros indicate trivial output dimensions input dimensions ndims omitted provided size a sum dims size a transmute a size try transmute catch err err argumenterror allowed size third repeat input dimension diagonally output dimensions using linearalgebra transmute diagonal true transmute size function transmute lazy tries minimise wrappers ideally none unwrapping reshaping transmute isa transmuteddimsarrayfloat array transmute isa arrayfloat transmute permuteddimsarray isa arrayfloat transmute diagonal isa transmuteddimsarrayint unitrange transmute diagonal rand isa matrix calling constructor directly transmuteddimsarray simply applies wrapper method transmute val unwrapping compiletime using benchmarktools btime transmute ns allocation bytes btime permuteddimsarray ns allocations bytes btime transmute val ns allocations bytes btime transmute ns allocations bytes btime reshape ns allocation bytes finally eager variant tries return densearray similarly unwrap transpose etc prefers reshape copying data stridedjl speed faster base permutedims transmutedims isa arrayfloat transmutedims isa matrix btime transmutedims rand s allocations kib btime permutedims rand s allocations kib strided transmute isa stridedviewfloat strided transmutedims isa stridedviewfloat stridedview type allow insertionremoval trivial dimensions addition permutations functions preserve lower functions treat tuples vectors transmute isa abstractvector transmutedims isa matrix written tensorcastjl immediate issue reshapetransposegpuarray fail trigger gpu broadcasting package replaces wrapper ideally none calling transmute allowed cast express clean