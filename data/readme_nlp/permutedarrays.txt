permutedarrays common julia build abstractarray data structures memory layouts array pointers examples include structarrays arraysofarrays tuplevectors course standard array element immutable type permute values example tuplevector using tuplevectors using permutedarrays using random using benchmarkhistograms tuplevectors chainvec randn randn tv tuplevector cost random permutation julia btime permute tv setup randperm ms allocations mib permutedarrays reduce julia btime permute tv setup randperm ns allocations kib note converting vector require copying data julia btime tv vector tv ns allocation kib paying cost approach fast julia tv vector tv julia btime permute tv setup randperm ns allocation bytes memory requirements doubled vector loses original advantages packed format implementation setup relatively simple struct permutedvector abstractvector data perm vectorint iperm vectorint perm permutation applied implicitly data iperm inverse permutations built composition swaps exchanging elements expressed swap default implementation function swap abstractvector int int return