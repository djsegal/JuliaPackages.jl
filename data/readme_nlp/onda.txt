ondajl tour examples ondajl julia package throughput manipulation structured lpcm signal data arbitrary domainspecific encodings file formats storage layers onda format specification onda lightweight format defined atop apache arrow storing manipulating sets multisensor multichannel lpcmencodable annotated timeseries recordings format intentionally languageagnostic consumerproducer supports apache arrow readwrite ondacompliant arrow tables sake convenience onda specification resides ondajl repository leverages legolas framework define version arrow table schemas relevant format terminology document term lpcm refer linear pulse code modulation form signal encoding multivariate waveforms digitized series samples uniformly spaced time quantized uniformly spaced grid signal refer digitized output process refer devices physical virtual sample processes generate signals sensors signal comprised metadata lpcm encoding sensor information channel information sample data pathformat information etc associated multichannel sample data recording refer collection signals recorded simultaneously time period annotation refer piece metadata associated specific time span specific recording design principles onda useful segments signal fit memory simultaneously entire signal signal recording dataset fit memory signals recording fit memory simultaneously recording dataset fit memory recordings dataset fit memory simultaneously dataset signals benefit sensorspecific encodingscompression codecs intermediate target format wrangling unstructured signal data bulk ingestion larger data store intermediate target format local experimentation bulk retrieval larger data store format sharing datasets comprised gigabytes terabytes signal data format sharing datasets comprised hundreds hundreds thousands recordings onda design depend technologies standardized implementationagnostic specifications multiple application domains support recordings signal recording unique channel layout physical unit resolution bit depth sample rate suited ingestion retrieval popular distributed analytics tools spark tensorflow traditional databases postgressql cassandra objectbased storage systems s gcp cloud storage enable metadata annotations etc stored processed separately raw sample data significant communication overhead enable extensibility sacrificing interpretability signal encodings annotations sample data file formats etc userdefinable design simple decent programmer google access able interpret write performant parsers onda dataset reading onda documentation onda sample data file format onda allows dataset authors utilize whatever file format appropriate signal sample data author provides mechanism deserialize sample data format standardized interleaved lpcm representation transactional database majority onda dataset mandated metadata stored tabular manifests containing recording information signal descriptions annotations etc simple structure tailored towards onda target regimes intended serve persistent backend external servicesapplications analytics platform onda seeks provide data model purposefully structured enable various sorts analysis format mandatedescribe specific implementation analysis utilities schema definitions onda format primarily consists collection interelated legolas schemas ondasignal metadata describes signal previously defined including lpcm encoding channel information sample data pathformat etc ondaannotation metadata describes annotation previously defined including recording time span etc schemas orthogonal inherent onda format prevents dataset producerconsumer separately constructingmanipulatingtransferringanalyzing ondasignal table ondaannotation table furthermore prevents dataset producersconsumers multiple tables schema referencing set recordings splitting dataset annotations multiple ondaannotation tables following sections provide version integer column documentation examples legolas schemas accordance legolas framework table considered comply schema specified required columns schema column documentation refers logical types defined arrow specification onda readerwriter implementations additionally employ arrow extension types directly alias column specified logical type support applicationlevel features class uuid support custom filepath type support etc ondasignal columns recording bit fixedsizebinary uuid identifying recording signal associated filepath utf string identifying location signal associated sample data file string valid uri file path relative location ondasignal table fileformat utf string identifying format signal associated sample data file onda readerwriter implementations support following file formats define support additional values desired lpcm signals stored raw interleaved lpcm format format description lpcmzst signals stored raw interleaved lpcm format compressed via zstd span struct signal time span recording structure fields start duration nanosecond unit start offset nanoseconds beginning recording minimum value stop duration nanosecond unit stop offset nanoseconds exclusive beginning recording value start sensortype utf string identifying type multichannel sensor generated signal notion sensor type somewhat applicationspecific refer device particular data modality etc valid sensortype values alphanumeric nonempty lowercase snakecase contain whitespace punctuation leadingtrailing underscores sensorlabel utf string context recording uniquely identifies multichannel sensor generated signal field equivalent sensortype applications sensor recording type especially useful contexts single recording contains multiple signals sensortype valid values sensorlabel follow format valid sensortype values channels list utf list strings th element name signal th channel valid channel name alphanumeric nonempty lowercase snakecase contain whitespace punctuation leadingtrailing underscores additional allowed characters include parentheses balanced matching closing parenthesis included parenthesis allow arbitrary crosssignal referencing channel name reference channel names signals contained recording reference form sensorlabelchannelname example eog signal channel named lefteegm left eye electrode referenced mastoid electrode eeg signal unique amongst channel names signal words duplicate channel names signal disallowed sampleunit utf name signal canonical unit string string conform format alphanumeric nonempty lowercase snakecase contain whitespace punctuation leadingtrailing underscores singular contain abbreviations uv bad microvolt bad literperminute sampleresolutioninunit floatingpointdouble signal resolution canonical unit value signal sampletype sampleoffsetinunit fields determines signal lpcm quantization scheme sampleoffsetinunit floatingpointdouble signal zerooffset canonical unit allowing lpcm encodings centered zero values sampletype utf primitive scalar type encode sample signal valid values int signed littleendian byte integer int signed littleendian byte integer int signed littleendian byte integer int signed littleendian byte integer uint unsigned littleendian byte integer uint unsigned littleendian byte integer uint unsigned littleendian byte integer uint unsigned littleendian byte integer float bit floating float bit floating samplerate floatingpointdouble signal sample rate samples note ondasignal specification allows simultaneous existence multiple ondasignal instances sensorlabel recording sensorlabel defined act unique context recording identifier signal sensor recording contain multiple discontiguous signals generated underlying sensor time specified signal span signals share common sensor recording manner overlapping span note property holistically enforceable onda readerwriter implementations beyond definition specification intepretation discontinuous sample data specific sensortype recording etc left downstream specific extensions ondasignal example exist ondasignal sensorlabeleeg spanstartnanosecond stopnanoseconde recording sensorlabel spanstartnanoseconde stopnanoseconde downstream consumers interpret eeg signals sensor sampled time sensor generated signal beginning recording followed gap followed sampling feasible practice recommended data producers manually concatenate discontiguous sample data single signal nan values represent unsampled regions represent discontiguous segments via separate signals former approach convenient latter downstream consumers examples recording filepath fileformat span channels sampleunit sampleresolutioninunit sampleoffsetinunit sampletype samplerate mycustomvalue xbdcddefcdb relativepathsampleslpcm lpcm starte stope eeg fp f f fz f f microvolt int value xbdcddefcdb sbucketprefixobjlpcmzst lpcmzst start stope ecg avl avr microvolt int value xfaeadfbbdebfadf sbucketprefixobjwithnoextension flac starte stope audio left scalar float value xacfefeacbafcfef relativepathsamples custompriceformatparseablejsonparameter start stope price price dollar uint wow value sample data files sample data file referenced signal filepath field encoded specified signal sampletype sampleresolutioninunit sampleoffsetinunit fields serialized raw lpcm format formatted specified signal fileformat field onda explicitly supports arbitrary choice file format serialized sample data via fileformat field onda readerwriter implementations support deserialization sample data implementationsupported format following standardized interleaved lpcm memory representation channel signal byte offset th channel value th multichannel sample bytewidthsignalsampletype layout expressed following table bytewidthsignalsampletype byte offset value st channel value st sample nd channel value st sample th channel value st sample st channel value nd sample nd channel value nd sample th channel value nd sample st channel value rd sample nd channel value rd sample th channel value rd sample th channel value th sample values represented littleendian format individual value multichannel sample converted encoded representation canonical unit representation via encodedvalue decodedvalue sampleoffsetinunit sampleresolutioninunit division followedpreceded whatever quantization strategy chosen user roundingtruncationdithering etc complementarily individual value multichannel sample converted decoded encoded representation canonical unit representation via decodedvalue encodedvalue sampleresolutioninunit sampleoffsetinunit previous versions ondasignal ondaannotation columns recording bit fixedsizebinary uuid identifying recording annotation associated id bit fixedsizebinary uuid identifying annotation span struct annotation time span recording structure ondasignal schema span column specified previous section examples recording id span mycustomvalue xbdcddefcdb xbeaebba starte stope value xbdcddefcdb xdaebbdbcabbacddefcadc starte stope value xfaeadfbbdebfadf xaeebbbfe starte stope value xacfefeacbafcfef xbcbeedadabafacc starte stope wow value potential alternatives section describe alternative technologiessolutions considered onda design parquet chose base onda tabular data specification arrow parquet former meaningful memoryinterchange format storage format onda consumersproducers course deserialize ondaformatted arrow tables parquet format various potential sample data storage formats prototypes onda agnostic user choice sample data file format instead opinionated approach technologies considered generic underlying file format including avro motivated uber image storage npy zarr current version onda allows readerwriter implementations support formats deserialization targets mandate support enables onda producersconsumers leverage formatcodec suits domain flac audio hdf featureful ubiquitous technically based standard hdf infamous hefty dependency fairly complex reference implementation hdf solves inherent filesystembased storage onda involve storing binary blobs domainspecific formats exist naturally files filesystem objects object storage system decided onda explicitly depend hdf technically precludes ondaformatted content stored hdf practical purposes onda readerswriters necessarily automatically able read dataset unless explicitly support hdf storage layer hdf support mandated format edfmefetc onda originally motivated bulk electrophysiological dataset manipulation domain recording file formats designed support filerecording constrained domainspecific assumptions specific bit depth assumptions annotations stored signal artifacts etc technically onda agnostic choice file formats signal serialization store onda sample data edfmef bids bids alternative option storing neuroscience datasets mentioned onda original motivation electrophysiological dataset manipulation bids appeared highly relevant candidate unfortunately bids restricts eeg data specific file formats account plurality lpcmencodable signals onda seeks handle generically messagepack version onda messagepack store signalannotation metadata issue background switch arrow json onda prototypes json serialize signalannotation metadata json advantage ubiquitoussimpleflexiblehumanreadable performance overhead textual decodingencoding desired datasets lots annotations comparison switching messagepack yielded x performance increase deserialization practical usage subsequent switch messagepack arrow modern versions onda format yielded deserialization improvements bson bson considered potential serialization format signalannotation metadata prearrow versions onda messagepack chosen bson due latter relative complexity compared former onda current version bson remains preferable arrow tabular data representation perspective versions format ondajl v release onda format specification resided separate repository repository archived contents issue tracker available historical purposes read fashion