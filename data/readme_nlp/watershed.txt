julia version d watershed translation zlateski watershed code hierarchical watershed segmentation affinity graph input return output segmentation watershed basins hierarchy generated single linkage clustering segmentation indexed image nonnegative integer values running basins hierarchy represented segmentpairsrogram tree leaves represent watershed basins internal vertices represent mergings clusters height vertex affinity merging occurs vanilla version algorithm typically produces severe oversegmentation basins excessively numerous options provided moderate tendency collapsing subtrees height threshold single leaves resulting segmentpairsrogram defines hierarchy segments unions watershed basins collapsing subtrees eliminate leaves size threshold vertices height collapsing subtrees regions segmentation mergings watershed basins leaves segmentpairsrogram represent regions implementation affinity graph associated d image vertex graph image voxel edge nearest neighbor pairs voxels voxel nearest neighbors directions graph connectivity weight edge represents affinity voxels affinity voxels tend segment low affinity voxels segments watershed basins associated local maxima graph following sign convention graph partitioning edges segments minimized edges segments maximized potentially confusing sign convention opposite original watershed definition image processing field watershed basins associated local minima accord metaphor drop water flowing downhill affinity graph represented images edges affinity graph times voxels image neglecting boundary effects convolutional networks generate affinity graph image turaga et al algorithms simplest affinity graph weight edge maximum voxel values watershed basins associated local maxima image watershed graphs reduces conventional watershed images except flipped sign image processing watershed implementations identify ridgelines separate basins assign label voxels ridgelines watershed ridgeline basins regarded located edges voxels watershed label voxels background follows edges graph affinity low threshold removed operation voxels singletons completely disconnected rest graph background voxels label distinguish foreground regions installation julia rsvp update metadata pkgupdate add package pkgaddwatershed update code master branch pkgcheckoutwatershed usage test scripts example functions main functions segmentjl citation article zlateskiimage title image segmentation sizedependent single linkage clustering watershed basin graph author zlateski aleksandar seung sebastian journal arxiv preprint arxiv credit algorithm aleksandar zlateski watershed implementation package translated julia sebastian seung currently maintained jingpeng wu