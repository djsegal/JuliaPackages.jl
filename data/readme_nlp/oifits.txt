support oifits data julia oifitsjl package provides support oifits data julia language oifits types oifits standard store optical interferometry data collection datablocks revision standard ref ref oifits file contain following datablocks oitarget datablock stores list observed targets oiarray datablock describes array telescope stations oiwavelength datablock describes instrument notably effective wavelengths bandwidths spectral channels oicorr datablocks store correlation data oivis datablocks store complex visibility data oivis datablocks store squared visibility powerspectrum data oit datablocks store triple product bispectrum data oiflux datablocks store spectral flux data oiinspol datablocks store instrumental polarization data datablocks stored binary tables fits data file support fits files provided fitsiojl package julia type oifits datablock named corresponding oifits extension addition types individual oifits datablocks oifitsjl package provides datasets type oidataset contain oifits datablocks dataset efficient representation contents compliant oifits file reading writing oifits files reading writing oifits datasets reading oifits data file julia yields dataset using oifits ds read oidataset input input name oifits file instance fitsiofits represents fits file read call equivalent shortcut ds oidataset input merge contents oifits file inp inp etc ds read oidataset inp inp ds oidataset inp inp merge existing dataset ds read ds inp inp creating oifits file simple writing dataset ds write filename ds overwriting forbidden default keyword overwritetrue specified allow silently overwriting existing file reading individual oifits datablocks useful read individual oifits datablocks debug fix contents compliant oifits file fits file read hdu oifits datablock using fitsio oifits fits filename fits file reading tgt oitarget read oitarget extension th hdu tgt read oitarget idem db oivis read oivis extension th hdu db read oivis idem oifits datablock type type th extension oidatablock instead result typestable db oidatablock read oifits extension extension th hdu db read oidatablock idem writing individual oifits datablocks using fitsio oifits fits filename fits file writing write db write db hdu fix compliant oifits file usually duplicate target instrument names read datablocks fix wrong push oidataset consistent dataset directly write oifits file thanks automatic rewriting target identifiers targets dependencies identified name consistently merged push oitarget multiply defined identical targets apart maybe identifiers accessing contents datablocks datasets contents oifits datablocks datasets accessed dot notation indexation contents datasets dot notation dataset object ds storing consistent set oifits datablocks following properties available dstarget oitarget datablock oifits structure dsinstr list oiwavelength datablocks indexed regular integer index instrument name ds instr yields th oiwavelength datablock ds instrinsname yields oiwavelength datablock name matches insname matching names follows fits conventions letters trailing spaces ignored exception thrown index integer name valid method provide default value example ds instr insname yield insname found dsinstr instead throwing exception dsarray list oiarray datablocks indexed dsinstr except interferometric array names assumed dscorrel list oicorr datablocks indexed dsinstr except correlation data array names assumed dsvis vector oivis datablocks dsvis vector oivis datablocks dst vector oit datablocks dsflux vector oiflux datablocks dsinspol vector oiinspol datablocks fields datasets considered private accessed directly using dot notation easy access datablocks containing measurements instance db ds vis convenient loop oivis instances stored ds contents datablocks contents datablock db accessed dot notation rule dbkey dbcol yield value keyword key contents column col oifits table corresponding datablock db follow julia conventions accommodate restrictions key col fits keyword column name converted lower letters alphanumeric letters replaced underscores instance dbdateobs yields value keyword dateobs utc start date observations revision corresponding keyword oirevn accessed dbrevn exception properties accessible via syntax dbextname yields oifits name extension corresponding datablock db datablock types dbarray yields oiarray datablock associated datablock db oivis oivis oit oiflux oiinspol datablock beware association oiarray optional dbarray actually undefined checked isdefineddbarray dbinstr yields oiwavelength datablock associated datablock db oivis oivis oit oiflux datablock dbcorrel yields oicorr datablock associated datablock db oivis oivis oit oiflux datablock alias dbarrname oiarray instances dbinsname oiwavelength instances dbcorrname oicorr instances course getting property sense example dbstaname oiarray datablock oiwavelength datablock dot notation chained db instr effwave access effective wavelengths measurements db via instrument associated db shortcuts provided db effwave effective wavelength db effband effective bandwidth oiwavelength datablocks oivis oivis oit oiflux datablocks fields datablock db undefined field defined datablock constructed field optional revision dbrevn datablock field example dbinstr oivis datablock involves links datablocks dependencies links defined datablock dataset building datasets oitarget datablocks efficiency instances oitarget datablocks follow rules types oifits datablocks properties columns corresponding oifits table oitarget instance parameters describing target repesented oitargetentry structure targets stored vector oitargetentry oitarget instance db following properties db extname yields oitarget db list yields vector oitargetentry instances db revn yields revision list targets dblist indexed integer julia vector target name letters trailing spaces irrelevant oitarget datablocks essentially vector target entries iterable indexed integer index target name length db targets shortcut lengthdblist db th target shortcut dblist dbkey target name matches string key shortcut dblistkey standard methods haskey applied dblist directly db expected according type integer string key keys method default return iterator target names type expected keys specified dbkeydef yields dbkey def key found keys db iterator target names keys string db idem keys integer db iterator target indices keys int db idem method oifitsgetcolumn helper recover single target field vector oifits getcolumn db col yields column col oifits datablock db column identified col sym valsym sym symbolic name corresponding field oitargetentry optional argument specify element type returned array build oitarget instance provide list targets revision oitarget lst oitargetentry revn yields oitarget datablock optional argument lst vector oitargetentry specifying targets none default keyword revn specifies revision target entry constructed specifying fields keywords category mandatory oitargetentry targetid integer target abstractstring raep abstractfloat decep abstractfloat equinox abstractfloat raerr abstractfloat decerr abstractfloat sysvel abstractfloat veltyp abstractstring veldef abstractstring pmra abstractfloat pmdec abstractfloat pmraerr abstractfloat pmdecerr abstractfloat parallax abstractfloat paraerr abstractfloat spectyp abstractstring category abstractstring specify target entry ref template unspecified keyword assume value ref oitargetentry ref targetid ref targetid target ref target note oitarget instance pushed dataset target identifiers field targetid automatically rewritten identical index list targets dataset building datasets pushing datablocks datasets reading oifits file easiest define dataset oifits dataset built creating empty dataset oidataset pushing oifits datablocks push indeed ensure consistency dataset required push dependencies oitarget oiarray oiwavelength oicorr datablocks datablocks containing measurements oivis oivis oit oiflux oiinspol refer example building dataset ds looks ds oidataset create empty dataset push ds arr push oiarray datablock push ds ins push oiwavelength datablock push ds cor push oicorr datablock push ds tgt push oitarget datablock push ds db push data push ds db push data push ds db push data dependencies arr oiarray instance defining interferometric array zero instances pushed ins oiwavelength instance defining instrument instances pushed cor oicoorrel instance defining correlations zero instances pushed tgt oitarget instance defining list observed targets instance required instances pushed dataset merged single db db db etc instances oivis oivis oit oiflux oiinspol provide measurements push datablocks single push call ds push oidataset arr ins cor tgt d db following shortcut implemented ds oidataset arr ins cor tgt d db equivalent multiline example remember pushing datablocks dependencies referenced required consistent dataset apart constraint dependencies pushed datablocks measurements datablocks measurements pushed dependencies benefit constraint pushing datablocks datablocks dependencies automatically linked dependencies pushed dataset implies dependencies exist dataset allows syntactic sugar ds vis effwave wavelengths th oivis datablock ds ds t array interferometric array th oit datablock ds ds vis instr instrument th oivis datablock ds linked dependencies example require dataset ds oiwavelength instance instr name matching dsviinsname extract field effwave instr latter step simple instreffwave former overheads scales oiwavelength instances dataset oifits dataset single list targets oitarget instance accessible via dstarget mean merge list targets defined adopted rule pretty simple targetid field datablock dataset corresponds index target entry list targets stored dataset consequence whenever datablock pushed dataset target identifiers datablock rewritten according rule course apply datablocks targetid field oiarray oiwavelength oicorr summarize happens hood datablock db pushed dataset ds oiarray oiwavelength oicorr instance db pushed dataset ds appended corresponding list dsarray dsinstr dscorrel unless list entry name matching latter unless assertion exception thrown datablocks names matching contents prevent building inconsistent datasets oitarget instance pushed dataset targets according names appended list targets dataset identifiers set index list reinitializes internal dictionary perform conversion target identifiers oitarget instance pushed target identifiers dataset reinitialized pushing oitarget instance mapping rewrite target identifiers subsequent datablocks pushed dataset oivis oivis oit oiflux oiinspol instance db pushed dataset ds appended corresponding list dsvis dsvis dbt dbflux dsinspol linked dependencies oiarray oiwavelength etc exist dataset target identifiers rewritten according mapping defined oitarget instance previously pushed dataset rewriting target identifiers avoided using keyword rewritetargetidfalse assumes target identifiers pushed datablock set according index list targets dstarget pushing datablock dataset check consistency datablock allow building datablocks step step consistent times pushed dataset pushing datablock dataset lefts datablock unchanged swallow copy added datablocks stored dataset pushed datablocks shared stored dataset notable exception target identifiers rewritten links dependencies updated sounds complicated default rule rewriting target identifiers amounts assuming target identifiers oivis oivis oit oiflux oiinspol instances pushed dataset refer oitarget instance previously pushed dataset pushing datablocks consistent dataset dataset easy typically push dependencies push ds grouparr push oiarray push ds groupins push oiins push ds groupcor push oicorr push ds grouptgt push oitarget reinitializing targetid mapping push data using current targetid mapping push ds groupdb push ds groupdb push dependencies push ds grouparr push oiarray push ds groupins push oiins push ds groupcor push oicorr push ds grouptgt push oitarget reinitializing targetid mapping push data using current targetid mapping push ds groupdb push ds groupdb referenced names push oiarray oiwavelength oicoorrel dependencies exist dataset according name hurt mandatory push oitarget instance targets identifiers assumed subsequent datablocks merging datasets oifits datasets consistently merged merge resulting dataset share contents affecting guaranteed remain unchanged pushing datablocks target identifiers targetid field rewritten result merging datasets assumes merged datasets consistent compatible compatible means targets dependencies matching names contents checked merge operation allowed merge datasets merge datasets ds merge ds ds ds merge ds ds dataset ds merge ds ds ds ds merge ds ds existing dataset ds note mergeds yields destination ds note merging internal dictionary rewriting target identifiers left mapping built targets merged dataset credits development package received funding european community seventh framework programme fp grant agreement opticon currently supported jeanmarie mariotti center jmmc references pauls cotton monnier data exchange standard optical visibleir interferometry publications astronomical society pacific vol pdf duvert hummel oifits nd version data exchange standard optical visibleir interferometry arxiv preprint arxivv