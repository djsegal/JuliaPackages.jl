juliapackagewithrustdepjl set examples embed rust library julia package interfacing julia rust library using rust ffi rust library exposed dynamic library julia call rust functions using ccall build script depsbuildjl cargo build rust library depsrustdylib julia bindings rust api implemented srcapijl file rust library build successful pkgbuild file depsdepsjl generated package init function call checkdeps check rust dynamic library callable follows convention binaryproviderjl requirements julia v rust stable installation julia using pkg julia pkg add julia pkg test juliapackagewithrustdep primitive type correspondences julia rust int i int i int i float f float f bool bool passing julia owned string rust julia string converted cstring passed rust receive pointer char function rustdylibinspectstring string ccall rustdylibinspectstring librustdylib cvoid cstring rust pointer thar const cchar converted cstr reference string cstr convert regular str std ffi cstr std os raw cchar nomangle pub extern fn rustdylibinspectstring cstring const cchar cstr unsafe cstr fromptr cstring match cstr tostr ok regular str println rust read err panic convert foreign cstring str returning rust owned string julia example rust generates owned string rustdylibgeneraterustownedstring ownership transfered julia process consumed julia process transfer ownership rust calling rustdylibfreerustownedstring memory freed std ffi cstring std os raw cchar nomangle pub extern fn rustdylibgeneraterustownedstring mut cchar ruststring string bomb cstring cstring ruststring unwrap cstring intoraw transfers ownership julia process nomangle pub unsafe extern fn rustdylibfreerustownedstring mut cchar isnull drop cstring fromraw retakes ownership cstring drop julia process pointer string copied string instance using unsafestring function julia rust free string function rustdylibfreerustownedstring cstring ccall rustdylibfreerustownedstring librustdylib cvoid cstring function rustdylibgeneraterustownedstring ccall rustdylibgeneraterustownedstring librustdylib cstring function readrustownedstring string cstring rustdylibgeneraterustownedstring result unsafestring cstring copies contents string rustdylibfreerustownedstring cstring rust free memory return result resources exposing rust library stdffi docs rust ffi guide rust ffi omnibus