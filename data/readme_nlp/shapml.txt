shapml purpos shapml comput stochast featur level shapley valu interpret assess fair machin learn model shapley valu intuit theoret sound model agnost diagnost tool understand global featur import instanc data set instanc row level local featur import black box machin learn model packag implement algorithm describ trumbelj kononenko sampl base shapley approxim algorithm comput stochast shapley valu instanc model featur flexibl shapley valu estim machin learn model use simpl user defin predict wrapper function speed speed advantag shapml come form give user abil select target featur avoid comput shapley valu model featur subset target featur train model return featur level shapley valu model featur especi use dimension model comput shapley valu exponenti featur instal use pkg pkg add shapml document vignett doc exampl random forest regress model parallel explain impact featur boston hous dataset predict outcom medv median valu owner occupi home use predict train random forest regress model stochast shapley valu explain subset instanc assess global featur import aggreg uniqu featur import instanc use shapml use rdataset use datafram use mlj machin learn use gadfli plot load data boston rdataset dataset mass boston train machin learn model current limit singl outcom regress binari classif outcom name medv data prep mlj unpack boston symbol outcom name colnam true instanti model choos singl outcom model packag random forest load randomforestregressor pkg decisiontre model mlj machin random forest train model fit model creat wrapper function take follow posit argument train model julia packag datafram model featur function return column datafram predict column name matter function predict function model data data pred datafram pred predict model data return data pred shapml setup explain copi boston comput shapley featur level predict instanc explain select explain symbol outcom name remov outcom column refer copi boston option refer popul comput baselin predict refer select refer symbol outcom name sampl size mont carlo sampl comput stochast shapley valu data shap shapml shap explain explain refer refer model model predict function predict function sampl size sampl size seed data shap allcol true creat plot summar shapley result random forest model plot eventu refin incorpor shapml global featur import shapley valu repres deviat averag baselin predict plot averag absolut valu featur sens magnitud affect model predict explain instanc data plot datafram data shap featur name mean effect shap effect mean ab shap effect data plot sort data plot mean effect rev true baselin round data shap intercept digit plot data plot featur name mean effect coord cartesian yflip true scale discret geom bar posit dodg orient horizont theme bar space guid xlabel shapley effect baselin baselin guid ylabel guid titl featur import mean absolut shapley valu global featur effect plot chang valu featur influenti featur overal affect model predict hold featur constant repres explain instanc black line loess line fit summar effect data plot data shap data shap featur name select featur eas plot baselin round data shap intercept digit layer data plot featur valu shap effect geom line layer data plot featur valu shap effect geom smooth method loess smooth style line width theme default color black plot line guid xlabel featur valu guid ylabel shapley effect baselin baselin guid titl featur effect data plot featur name random forest regress model parallel explain dataset model time comput shapley valu parallel core use built distribut comput shapml implement distribut pmap intern stochast shapley valu comput parallel core machin seed set parallel parallel comput return result use distribut addproc core block code load relev packag core packag swap use mlj begin use shapml use datafram use mlj use rdataset load data boston rdataset dataset mass boston train machin learn model current limit singl outcom regress binari classif outcom name medv data prep mlj unpack boston symbol outcom name colnam true instanti model choos singl outcom model packag random forest load randomforestregressor pkg decisiontre model mlj machin random forest train model fit model proper initi predict wrapper function creat wrapper function take follow posit argument train model julia packag datafram model featur function return column datafram predict column name matter function predict function model data data pred datafram pred predict model data return data pred notic set shapml shap parallel sampl perform comput parallel mont carlo sampl shapml setup explain copi boston comput shapley featur level predict instanc explain select explain symbol outcom name remov outcom column refer copi boston option refer popul comput baselin predict refer select refer symbol outcom name sampl size mont carlo sampl comput stochast shapley valu data shap shapml shap explain explain refer refer model model predict function predict function sampl size sampl size parallel sampl parallel comput sampl size seed data shap allcol true