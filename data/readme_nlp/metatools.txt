metatool metatool make simpler write julia macro function develop macro julia develop account form ast pass macro code complic obscur real logic macro design implement code harder understand maintain form ast test ad effort requir develop macro approach metatool take convert ast standard format object type parsedfunct object mutabl manipul final form convert ast use emit function metatool function pars emit ast thorough test test core function macro corner relat obscur ast tool describ write macro metatool includ handi macro implement use packag serv exampl packag use tool follow macro includ commut