preludedicts fundamental apis dictionaries sets primary function preludedictsjl modify flexible api base apis implemented based modify efficiently extensible lockfree dictionaries support api preludedictsjl functions tryset trysetwith tryget tryinsert using efficient debuggable error handling api tryjl documentation api reference tutorial modify modify dict key provides powerful api accessing manipulating value associated key takes singleargument function takes key exist keyvalue pair key value argument return delete value value insert value function return optimization deletedata delete value propagating data caller data change value propagating data caller example modify insert set value julia using preludedicts julia dict dict julia modify returns dict julia dict delete value julia dict dict julia modify returns dict julia haskey dict false access value julia dict dict julia getvalue julia modify getvalue dict julia modify getvalue dict true modify powerful operations dynamically controlled using function julia inc dict key modify dict key slot slot else slot julia dict dict julia inc dict julia inc dict julia dict dict true modify directly implemented dict julia versions efficient dictkey dict key requires hash function calls probings delete note modifygetvalue dict maximally efficient reinserts existing value micro optimization instead julia dict dict julia getvalue julia modify getvalue dict julia wrapped data julia modify getvalue dict true help implementing functions pop efficiently modify supports delete signals deletion data payload julia modify delete dict delete julia wrapped data julia haskey dict false trysetwith trysetwith dict key dict key returned value esncode value returned inserted julia dict dict julia trysetwith returns dict try err julia trysetwith returns dict try ok julia dict dict true tryset trysetdict key value dict key value returned value encodes value inserted julia dict dict julia tryset dict try err julia tryset dict try ok julia dict dict true tryget trygetdict key similar dictkey returned value encodes key exists instead throwing julia dict dict julia tryget dict try ok julia tryget dict try err typedkeyerror key found tryinsert tryinsertset pushset returned value encodes item inserted julia set set julia tryinsert set try err julia tryinsert set try ok julia set set true discussion benchmarks modify based implementations performance improvements benchmarks julia using preludedictsbenchmarks julia suite preludedictsbenchmarks setup julia results run suite element benchmarktools benchmarkgroup tags tryset element benchmarktools benchmarkgroup tags impltryset trial s impltrysetgeneric trial s increments element benchmarktools benchmarkgroup tags implmodify trial ms implmodifygeneric trial ms implementations impl generic suffix generic implementation written terms direct implementation modify touches dictionary internals benchmarkpreludedictsbenchmarks benchmark code deriving abstractdict api using modify various efficient abstractdict api implementations derived modify powerful api basis julia function getindex dict key modify dict key throw keyerror key return julia getindex dict julia setindex dict value key modify returns value dict key julia dict dict julia setindex dict julia dict julia function pop dict key pair modify delete dict key pair throw keyerror key return pair julia pop dict julia dict dict true julia function dict key modify dict key pair pair else pair return isa julia dict julia dict julia dict julia dict comparison tokenbased api dictionary interfaces explored dictionariesjl tokenbased api avoid repeatedly calling hash function probings languages similar mechanism example rust hashmap entry api achieves effect julia coroutine task token system isomorphic modify sense implemented terms importantly modify freedom dictionary implementer function passed user called example lockfree dictionaries called multiple times multiple tasks try update slot concurrently indeed concurrentcollections similar api manipulate concurrentdict todo preludedictsjl concurrentcollectionsjl token api terms modify using coroutine struct token specializing fields simplicity task task key unionpair function gettoken dict key parent currenttask task task begin modify dict key yieldto parent yieldto parent return token task key yieldto task function base getindex token token token throw keyerror token key return base setindex token token value yieldto token task value dict dict tk gettoken dict tk tk gettoken dict tk output