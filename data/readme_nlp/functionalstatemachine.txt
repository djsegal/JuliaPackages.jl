functionalstatemachin build machin julia base function step visual tool video anim exampl click vimeo imag link fsm generat video anim six concurr machin incrementalinfer instal option system depend visual tool requir system instal graphviz ubuntu debian linux equival sudo apt instal graphviz instal julia packag julia add packag julia pkg add functionalstatemachin exampl basic use functionalstatemachin user function function bar usrdata println bar return functionalstatemachin exitstatemachin function foo usrdata println foo return bar user data struct defin pass statemachin statemachin foo statemachin verbos true mayb limit step statemachin statemachin foo statemachin iterlimit watchdog timeout sometim use fsm process exit intend throw error timeout watchdog timer fsm base interruptexcept method stop task expir timeout real note function includ default preserv memori footprint timeout featur simpli call machin timeout durat userdata user data type timeout statemachin userdata timeout verbos true record verbos output file experi shown machin stuck use write verbos step file bare minimum guid system fail pass iostream handl verbosefid fid tmp verbosefsm log statemachin userdata verbos true verbosefid fid close fid particular structur chosen async multithread fsm write common fid allow user flush fid close fid regardless fsm stall boilerpl esqu easier develop snuff bug high complict interdepend multithread multi machin architectur user data histori pass data structur mutabl struct exampleuserdata vector float mayb record machin histori statemachin statemachin exampleuserdata foo eud exampleuserdata randn statemachin eud recordhistori true recov record transit histori vector tupl datetim int function hist statemachin histori mayb rerun step data time overwrit previous memori eud sandboxstatemachinestep hist draw pictur graphviz add graph depend instal use graph run machin statemachin statemachin exampleuserdata foo eud exampleuserdata randn statemachin eud recordhistori true draw machin hist statemachin histori drawstatemachinehistori hist true multipl machin visual use graph functionalstatemachin start multipl concurr fsms interdepend statemachin statemachin foo statemachin recordhistori true add histori hist dict follow ths exampl userdata type hist dict symbol vector tupl datetim int function statemachin histori generat imag video animatestatemachinehistoryintervalcompound hist interv convert imag video ffmpeg shell command fps run ffmpeg tmp caesar csmcompound csm png libtheora fps fps pix fmt yuv scale trunc trunc tmp caesar csmcompound ogv async run totem tmp caesar csmcompound ogv combin multipl concurr histori machin execut imag frame function detail lower level visual tool anim asyncron machin transit follow exampl function machin run asyncron synchron anim separ frame singl frame multipl inform use date docstringextens signatur draw imag tmp csm png repres time synchron machin event note histori previous record function animatestatemachin histori vector tupl frame int startt date stopt date start stop time cliqu true hist somestatemachin histori hist histori hist startt startt hist stopt hist stopt hist stopt hist export figur folder string count hist histori count retval animatestatemachinehistorybytim hist frame frame folder count titl count startt startt stopt stopt push folder count return folder anim time via png imag tmp animatecliqstatemachin hist hist frame exampl result imag hist hist machin histori note timestamp synchron anim imag concurr travers easili video openshot ffmpeg style tool previous linear time multi fsm anim close relat function animatestatemachinehistorybytim contribut contribut issu welcom