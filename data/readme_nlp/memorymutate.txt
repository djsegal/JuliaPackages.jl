memorymut warn proof conept note setfield packag macro mem provid multi level assign fieldoffset calcul memori offset assign field relat rightmost mutabl level pointer objref rightmost mutabl level add offset obtain pointer unsaf store write valu memori locat compil mov assembl instruct type symbol static determin approach replac immut mutabl modifi julep setfield mutabl refer immut https github com julialang julia issu propos setfield modifi field insid immut object wrap mutabl object support propos setfield function multi arg form follow behavior setfield valu mutat mutabl object chang valu field equival copi immut object updat referenc field syntax valid referenc field mutabl wip mutat immut easier https github com julialang julia pull propos oper immut hood creat immut object specifi field modifi assign appropri syntax wise left assign modifi justif approach reli immut alloc ref assum stay constant use unsaf store memori layout bitstyp exaclti achiev fieldoffset furthermor assign mov assembl instruct optim break use unsaf store conceptu optim mov instruct reason packag primarili interoper wrap librari julia repres struct julia type layout achiev nest struct nest immut julia type bitstyp precis top level julia type mutabl contain julia type immut bitstyp julia document write doesn support multipl return valu function pointer data function modifi consid follow function comput overlay space pixel coordin ray intersect overlay specifi set return fals intersect bool computeoverlayintersect uint uloverlayhandl const vroverlayintersectionparam pparam vroverlayintersectionresult presult presult hold pointer vroverlayintersectionresult struct defin follow enum etrackinguniverseorigin struct hmdvector float struct hmdvector float struct vroverlayintersectionparam hmdvector vsourc hmdvector vdirect etrackinguniverseorigin eorigin struct vroverlayintersectionresult hmdvector vpoint hmdvector vnormal hmdvector vuv float fdistanc provid layout compat julia struct const etrackinguniverseorigin uint sizeof etrackinguniverseorigin struct hmdvector sizeof hmdvector sarray tupl float struct hmdvector sizeof hmdvector sarray tupl float struct vroverlayintersectionparam sizeof vroverlayintersectionparam vsourc hmdvector vdirect hmdvector eorigin etrackinguniverseorigin struct vroverlayintersectionresult sizeof vroverlayintersectionresult vpoint hmdvector vnormal hmdvector vuv hmdvector fdistanc float ref vroverlayintersectionresult pass julia ccall function alter under immut mutat immut arbitrari style assum immut alloc heap via ref assum constant anymor julia modifi style modifi immut memori modul provid mem consid julia immut type pconst cconst struct pconst sizeof pconst float float struct cconst sizeof cconst float float float mutabl type vmutbl mutabl struct vmutbl sizeof vmutbl pconst cconst pconst pconst cconst cconst vmutbl vmutbl pconst cconst alter top level field pconst vmutbl pconst cconst nest one immut error setfield immut struct type pconst chang assum immut stay constant replac memori locat mem vmutbl pconst cconst current staticarray mutabl struct data sarray tupl float float float data mem data data cartesianindic data tupl mem data float float exampl extract test mutat ptr voidptr ptrtype macro determin memori address mem ptr return ptr type valu memori locat voidptr reinterpret ptr ptr ptrtype reinterpret ptr ptr use staticarray ref svector uint revers xde xad xbe xef xba xad unsaf load ptr xde unsaf load ptr xad unsaf load typedptr uint xbeefbaad exampl extract test mutat yolo experiment featur mem set refus write memori assert enabl yolo mutabl struct mutabl bitstyp float struct immmut bitstyp float mutabl struct mutabl bitstyp error setfield immut struct type chang float mem error type field type float locat type offset base type immut bitstyp bitstyp immut pointer objref won obtain memori locat yolo interpret insid pointer float yolo exampl suppos chang insid yolo type field type locat type offset bitstyp yolo pointer objref hand obtain pointer replac refer insid warn probabl produc memori leak final hand rhs immut isbitstyp pointer objref anymor yolo unsaf load reinterpret ptr ptr pointer objref ref rhs obtain pointer assign warn probabl produc memori leak exampl extract test mutat implement status implement featur written getfield consid getfield written dereferenc consid continu array index staticarray current getfield instead getproperti getproperti call oper similiar continu array index static array bug throw mem repl level produc methoderror convert object type string object type symbol credit andreasnoack instant advic save lot time pfitzseb elabor discuss intern slack channel approv