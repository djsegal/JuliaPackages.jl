memorymutate warning proof conept note setfieldjl package macro mem provided multi level assignments fieldoffset calculate memory offset assigned field relative rightmost mutable level pointerfromobjref rightmost mutable level adds offset obtained pointer unsafestore write value memory location compiles mov assembly instructions types symbols statically determinable approach replacing immutable mutable modified julep setfield mutable references immutables julialangjulia propose setfield modify fields inside immutable objects wrapped mutable objects support proposal setfield function multiarg form following behaviors setfield value mutates mutable object change value fields equivalent copying immutable objects updating referenced field tldr syntax valid referenced fields mutable wip mutating immutables easier julialangjulia proposes operator immutable hood creates immutable object specified field modified assigns appropriate syntax wise left assigned modified justifications approach relies immutables allocated ref assumed stay constant using unsafestore memory layout bitstypes exaclty achieve fieldoffset furthermore assignment mov assembly instructions optimizations break using unsafestore conceptually optimized mov instructions reason package primarily interoperability wrap libraries julia represent structs julia types layout achieved nested structs nested immutable julia types bitstypes precisely top level julia type mutable contained julia types immutable bitstypes julia documentation writes support multiple return values functions pointers data function modify consider following function computes overlayspace pixel coordinates ray intersects overlay specified settings returns false intersection bool computeoverlayintersection uintt uloverlayhandle const vroverlayintersectionparamst pparams vroverlayintersectionresultst presults presults hold pointer vroverlayintersectionresultst struct defined following enum etrackinguniverseorigin struct hmdvectort float struct hmdvectort float struct vroverlayintersectionparamst hmdvectort vsource hmdvectort vdirection etrackinguniverseorigin eorigin struct vroverlayintersectionresultst hmdvectort vpoint hmdvectort vnormal hmdvectort vuvs float fdistance provide layout compatible julia structs const etrackinguniverseorigin uint sizeofetrackinguniverseorigin struct hmdvectort sizeofhmdvectort sarraytuplefloat struct hmdvectort sizeofhmdvectort sarraytuplefloat struct vroverlayintersectionparamst sizeofvroverlayintersectionparamst vsource hmdvectort vdirection hmdvectort eorigin etrackinguniverseorigin struct vroverlayintersectionresultst sizeofvroverlayintersectionresultst vpoint hmdvectort vnormal hmdvectort vuvs hmdvectort fdistance float refvroverlayintersectionresultst passed julia ccall function alter underlying immutable mutate immutable arbitrary style assume immutables allocated heap via ref assumed constant anymore julia modify style modify immutables memory module provides mem consider julia immutable types pconst cconst struct pconst sizeofpconst float float struct cconst sizeofcconst float float float mutable type vmutbl mutable struct vmutbl sizeofvmutbl pconst cconst pconst f f pconstf f cconst f f f cconstf f f vmutbl vmutblpconstf f cconstf f f alter toplevel fields pconst f f vmutblpconstf f cconstf f f nested ones immutable f error setfield immutable struct type pconst change assume immutables stay constant replace memory location mem f vmutblpconstf f cconstf f f currently staticarrays mutable struct data sarraytuplefloat float float data mem data f data cartesianindices data tuple mem data float float examples extracted testmutatejl ptr voidptr ptrtyped macros determine memory address mem ptr returns ptr type value memory location voidptr reinterprets ptr ptr ptrtyped reinterprets ptr ptr using staticarrays ref svector uint reverse xde xad xbe xef xba xad xf xd unsafeload ptr xde unsafeload ptr xad unsafeload typedptr uint xbeefbaad examples extracted testmutatejl yolo experimental feature mem set refuse writing memory assertions enabled yolo mutable struct mutable bitstype float struct immmutable bitstype float mutable struct mutable bitstype f f f error setfield immutable struct type changed float mem f error type field type float located type offset base type immutable bitstype bitstype immutable pointerfromobjref obtain memory location yolo interprets inside pointer float yolo f example suppose change inside yolo f type field type located type offset bitstype yolo pointerfromobjref hand obtain pointer replace reference inside warning probably produces memory leaks finally hand rhs immutable isbitstype pointerfromobjref anymore yolo unsafeloadreinterpretptrptrpointerfromobjrefrefrhs obtain pointer assigned warning probably produces memory leaks examples extracted testmutatejl implementation status implemented features written getfield considered getfield written dereferencing considered continuous array indexing staticarrays currently getfield instead getproperty getproperty called operations similiar continuous array indexing static arrays bugs throwing mem repllevel produces methoderror convert object type string object type symbol credits andreasnoack instant advice saving lot time pfitzseb elaborate discussion internals slack channel approv