lengthchannelsjl package defines type lengthchannel abstractchannel simply adds information length channel iterated constructor behaves constructor channel takes additional integer specifying length length confused buffer size channel lengthchannel iterated continues iterated specified elements channel automatically closed keyword autoclose elements channel examples using lengthchannels test lenbufsize lc lengthchannel int len bufsize ch ch test length lc len cc collect lc test length cc len test cc test isopen lc constructor lengthchannel takes keyword argument autoclosefalse default determines channel closes automatically iterated specified length useful iterate specified length times performing epochs training channel populated using true pattern buffered iterator machine learning typical channel length buffered dataset training machine learning models following example reads audio data disk light preprocessing putting channel using lengthchannels flux random files readdir pathtodatafiles buffersize dataset lengthchannel vectorfloat length files buffersize spawn true ch true file shuffle files data readfromdisk file data preprocess data ch data true pattern useful able iterate channel times time channel iterated produce lengthfiles values iterated recreating channel true loop omitted channel closed iteration batch iterator suitable training cnn models flux obtained batchsize buffersize files readdir pathtodatafiles dataset lengthchannel arrayfloat length files batchsize buffersize spawn true ch batch array float undefheightwidthnchannelsbatchsize batches dim bi batch index true file shuffle files data readfromdisk file batchbi data bi bi batchsize bi ch copy batch heightwidthnchannels integers specifying size data putting data gpu data gpu thread main thread hence spawnfalse required channel putting data gpu allow reading preprocessing separate thread performant provide wrapper constructor lengthchannel datasetlengthchannel returns lengthchannel applied element dataset omitted wrapping channel assumed eltypedataset typeofeltypedataset words method returning type resulting applying element wrapped channel cu gpu data gpu efficient training models gpu reading data separate thread primitive benchmarking performance improvement using strategy putting data gpu dataset cugpu threadsafe improvement larger note entire dataset fit onto gpu run memory performing backpropagation fastest method data gpu entire training try simply gpucollectdataset collectdataset channel data gpu function fullsizeofdatasetlengthchannel tell size bytes required collect dataset