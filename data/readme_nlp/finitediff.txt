finitediff package calculating derivatives gradients jacobians hessians etc numerically library maximizing speed giving usable interface users specializes array types sparsity included allocating mutable forms fast array support mutating forms static array support coloring vectors efficient calculation sparse jacobians gpucompatible extent finite differencing fastest versions create cache repeatedly call differencing functions values functions quick dirty numerical answer directly call differencing function analogous sparse differentiation automatic differentiation sparsedifftoolsjl finitediffjl vs finitedifferencesjl finitediffjl finitedifferencesjl similar libraries calculate approximate derivatives numerically definitely legacy calculusjl finite differencing reimplementing future merge depend differences finitedifferencesjl supports basically type finitediffjl supports arrayish types finitedifferencesjl supports approximation finitediffjl carefully optimized minimize allocations finitediffjl supports coloring vectors efficient calculation sparse jacobians tutorials tutorial fast dense jacobians fun start tutorial jumping details suppose functions using finitediff staticarrays fcalls function dx global fcalls length dx dx dx const handleleft zero eltype handleright length zero eltype function global fcalls svector handleleft handleright calculate derivatives simplest jacobian allocate result allocating function finitedifferencejacobian argument function svector rand finitediff finitedifferencejacobian sarraytuplefloat indices sonetosoneto finitediffjl assumes re smart cookie function ll mutate vectors compatible objects staticarrays fast jacobian mutation function call mutating form rand output zeros finitediff finitedifferencejacobian output output arrayfloat completely allocating mutating form preallocate cache cache finitediff jacobiancache using cache avoids allocating time finitediff finitedifferencejacobian outputcache allocations bytes pretty gradients hessians similarly index avoids allocations re fast gpus etc tutorial fast sparse jacobians exploit sparsity sparsity pattern write analytically sparse matrix assume sparsitydetectionjl automatically sparsity pattern jacobian sparse matrix using sparsitydetection sparsearrays rand similar sparsitypattern sparsity sparsejac float sparse sparsitypattern sparsedifftoolsjl color vector using sparsedifftools colors matrixcolors sparsejac sparse differentiation passing color vector sparsity pattern sparsecache finitediff jacobiancache colorvec colorssparsity sparsejac finitediff finitedifferencejacobian sparsejacsparsecache note evaluations fill jacobian maximumcolors default colorslength function calls sparser matrix gain measure fcalls finitediff finitedifferencejacobian outputcache fcalls fcalls finitediff finitedifferencejacobian sparsejacsparsecache fcalls tutorial fast tridiagonal jacobians handling dense matrices easy handling sparse matrices cool stuff automatically specializing exact structure matrix finitediff specialize types implement arrayinterfacecorejl interface includes diagonal bidiagonal uppertriangular lowertriangular tridiagonal symtridiagonal bandedmatricesjl blockbandedmatricesjl previous example tridiagonal jacobian using arrayinterfacecore linearalgebra tridiagjac tridiagonal output colors matrixcolors jac analytical solution optimal matrix colors structured jacobian differencing routines tridiagcache finitediff jacobiancache colorvec colorssparsity tridiagjac finitediff finitedifferencejacobian tridiagjactridiagcache ll special iteration scheme dependent matrix type accelerate beyond sparse usage tutorial fast block banded matrices showcase difficult example system partial differential equations function function pde reshape reshape max min size max min size return vec rand sparsity pattern blockbandedmatrix specialize jacobian calculation using fillarrays blockbandedmatrices jbbb bandedblockbandedmatrix ones fill fill colorsbbb arrayinterfacecore matrixcolors jbbb bbbcache finitediff jacobiancache colorvec colorsbbbsparsity jbbb finitediff finitedifferencejacobian jbbb pde bbbcache boom fast jacobian filling algorithm special matrix structure structure library follows call differencing functions directly allocate temporary cache solve allocating repeat calls call cache construction functions cache construction function possibilities version prototype arrays generates cache variables allocating version cache variables summarized quick derivative calculating call differencing function calculate derivative multiple times cache arrays allocating cache pass differencing function allocate cache construction cache variables algorithm re differencing functions allocating cache construction pass cache differencing function definitions functions inplace form dx form dx colorvec vectors colorvec vectors allowed supplied jacobian routines directional derivatives constructing jacobian example accurate nxn tridiagonal jacobian computed calls using colorvecrepeat information automatically generating colorvec vectors sparse matrices sparsedifftoolsjl hessian coloring support coming soon scalar derivatives finitediff finitedifferencederivative fdtype typet val central returntype typet eltype fx union multi derivatives differencing calls cache allocating fx epsilon supplied fx finitediff finitedifferencederivative abstractarray fdtype typet val central returntype typet eltype return type fx unionabstractarray epsilon unionabstractarrayreal epsilonfactor finitediff finitedifferencederivative df abstractarray abstractarray fdtype typet val central returntype typet eltype fx unionabstractarray epsilon unionabstractarrayreal epsilonfactor cached finitediff finitedifferencederivative df abstractarray abstractarray cache derivativecachettfdtypereturntype epsilonfactor allocating allocating constructor finitediff derivativecache abstractarray fx unionabstractarray epsilon unionabstractarrayreal fdtype typet val central returntype typet eltype allocates fx epsilon fx current call required forwarddifferencing otherwise gradients gradients vectorscalar map scalarvector map fx inplacevaltrue fx inplacevalfalse differencing calls cache finitediff finitedifferencegradient fdtype typet val central returntype typet eltype inplace typevalt val true epsilonfactor finitediff finitedifferencegradient df fdtype typet val central returntype typet eltype df inplace typevalt val true epsilonfactor cached finitediff finitedifferencegradient df abstractarray abstractarray cache gradientcache epsilonfactor allocating cache constructor finitediff gradientcache df unionabstractarray union abstractarray fdtype typet val central returntype typet eltype df inplace typevalt val true allocating cache constructor finitediff gradientcache fx unionabstractarray c unionabstractarray c unionabstractarray c unionabstractarray fdtype typet val central returntype typet eltype fx inplace typevalt val true note fx cached function call provide fx fx forward differencing method skip function call update cachefx time calling finitedifffinitedifferencegradient fx immutable scalar staticarray cachefx updated using set setfieldjl cache array output fx alias differencing algorithm jacobians jacobians functions fx using finitedifferencejacobian fx using finitedifferencejacobian jacobian return similar type jacprototype square jacobians cache specifies vector fx required sparse differentiation pass colorvec matrix colors sparsity sparse structured matrix tridiagonal banded etc according arrayinterfacecorejl specs allow decompression otherwise result colorvec compressed jacobian differencing calls cache finitediff finitedifferencejacobian abstractarray fdtype typet val central returntype typet eltype relstep defaultrelstep fdtype eltype absstep relstep colorvec length sparsity jacprototype finitedifferencejacobian abstractmatrix abstractarray fdtype typet val forward returntype typet eltype fin uniont relstep defaultrelstep fdtype eltype absstep relstep colorvec length sparsity arrayinterfacecore hassparsestruct cached finitediff finitedifferencejacobian cache jacobiancache relstep defaultrelstep fdtype eltype absstep relstep colorvec cache colorvec sparsity cache sparsity jacprototype finitediff finitedifferencejacobian abstractmatrix abstractarray cache jacobiancache relstep defaultrelstep fdtype eltype absstep relstep colorvec cache colorvec sparsity cache sparsity allocating cache constructor finitediff jacobiancache fdtype typet val central returntype typet eltype colorvec length sparsity assumes jacobian square allocating cache constructor finitediff jacobiancache x fx fx fdtype typet val central returntype typet eltype fx colorvec length x sparsity hessians hessians functions return scalar differencing calls cacheless finitedifferencehessian abstractarray fdtype typet val hcentral inplace typevalt isa staticarray val true val false relstep defaultrelstep fdtype eltype absstep relstep finitedifferencehessian abstractmatrix abstractarray fdtype typet val hcentral inplace typevalt isa staticarray val true val false relstep defaultrelstep fdtype eltype absstep relstep cached finitedifferencehessian cache hessiancachefdtypeinplace relstep defaultrelstep fdtype eltype absstep relstep finitedifferencehessian cache hessiancachefdtypeinplace relstep defaultrelstep fdtype eltype absstep relstep allocating cache calls hessiancache fdtype typet val hcentral inplace typevalt isa staticarray val true val false allocating cache calls hessiancache xppxpmxmpxmm fdtype typet val hcentral inplace typevalt isa staticarray val true val fals