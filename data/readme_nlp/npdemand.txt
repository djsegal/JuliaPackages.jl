npdemand packag design data market potenti product product market select subgroup product substitut strongest estim structur demand curv nonparametr subgroup current handl subgroup fewer product price observ product characterist fair complic quick curs dimension pleas suggest packag instal packag isn regist instal pkg add https github com jamesbrandecon npdemand usag function includ invers demand price elast hiernet hiernet boot invers demand datafram take input datafram column share sharesj price pricesj demand instrument demand instrumentsj product estim invers demand function separ invers demand function approxim bernstein polynomi user chosen option demonstr exampl price elast inv sigma includ take inv sigma output invers demand return estim cross price elast accord matrix includ specifi product substitut calcul pre specifi vector price user chosen realiz price data former requir solv counterfactu market share set option true fals get sens shape demand curv latter exampl calcul markup tradit model static price industri organ hiernet hiernet boot function model select input datafram run constrain lasso regress detail draft come soon select subset product strong substitut hiernet boot run procedur multipl time bootstrap sampl take intersect select substitut bootstrap take includ extran substitut exampl option help addit function simul logit allow easili simul data logit demand system endogen price instrument price test npdemand function run short exampl includ exampl file exampl demonstr function provid descript relev input model select detail model select follow modifi version bien current simpli regress product share demand instrument chang stage random forest list packag run hierarch lasso regress price predict share weak strong hierarchi impos regress approxim product price interact quadrat function market share defin product substitut linear coeffici share zero strong hierarchi impos natur quadrat term interact involv share nonzero linear term nonzero weak hierarchi impos interact term nonzero linear term zero definit substitut implicit treat mistaken strong hierarchi suit task hand time consum yield similar select model simul minim exampl model select describ begin datafram take follow form julia datafram row share price demand instrument share price demand instrument float float float float float float model select demonstr approach regardless select model requir call hiernet hiernet boot latter take extra option nboot control bootstrap sampl select procedur perform includ includ symmetr hiernet boot nfold nlam strong fals nboot includ includ symmetr hiernet nfold nlam strong fals matrix includ matrix one zero indic product close substitut includ symmetr similar matrix enforc substitut substitut estim demand calcul price elasticit inv sigma design invers demand includ includ symmetr elast jacobian share vec price elast inv sigma whichproduct includ includ symmetr true true whichproduct indic elast includ elast demand product respect price true true indic elast evalu realiz market share price call python research wish call packag direct python code easiest jupyt notebook ipython run command load ext julia magic call julia assum instal prefac line julia juliacal packag addit document hiernet boot price elast option option stage predict hiernet random forest convert compiani code julia add exchang option constraint