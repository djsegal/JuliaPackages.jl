adversarialpredictionjl package provides easily optimize generic performance metrics supervised learning settings using adversarial prediction framework method integrated easily differentiable learning pipelines package julia implementation aistats paper apperf incorporating generic performance metrics differentiable learning rizal fathony zico kolter python implementation framework please check apperf overview adversarialpredictionjl enables easy integration generic performance metrics including decomposable metrics differentiable learning pipeline currently supports performance metrics defined binary classification code example incorporating score metric convolutional neural network training pipeline fluxml using flux using adversarialprediction import adversarialprediction define constraint model chain conv relu maxpool conv relu maxpool reshape size dense dense vec metric fbeta beta function define typefbeta confusionmatrix beta return beta tp beta ap pp fscore fbeta specialcasepositive fscore objective apobjective model fscore flux train objective params model trainset adam e code write function calculates score entities confusion matrix incorporate learning pipeline using apobjective function straightforward modification standard cross entropy training using apobjective function replace logitbinarycrossentropy objective using flux model chain conv relu maxpool conv relu maxpool reshape size dense dense vec objective mean logitbinarycrossentropy model flux train objective params model trainset adam e note equation beta installation adversarialpredictionjl installed julia terminal add adversarialprediction prerequisite packages installed automatically zygote flux automatic differential engine requires lbfgsb please install flux separately gpu training cuarrays package installed performance metrics tasks machine learning require metrics align tasks binary classification commonly performance metrics derived confusion matrix confusion matrix table reports values relate prediction classifier ground truth labels table anatomy confusion matrix metrics decomposable means broken independent sum metric depends single sample performance metrics decomposable consider samples wide variety decomposable performance metrics example adversarialpredictionjl supports family performance metrics expressed sum fractions constants whereas functions pp ap hence numerator linear function true positive tp true negative tn depends sum statistics predicted actual positive pp ap negative counterparts predicted actual negative pn data note pn derived form pp ap constant pn pp ap denominator depends sum statistics pp ap pn construction performance metrics covers vast range commonly metrics including metrics table defining performance metrics performance metric defined adversarialpredictionjl using macro metric metricname write definition metric implementing function depends type metric confusion matrix definetypemetricname confusionmatrix example score metric definition metric fscore function define typefscore confusionmatrix return tp ap pp performance metrics precision recall score sensitivity specificity enforce special avoid division zero metrics contain true positive special usually defined prediction true label sample zero metric usually defined prediction true label zero otherwise metric metrics contain true negative similar occur prediction true label sample instantiating metric account special example score fscore fscore specialcasepositive fscore performance metrics define parametric metric example beta score depends value beta write macro arguments example metric metricname arg arg adjust function definition definetypemetricname confusionmatrix arg arg beta score metric code metric fbeta beta function define typefbeta confusionmatrix beta return beta tp beta ap pp fscore fbeta specialcasepositive fscore fscore fbeta specialcasepositive fscore define arbitrary complex performance metrics inside define function follows construction metrics package support intermediate variables store partial expression metric code example cohen kappa score metric kappa function define typekappa confusionmatrix pe ap pp pn num tp tn pe den pe return num den kappa kappa specialcasepositive kappa specialcasenegative kappa performance metric constraints machine learning settings optimize performance metric subject constraints metrics occurs tradeoffs performance metrics example machine learning system optimize precision prediction subject recall threshold define constraints metric implementing function constrainttypemetricname confusionmatrix code format constraints metric th th realvalued threshold example precision recall metric metric precisiongvrecall th function define typeprecisiongvrecall confusionmatrix th return tp pp function constraint typeprecisiongvrecall confusionmatrix th return tp ap th precisiongvrecall precisiongvrecall specialcasepositive precisiongvrecall csspecialcasepositive precisiongvrecall true precisiongvrecall precisiongvrecall specialcasepositive precisiongvrecall csspecialcasepositive precisiongvrecall true note function specialcasepositive enforces special precision metric whereas csspecialcasepositive enforces special metric constraint recall metric metrics constraints example precision recall th specificity th metric precisiongvrecallspecificity th th function define typeprecisiongvrecallspecificity confusionmatrix th th return tp pp function constraint typeprecisiongvrecallspecificity confusionmatrix th th return tp ap th tn th precisiongvrecallspec precisiongvrecallspecificity specialcasepositive precisiongvrecallspec csspecialcasepositive precisiongvrecallspec true false csspecialcasenegative precisiongvrecallspec false true provide array boolean function csspecialcasepositive csspecialcasenegative computing values metric prediction sample yhat true label call function computemetric compute value metric yhat vectors containing julia computemetric fscore yhat f metric constraints call function computeconstraints compute value metric constraints example julia computeconstraints precisiongvrecallspec yhat element arrayfloat incorporating metric differentiable learning pipeline code example function apobjective incorporate metrics define differentiable learning pipeline function provides objective gradient information adversarial prediction formulation propagated previous layers serves replacement standard loss function binary crossentropy loss objective mean logitbinarycrossentropy model flux train objective params model trainset adam e easily replace existing codes binary crossentropy simply change objective apobjective objective apobjective model fscore flux train objective params model trainset adam e customizing inner optimization solver solving inner optimization adversarialpredictionjl admm based formulation default setting run iterations admm optimization manually set iteration using maxiter argument apobjective objective apobjective model fscore iterations objective apobjective model maxiter iterations objective apobjective model maxiter iterations running time batch size adversarial prediction formulation inside function apobjective solve maximin quadratic size variables using admm solver complexity solving samples minibatch practice batch size admm solver takes milliseconds solve pc intel core i processor reduce admm iterations iterations milliseconds commonly metrics package provides definitions commonly metrics including fscore fscore gpr mcc kappa etc load metrics current julia environment please adversarialpredictioncommonmetrics please check detailed definition metrics srccommonmetricscommonmetricsjl using adversarialprediction using adversarialprediction commonmetrics fscore kappa objective apobjective model kappa code examples examples please visit apexamples repository project contains examples using adversarialpredictionjl classification tabular datasets image classification mnist fashionmnist datasets python implementation interface provides python implementation framework apperf enables easy integration python codes pytorch deep learning framework provide python interface adversarialpredictionjl via pyjulia library apperfpy citation please cite following paper adversarialpredictionjl research articleapperf titleapperf incorporating generic performance metrics differentiable learning authorfathony rizal kolter zico journalarxiv preprint arxiv acknowledgements project supported grant bosch center artificial intelligence project previous foundational research adversarial prediction prof brian ziebart prof xinhua zhang research university illinois chicago