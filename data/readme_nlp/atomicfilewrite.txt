atomicfilewritejl write file atomically tiny package provides single funtion atomicwrite path backup overwritebackupfalse atomically write file applied iostream temporary file moved path writing committed path completed error otherwise file path left untouched backup keyword specify backup filename contain original contents path completed successfully support appending overwriting threadsafe backup keyword backup created copying intended atomic run single thread example using atomicfilewrite filename tmptxt io print io original contents filename try atomicwrite filename io print io error oops print io contents catch showerror stderr catchbacktrace original contents intact error assert read filename string original contents backup filename bak atomicwrite io print io contents filename backup backup overwritebackup true assert read filename string contents assert read backup string original cont