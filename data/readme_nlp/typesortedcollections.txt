typesortedcollections typesortedcollections provides typesortedcollection type store typeheterogeneous data allows operations data performed typestable manner sorting typeheterogeneous input collection type construction storing elements tuple concretely typed vector type typesortedcollections provides type stable methods map foreach broadcast mapreduce typesortedcollection example julia using typesortedcollections julia int float generic function methods julia float float round int generic function methods julia xs julia sortedxs typesortedcollection xs julia ys julia results vector int length xs julia map results sortedxs ys element arrayint julia allocated map results sortedxs ys typesortedcollection appropriate types heterogeneous collection elements collection types approximately elements plain tuple choice note construction typesortedcollection course type stable intended usage construct typesortedcollection tight loops functionwrappersjl solution related storing calling multiple callables typestable manner unrolledjl macrobased solution iteration default typesortedcollection preserve iteration sense elements processed map foreach broadcast mapreduce functions called original typeheterogeneous vector julia xs julia sortedxs typesortedcollection xs julia foreach println sortedxs desired typesortedcollection preserve iteration constructed passing additional constructor argument julia xs julia sortedxs typesortedcollection xs true julia foreach println sortedxs cost preserving iteration vector stored typesortedcollection equal contiguous subsequences input collection type opposed simply types input collection note calls map foreach typesortedcollection abstractvector arguments correctly indexed regardless iteration preserved julia xs julia sortedxs typesortedcollection xs preserve iteration julia results similar xs julia map identity results sortedxs results applying identity location element array multiple typesortedcollections consider following example julia xs float julia ys julia results vector float length xs julia sortedxs typesortedcollection xs julia sortedys typesortedcollection ys julia map results sortedxs sortedys error error happens xs ys element types solved aligning indices sortedys sortedxs julia sortedys typesortedcollection ys typesortedcollections indices sortedxs julia map results sortedxs sortedys element arrayfloat broadcasting broadcasting implemented abstractvector return types julia julia ys julia sortedys typesortedcollection ys julia results similar ys float julia results sortedys element arrayfloat julia allocated results sortedi