pretend pretend test doubl librari main idea annot function mockabl easili stub call function patch usag follow exampl demonstr basic usag pretend framework pretend activ pretend framework annot function mockabl macro mockabl add appli patch appli add test add appli patch condit appli add fallback test add test add verif mockabl foo bar mockabl bar spi foo test call exact bar mock thirdparti method mockabl base sin real fakesin real appli sin fakesin test sin mock anonym function add curri add mock add curri function macro appli add test add design note mockabl macro rewrit method definit wrap logic switch pretend activ return true logic basic look patch patch store method signatur patch found call patch found patch return fallback singleton object exist method bodi execut appli function set patch store user suppli patch function run bodi exit current scope patch store unwound previous henc patch appli ensur clean slate whenev patch appli appli spi function track execut mockabl function differ appli expect set patch spi patch mock third parti method mockabl macro function definit littl tricki mock third parti function overcom issu defin function packag deleg call third parti function annot function mockabl conveni mockabl front third parti method signatur expand deleg function function name mock anonym function function class julia function creat time fli common usag function closur consid follow function add curri easi annot add curri mockabl don mock add curri function return add add curri mock add mock function follow add mock add curri relat project mock librari avail pretend fit look altern mock design mock annot call site function definit simplemock cool packag implement mock use cassett machineri