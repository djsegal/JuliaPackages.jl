fixtures fixturesjl provides fixtures mocks matchers patching improve test life julia requirement version metatools run pkgaddmetatools pkgcheckoutmetatools introduction fixtures julia according software testing test fixture fixed software test baseline running tests test context refer actions performed bring system examples fixtures loading database specific set data erasing hard disk installing clean operating system installation copying specific set files preparation input data setcreation fake mock objects practically test fixture composed setup steps run test corresponding teardown step performed afterwards expressed nicely julia using syntax function function examplefixturefnfunction setup code goes try return fn finally teardown code goes write tests examplefixture test code goes handy functions form wish test fixtures defined julia standard library example fixture macro defining fixture involve amount boilerplate code fixturesjl provides fixture macro streamline fixture writing julia example written using fixture using fixtures fixture function examplefixture setup code goes yieldfixture teardown code goes calling code remains unchanged examplefixture test code goes fixture arguments return values common fixtures arguments example fixture function greetingsstring printlnhello yieldfixture println bye greetingsbob printlntest code produce output hello bob test code bye bob fixture supports argument types including default arguments keyword arguments varargs common fixtures produce value tests example database fixture setup test database pass connection object tests easily calling yieldfixture values returned test code example fixture function greetingsstring printlnhello yieldfixturesecret message println bye greetingsbob message printlnmessage produce output hello bob secret message bob bye bob pass values test code keyword arguments supported blocks fixture reuse resuse fixture times example setup teardown code run database test using fixturesjl add fixtures named scope repeatedly named scope fixture function testdb setup database yieldfixture teardown database addfixturedatabasetests testdb applyfixturesdatabasetests test database applyfixturesdatabasetests test database define multiple fixtures named scope fixture function fixture fixture function fixture fixture function fixture addfixturemyscope fixture addfixturemyscope fixture addfixturemyscope fixture nest scopes fixture added nested scope removed parent scope example clearer function demofnfunction println try return fn finally println function fnfunction printlnavant try return fn finally printlnaprs addfixturechildscope demo applyfixturesparentscope addfixturechildscope applyfixtureschildscope printlnhello world applyfixtureschildscope printlnbonjour tout le monde output avant hello world aprs bonjour tout le monde add fixtures arguments specifying arguments call addfixture addfixturesomescope greetings bob positional default vararg keyword arguments supported capture values produced fixture name addfixturesomescope greetbob greetings bob setting fixturevaluestrue calling applyfixtures makes fixture outputs available test code via dict passed indexed fixture name applyfixturessomescope fixturevaluestrue values printlnvaluesgreetbob output hello bob secret message bob bye bob simple fixtures fixturesjl handy addsimplefixture method define setup teardown functions separately function addfixturescopesymbol function function factcheckjl support users factcheckjl methods provided simple fixturesjl example using packages using factcheck using fixtures addfixture demo addfixturecontext factcheck support tests usingfixtures contextexample fixtures set context level usingfixtures features listed sections available using factcheckjl file fixtures fixturesjl comes fixtures using files tests tempfilenameextensionfilename extensioncreatetrue false string content tempfilemodefile mode default extensionfilename extensioncontentstring content tempdir cleanuppathpath ignoremissingtruefalse patching common type fixture patch function method value module object unit testing isolate function test rest system fixturesjl provides patch fixture example test function function firstlinefilename filename try return chompreadlines finally close isolate real filesystem patching base implementation duration test function fakeopenfilename return iobufferhello juliangoodbye julia patchbase fakeopen testtest firstlinefoobartxt hello julia patch addfixture applyfixtures addfixturemockio patch base fakeopen applyfixturesmockio testtest firstlinefoobartxt hello julia multiple patches passed array function firstlinefilename foo filename bar closefilename return foo bar function fakeopenfilename return hello function fakeclosefilename return world patchers patcherbase fakeopen patcherbase close fakeclose patchpatchers testtest firstlinefoobartxt hello world note due current issue julia ability patch function limited code calling function called mocks fixturesjl provides mocks patch mock allows verify called function firstlinefilename filename try return chompreadlines finally close mockopen mockreturnvalueiobufferhello juliangoodbye julia patchbase mockopen testtest firstlinefoobartxt hello julia testtest callsmockopen callfoobartxt mocks generated functions record arguments everytime called access call history using callsmock shown resetmock creating mock optionally specify return value implementation mock mock mockreturnvalue testtest mock mock mocksideeffect testtest mock mock mock testtest mock call function makes easy express test expected calls mock ignore argument using mock mock mockrand testtest callsmock call matchers example matcher wildcard verifying mock calls fixturesjl provides following matchers define anythingoftypetype anythinginvalue anythingcontainingvalue bit stricter previous example mock mock mockrand testtest callsmock callanythingoftype code coverage code coverage saying code red test ran putting break untested lines code coverag