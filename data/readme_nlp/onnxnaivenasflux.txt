onnxnaivenasflux onnx import export flux models imported naivenasflux graphs meaning removinginserting layers pruning pretrained models breeze model export require model particular format julia function exported primitives recognized onnxnaivenasflux basic usage add onnxnaivenasflux exporting using save function accepts filename string io argument save model modelonnx inputshapes tuples sizes input save modelonnx model inputshapes load model compgraph graph load modelonnx inputshapes input shapes omitted attempt infer shapes supplied tuple size dimensions corresponding input julia model including batch dimension expected example model expects array size s s s s s s inputshapes save load elements input shape tuples following types integer size corresponding dimension missing shape info recorded dimension symbol provided symbol variable name exported onnx model names attached inputs providing pair element name string example imageinput missing note integer input sizes ignored loading model elaborate example model defined plain julia function using onnxnaivenasflux test statistics l conv relu l dense elu function l homebrewed global average pool dropdims mean dims dims l return serialize string save file instead io pipebuffer xshape batch yshape batch save io xshape yshape deserialize naivenasflux compgraph load io ones float ones float test serialization compgraphs require input shapes provided inferred io pipebuffer save io load io test supported operations add averagepool batchnormalization concat constant conv div dropout elu flatten gemm globalaveragepool globalmaxpool lstm matmul maxpool mul rnn reducemean relu reshape selu sigmoid softmax squeeze tanh adding operations list supported operations currently meager relatively straightforward add support serialization lightweight graph tracing mechanism abstractprobe sent function collect onnx operations encounter map function myfunargssometype onnx operation defines method myfunargsabstractprobe adds onnx information inputs matter returns abstractprobe information function function typically looks import onnxnaivenasflux abstractprobe recursename nextname newfrom add name function myfun probes abstractprobe probes select probe optype myoptype naming strategy avoid duplicate names provided probe strictly onnx model basically corrupt duplicates exist nodename recursename optype nextname add onnx node info add onnx nodeproto names input provided probes probes provided output input collect name probes name output node output nodename optype optype probes procreate return newfrom nodename serializejl existing operations deserialization simply mapping operation types functions dictionary allows easy extension overwriting existing mappings implementations import onnxnaivenasflux actfuns inputs output node graph provided method call actfuns someop params params contains dict attributes actfuns anotherop function params params alpha return onnxnaivenasflux refresh note addingchanging operation mapping call onnxnaivenasfluxrefresh effect opsjl existing operations contributing contributions welcome please file issue creating pr