functor functor provid mechan design pattern deal structur contain numer paramet machin learn optimis model cumbersom ineffici paramet flat vector struct help manag complex easili oper paramet chang precis appli optimis updat step functor provid fmap easi act map paramet julia use functor julia struct foo julia functor foo julia model foo foo julia fmap float model foo deepli nest model julia struct bar julia functor bar julia model bar foo bar foo julia fmap float model bar foo workhors fmap actual lower level function functor julia functor foo var julia map float foo functor return object inspect function take valu restructur object origin type includ field pass tupl field name functor julia struct baz julia functor baz julia model baz baz julia fmap float model baz field list return functor pass reconstruct invok default constructor struct defin custom inner constructor expect provid act default implement functor hand flexibl requir exampl discuss regard cach implement fmap exclud fine grain control fmap descend particular valu default exclud functor isleaf julia use cuda julia julia fmap element array char ascii unicod categori letter lowercas ascii unicod categori letter lowercas ascii unicod categori letter lowercas julia fmap exclud cuda isbitstyp eltyp element cuarray char ascii unicod categori letter lowercas ascii unicod categori letter lowercas ascii unicod categori letter lowercas