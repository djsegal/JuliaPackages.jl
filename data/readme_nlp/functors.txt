functor functor provid mechan design pattern deal structur contain numer paramet machin learn optimis model cumbersom ineffici paramet flat vector struct help manag complex easili oper paramet chang precis appli optimis updat step functor provid fmap easi act map paramet julia use functor julia struct foo julia functor foo julia model foo foo julia fmap float model foo deepli nest model julia struct bar julia functor bar julia model bar foo bar foo julia fmap float model bar foo workhors fmap actual lower level function functor julia functor foo var julia map float foo functor return object inspect function take valu restructur object origin type discuss regard implement functor subset field seen functor discuss regard cach implement fmap