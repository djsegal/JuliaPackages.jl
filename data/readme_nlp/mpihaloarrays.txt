mpihaloarraysjl mpihaloarrays provides level array type facilitate halo ghostcell exchanges commonly found scale pde codes mpihaloarray type subtype abstractarray inspiration mpiarraysjl implicitglobalgridjl domains decomposed d parallel topologies installation package installed pkg add mpihaloarrays documentation stable recently tagged version documentation dev recent development version documentation basic usage halo exchange common practice scale pde codes decompose domain subdomains neighbor information exchanged regular intervals ghost halo cell regions image example d array halo region cells halo exchanges multiple dimensions moment mpihaloarraysjl limits d arrays extended future example set initial array fill halodomain cells halo exchange currently arrays limited d addressed future versions using mpi mpihaloarrays mpi init const comm mpi commworld const rank mpi commrank comm const nprocs mpi commsize comm const root create mpi topology topo cartesiantopology comm x decomposition true true periodic dimensions nhalo halo cells dimension fixed dimensions create array type pads data halo regions mpihaloarray rand topo nhalo fill halo regions fillhalo fill domain region current rank filldomain rank local current rank indexing normal array localglobal indices domain data including halo cells ilo ihi jlo jhi localdomainindices useful looping halo regions exchange data neighbors updatehalo gc gc mpi finalize scatter gather operations defined scatterglobal gatherglobal root mpi rank scatter gather start global basearray type decompose scatter rank ni nj aglobal reshape ni nj ni nj scatter internally converts aglobal multiple halo arrays nhalo topology types alocal scatterglobal aglobal root nhalo topology returns mpihaloarray gather decomposed domain store root rank choice aglobalresult gatherglobal alocal root root returns basearray setting halo exchange dimensions multidimensional array halo exchange subset dimensions example array dimensions represent d grid coordinates density velocity pressure coordinate following syntax using mpi mpihaloarrays mpi init const comm mpi commworld const rank mpi commrank comm const nprocs mpi commsize comm const root zeros mpi rank topology d topo cartesiantopology comm true true nhalo halodims mpihaloarray topo nhalo halodims fail d topology d specify halo exchange d mpihaloarray topo nhalo error mismatched topology dimensionality d halo region dimensions d note default behavior selects dimensions exchange halo data provide halodims tuple override interoperability add physical units via unitfuljl using mpihaloarrays unitful data rand mpihaloarray data topology add uncertainty via measurementsjl using mpihaloarrays unitful measurements data rand mpihaloarray data topology examples slightly useful example performs d heat diffusion shown scatter initial conditions root node mpi process scatterglobal perform stencil operation current mpihaloarray looks normal array loop bounds determined mpihaloarray via localdomainindices update halo cells neighbor information periodic boundary conditions handled cartesiantopology type gather results root node plottingoutput gatherglobal exported functionstypes mpihaloarray array type extends abstractarray provide mpi neighbor communication halo ghost cells abstractparalleltopology cartesiantopology mpi topology types manage neighbor information neighbor neighbors loneighbor hineighbor extract neighbors current mpi rank loindices hiindices local indices current mpihaloarray loop limits ignore halo regions fillhalo fill halo cells scalar value filldomain fill domain cells scalar value updatehalo perform neighbor communication halo exchange scatterglobal distributescatter global array multiple ranks returns local mpihaloarray rank gatherglobal gather mpihaloarray root mpi rank returns abstractarray root nod