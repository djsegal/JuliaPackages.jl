flightsims flightsimsjl purpose numerical simulator supporting nested environments convenient macrobased data logging apis main apis found fsimbasejl flightsimsjl default differential equation de solver tsit ordinary de ode features functionality please feel free report issue nested environments zoo environments usually stand dynamical systems include utilities example controllers generate userdefined nested environments using provided apis predefined environments provided reusability look fsimzoojl utilities utilities provided dynamical system simulation examples include simulation rendering fsimplotsjl note fsimplotsjl exported default setting reduce precompilation time ros compatibility fsimrosjl note fsimrosjl exported default setting examples basic minimal examples minimal examples flightsimsjl fsimbasejl discrete testenvironmentsbasicsdiscreteproblemjl using differentialequations function main t tf x dx loggable function dynamics dx log dx onlylog unext dx simulator simulator x applyinputs dynamics zeros discrete tf tf default step length discrete df solve simulator julia main dataframe row time sol float namedtup unext unext unext unext unext unext unext unext unext unext unext dynamical system control optimal control reinforcement learning example infinitehorizon continuoustime linear quadratic regulator lqr callbacks following example code testenvironmentsbasicslqrjl using flightsims const fs flightsims using differentialequations using linearalgebra using plots using test function main linear system env linearsystem exported flightsims x env optimal control matrix matrix lqr lqr exported flightsims ulqr command lqr minimise u ulqr x p zeros size u auxiliary parameter simulation t tf affect integrator integrator ulqr copy integrator auxiliary callback funciton cb periodiccallback affect t initialaffect true auxiliary callback loggable function dynamics dx onlylog activate line logging data log nestedlog dynamics envdx exported input dynamicsenv simulator simulator x dynamics p tf tf df solve simulator callback cb savestep t dtmax t caution using periodiccallback mpc control initial input overwritten input guess adaptive solver goes time dt set violates results callbacks including savingcallback periodiccallback ts df time xs datum datum df sol datum datum df sol ps datum datum df sol datum datum df sol inputs datum input datum df sol test u test xs test inputs px plot ts hcat title variable label x x color black black lw plots plot px ts hcat ps ls dash label param color red orange lw pu plot ts hcat inputs title control input label seriestype steppost plots fig plot px pu layout mkpath figures savefig fig figureslqrpng display fig df testset lqr example begin main julia main dataframe row time sol float namedtup st st rows omitted linear system zerohold zoh input note example utilises interactive simulation interface testenvironmentsintegratedenvironmentslinearsystemzohinputjl using flightsims import flightsims dynamics using dataframes using componentarrays using unpack using transducers using plots using scimlbase using test struct linearsystemzohinput abstractenv linearenv linearsystem function env linearsystemzohinput env linearenv function dynamics env linearsystemzohinput loggable function dynamics dx input nestedlog dynamics env linearenvdx input function main linearenv linearsystem env linearsystemzohinput linearenv xstate input zeros x envxstate t tf simulator simulator x dynamics env input tf tf interactive sim t save period df dataframe time enumerate t t tf perform interactive simulation aware integrator interface provided differentialequationsjl directly change integrator simulator integrator input simulator integrator update input period input sum stepuntil simulator df plot ts df time df sol map datum datum collect inputs df sol map datum datum input collect px plot ts hcat title variable label x x pu plot ts hcat inputs title input variable label linetype steppost plot zerohold input appropriately fig plot px pu layout savefig figuresinteractivesimpng display fig testset linearsystemzohinput begin main multicopter position control example backstepping position tracking controller quadcopters testenvironmentsintegratedenvironmentsbacksteppingpositioncontrollerstaticallocatormulticopterenvjl testenvironmentscontrollersgeometrictrackingjl testenvironmentscontrollersgeometrictrackinginnerouterjl geometric tracking controller control barrier function cbf methods examples cbf methods testenvironmentscontrollerscbfjl visualisation missile guidance interactive visualisation testplutoguidancejl thanks nhcho multicopter rendering details fsimplotsjl examples ros fsimrosjl related packages fsim family fsimbasejl lightweight base package numerical simulation supporting nested dynamical systems macrobased data logger functionality flightsimsjl fsimzoojl contains predefined environments controllers flightsimsjl fsimplotsjl plotting package predefined environments exported flightsimsjl fsimrosjl package flightsimsjl family ros packages using flightsimsjl faulttolerantcontroljl fault tolerant control ftc various models algorithms faults fault detection isolation fdi reconfiguration control flightgncjl nhcho flightgncjl julia package containing gnc algorithms autonomous systems useful packages highly based differentialequationsjl mainly focusing ode ordinary differential equations construction nested environments based componentarraysjl structure resulting data simulation result based dataframesjl logging tool based simulationloggerjl trouble shootings solve produces empty dataframe please check loggable front dynamics function proper function dynamics env myenv loggable function dynamics dx return loggable dynamicsdx blahblah loggable error loaderror loaderror loaderror loaderror loaderror loaderror keyerror key name found please check assigned name function annotated loggable function dynamics env yourenv loggable function dynamics dx instead function dynamics env yourenv loggable function dx input logged inputs incorrect using periodiccallback zerohold zoh control due adaptivetimestep solver time contradicts saved results savingcallback applied input using periodiccallback time step periodiccallback t set keyword argument dtmax solve dtmax t testenvironmentsbasicslqrjl exampl