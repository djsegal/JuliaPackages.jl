modelingtoolkit modelingtoolkit intermedi represent comput graph scientif comput purpos common target model dsls allow common platform model inspect transform tag variabl allow specif complex model allow transform model plug function registr deriv system interact nice user defin routin abstract form scientif model easi human generat easi program manipul tutori introductori tutori use modelingtoolkit pleas checkout modelingtoolkit compil scientif model introduct exampl exampl ode build ode defin variabl differenti equat system differenti depend variabl paramet label follow use modelingtoolkit defin variabl paramet variabl deriv build system eq oper build oper type eq array oper variabl hold tree system analyz program odesystem via odesystem eq tell variabl type version automat determin variabl type version generat function exampl generat code via use macrotool myod oop generat function function macrotool striplin myod oop print line begin isa array return inbound begin els inbound begin promot type map typeof map construct isa modelingtoolkit staticarray staticarray modelingtoolkit staticarray similar type typeof eltyp els begin convert typeof construct myod iip generat function function macrotool striplin myod iip print line var mtiipvar begin inbound begin inbound begin var mtiipvar var mtiipvar var mtiipvar direct generat ode function via odefunct advantag modelingtoolkit compil system target output compil multipl form includ one specif static array function form automat parallel calcul base intern cost model progress mean dsls built top model compil write domain specif languag write complex optim julia function compil exampl nonlinear system nlsolv build nonlinear system solv steadi previous ode nonlinear system defin deriv zero unknown variabl nonlinear system use modelingtoolkit variabl paramet defin nonlinear system eq nonlinearsystem eq nlsys func generat function inplac version generat var mtiipvar begin inbound begin inbound begin var mtiipvar var mtiipvar var mtiipvar build nonlinear function nlsolv eval nlsys func zero one element array float similar generat jacobian function func generat jacobian eval func var mtiipvar begin user accou julia dev modelingtoolkit src util user accou julia dev modelingtoolkit src util user accou julia dev modelingtoolkit src util inbound begin user accou julia dev modelingtoolkit src util user accou julia dev modelingtoolkit src util inbound begin user accou julia dev modelingtoolkit src util var mtiipvar var mtiipvar var mtiipvar var mtiipvar var mtiipvar var mtiipvar var mtiipvar var mtiipvar var mtiipvar user accou julia dev modelingtoolkit src util call nlsolv enclos paramet function nlsolv param param one generat function julia function instead express allow function world age simpli pass val fals tell generat function nlsys func generat function val fals generalizedgener build world age function fli eval exampl array variabl sometim conveni defin array variabl model variabl paramet macro support follow syntax julia variabl julia element array oper support arbitrari rang tensor julia variabl julia array oper depend variabl julia paramet variabl julia element array oper core principl core idea modelingtoolkit mathemat equat requir context symbol manipul model specif requir abil handl context write dsls come light quick dsl lower intermedi represent final result comput process mean lot repeat idea dsl creat scientif comput object differenti equat nonlinear system singl common contexu dsls target write lower level detail comput system jacobian disconnect dsl syntax allow code reus model packag languag section defin core piec mean variabl fundament variabl mirror intent solv variabl repres function paramet treat instanc variabl function call argument use natur syntax addit mechan handl constant variabl paramet simpli repres constant function variabl context awar singl variabl field describ follow name name variabl note necessarili name julia variabl symbol consid core identifi variabl sens equal main denot context store valu variabl exampl follow code defin independ variabl paramet function paramet variabl depend variabl depend variabl depend paramet variabl true independ variabl treat variabl true paramet variabl true left uncal function variabl fals unknown left uncal variabl fals unknown depend variabl fals unknown depend variabl fals unknown multipl argument variabl true index variabl true index expr rewrit concis use macro note differ includ exclud empti parenthes call format variabl alias call allow implicit depend conveni paramet variabl expr note paramet variabl implicit add valu call former specifi valu latter specifi unknown signifi valu left uncal constant constant simpl wrapper type store numer julia constant oper oper basic composit variabl piec function equat equat store use equat datatyp express left hand hand equat construct equat lhs rhs equival lhs rhs differenti differenti denot deriv respect variabl expand via expand deriv symbol differenti express recurs cancel appropri constant variabl system system collect oper expand context system constructor interpret structur follow eq argument array oper describ system equat name subtyp map describ variabl subtyp map context system exampl differenti equat variabl correspond subtyp eq analyz know variabl variabl name fall system core subtyp treat intermedi hold subcalcul piec transform transform function send object object util contextu inform oper system build oper system detail function registr function regist oper system via regist regist etc macro call regist function signatur caus oper stop recurs function build oper arg node graph instead trace call oper ad deriv amount deriv pre defin diffrul note express type defin real function allow real automat trace deriv mechan exampl sin automat deriv defin via trace mechan direct build oper intern function differenti defin deriv automat jacobian etc calcul util inform allow succinct version deriv calcul scale larger system defin deriv function via dispatch argument accept relev method function modelingtoolkit deriv typeof function arg ntupl val mean deriv argument arg array argument exampl function arg return oper deriv function exampl sin deriv follow modelingtoolkit deriv typeof sin arg ntupl val cos arg macro free usag insist program friend function access via function base interfac mean macro syntact sugar form exampl variabl construct paramet variabl deriv syntact sugar variabl true variabl true variabl true variabl true variabl variabl variabl differenti intermedi calcul system build function handl intermedi calcul exampl variabl paramet eq nonlinearsystem eq nlsys func generat function expand begin addit jacobian calcul account intermedi variabl appropri handl