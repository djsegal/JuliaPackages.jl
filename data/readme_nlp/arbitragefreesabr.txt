package arbitragefreesabr status coverage julia package accompany paper finite difference techniques arbitragefree sabr code meant production purpose cater corner meant illustrate main techniques described paper installation julia repl enter pkg mode pressing run v pkg add arbitragefreesabr julia version required usage start creating sabrmaturity structure represents parameters sabr model option maturity takes sabr parameters forward expiry time fractions expiry means additional parameter specifies underlying sabrmodel standard arbitragefreesabrmodel freeboundarysabrmodel maturity sabrmaturity forwardexpiry arbitragefreesabrmodel transformeddensity structure via maketransformeddensitylawsonswayne function solve arbitragefree pde grid using specified space steps time steps timesteps spanning nd standard deviations nd reasonable choice density maketransformeddensitylawsonswayne maturity timesteps nd price vanilla call strike evaluating transformeddensity pricetransformeddensity density true strike arbitragefreesabr midpoint parameter specifies price call true false parameter specifies interpolation grid nodes original hagan et al paper corresponds arbitragefreesabrnone paper corresponds arbitragefreesabrmidpoint future add quadratic interpolation examples price paper hagan example parameters example negative density standard sabr formula hagan et al forward maturity finite difference grid extends nd standard deviations composed steps probability density dimension time steps using arbitragefreesabr forward expiry timesteps nd maturity sabrmaturity forwardexpiry arbitragefreesabrmodel density maketransformeddensitylawsonswayne maturity timesteps nd iscall true strike forward pricetransformeddensity density iscall strike arbitragefreesabr midpoint reference price plot implied density reproduce plot implied density using parameters hagan et al using grid using arbitragefreesabr using gadfly forward expiry timesteps nd maturity sabrmaturity forwardexpiry arbitragefreesabrmodel density maketransformeddensitylawsonswayne maturity timesteps nd plot internal discrete density plot density zm density geom line guide ylabel grid density guide xlabel implied probability density obtained computing derivative call option prices implement simple numerical differentiation e strikes collect implieddensity zeros length strikes price strike pricetransformeddensity density true strike arbitragefreesabr midpoint implieddensity price strikes price strikes price strikes plot strikes implieddensity geom line guide ylabel implied density guide xlabel strike results following figure space steps staircase implied volatility freeboundary sabr model example freeboundary sabr model instead classic sabr model parameters antonov et al freeboundary sabr model forward bps forward option expiring model allows negative strikes plot volatility bachelier model vol corresponds bachelier vol multiplied implied option price using gadfly using arbitragefreesabr forward e expiry forward timesteps nd maturity sabrmaturity forwardexpiry freeboundarysabrmodel density maketransformeddensitylawsonswayne maturity timesteps nd strikes collect forward prices zeros length strikes price strike pricetransformeddensity density true strike arbitragefreesabr midpoint prices price strikes vols zeros length strikes vol price strike bacheliervolatility price true strike forward expiry vols vol prices strikes plot strikes forward vols geom line guide ylabel implied volatility guide xlabel strike forward units plot implied density similarly previous example e implieddensity zeros length strikes implieddensity price strikes price strikes price strikes plot strikes forward implieddensity geom line guide ylabel implied density guide xlabel strike forward units spike strike price zero antonov et al spike stems model artificial numerical error convergence table compute money implied volatility sequence doubling time steps space steps ratio differences consecutive results ratio corresponds convergence using arbitragefreesabr using dataframes forward expiry maturity sabrmaturity forwardexpiry arbitragefreesabrmodel iscall true strike forward collect timesteps collect timesteps timesteps vol nan diff nan df dataframe int timesteps int atmvol float diff float ratio float ni timestepsi zip timesteps density maketransformeddensitylawsonswayne maturity ni timestepsi price pricetransformeddensity density iscall strike arbitragefreesabr midpoint vol impliedvolatilitylisorts price true strike forward expiry e global df vcat df dataframe ni timesteps timestepsi atmvol vol diff vol vol ratio diff vol vol global diff vol vol global vol vol print df results row timesteps atmvol diff ratio nan nan nan e mistakes moment strictly conserved regards continuous integral conservation conserved strictly regards hatj useful establish simple call option pricing formula based discrete probability density mid approximation lead continuous cumulative density continuous relative result probability density indirectly gamma exhibit spurious oscillations numerical differentiation step size exact approximation consider discontinuous piecewiselinear function probability density zeroth moments preserved regards hat density guaranteed positive condition hat fracfj frac alternatively c cubic spline interpolation top call prices knots fj derivatives pl pr min fmax leads continuous probability density function respect zeroth moment conservation formulas interval subintervals note priori guaranteed interpolated density stay positive testing julia repl session enter pkg mode run test arbitragefreesabr