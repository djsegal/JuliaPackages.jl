expectationstub packag exist help test stub help patch mock code mock stub creat use expectationstub suitabl patch mock stub ideal depend inject function set consid purpos packag stub simplifi function return fix valu fix input expect stup arrang act assert style unit testiong arrang setup expectat stub code call return act call function test hit stub method assert test stub tigger expect valid belief key function check docstr repl stub foo declar stub call foo expect foo integ set expect foo call integ exact valu return foo real check foo call exact valu type real usecount foo real except return time call expect foo check expect declar foo return bool exampl usag function check status pipe pressur take respons normal call function call email function check status pressur bad callback email pressur bad callback phil exampl com darn phil gonna blow return fals true test function don phil email replac bad callback mock write littl closur test code closur set variabl check variabl call pretti bit adhock enter expectationstub use base test use expectationstub testset check pipe begin stub fakeemail expect fakeemail phil exampl com abstractstr return check happen test check status fakeemail true test fakeemail phil exampl com email phil test check status fakeemail fals test fakeemail phil exampl com