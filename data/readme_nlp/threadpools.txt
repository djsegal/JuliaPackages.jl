threadpool improv thread manag background nonuniform task overview document threadpool simpl packag expos macro function mimic base thread thread base map base foreach macro under api handl built function suit task user primari thread task nonuniform durat threadpool expos bthread background thread macro behav ident thread thread primari thread job free relat bmap bforeach function mimic base counterpart primari thread usag packag expos qthread queu thread macro macro schedul strategi help nonuniform job thread bthread divid incom job list equal job chunk launch chunk separ thread process job uniform lead job get assign thread delay complet qthread pre assign thread start job finish job come thread oper shorter one qthread primari thread cousin qbthread strategi background qmap qforeach qbmap qbforeach packag expos lower level tspawnat macro mimic base thread spawn macro allow direct thread assign user develop schedul simpl macro function select foreground primari allow background primari forbidden uniform task base thread thread threadpool tmap itr threadpool tforeach itr threadpool bthread threadpool bmap itr threadpool bforeach itr nonuniform task threadpool qthread threadpool qmap itr threadpool qforeach itr threadpool qbthread threadpool qbmap itr threadpool qbforeach itr job log perform tune macro come log version allow user analyz perform chosen strategi thread count foreground background uniform task threadpool logthread threadpool logtmap itr threadpool logtforeach itr threadpool logbthread threadpool logbmap itr threadpool logbforeach itr nonuniform task threadpool logqthread threadpool logqmap itr threadpool logqforeach itr threadpool logqbthread threadpool logqbmap itr threadpool logqbforeach itr pleas usag exampl advanc api macro invok base structur staticpool queuepool assign subset avail thread allow composit pwith pthread command usag complex scenario stack process detail usag simpl api function base version function julia qbthread println thread threadid julia bmap println thread threadid element array int julia tspawnat thread threadid task runnabl julia fetch note exampl background version threadid seen note execut guarante thread result bmap cours match input logger usag log version function produc abstractthreadpool object memori log start stop time job ran pool plotrecip recipesbas expos packag generat visual job time plot command plot plot job shown index start time stop time color correspond thread julia use plot julia pool logtforeach sleep julia plot pool julia pool logqforeach sleep julia plot pool note schedul strategi seen plot tforeach log job assign thread thread qforeach job thread start previous job thread complet job nonuniform stack strategi result pre assign method take