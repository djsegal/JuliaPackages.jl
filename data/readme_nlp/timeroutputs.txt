timeroutputs timeroutputs julia package generate formatted output timings sections program main functionality timeit macro similar time macro base except assigns label code section timed multiple calls code sections label scope accumulate data label program executed print nicely formatted table time allocations calls section output customized package useful please star stars helps development time spent example output example output finite element simulation shown time allocations tot measured s gib section ncalls time tot avg alloc tot avg assemble s ms gib mib inner assemble k s s gib kib linear solve s ms mib mib create sparse matrix ms ms mib mib export ms ms mib mib line total wall time passed allocations start timer percentage totals spent inside timed sections following lines data timed sections section label shown followed calls section finally total time elapsed allocations section shown percentage total section average time allocations call usage easiest package examples timing sections using timeroutputs create timeroutput main type track const timeroutput time section code label sleep timeroutput named timeit sleep sleep create function time rands rand time function timeit returns value evaluated base time randvals timeit randoms rands nested sections sections name accumulated parents function timetest timeit nest begin sleep calls label timeit level sleep timeit level sleep timeit level sleep timeit level sleep timeit nest begin timeit level sleep timeit level sleep timetest exception safe function iwillthrow timeit throwing begin sleep throw error fine print nope iwillthrow disabletimer selectively timer enabletimer disabletimer timeit recorded sleep enabletimer notimeit disable timer reenable afterwards enabled notimeit timetest call previously label accumulates data timeit sleep sleep annotate function definitions timeit funcdef funcdef instrument existing function foo timedfoo foo timedfoo print timings default printing formatted table calls total time spent section percentage time spent section created averages call similar information available allocations time allocations tot measured s mib section ncalls time tot avg alloc tot avg sleep s ms kib b nest ms ms kib kib level ms ms b b level ms ms b b throwing ms ms b b nest ms ms kib kib level ms ms b b level ms ms b b randoms ms ms mib mib funcdef s s b b foo s s b b settings printing printtimerioio stdout timeroutput kwargs takes keyword arguments change output listed titlestring title timer allocationsbool allocation columns default true sortbysymbol sort sections according time default ncalls allocations name firstexec linecharssymbol unicode default ascii draw horizontal lines table compactbool hide avg column default false flattening sections nested example timeroutput timeit nest begin sleep timeit level sleep timeit level sleep timeit nest begin timeit level sleep timeit level sleep table displayed julia allocations false compact true section ncalls time tot nest ms level ms level ms nest ms level ms level ms flatten timer using timeroutputsflatten function accumulates data sections identical labels julia toflatten timeroutputs flatten julia toflatten compact true allocations false section ncalls time tot nest ms level ms nest ms level ms merging timers merged using merge merge julia to timeroutput to timeroutput julia timeit to outer begin timeit to inner begin sleep julia timeit to outer begin sleep julia to compact true allocations false section ncalls time tot outer inner julia to compact true allocations false section ncalls time tot outer julia merge to to compact true allocations false section ncalls time tot outer inner merging facilitate timing coverage throughout simple multithreaded setups instance threadlocal timeroutput objects merged custom merge via treepoint keyword arg vector label strings navigate merge timing tree merge threadsafe via lock julia using timeroutputs julia timeroutput julia timeit begin timeit sleep timeit sleep timeit sleep julia timeit threads spawn begin to timeroutput timeit to sleep timeit to sleep timeit to sleep merge to treepoint julia time allocations tot measured mib section ncalls time tot avg alloc tot avg ms ms mib mib ms ms ms ms ms ms mib mib ms ms kib kib ms ms ms ms ms ms mib mib resetting timer reset calling resettimertimeroutput remove sections reset start timer current time allocation values indexing table timeroutput indexed name section returns timeroutput section root example timeroutput timeit nest begin timeit nest begin timeit nest sleep timeit nest sleep timeit nest sleep sleep julia compact true allocations false linechars ascii section ncalls time tot nest ms nest ms nest ms nest ms nest ms julia to nest nest julia to compact true allocations false linechars ascii section ncalls time tot nest ms nest ms nest ms percentages relative root querying data unexported functions ncalls time allocated accumulated data section returned time units nano allocations bytes example using object julia timeroutputs ncalls nest julia timeroutputs time nest nest julia timeroutputs allocated nest nest furthermore request total time spent root timer julia timeroutputs tottime julia timeroutputs totallocated default timer timer convenience version functions macros timeroutput instance global timer defined package note global timer shared users package example resettimer timeit section sleep timeit section sleep printtimer prints julia printtimer time allocations tot measured ms kib section ncalls time tot avg alloc tot avg section ms ms section ms ms default timer object retrieved timeroutputsgetdefaulttimer measuring time consumed outside timeit blocks operations consider time consuming relevant adding additional timming blocks time initializations calls annoying timeroutputscomplement function modify timer add values complement timed sections instance timeroutput timeit section sleep timeit section begin timeit section sleep sleep timeroutputs complement print result julia printtimer time allocations tot measured ms kib section ncalls time tot avg alloc tot avg section ms ms kib kib section ms ms section ms ms kib kib section ms ms complement default timer simply call timeroutputscomplement shared timers sometimes desirable timer shared users package purpose gettimer maintains collection named timers defined package gettimertimernamestring retrieves timer timername collection creating timer none exists example module usetimer using timeroutputs timeit gettimer function foo gettimer shared timeit gettimer shared foo sleep timeit gettimer shared section begin usetimer foo sleep prints julia printtimer gettimer shared time allocations tot measured mib section ncalls time tot avg alloc tot avg section ms ms kib kib foo ms ms note result gettimer called toplevel package getting precompiled retrieved timer shared users getting timer name function recommended extensively libraries namespace shared collisions libraries happen timer name serialization timers converted nested set dictionaries unexported timeroutputstodict function serialize timer json example julia timeroutput julia timeit nest begin sleep timeit level sleep timeit level sleep julia timeroutputs todict dictstring entries totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers dict string nest dict string totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers dict string level dict string totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers dict string level dict string totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers dict string julia using json json julia json write timeroutputs todict totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers nest totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers level totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers level totaltimens totalallocatedbytes timens ncalls allocatedbytes innertimers overhead overhead timing section s means package suitable measuring sections finish quickly proper benchmarking suitable tool benchmarktools sometimes desireable able timeit macro instance wish instrument package timeit macros deal overhead timings normal package operation enable provide timeitdebug macro wraps timeit macro conditional checking debug timings enabled wish portions instrumented code base multiple codebases instrumented code debug timings enabled modulemodule basis default debug timings disabled conditional optimized allowing truly zerooverhead user calls timeroutputsenabledebugtimingsmodule moduletimeitdebugenabled method redefined causing dependent methods recompiled module hence intended debugging usage calls timeitdebug module thereafter enabled author kristoffer carlsson kristofferc acknowledgments package inspired timeroutput class dealii