fsimbase fsimbasejl lightweight base library numerical simulation supporting nested dynamical systems macrobased data logger compatible differentialequationsjl notes fsimbasejl functionality flightsimsjl fsimbasejl specify differential equation differential equation solver odeproblem discreteproblem tested apis main apis provided srcapis environment abstractenv abstract type userdefined predefined environments environments subtype abstractenv struct linearsystemenv abstractenv envabstractenv return function produces structured function env linearsystemenv unpack env size return function assert length dynamicsenvabstractenv return function maps dynamics compatible differentialequationsjl user extend methods simply define methods function dynamics env linearsystemenv unpack env loggable function dynamics dx data saved loggable follow form log syntax sugar macrobased logging log input dx optional paramsenvabstractenv returns structured parameters environment env simulation logging data saving loading simulator simulatorstate dyn solver simulator struct simulated solve interactive step stepuntil interactive ode discrete imply odeproblem discreteproblem respectively details srcapissimulationjl interactive interface compatible callbacks differentialequationsjl solvesimulationsimulator solve de provide dfdataframe method iip supported interactive interface aware integrator interface differentialequationsjl reinitsimulatorsimulator reinitialise simulatorsimulator stepsimulatorsimulator t stopattdttrue step simulatorsimulator t stepuntilsimulatorsimulator tf step simulatorsimulator tf pushsimulatorsimulator dfdataframe push datum simulator df utilities applyinputsfunc kwargs using user easily apply external inputs environments borrowed mrac example componentarraysjl extended compatible simulationloggerjl limitations dynamical equations wrapped applyinputs automatically generate logging function loggable data array empty namedtuple macros logging data loggable log onlylog nestedlog nestedonlylog details simulationloggerjl examples custom environments discrete etc directory test tl dr minimal example using fsimbase using differentialequations using componentarrays using test using linearalgebra using dataframes function main state tf t loggable function dynamics dx log log dx simulator simulator state dynamics odeproblem solver tsit tf tf solve approach automatically reinitialised time df solve simulator savestep t interactive simulation step reinit simulator step simulator t test simulator integrator t stepuntil callback tsweird t tf t df dataframe reinit simulator time tsweird flag stepuntil simulator flag false step inappropriate simulator integrator e break else push simulator df flag push data flag true println df stepuntil df dataframe reinit simulator time tsweird stepuntil simulator push simulator df flagtrue default safer flag stepuntilsimulator pushsimulator df flag equivalently pushsimulator df stepuntilsimulator compact form println df test norm df sol df sol e test simulator integrator tf testset minimal begin main related packages dependencies simulationloggerjl convenient logging tools compatible differentialequationsjl