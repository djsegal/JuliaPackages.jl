sortmerge julia implementation sortmerge algorithm sortmerge join algorithm allows quickly matching pairs separate arrays collections performances obtained input data sorted package able sort data algorithm box arrays real data type stored type container handle customized sorting matching criteria installation pkg add sortmerge basic usage consider following vectors common elements found follows using sortmerge sortmerge value returned sortmerge function implements abstractarray interface hence common matrixint containing indices matching pairs println indices matched pairs display println matched pairs display equivalently println indices matched pairs i i zip println i i println matched pairs i i zip println i i times element input array matched retrieved using countmatch function returning vectorint length input array elements multiplicity matched entries cm countmatch length println element index matched cm times analogously array cm countmatch length println element index matched cm times unmatched entries retrieved follows println unmatched entries array println countmatch println unmatched entries array println countmatch computationally demanding example follows nn rand nn nn rand nn nn sortmerge println check matching sum abs purpose line perform simple check matched pairs default method reports details matching process previous example input max mult input max mult output lines marked input input report respectively indices matching pair found total elements input array fraction indices matching pair found maximum multiplicity line reports matched pairs output significant amount time spent sorting input arrays hence algorithm provide performances arrays sorted calculated call sortmerge thrown returned results hence call sortmerge advantage previous calculation speed calculations sortmerge sort sortperm sort sortperm permutation vector sorted retrieved sortperm function passed sort sort keywords finally extra boost performance input arrays sorted sorteda sortperm sortedb sortperm sortmerge sorteda sortedb sorted true sortedtrue keyword tells sortmerge input arrays sorted handling multiple matched entries multimatch function allows extract matching pairs multiplicity matched pairs index array occurs twice multiplicity sortmerge multimatch display matched pairs index array occur times multiplicity obtained follows i i zip multimatch println i i facility provided sortmerge separate matching pairs multimatch true println index table matches following indices println advanced usage anticipated sortmerge package handle data type stored type container customized sorting matching criteria providing customized functions sorting matching elements following sections provide examples custom sorting function custom sorting functions accept arguments container index element compared index element compared return boolean value true element false otherwise sortmerge accepts functions lt lt keywords sort container respectively custom matching function custom matching function accept arguments container container index container element compared index container element compared function accepts arguments passed arguments main sortmerge call note function called input containers sorted according lt lt functions return value integer following meaning elements match element container match element container match remaining elements container element container match element container match previous elements container integer none applies missed match return values hints allows sortmerge avoid checking match occur ultimately resulting short execution times missed match integer allows deal partial relations complex matching criteria sortmerge accept function sd sign difference keyword name stem array function simply return sign difference data frames following example match data frames objects according specific column using dataframes create data frame prime primes dataframe random nn dataframe rand nn search matching elements dataframes print multiplicity matching prime sortmerge primes lt lt sd v v i i sign vi vi cm countmatch nrow primes println prime primes matched cm times defined custom lt lt functions sort prime dataframe respectively custom sd function appropriate column names comparisons match arrays complex following example match arrays complex according distance complex plane unlike real complete relation complex hence provide custom sorting criteria ones simply sort arrays according real define custom sd function accepting fifth argument namely threshold distance match code nn a rand nn rand nn im a rand nn rand nn im lt real real function sd v v i i threshold real vi real vi threshold abs return sign abs vi vi threshold return return missed match time sortmerge a a nn lt lt lt lt sd sd note relation partial sd function sometimes return resulting called missed match condition return value check result correct disabling optimization hints performing simple join comparing element array element time simplejoin a a abs nn prepared execution time approach sort distance origin lt abs abs function sd v v i i threshold abs vi abs vi threshold abs return sign abs vi vi threshold return return missed match time sortmerge a a nn lt lt lt lt sd sd performance worsen abs slower real match arrays geographical coordinates following example match d arrays containing geographical coordinates latitude longitude gcirc function astrolib package calculate circle arc distances nn lat rand nn long rand nn lat rand nn long rand nn using astrolib lt function sd v v i i thresholdarcsec thresholddeg thresholdarcsec deg vi vi thresholddeg abs return sign dd gcirc vi vi vi vi dd thresholdarcsec return return time sortmerge lat long lat long lt lt lt lt sd sd