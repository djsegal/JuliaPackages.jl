nonpromoting julia library promoting type wrappers arithmetic types automatically promoted types help prevent subtle type errors overview sometimes julia automatic type promotion subtly wrong especially precision float float default type floating generated floating example course code simple spot multiple modules involved spotting easy function piplustenthbad pi highly accurate unintentionally inaccurate expression type float accurate bigfloat error difficult spot type float mentioned explicitly float happens default type julia chooses dividing integers version code function piplustenth pi highly accurate infinitely accurate rational represent fraction arbitrarily accurate converted bigfloat avoid surprises avoiding automatic type promotion compiler refuses expression bigfloat float error quickly detected design module nonpromoting defines wrapper type np expected subtype abstractfloat float bigfloat etc type supports operations supports except automatic promotion rules disabled julia efficient setup zero runtime overhead value promotable call constructor np extract value convert convert usual arithmetic operations add subtract multiply square root trigonometric functions supported directly np type inaccurate code looks using nonpromoting function piplustenthbad np pi highly accurate np unintentionally inaccurate error reported code produce error addition npbigfloat npfloat defined julia promote npfloat npbigfloat version explicit types correctly accurately using nonpromoting function piplustenth np bigfloat pi highly accurate np bigfloat highly accurate basic design idea type np instead except interface modules nonpromot