manualdispatch provid macro unionsplit dispatch manual type reli runtim multipl dispatch type inform hidden compil dispatch system select correct method runtim slow faster condit statement check type insid branch condit type call devirtu inlin macro base idea tim holi takafumi arakaki exampl follow exampl use union split faster reli multipl dispatch happen runtim use benchmarktool use manualdispatch func int func float type array vector compil choos requir method func compil time const int const float const mix iseven function union split unionsplit int float func function runtim dispatch func print manual union split array int btime union split int print runtim dispatch array int btime runtim dispatch int print manual union split array float btime union split float print runtim dispatch array float btime runtim dispatch float print manual union split mix array btime union split mix print runtim dispatch mix array btime runtim dispatch mix