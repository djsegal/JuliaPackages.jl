halfintegerarrays arrays halfinteger indices commonly encountered rotations spin package wip bugs expected please issue encounter bug prerequisites package alongside halfintegersjl installed automatically package imported shown installation julia pkg add https github com jishnub halfintegerarrays jl julia using halfintegerarrays julia using halfintegerarrays halfintegers usage types exported halfintarray spinmatrix former represents arbitrary array possibly halfintegral axes whereas latter represents square matrix corresponding angular momentum array guaranteed size j j axes halfintarray wrappers abstractarray constructed firstly providing axes parent array eg julia halfintarray ones int halfintarray arrayint eltype int indices wrap structured arrays julia import linearalgebra diagonal julia halfintarray diagonal halfintarray diagonalintarrayint eltype int indices secondly using typed constructor julia halfintarray float undef halfintarray arrayfloat eltype float indices e julia halfintarray unionfloatmissing missing halfintarray arrayunionmissing float eltype unionmissing float indices missing missing missing missing missing missing missing missing missing underlying array appropriate size initialized specified element type spinmatrix constructed julia spinmatrix zeros angular momentum inferred spinmatrix arrayfloat eltype float indices specifying angular momentum allocate appropriate array julia spinmatrix complexf undef spinmatrix arraycomplexfloat eltype complexfloat indices e eim e eim e eim e eim spinmatrix requires parent matrix based indexing size j j indexing arrays indexed integral halfintegral values optimal performance preferable integral floating halfint types indices halfint constructed using function half half alternately constructed halfint numerically equivalent rational performant example halfintegral spin julia spinmatrix reshape spinmatrix reshape unitrangeint eltype int indices julia julia import halfintegerarrays half julia half half example integral spin julia spinmatrix reshape spinmatrix reshape unitrangeint eltype int indices julia linear cartesian indexing julia default cartesianindex cartesianindices linearindices types require integer indices compatible halfintarray package exports equivalent types cartesianindexhalfint cartesianindiceshalfint linearindiceshalfint support integer halfinteger indices safe choices indexing halfintarray julia halfintarray reshape halfintarray reshape unitrangeint eltype int indices julia cinds eachindex indexcartesian cartesianindiceshalfint tuplebase onetointbase onetoint indices cartesianindexhalfint cartesianindexhalfint cartesianindexhalfint cartesianindexhalfint julia cinds indexing cartesianindices arrays integer indices broadcasting broadcasting bit slow moment optimal performance broadcast parent array julia halfintarray reshape halfintarray reshape unitrangeint eltype int indices julia halfintarray arrayint eltype int indices julia btime ns allocations bytes julia btime parent parent ns allocation bytes broadcasting spinmatrix types result halfintarray behaviour change future julia spinmatrix reshape half spinmatrix reshape unitrangeint eltype int indices julia halfintarray arrayint eltype int indices recreate wrapper julia spinmatrix spinmatrix arrayint eltype int indices comparison offsetarrays halfintarray integer axes equivalent offsetarray except halfintarray somewhat performant comes indexing julia using offsetarrays julia oa offsetarray reshape offsetarray reshape unitrangeint eltype int indices julia halfintarray parent oa axes oa halfintarray reshape unitrangeint eltype int indices julia oa tru