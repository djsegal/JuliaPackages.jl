gaugefields abstract package lattice qcd codes treating gauge fields links gauge actions mpi autograd package latticeqcdjl package package following functionarities sunc nc gauge fields dimensions arbitrary actions gauge fields dimensions arbitrary actions configuration generation heatbath quenched hybrid monte carlo gradient flow via rk ildg bridge formats supported lime installed implicitly climejll mpi parallel computation experimental documents dynamical fermions supported latticediracoperatorsjl addition supports followings autograd functions sunc variables stout smearing exp projecting smearing stout force via backpropagation autograd wilson lines except ones overlaps install julia repl package mode add gaugefieldsjl file loading ildg format ildg format standard formats latticeqcd configurations read ildg format nx ny nz nt nwing dim initializegaugefields ncnwingnxnynzntcondition cold ildg ildg filename nxnynznt loadgaugefield ildgnc calculate plaquette temp similar temp similar comb factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt poly calculatepolyakovloop temptemp println polyakov loop real poly imag poly write configuration ildg format filename hogeildg savebinarydata filename text format bridge gaugefieldsjl supports text format bridge file loading filename testconftxt loadbridgetext filenamenc file saving filename testconftxt savetextdata filename heatbath updates odd method using gaugefields function heatbathsu nctemps dim temp temps temp temps temps iterationmax temps array matrixcomplexf undef temps array matrixcomplexf undef temps zeros complexf temps zeros complexfncnc mapfunc suupdatematrix nctempstempsiterationmax dim loops loopsstapledim iseven true evaluategaugelinksevenodd loopstemptempiseven mapu mapfunciseven iseven false evaluategaugelinksevenodd loopstemptempiseven mapu mapfunciseven function heatbathtestd nxnynzntnc dim nwing initializegaugefields ncnwingnxnynzntcondition cold temp similar temp similar temp similar comb factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt poly calculatepolyakovloop temptemp println polyakov loop real poly imag poly numhb itrj numhb heatbathsu nctemptemptemp itrj time plaqt calculateplaquette temptemp factor println itrj plaqt plaqt poly calculatepolyakovloop temptemp println itrj polyakov loop real poly imag poly return plaqt nx ny nz nt nwing nc time plaqt heatbathtestd nxnynzntnc heatbath updates actions heatbath updates action using gaugefields function heatbathtestd nxnynzntnc dim nwing initializegaugefields ncnwingnxnynzntcondition cold println typeof gaugeaction gaugeaction plaqloop makeloopsfromname plaquette dim dim append plaqloopplaqloop inp push gaugeactioninpplaqloop rectloop makeloopsfromname rectangular dim dim append rectlooprectloop inp push gaugeactioninprectloop hnew heatbathupdate gaugeaction gaugeaction temp similar temp similar temp similar comb factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt poly calculatepolyakovloop temptemp println polyakov loop real poly imag poly numhb itrj numhb heatbath hnew plaqt calculateplaquette temptemp factor poly calculatepolyakovloop temptemp itrj println itrj plaqt plaqt println itrj polyakov loop real poly imag poly close fp return plaqt nx ny nz nt nc heatbathtestd nxnynzntnc code consider plaquette rectangular actions gradient flow lscher gradient flow nx ny nz nt nwing nc initializegaugefields ncnwingnxnynzntcondition hot temp similar temp similar temp similar comb factor comb nv nc gradientflow itrj flow time plaqt calculateplaquette temptemp factor println itrj plaqt plaqt poly calculatepolyakovloop temptemp println itrj polyakov loop real poly imag poly hybrid monte carlo hmc simulations example code follows using random using gaugefields using linearalgebra function calcaction gaugeaction nc nc sg evaluategaugeaction gaugeaction nc evaluategaugeactiongaugeaction trevaluategaugeactionuntracedgaugeaction sp sp sg return real function mdstep gaugeactionmdstepsdimuold mdsteps gaussdistribution sold calcaction gaugeaction substituteu uold itrj mdsteps uupdate dimgaugeaction pupdate dimgaugeaction uupdate dimgaugeaction snew calcaction gaugeaction println sold sold snew snew println snew sold snew sold ratio min exp snew sold rand ratio substituteu uold return false else return true function uupdate dimgaugeaction temps gettemporarygaugefields gaugeaction temp temps temp temps expu temps temps dim exptu expu temptemp mul expu substituteu function pupdate dimgaugeaction factordsdu nc nc temps gettemporarygaugefields gaugeaction dsdu temps factor nc dim calcdsdu dsdugaugeaction mul temps dsdu dsdu tracelessantihermitianadd factortemps function hmctestd nxnynzntnc dim nwing random seed initializegaugefields ncnwingnxnynzntcondition hot randomnumber reproducible reproducible println typeof temp similar temp similar dim comb elseif dim comb elseif dim comb else error dimension dim supported factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt poly calculatepolyakovloop temptemp println polyakov loop real poly imag poly gaugeaction gaugeaction plaqloop makeloopsfromname plaquette append plaqloopplaqloop push gaugeactionplaqloop gaugeaction initializetagaugefields tracelessantihermitian gauge fields nc real coefficients uold similar substituteu uold mdsteps temp similar temp similar comb factor comb nv nc numaccepted numtrj itrj numtrj timed begin accepted mdstep gaugeactionmdstepsdimuold getmyrank println elapsed time mdsteps time numaccepted ifelse accepted plaqt calculateplaquettetemptempfactor printlnitrj plaqt plaqt itrj time plaqt calculateplaquette temptemp factor println itrj plaqt plaqt poly calculatepolyakovloop temptemp println itrj polyakov loop real poly imag poly println acceptance ratio numaccepted itrj return plaqtnumaccepted numtrj function main nx ny nz nt nc hmctestd nxnynzntnc main gradient flow terms gradient flow terms wilsonloopjl shown coefficient action complex complex conjugate action defined added automatically total action hermitian code using random using test using gaugefields using wilsonloop function gradientflowtestd nxnynzntnc dim nwing random seed initializegaugefields ncnwingnxnynzntcondition hot randomnumber reproducible temp similar temp similar dim comb elseif dim comb elseif dim comb else error dimension dim supported factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt poly calculatepolyakovloop temptemp println polyakov loop real poly imag poly plaquette term loopsp wilsonlinedim dim dim continue loop wilsonline dim dim push loopsploop rectangular term loops wilsonlinedim dim dim continue loop wilsonline dim dim push loopsloop loop wilsonline dim dim push loopsloop listloops loopsploops listvalues im gradientflowgeneral listloopslistvalueseps itrj flow itrj time plaqt calculateplaquette temptemp factor println itrj plaqt plaqt poly calculatepolyakovloop temptemp println itrj polyakov loop real poly imag poly return plaqt function gradientflowtestd nxntnc dim nwing initializegaugefields ncnwingnxntcondition hot randomnumber reproducible temp similar temp similar dim comb elseif dim comb elseif dim comb else error dimension dim supported factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt poly calculatepolyakovloop temptemp println polyakov loop real poly imag poly gradientfloweps listnames plaquette listvalues loopsp wilsonlinedim dim dim continue loop wilsonline dim dim push loopsploop loops wilsonlinedim dim dim continue loop wilsonline dim dim push loopsloop loop wilsonline dim dim push loopsloop listloops loopsploops listvalues im gradientflowgeneral listloopslistvalueseps itrj flow itrj time plaqt calculateplaquette temptemp factor println itrj plaqt plaqt poly calculatepolyakovloop temptemp println itrj polyakov loop real poly imag poly return plaqt const eps println d system testset d begin nx ny nz nt nwing testset nc begin nc println nc nc time plaqt gradientflowtestd nxntnc error testset nc begin nc println nc nc time plaqt gradientflowtestd nxntnc testset nc begin nc println nc nc time plaqt gradientflowtestd nxntnc testset nc begin nc println nc nc time plaqt gradientflowtestd nxntnc println d system testset d begin nx ny nz nt nwing testset nc begin nc println nc nc time plaqt gradientflowtestd nxnynzntnc testset nc begin nc println nc nc time plaqt gradientflowtestd nxnynzntnc testset nc begin nc println nc nc val time plaqt gradientflowtestd nxnynzntnc hmc mpi hmc mpi repl jupyternotebook mpi command mpirun np julia exejl true means pex pey pez pet timedirection diveded sample code written using random using gaugefields using linearalgebra using mpi length args error usage mpirun np exejl true const pes tuple parse int args const mpi parse bool args function calcaction gaugeaction nc nc sg evaluategaugeaction gaugeaction nc evaluategaugeactiongaugeaction trevaluategaugeactionuntracedgaugeaction sp sp sg return real function mdstep gaugeactionmdstepsdimuold mdsteps gaussdistribution sold calcaction gaugeaction substituteu uold itrj mdsteps uupdate dimgaugeaction pupdate dimgaugeaction uupdate dimgaugeaction snew calcaction gaugeaction getmyrank println sold sold snew snew println snew sold snew sold ratio min exp snew sold rand mpi mpi bcast mpi commworld ratio minexpsnewsold ratio substituteu uold return false else return true function uupdate dimgaugeaction temps gettemporarygaugefields gaugeaction temp temps temp temps expu temps temps dim exptu expu temptemp mul expu substituteu function pupdate dimgaugeaction factordsdu nc nc temps gettemporarygaugefields gaugeaction dsdu temps factor nc dim calcdsdu dsdugaugeaction mul temps dsdu dsdu tracelessantihermitianadd factortemps function hmctestd nxnynzntnc dim nwing random seed mpi pes pes initializegaugefields ncnwingnxnynzntcondition hot mpi true pes pesmpiinit false else initializegaugefields ncnwingnxnynzntcondition hot getmyrank println typeof temp similar temp similar dim comb elseif dim comb elseif dim comb else error dimension dim supported factor comb nv nc time plaqt calculateplaquette temptemp factor getmyrank println plaqt plaqt poly calculatepolyakovloop temptemp getmyrank println polyakov loop real poly imag poly gaugeaction gaugeaction plaqloop makeloopsfromname plaquette append plaqloopplaqloop push gaugeactionplaqloop gaugeaction initializetagaugefields tracelessantihermitian gauge fields nc real coefficients uold similar substituteu uold mdsteps temp similar temp similar comb factor comb nv nc numaccepted numtrj itrj numtrj timed begin accepted mdstep gaugeactionmdstepsdimuold getmyrank println elapsed time mdsteps time numaccepted ifelse accepted plaqt calculateplaquettetemptempfactor printlnitrj plaqt plaqt itrj plaqt calculateplaquette temptemp factor getmyrank println itrj plaqt plaqt poly calculatepolyakovloop temptemp getmyrank println itrj polyakov loop real poly imag poly println acceptance ratio numaccepted itrj return plaqtnumaccepted numtrj function main nx ny nz nt nc hmctestd nxnynzntnc main utilities data structure access gauge field defined bond neigbohr d system gauge field icjcixiyiz directions d system gaugefieldsjl array nx ny nz nt nwing dim initializegaugefields ncnwingnxnynzntcondition cold exaples mu mu example hermitian conjugate adjoint operator hermitian conjugate gauge fields evaluated lazy evaluation memory copy returms umudagger sites shift operator shift gauge fields shiftedu shiftu shift evaluated lazy evaluation shift shift example matrixfield matrixfield product calculate matrixmatrix multiplicaetion lattice site mathematical expression matrixvalued fields define matrixfield matrixfield product ij sumk ik kj site index package expressed mul means lattice site type trace operation calculate trace gauge field tr useful evaluation actions trace operation summing indecis spacetime color applications package wilsonloopjl enable perform calcurations demonstrate simplified latticeqcdjl wilson loops develop wilsonloopjl useful calculate wilson loops please install add wilsonloopjl example calculate following quantity uuhat daggerhat dagger wilsonloopjl follows using wilsonloop loop wilsonline loop output uuedaggeredagger evaluate loop gaugefieldsjl using linearalgebra nx ny nz nt nc nwing dim initializegaugefields ncnwingnxnynzntcondition cold temp similar similar evaluategaugelinks temp println tr example calculate clover operators define function makecloverloop dim loops wilsonlinedim looprighttop wilsonline dim dim pmunu push loopslooprighttop looprightbottom wilsonline dim dim qmunu push loopslooprightbottom loopleftbottom wilsonline dim dim rmunu push loopsloopleftbottom looplefttop wilsonline dim dim smunu push loopslooplefttop return loops energy density defined paper ramos sint eur phys calculated follows note coefficient equation preprint version wrong function makeclover tempsdim temp temps temp temps temp temps dim dim continue loops makecloverloop dim evaluategaugelinks temploopstemptemp tracelessantihermitian temp function calcenergydensity tempsdim temp temps dim dim continue mul temp real tr temp return nv calculate energy density function test nxnynzntnc dim nwing initializegaugefields ncnwingnxnynzntcondition cold filename conftxt nxnynznt loadbridgetext filenamenc load configuration file temp similar temp similar temp similar println clover operator array typeofu undefdimdim dim dim similar comb factor comb nv nc time plaqt calculateplaquette temptemp factor println plaqt plaqt gradientflow eps itrj flow makeclover temptemptempdim calcenergydensity temptemptempdim plaqt calculateplaquette temptemp factor println itrj itrj plaqt plaqt nx ny nz nt nc test nxnynzntnc calculating actions calculate actions packages fixed gauge fields introduce concenpt scalarvalued neural network gauge fields using gaugefields using linearalgebra function test nx ny nz nt nwing dim nc initializegaugefields ncnwingnxnynzntcondition cold gaugeaction gaugeaction empty network plaqloop makeloopsfromname plaquette plaquette loops append plaqloopplaqloop hermitian conjugate loops action real coefficient push gaugeactionplaqloop gaugeaction uout evaluategaugeactionuntraced gaugeaction println tr uout test output structure actions gaugefields num terms st term coefficient st loop uuedaggeredagger nd loop uuedaggeredagger rd loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger im calculate derivatives easily calculate matrix derivative actions matrix derivative defined fracpartial partial umuij fracpartial partial umuji calculate dsdu calcdsdu gaugeaction calcdsdu dsdugaugeaction hybrid monte carlo matrix derivative hybrid monte carlo method simple code follows using gaugefields using linearalgebra function mdtest gaugeactiondim initializetagaugefields tracelessantihermitian gauge fields nc real coefficients uold similar substituteu uold mdsteps temp similar temp similar comb factor comb nv nc numaccepted numtrj itrj numtrj accepted mdstep gaugeactionmdstepsdimuold numaccepted ifelse accepted plaqt calculateplaquette temptemp factor println itrj plaqt plaqt println acceptance ratio numaccepted itrj define functions function calcaction gaugeaction nc nc sg evaluategaugeaction gaugeaction nc evaluategaugeactiongaugeaction trevaluategaugeactionuntracedgaugeaction sp sp sg return real function mdstep gaugeactionmdstepsdimuold mdsteps gaussdistribution sold calcaction gaugeaction substituteu uold itrj mdsteps uupdate dimgaugeaction pupdate dimgaugeaction uupdate dimgaugeaction snew calcaction gaugeaction println sold sold snew snew println snew sold snew sold ratio min exp snew sold rand ratio substituteu uold return false else return true function uupdate dimgaugeaction temps gettemporarygaugefields gaugeaction temp temps temp temps expu temps temps dim exptu expu temptemp mul expu substituteu function pupdate dimgaugeaction factordsdu nc nc temps gettemporarygaugefields gaugeaction dsdu temps factor nc dim calcdsdu dsdugaugeaction mul temps dsdu dsdu tracelessantihermitianadd factortemps hmc function test nx ny nz nt nwing dim nc initializegaugefields ncnwingnxnynzntcondition cold gaugeaction gaugeaction plaqloop makeloopsfromname plaquette append plaqloopplaqloop add hermitian conjugate real re push gaugeactionplaqloop gaugeaction mdtest gaugeactiondim test stout smearing stout smearing urm fat cal smearing regarded gauge covariant neural networks tomiya nagai arxiv network constructed follows nn covneuralnet layername plaquette st stoutlayer layername push nnst nn output num layers st layer stout num terms st term coefficient st loop uuedaggeredagger nd loop uuedaggeredagger rd loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger th loop uuedaggeredagger ragard smearing neural networks calculate derivative propergation techques fracpartial partial left fracdsdurm fat example using gaugefields using wilsonloop function stoutsmearing nxnynzntnc nwing dim initializegaugefields ncnwingnxnynzntcondition hot nxnynznt comb factor comb nv nc temp similar temp similar plaqt calculateplaquette temptemp factor println plaqt plaqt nn covneuralnet layername plaquette st stoutlayer layername push nnst nn time uoutuoutmulti calcsmearedu nn plaqt calculateplaquette uouttemptemp factor println plaqt plaqt gaugeaction gaugeaction plaqloop makeloopsfromname plaquette append plaqloopplaqloop add hermitian conjugate real re push gaugeactionplaqloop dsdu similar dim dsdu calcdsdu gaugeaction time dsdubare backprop dsdunnuoutmulti nx ny nz nt nc stoutsmearing nxnynzntnc hmc stout smearing derivatives hmc stout smearing code shown follows using gaugefields using linearalgebra function mdtest gaugeactiondimnn initializetagaugefields tracelessantihermitian gauge fields nc real coefficients uold similar dsdu similar substituteu uold mdsteps temp similar temp similar comb factor comb nv nc numaccepted numtrj itrj numtrj accepted mdstep gaugeactionmdstepsdimuoldnndsdu numaccepted ifelse accepted plaqt calculateplaquette temptemp factor println itrj plaqt plaqt println acceptance ratio numaccepted itrj function calcaction gaugeaction nc nc sg evaluategaugeaction gaugeaction nc evaluategaugeactiongaugeaction trevaluategaugeactionuntracedgaugeaction sp sp sg return real function mdstep gaugeactionmdstepsdimuoldnndsdu mdsteps gaussdistribution uoutuoutmulti calcsmearedu nn sold calcaction gaugeactionuout substituteu uold itrj mdsteps uupdate dimgaugeaction pupdate dimgaugeactiondsdunn uupdate dimgaugeaction uoutuoutmulti calcsmearedu nn snew calcaction gaugeactionuout println sold sold snew snew println snew sold snew sold accept exp sold snew rand accept true rand ratio substituteu uold return false else return true function uupdate dimgaugeaction temps gettemporarygaugefields gaugeaction temp temps temp temps expu temps temps dim exptu expu temptemp mul expu substituteu function pupdate dimgaugeactiondsdunn factordsdu nc nc factor nc temps gettemporarygaugefields gaugeaction uoutuoutmulti calcsmearedu nn dim calcdsdu dsdugaugeactionuout dsdubare backprop dsdunnuoutmulti dim mul temps dsdubare dsdu tracelessantihermitianadd factortemps function test nx ny nz nt nwing dim nc initializegaugefields ncnwingnxnynzntcondition hot gaugeaction gaugeaction plaqloop makeloopsfromname plaquette append plaqloopplaqloop push gaugeactionplaqloop gaugeaction nxnynznt nn covneuralnet layername plaquette st stoutlayer layername push nnst mdtest gaugeactiondimnn test