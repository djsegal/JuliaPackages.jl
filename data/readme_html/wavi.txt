<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text">
<h1 align="center" dir="auto"><a id="user-content---️️️-wavijl-️️️" class="anchor" aria-hidden="true" href="#--️️️-wavijl-️️️"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>
  <g-emoji class="g-emoji" alias="snowman_with_snow" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2603.png">☃️</g-emoji><g-emoji class="g-emoji" alias="mountain_snow" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3d4.png">🏔️</g-emoji><g-emoji class="g-emoji" alias="snowflake" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2744.png">❄️</g-emoji> WAVI.jl <g-emoji class="g-emoji" alias="snowflake" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2744.png">❄️</g-emoji><g-emoji class="g-emoji" alias="mountain_snow" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3d4.png">🏔️</g-emoji><g-emoji class="g-emoji" alias="snowman_with_snow" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2603.png">☃️</g-emoji>
</h1>
<p dir="auto">WAVI (Wavelet-based Adaptive-grid Vertically-integrated Ice-model) is a fast and friendly ice sheet model, written in Julia.</p>
<h2 dir="auto"><a id="user-content-contents" class="anchor" aria-hidden="true" href="#contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contents</h2>
<ul dir="auto">
<li><a href="#installation-instructions">Installation instructions</a></li>
<li><a href="#running-your-first-model">Running your first model</a></li>
<li><a href="#getting-help">Getting help</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#credits">Credits</a></li>
</ul>
<h2 dir="auto"><a id="user-content-installation-instructions" class="anchor" aria-hidden="true" href="#installation-instructions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation instructions</h2>
<p dir="auto">You can install the latest version of WAVI using Julia's in-build package manager:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt;using Pkg
julia&gt;Pkg.add(PackageSpec(url=&quot;https://github.com/RJArthern/WAVI.jl.git&quot;))"><pre>julia<span class="pl-k">&gt;</span><span class="pl-k">using</span> Pkg
julia<span class="pl-k">&gt;</span>Pkg<span class="pl-k">.</span><span class="pl-c1">add</span>(<span class="pl-c1">PackageSpec</span>(url<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>https://github.com/RJArthern/WAVI.jl.git<span class="pl-pds">"</span></span>))</pre></div>
<p dir="auto">Note that WAVI requires Julia v1.5 or newer.</p>
<p dir="auto">Updating WAVI is also achieved using the package manager</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt;using Pkg
julia&gt;Pkg.update(&quot;WAVI&quot;))"><pre>julia<span class="pl-k">&gt;</span><span class="pl-k">using</span> Pkg
julia<span class="pl-k">&gt;</span>Pkg<span class="pl-k">.</span><span class="pl-c1">update</span>(<span class="pl-s"><span class="pl-pds">"</span>WAVI<span class="pl-pds">"</span></span>))</pre></div>
<p dir="auto">Note that updating should be done with care as WAVI is still developing rapidly; while we aim to keep breaking changes to a minimum, this cannot be guaranteed at present.</p>
<h2 dir="auto"><a id="user-content-running-your-first-model" class="anchor" aria-hidden="true" href="#running-your-first-model"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running your first model</h2>
<p dir="auto">Let's run the MISMIP+ experiment (<a href="http://www.climate-cryosphere.org/activities/targeted/153-misomip/1412-mismip-plus" rel="nofollow">http://www.climate-cryosphere.org/activities/targeted/153-misomip/1412-mismip-plus</a>), the latest ice sheet model intercomparison experiment. We'll use a grid with 80x10 grid points and 8km resolution in both dimensions, and 4 vertical levels. We'll run the model to steady state for 10000 years with a timestep of 0.5 years. Since we're only interested in the steady state, we'll speed up the code by only doing one iteration of the velocity solve per timestep:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using WAVI 
grid = Grid(nx = 80, ny = 10, nσ = 4, dx = 8000., dy = 8000., u_iszero = [&quot;north&quot;], v_iszero = [&quot;east&quot;, &quot;west&quot;])
bed = WAVI.mismip_plus_bed 
params = Params(accumulation_rate = 0.3)
solver_params =  SolverParams(maxiter_picard = 1)
model = Model(grid = grid,bed_elevation = bed, params = params)
timestepping_params = TimesteppingParams(dt = 0.5, end_time = 10000.)
simulation = Simulation(model = model, timestepping_params = timestepping_params)
run_simulation!(simulation)"><pre><span class="pl-k">using</span> WAVI 
grid <span class="pl-k">=</span> <span class="pl-c1">Grid</span>(nx <span class="pl-k">=</span> <span class="pl-c1">80</span>, ny <span class="pl-k">=</span> <span class="pl-c1">10</span>, nσ <span class="pl-k">=</span> <span class="pl-c1">4</span>, dx <span class="pl-k">=</span> <span class="pl-c1">8000.</span>, dy <span class="pl-k">=</span> <span class="pl-c1">8000.</span>, u_iszero <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>north<span class="pl-pds">"</span></span>], v_iszero <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>east<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>west<span class="pl-pds">"</span></span>])
bed <span class="pl-k">=</span> WAVI<span class="pl-k">.</span>mismip_plus_bed 
params <span class="pl-k">=</span> <span class="pl-c1">Params</span>(accumulation_rate <span class="pl-k">=</span> <span class="pl-c1">0.3</span>)
solver_params <span class="pl-k">=</span>  <span class="pl-c1">SolverParams</span>(maxiter_picard <span class="pl-k">=</span> <span class="pl-c1">1</span>)
model <span class="pl-k">=</span> <span class="pl-c1">Model</span>(grid <span class="pl-k">=</span> grid,bed_elevation <span class="pl-k">=</span> bed, params <span class="pl-k">=</span> params)
timestepping_params <span class="pl-k">=</span> <span class="pl-c1">TimesteppingParams</span>(dt <span class="pl-k">=</span> <span class="pl-c1">0.5</span>, end_time <span class="pl-k">=</span> <span class="pl-c1">10000.</span>)
simulation <span class="pl-k">=</span> <span class="pl-c1">Simulation</span>(model <span class="pl-k">=</span> model, timestepping_params <span class="pl-k">=</span> timestepping_params)
<span class="pl-c1">run_simulation!</span>(simulation)</pre></div>
<p dir="auto">It's as easy as that: entry into the state of the art ice sheet model intercomparison in nine lines of code <g-emoji class="g-emoji" alias="sunglasses" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png">😎</g-emoji></p>
<h2 dir="auto"><a id="user-content-getting-help" class="anchor" aria-hidden="true" href="#getting-help"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting help</h2>
<h2 dir="auto"><a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contributing</h2>
<h2 dir="auto"><a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Credits</h2>
<p dir="auto">This package was initiated by Rob Arthern (<a href="https://github.com/RJArthern">https://github.com/RJArthern</a>) and is currently maintained by Rob and Alex Bradley (<a href="https://github.com/alextbradley">https://github.com/alextbradley</a>)</p>
</article></div>