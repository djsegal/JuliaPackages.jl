<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1><a id="user-content-compathelper" class="anchor" aria-hidden="true" href="#compathelper"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CompatHelper</h1>
<p><a href="https://travis-ci.com/bcbi/CompatHelper.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/7b620f3038e7a122e5df8a65d0fbf0968993fc68/68747470733a2f2f7472617669732d63692e636f6d2f626362692f436f6d70617448656c7065722e6a6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.com/bcbi/CompatHelper.jl.svg?branch=master" style="max-width:100%;"></a>
<a href="https://codecov.io/gh/bcbi/CompatHelper.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/97ee2db5c2fb0bf7b05b324576fa27f7ec8663a6/68747470733a2f2f636f6465636f762e696f2f67682f626362692f436f6d70617448656c7065722e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="Codecov" data-canonical-src="https://codecov.io/gh/bcbi/CompatHelper.jl/branch/master/graph/badge.svg" style="max-width:100%;"></a></p>
<p>CompatHelper is a Julia package that helps you keep your <code>[compat]</code> entries up-to-date.</p>
<p>Whenever one of your package's dependencies releases a new version, CompatHelper opens a pull request on your repository that modifies your <code>[compat]</code> entry to reflect the newly released version.</p>
<p>CompatHelper is maintained by the Brown Center for Biomedical Informatics (BCBI) at Brown University in Providence, Rhode Island.</p>
<ul>
<li>GitHub: <a href="https://github.com/bcbi">https://github.com/bcbi</a></li>
<li>Website: <a href="https://brown.edu/go/bcbi" rel="nofollow">https://brown.edu/go/bcbi</a></li>
</ul>
<h2><a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of Contents</h2>
<ul>
<li><a href="#1-installation">1. Installation</a>
<ul>
<li><a href="#11-create-the-workflow-file-required">1.1. Create the workflow file (required)</a></li>
<li><a href="#12-set-up-the-ssh-deploy-key-optional">1.2. Set up the SSH deploy key (optional)</a></li>
</ul>
</li>
<li><a href="#2-configuration-options">2. Configuration option</a>
<ul>
<li><a href="#21-packages-in-subdirectories">2.1. Packages in subdirectories</a></li>
<li><a href="#22-custom-registries">2.2. Custom registries</a></li>
<li><a href="#23-custom-pre-commit-hooks">2.3. Custom pre-commit hooks</a></li>
<li><a href="#24-overriding-the-default-branch">2.4. Overriding the default branch</a></li>
</ul>
</li>
<li><a href="#3-troubleshooting">3. Troubleshooting</a></li>
<li><a href="#4-acknowledgements">4. Acknowledgements</a></li>
</ul>
<h2><a id="user-content-1-installation" class="anchor" aria-hidden="true" href="#1-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. Installation</h2>
<h3><a id="user-content-11-create-the-workflow-file-required" class="anchor" aria-hidden="true" href="#11-create-the-workflow-file-required"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1.1 Create the workflow file (required)</h3>
<p>Create a file at <code>.github/workflows/CompatHelper.yml</code> with the following contents:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">name</span>: <span class="pl-s">CompatHelper</span>

<span class="pl-ent">on</span>:
  <span class="pl-ent">schedule</span>:
    - <span class="pl-ent">cron</span>: <span class="pl-s"><span class="pl-pds">'</span>00 00 * * *<span class="pl-pds">'</span></span>

<span class="pl-ent">jobs</span>:
  <span class="pl-ent">CompatHelper</span>:
    <span class="pl-ent">runs-on</span>: <span class="pl-s">ubuntu-latest</span>
    <span class="pl-ent">steps</span>:
      - <span class="pl-ent">name</span>: <span class="pl-s">Pkg.add("CompatHelper")</span>
        <span class="pl-ent">run</span>: <span class="pl-s">julia -e 'using Pkg; Pkg.add("CompatHelper")'</span>
      - <span class="pl-ent">name</span>: <span class="pl-s">CompatHelper.main()</span>
        <span class="pl-ent">env</span>:
          <span class="pl-ent">GITHUB_TOKEN</span>: <span class="pl-s">${{ secrets.GITHUB_TOKEN }}</span>
          <span class="pl-ent">COMPATHELPER_PRIV</span>: <span class="pl-s">${{ secrets.COMPATHELPER_PRIV }}  </span><span class="pl-c"><span class="pl-c">#</span> optional</span>
        <span class="pl-ent">run</span>: <span class="pl-s">julia -e 'using CompatHelper; CompatHelper.main()'</span></pre></div>
<p>CompatHelper is now installed as a GitHub Action on your repository. But wait: do you fall into any of the following categories:</p>
<ol>
<li>You use GitHub Actions to test your package using continuous integration (CI).</li>
<li>You use GitHub Actions to build and deploy the documentation for your package.</li>
</ol>
<p>If you do not fall into any of those categories, then you are done! There is nothing more that you need to do.</p>
<p>But if you do fall into one or more of those categories, then you also need to set up an SSH deploy key for CompatHelper to use. Read on:</p>
<h3><a id="user-content-12-set-up-the-ssh-deploy-key-optional" class="anchor" aria-hidden="true" href="#12-set-up-the-ssh-deploy-key-optional"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1.2. Set up the SSH deploy key (optional)</h3>
<p><em>Note: if you already have an SSH deploy key set up in a secret, e.g. <code>DOCUMENTER_KEY</code> or <code>FRANKLIN_PRIV</code>, you can reuse it. See the "Advanced notes" section below.</em></p>
<h4><a id="user-content-121-motivation" class="anchor" aria-hidden="true" href="#121-motivation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1.2.1. Motivation</h4>
<p>The default CompatHelper setup has one flaw: the pull requests that CompatHelper opens will not trigger any other GitHub Actions.</p>
<p>Consider the following situations:</p>
<ol>
<li>You use GitHub Actions to test your package using continuous integration (CI).</li>
<li>You use GitHub Actions to build and deploy the documentation for your package.</li>
</ol>
<p>If any of those situations apply to you, then you will need to set up an SSH deploy key for CompatHelper. Once you have set up an SSH deploy key for CompatHelper, the pull requests that CompatHelper opens will trigger all of the usual GitHub Actions.</p>
<p>If none of those situations apply to you, then you don't need to set up an SSH deploy key for CompatHelper.</p>
<h4><a id="user-content-122-instructions-for-setting-up-the-ssh-deploy-key" class="anchor" aria-hidden="true" href="#122-instructions-for-setting-up-the-ssh-deploy-key"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1.2.2. Instructions for setting up the SSH deploy key</h4>
<p>It is easy to set up an SSH deploy key for CompatHelper. Here are the instructions:</p>
<ol>
<li><code>ssh-keygen -N "" -f compathelper_key</code></li>
<li><code>cat compathelper_key # This is the private key. Copy this to your clipboard.</code></li>
<li>Go to the GitHub page for your package's repository, click on the <strong>Settings</strong> tab, then click on <strong>Secrets</strong>, and then click on <strong>Add new secret</strong>. Name the secret <code>COMPATHELPER_PRIV</code>. For the contents, paste in the private key that you copied in the previous step.</li>
<li><code>cat compathelper_key.pub # This is the public key. Copy this to your clipboard.</code></li>
<li>Go to the GitHub page for your package's repository, click on the <strong>Settings</strong> tab, then click on <strong>Deploy keys</strong>, and then click on <strong>Add deploy key</strong>. Name the deploy key <code>COMPATHELPER_PUB</code>. For the contents, paste in the public key that you copied in the previous step. Make sure that you give the key <strong>write access</strong>.</li>
<li><code>rm -f compathelper_key compathelper_key.pub</code></li>
</ol>
<h4><a id="user-content-123-advanced-notes" class="anchor" aria-hidden="true" href="#123-advanced-notes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1.2.3. Advanced notes</h4>
<p>When you supply the private key, you can either provide the raw private key itself (as we did above), or you can provide the Base64-encoded form of the private key.</p>
<p>For example, if you already have a Base64-encoded private key saved as a secret, you can re-use it. If e.g. the secret is named <code>DOCUMENTER_KEY</code>, then simply replace the line that looks like this:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">COMPATHELPER_PRIV</span>: <span class="pl-s">${{ secrets.COMPATHELPER_PRIV }}</span></pre></div>
<p>with this line:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">COMPATHELPER_PRIV</span>: <span class="pl-s">${{ secrets.DOCUMENTER_KEY }}</span></pre></div>
<h2><a id="user-content-2-configuration-options" class="anchor" aria-hidden="true" href="#2-configuration-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. Configuration options</h2>
<h3><a id="user-content-21-packages-in-subdirectories" class="anchor" aria-hidden="true" href="#21-packages-in-subdirectories"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2.1. Packages in subdirectories</h3>
<p>By default, CompatHelper expects your git repository to contain a single package, and that the <code>Project.toml</code> for that package exists in the top-level directory. You can indicate that you want CompatHelper to process one or many packages that exist in subdirectories of the git repository by passing the <code>subdirs</code> keyword to the main function. For example:</p>
<div class="highlight highlight-source-julia"><pre>CompatHelper<span class="pl-k">.</span><span class="pl-c1">main</span>(; subdirs <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Subdir1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>very/deeply/nested/Subdir2<span class="pl-pds">"</span></span>])</pre></div>
<p>Note that the convention for specifying a top-level directory in the <code>subdirs</code> keyword is <code>[""]</code></p>
<h3><a id="user-content-22-custom-registries" class="anchor" aria-hidden="true" href="#22-custom-registries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2.2. Custom registries</h3>
<p>To use a list of custom registries instead of the General registry, use the <code>registries</code> keyword argument. For example:</p>
<div class="highlight highlight-source-julia"><pre>my_registries <span class="pl-k">=</span> [Pkg<span class="pl-k">.</span><span class="pl-c1">RegistrySpec</span>(name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>General<span class="pl-pds">"</span></span>,
                                  uuid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>23338594-aafe-5451-b93e-139f81909106<span class="pl-pds">"</span></span>,
                                  url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>https://github.com/JuliaRegistries/General.git<span class="pl-pds">"</span></span>),
                 Pkg<span class="pl-k">.</span><span class="pl-c1">RegistrySpec</span>(name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>BioJuliaRegistry<span class="pl-pds">"</span></span>,
                                  uuid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ccbd2cc2-2954-11e9-1ccf-f3e7900901ca<span class="pl-pds">"</span></span>,
                                  url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>https://github.com/BioJulia/BioJuliaRegistry.git<span class="pl-pds">"</span></span>)]

CompatHelper<span class="pl-k">.</span><span class="pl-c1">main</span>(; registries <span class="pl-k">=</span> my_registries)</pre></div>
<h3><a id="user-content-23-custom-pre-commit-hooks" class="anchor" aria-hidden="true" href="#23-custom-pre-commit-hooks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2.3. Custom pre-commit hooks</h3>
<p>CompatHelper supports running a custom function (called a "precommit hook") just before commiting changes. To provide a precommit hook, simple pass a zero-argument function as the first argument to <code>CompatHelper.main</code>.</p>
<h4><a id="user-content-231-default-precommit-hook" class="anchor" aria-hidden="true" href="#231-default-precommit-hook"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2.3.1. Default precommit hook</h4>
<p>If you do not specify a precommit hook, CompatHelper will run the default precommit hook (<code>CompatHelper.update_manifests</code>), which updates all <code>Manifest.toml</code> files in your repository.</p>
<h4><a id="user-content-232-examples" class="anchor" aria-hidden="true" href="#232-examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2.3.2. Examples</h4>
<h5><a id="user-content-example-1-disable-all-precommit-hooks" class="anchor" aria-hidden="true" href="#example-1-disable-all-precommit-hooks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example 1: Disable all precommit hooks</h5>
<p>If you want to disable all precommit hooks, simply pass a dummy function that does nothing:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">run</span>: <span class="pl-s">julia -e '</span>
  <span class="pl-s">using CompatHelper;</span>
  <span class="pl-s">CompatHelper.main( () -&gt; () );'</span></pre></div>
<h5><a id="user-content-example-2-print-a-logging-message" class="anchor" aria-hidden="true" href="#example-2-print-a-logging-message"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example 2: Print a logging message</h5>
<p>You can add functionality by passing your own zero-argument function to <code>CompatHelper.main</code>, like so:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">run</span>: <span class="pl-s">julia -e '</span>
  <span class="pl-s">using CompatHelper;</span>
  <span class="pl-s">CompatHelper.main() do;</span>
    <span class="pl-s">CompatHelper.update_manifests();</span>
    <span class="pl-s">println("I did it!");</span>
  <span class="pl-s">end;'</span></pre></div>
<p>This snippet uses <code>;</code> to specify the ends of lines, because according to YAML, the entire block of Julia code is a single line.
Also to note is that you cannot use <code>'</code> inside of your Julia command, since it's used to quote the Julia code.</p>
<p>A full example is available <a href="https://github.com/tkf/Kaleido.jl/blob/42f8125f42413ef21160575d870819bba33296d5/.github/workflows/CompatHelper.yml">here</a>.</p>
<h5><a id="user-content-example-3-only-update-the-manifesttoml-in-the-root-of-the-repository" class="anchor" aria-hidden="true" href="#example-3-only-update-the-manifesttoml-in-the-root-of-the-repository"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example 3: Only update the <code>Manifest.toml</code> in the root of the repository</h5>
<p>The following snippet tells CompatHelper to update the <code>Manifest.toml</code> file in the root of the repository but not any of the other <code>Manifest.toml</code> files. So, for example, <code>/Manifest.toml</code> will be updated, but <code>/docs/Manifest.toml</code>, <code>/examples/Manifest.toml</code>, and <code>/test/Manifest.toml</code> will not be updated.</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">run</span>: <span class="pl-s">julia -e 'using CompatHelper; CompatHelper.main( (; registries) -&gt; CompatHelper._update_manifests(String[pwd()]; registries = registries, delete_old_manifests = true) )'</span></pre></div>
<p>If the keyword argument <code>delete_old_manifests</code> is set to true, as in the above example, then CompatHelper
updates the Manifest.toml file by deleting the Manifest and running <code>Pkg.update()</code> in order to generate a new
one. If <code>delete_old_manifests=false</code>, then CompatHelper runs <code>Pkg.update()</code> without first deleting the Manifest.</p>
<h3><a id="user-content-24-overriding-the-default-branch" class="anchor" aria-hidden="true" href="#24-overriding-the-default-branch"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2.4. Overriding the default branch</h3>
<p>By default, CompatHelper will open pull requests against your repository's default branch. If you would like to override this behavior, set the <code>master_branch</code> keyword argument. For example:</p>
<div class="highlight highlight-source-julia"><pre>CompatHelper<span class="pl-k">.</span><span class="pl-c1">main</span>(; master_branch <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>my-custom-branch<span class="pl-pds">"</span></span>)</pre></div>
<h2><a id="user-content-3-troubleshooting" class="anchor" aria-hidden="true" href="#3-troubleshooting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Troubleshooting</h2>
<p>If CompatHelper is failing despite everything being setup correctly following the previous instructions, try to delete the <code>Manifest.toml</code> file from the <code>src</code> folder (and from the <code>test</code> folder if any). See this <a href="https://github.com/bcbi/CompatHelper.jl/issues/201">issue</a> for more details.</p>
<h2><a id="user-content-4-acknowledgements" class="anchor" aria-hidden="true" href="#4-acknowledgements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. Acknowledgements</h2>
<p>This work was supported in part by National Institutes of Health grants U54GM115677, R01LM011963, and R25MH116440. The content is solely the responsibility of the authors and does not necessarily represent the official views of the National Institutes of Health.</p>
</article></div>