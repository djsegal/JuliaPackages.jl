<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-projectionpursuitjl" class="anchor" aria-hidden="true" href="#projectionpursuitjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ProjectionPursuit.jl</h1>
<p dir="auto">Dimension reduction using projection pursuit in Julia.</p>
<p align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/xieyj17/ProjectionPursuit.jl/raw/main/docs/src/assets/logo.png"><img src="https://github.com/xieyj17/ProjectionPursuit.jl/raw/main/docs/src/assets/logo.png" width="200" style="max-width: 100%;"></a>
</p>
<p dir="auto"><a href="https://xieyj17.github.io/ProjectionPursuit.jl/" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="Stable" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a>
<a href="https://app.travis-ci.com/xieyj17/ProjectionPursuit.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/70612407bade1ee3aa5733743747b8d5504ab322cb22161b307460ed67df74ce/68747470733a2f2f6170702e7472617669732d63692e636f6d2f786965796a31372f50726f6a656374696f6e507572737569742e6a6c2e7376673f6272616e63683d6d61696e" alt="Build Status" data-canonical-src="https://app.travis-ci.com/xieyj17/ProjectionPursuit.jl.svg?branch=main" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/xieyj17/ProjectionPursuit.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/3ba0f987ae57ba32988a2e5f43dae9db0d17ba2b041bdd9ba06fa9c3e0cddcb0/68747470733a2f2f636f6465636f762e696f2f67682f786965796a31372f50726f6a656374696f6e507572737569742e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e737667" alt="Coverage" data-canonical-src="https://codecov.io/gh/xieyj17/ProjectionPursuit.jl/branch/main/graph/badge.svg" style="max-width: 100%;"></a>
<a href="http://hdl.handle.net/10012/16710" rel="nofollow"><img src="https://camo.githubusercontent.com/38256629d66e5c5858c1bedbc329d83e5a8b0de42e694c6d4e0055b9c7dfa92c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5265666572656e63652d6874747025334125324625324668646c2e68616e646c652e6e6574253246313030313225324631363731302d627269676874677265656e" alt="Reference" data-canonical-src="https://img.shields.io/badge/Reference-http%3A%2F%2Fhdl.handle.net%2F10012%2F16710-brightgreen" style="max-width: 100%;"></a></p>
<p dir="auto">(I know the math notation below looks crappy... It's the year of 2022 and GitHub still doesn't support LaTeX...smh)</p>
<h1 dir="auto"><a id="user-content-tldr" class="anchor" aria-hidden="true" href="#tldr"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Tl;dr</h1>
<h2 dir="auto"><a id="user-content-what-does-projection-pursuit-do" class="anchor" aria-hidden="true" href="#what-does-projection-pursuit-do"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What does projection pursuit do?</h2>
<p dir="auto">Simply put, it is complementary to the good old PCA. It allows you to find a lower-dimensional representation of the original data according to your specified objective function (compared with PCA which is restricted to the sample variance). I intended to say replace or substitute PCA but I also want to be humble here because there is a good chance that I might be horribly wrong.</p>
<h2 dir="auto"><a id="user-content-why-using-julia" class="anchor" aria-hidden="true" href="#why-using-julia"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Why using Julia?</h2>
<p dir="auto">Itâ€™s lightning-fast. Enough said.</p>
<h2 dir="auto"><a id="user-content-what-is-the-next-step" class="anchor" aria-hidden="true" href="#what-is-the-next-step"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What is the next step?</h2>
<p dir="auto">First thing is to continue improving the computational efficiency. It is always challenging to search in a high-dimensional space. The current version supports multi-threading, but I am still learning how to handle parallelization in Julia properly. Potential GPU support is also on my to-do list. Another thing is to develop several peripheral packages built upon ProjectionPursuit.jl to demonstrate how it can be applied in practice.</p>
<h1 dir="auto"><a id="user-content-what-is-projection-pursuit" class="anchor" aria-hidden="true" href="#what-is-projection-pursuit"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What is <em><strong>Projection Pursuit</strong></em>?</h1>
<p dir="auto">This terminology might be new to you, but it has been discussed among statisticians since the 70s, including the <em>great</em> John Tukey.</p>
<p dir="auto">To understand what is <em>projection pursuit</em>, we should first revist the definition of principal component analysis (PCA).</p>
<p dir="auto">For a given d-dimensional unit sphere <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=u \in U^{d}"><img src="https://render.githubusercontent.com/render/math?math=u \in U^{d}" style="max-width: 100%;"></a>, let <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=Q(u)"><img src="https://render.githubusercontent.com/render/math?math=Q(u)" style="max-width: 100%;"></a> be the sample variance of the projection scores <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=\langle x_1, u \rangle, \ldots, \langle x_n, u \rangle"><img src="https://render.githubusercontent.com/render/math?math=\langle x_1, u \rangle, \ldots, \langle x_n, u \rangle" style="max-width: 100%;"></a>, where <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=\langle \cdot \rangle"><img src="https://render.githubusercontent.com/render/math?math=\langle \cdot \rangle" style="max-width: 100%;"></a> is the inner product. Then PCA tries to find the projection directions that maximize the variance of these projection scores:
<a target="_blank" rel="noopener noreferrer" href="/docs/src/assets/pca.png"><img src="/docs/src/assets/pca.png" alt="pca" style="max-width: 100%;"></a></p>
<p dir="auto">And the definition for <em>projection pursuit</em> is very straight forward. Instead of defining <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=Q(u)"><img src="https://render.githubusercontent.com/render/math?math=Q(u)" style="max-width: 100%;"></a> to be the sample variance of those scalar projection scores, we allow it to be an arbitrary function that is aligned with the exact problem we want to solve. Hence, PCA is just a special case of <em>projection pursuit</em>, when we are only interested in the variance of the data.</p>
<h1 dir="auto"><a id="user-content-why-you-need-projection-pursuit" class="anchor" aria-hidden="true" href="#why-you-need-projection-pursuit"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Why you need projection pursuit?</h1>
<p dir="auto">You may ask "why bother allowing an arbitrary definition for the objective function <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=Q(u)"><img src="https://render.githubusercontent.com/render/math?math=Q(u)" style="max-width: 100%;"></a>?". People seem to be happy using PCA for most of the dimension reduction tasks in the past century.</p>
<p dir="auto">But I believe a better question should be "why <a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=Q(u)"><img src="https://render.githubusercontent.com/render/math?math=Q(u)" style="max-width: 100%;"></a> has to be a measure of variance?". When doing dimension reduction, the projection direction should be directly related to the problem you are working with, rather than blindly using variance for all cases. It's like if you ask me what is 2* 3, no matter how closely is addition associated with multiplication, no matter how 5 is close to 6, and not matter how faster is '+' than '*', the correct answer from me should always be 2*3=6 instead of 2+3=5.</p>
<p dir="auto">Let me try to convince you why PCA should be concerning with my scratchy logo as another exmaple. You can find random points with three different colors: green, purple, and red. Assume we are some poor creatures who can only process information of one dimension, then the way we understand these colored dots solely depends on how we conduct the dimension reduction for the 2-D data. If the goal is to understand how many clusters are there, but we blindly apply PCA, for which the projection direction is indicated By the blue line on the right. Then the three colored lines on the right show how three clusters would look like after doing PCA. Obviously it's a disaster. They mixed together and there is no way you can understand the clustering structure.</p>
<p dir="auto">Projection pursuit to the rescue! Clearly the optimal way is to project the data onto the black line in the bottom. In this case we can set the objective function to be the distance between clusters. And you can easily tell that the three clusters are well seperated.</p>
<p dir="auto">I believe for statisticians, or data scientists or anyone who need to do a dimension reduction, most of the day-to-day problems they are facing do not only aligned with variance. There could be a clear objective function, whether it's prediction error or the level of data drifting or skewness and kurtosis, all these objective functions should be incorporated into the dimension reduction process. The only reason you should to use PCA is when you can explicitly state that your problem is only about the variance of the data.</p>
<h1 dir="auto"><a id="user-content-how-to-use-this-package" class="anchor" aria-hidden="true" href="#how-to-use-this-package"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How to use this package?</h1>
<p dir="auto">It's simple. Just use it as PCA, but feed it with an objective function. Here is a toy exmaple.</p>
<p dir="auto">To install the package:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using Pkg
Pkg.add(&quot;ProjectionPursuit&quot;)
using ProjectionPursuit"><pre><span class="pl-k">using</span> Pkg
Pkg<span class="pl-k">.</span><span class="pl-c1">add</span>(<span class="pl-s"><span class="pl-pds">"</span>ProjectionPursuit<span class="pl-pds">"</span></span>)
<span class="pl-k">using</span> ProjectionPursuit</pre></div>
<p dir="auto">Let's generate the data first with the secret data generating process:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using Random
using Distributions
using LinearAlgebra
Random.seed!(12345);
N=1500
gamma_d = Gamma(2,1);
gamma_data = rand(gamma_d, N);
n=35;
diag = collect(n+1:-1:2);
diag = diag.^2;
D = Matrix(Diagonal(diag)); 
gaussian_d = MvNormal(zeros(n), D);
gaussian_data = rand(gaussian_d, N);
data = hcat(gaussian_data', gamma_data);"><pre><span class="pl-k">using</span> Random
<span class="pl-k">using</span> Distributions
<span class="pl-k">using</span> LinearAlgebra
Random<span class="pl-k">.</span><span class="pl-c1">seed!</span>(<span class="pl-c1">12345</span>);
N<span class="pl-k">=</span><span class="pl-c1">1500</span>
gamma_d <span class="pl-k">=</span> <span class="pl-c1">Gamma</span>(<span class="pl-c1">2</span>,<span class="pl-c1">1</span>);
gamma_data <span class="pl-k">=</span> <span class="pl-c1">rand</span>(gamma_d, N);
n<span class="pl-k">=</span><span class="pl-c1">35</span>;
diag <span class="pl-k">=</span> <span class="pl-c1">collect</span>(n<span class="pl-k">+</span><span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-k">-</span><span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">2</span>);
diag <span class="pl-k">=</span> diag<span class="pl-k">.^</span><span class="pl-c1">2</span>;
D <span class="pl-k">=</span> <span class="pl-c1">Matrix</span>(<span class="pl-c1">Diagonal</span>(diag)); 
gaussian_d <span class="pl-k">=</span> <span class="pl-c1">MvNormal</span>(<span class="pl-c1">zeros</span>(n), D);
gaussian_data <span class="pl-k">=</span> <span class="pl-c1">rand</span>(gaussian_d, N);
data <span class="pl-k">=</span> <span class="pl-c1">hcat</span>(gaussian_data<span class="pl-k">'</span>, gamma_data);</pre></div>
<p dir="auto">Let me explain what happened above. The 36-dimensional random vector is composed of 35 independent Gaussian random variables with standard deviation from 36 to 2, and a Gamma(2,1) random variable with standard deviation of 2. We generate 500 samples of such random vectors.</p>
<p dir="auto">Now suppose our goal is to understand whether the data is skewed or not. Clearly the reasonable is a measure of skewness. Here we use the square of skewness as our objective function.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="function snu(data::Matrix{Float64}, dir::Vector{Float64})::Float64
    n, _ = size(data)
    proj = data * dir
    sk = skewness(proj)^2
    return sk
end"><pre><span class="pl-k">function</span> <span class="pl-en">snu</span>(data<span class="pl-k">::</span><span class="pl-c1">Matrix{Float64}</span>, dir<span class="pl-k">::</span><span class="pl-c1">Vector{Float64}</span>)<span class="pl-k">::</span><span class="pl-c1">Float64</span>
    n, _ <span class="pl-k">=</span> <span class="pl-c1">size</span>(data)
    proj <span class="pl-k">=</span> data <span class="pl-k">*</span> dir
    sk <span class="pl-k">=</span> <span class="pl-c1">skewness</span>(proj)<span class="pl-k">^</span><span class="pl-c1">2</span>
    <span class="pl-k">return</span> sk
<span class="pl-k">end</span></pre></div>
<p dir="auto">Then we just feed the data and objective function to <code>projection_pursuit</code>, and tell it that we need the first three dimension.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using ProjectionPursuit
res = projection_pursuit(data, snu, 3)"><pre><span class="pl-k">using</span> ProjectionPursuit
res <span class="pl-k">=</span> <span class="pl-c1">projection_pursuit</span>(data, snu, <span class="pl-c1">3</span>)</pre></div>
<p dir="auto">Let's project the data onto the first direction, and compare the density function with that of the Gamma component to see how well projection pursuit can reveal the relevant component of the data:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/src/assets/gamma_pp_35.png"><img src="/docs/src/assets/gamma_pp_35.png" alt="gamma_pp" style="max-width: 100%;"></a></p>
<p dir="auto">And just in case you are curious what if we use PCA, here is the comparison of density functions. PCA just tells you what is the direction with largest variance, and it totally misses the skewed part. Not surprising at all!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/src/assets/gamma_pca_35.png"><img src="/docs/src/assets/gamma_pca_35.png" alt="gamma_pca" style="max-width: 100%;"></a></p>
</article></div>