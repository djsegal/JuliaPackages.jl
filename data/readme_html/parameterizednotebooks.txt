<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-parameterizednotebooks" class="anchor" aria-hidden="true" href="#parameterizednotebooks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ParameterizedNotebooks</h1>
<p dir="auto"><a href="https://github.com/marius311/ParameterizedNotebooks.jl/actions/workflows/runtests.yml"><img src="https://github.com/marius311/ParameterizedNotebooks.jl/actions/workflows/runtests.yml/badge.svg" alt="runtests" style="max-width: 100%;"></a></p>
<p dir="auto">Turn a Jupyter notebook or specific sections within a Jupyter notebook into a general purpose Julia function which can be run repeatedly from the same or other Julia sessions with different input arguments.</p>
<h2 dir="auto"><a id="user-content-install" class="anchor" aria-hidden="true" href="#install"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Install</h2>
<p dir="auto">Requires Julia 1.6 or above. From the Julia package prompt:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pkg&gt; add ParameterizedNotebooks"><pre class="notranslate"><code>pkg&gt; add ParameterizedNotebooks
</code></pre></div>
<h2 dir="auto"><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<p dir="auto">Best demonstrated with an example:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="examples/example.png"><img src="examples/example.png" alt="" style="max-width: 100%;"></a></p>
<p dir="auto">There are no limitations on what the notebook contains or how complex it is, only that the arguments which will be parameterized over are marked with <code>@nbparam name = val</code>. The <code>@nbparam</code> macro does nothing special when running the notebook normally in Jupyter, so above <code>seed</code> is set to <code>1</code> and execution proceeds as usual.</p>
<p dir="auto">You can mark code which should only run in Jupyter but will otherwise be skipped in the parameterized call (e.g. visualization) with <code>@nbonly</code>.</p>
<p dir="auto">You can return a value from the notebook with the <code>@nbreturn</code> macro. <code>@nbreturn</code> is also useful to return the parameterized call somewhere before the end of your notebook. Code cells below this are not run and can contain other code, even triggering the parameterized call itself from the same kernel/notebook, as in the above example.</p>
<h2 dir="auto"><a id="user-content-advanced" class="anchor" aria-hidden="true" href="#advanced"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Advanced</h2>
<p dir="auto">You can also select only certain sections from the notebook to run with the keyword argument <code>sections</code>. Sections should be delineated in the notebook with typical markdown headings. For example:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="ParameterizedNotebook(&quot;mynotebook.ipynb&quot;, sections=(&quot;Initialization&quot;, &quot;Compute result&quot;))"><pre><span class="pl-c1">ParameterizedNotebook</span>(<span class="pl-s"><span class="pl-pds">"</span>mynotebook.ipynb<span class="pl-pds">"</span></span>, sections<span class="pl-k">=</span>(<span class="pl-s"><span class="pl-pds">"</span>Initialization<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Compute result<span class="pl-pds">"</span></span>))</pre></div>
<p dir="auto">will run all code in the sections "Initialization" and "Compute result" and all of their subsections. If recursing into the subsections is undesired, also pass <code>recursive=false</code>. The <code>sections</code> argument should be a string matching a heading title exactly or a regex which matches a heading title, or a tuple of strings/regexs for matching multiple sections.</p>
<p dir="auto">When <code>sections</code> is provided, printing the <code>ParameterizedNotebook</code> shows a tree which can be used to verify the expected code will be run, e.g. you might see something like this:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; ParameterizedNotebook(&quot;mynotebook.ipynb&quot;, sections=(&quot;Init&quot;, &quot;Section B&quot;), recursive=false)

ParameterizedNotebook(&quot;mynotebook.ipynb&quot;) with parameters: (param1, param2)
□ ~
  ☒ Init
    ☒ …
  □ Section A
    □ Subsection A
  ☒ Section B
    ☒ …
    □ Subsection B"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">ParameterizedNotebook</span>(<span class="pl-s"><span class="pl-pds">"</span>mynotebook.ipynb<span class="pl-pds">"</span></span>, sections<span class="pl-k">=</span>(<span class="pl-s"><span class="pl-pds">"</span>Init<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Section B<span class="pl-pds">"</span></span>), recursive<span class="pl-k">=</span><span class="pl-c1">false</span>)

<span class="pl-c1">ParameterizedNotebook</span>(<span class="pl-s"><span class="pl-pds">"</span>mynotebook.ipynb<span class="pl-pds">"</span></span>) with parameters<span class="pl-k">:</span> (param1, param2)
□ <span class="pl-k">~</span>
  ☒ Init
    ☒ …
  □ Section A
    □ Subsection A
  ☒ Section B
    ☒ …
    □ Subsection B</pre></div>
<h2 dir="auto"><a id="user-content-details" class="anchor" aria-hidden="true" href="#details"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Details</h2>
<p dir="auto">The package is extremely simple and just reads the notebook file from disk and repeatedly <code>eval</code>'s all or a subset of the cells into <code>Main</code> (just as if you had run the cells in Jupyter), replacing <code>@nbparam</code> expressions with the appropriate value, skipping <code>@nbonly</code> expressions, and returning if it hits a <code>@nbreturn</code>.</p>
<h2 dir="auto"><a id="user-content-related" class="anchor" aria-hidden="true" href="#related"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Related</h2>
<p dir="auto">Similar to <a href="https://github.com/takluyver/nbparameterise">takluyver/nbparameterise</a>, <a href="https://github.com/tritemio/nbrun">tritemio/nbrun</a>, and <a href="https://github.com/nteract/papermill">nteract/papermill</a>, but more powerful because arbitrary objects, not just string representations, can be passed as parameters and returned from the notebooks. Also, much simpler to use and only requires decorating a few lines with macros. However, lacks the ability to generate "reports" with outputs filled in. Also similar to <a href="https://github.com/stevengj/NBInclude.jl">stevengj/NBInclude.jl</a> which I discovered after making this, which has some nice orthogonal features, but doesn't let you parameterize.</p>
</article></div>