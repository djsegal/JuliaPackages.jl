<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1><a id="user-content-parsimoniousjl" class="anchor" aria-hidden="true" href="#parsimoniousjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Parsimonious.jl</h1>
<p><a href="https://travis-ci.org/gitfoxi/Parsimonious.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/4706f739ccec073919fc49c43513abbf72339b2142134abcf66278c26ec45afe/68747470733a2f2f7472617669732d63692e6f72672f676974666f78692f50617273696d6f6e696f75732e6a6c2e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/gitfoxi/Parsimonious.jl.png" style="max-width:100%;"></a></p>
<p>A port of <a href="https://github.com/erikrose/parsimonious">Parsimonious</a>. Thanks, <a href="https://github.com/erikrose">Erik</a>, for composing an outstanding tool.</p>
<p>Porting Parsimonious to Julia is my Learn Julia project and it's been pretty interesting.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="using Parsimonious
import Parsimonious.visit
"><pre><span class="pl-k">using</span> Parsimonious
<span class="pl-k">import</span> Parsimonious<span class="pl-k">.</span>visit</pre></div>
<p>Sorry about <code>import Parsimonious.visit</code>. We're going to overload that function
shortly but we also want some default functionality.</p>
<p>The key is to remain calm and organized at all times. Otherwise parser
development will get away from you. Our Firmware Command DSL was designed by
some fuckwit to communicate with an HP 93k tester. It looks like this:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="FTST?
FTST P
SREC? (@)
SREC ACT,(@)
SVLR TIM,PRM,,&quot;Vdd&quot;,1.3; FTST?
SHIT? &quot;it's quoted&quot;,,(((FOO, BAR),(@@)),7,1.3),#9000000004asdf
"><pre><code>FTST?
FTST P
SREC? (@)
SREC ACT,(@)
SVLR TIM,PRM,,"Vdd",1.3; FTST?
SHIT? "it's quoted",,(((FOO, BAR),(@@)),7,1.3),#9000000004asdf
</code></pre></div>
<p>We'd like to get these commands into structure like:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="type FirmwareCommand
    command::String
    isquery::Bool
    parameters
end
"><pre>type FirmwareCommand
    command<span class="pl-k">::</span><span class="pl-c1">String</span>
    isquery<span class="pl-k">::</span><span class="pl-c1">Bool</span>
    parameters
<span class="pl-k">end</span></pre></div>
<p>We build on the regular expressions that we know and love. First, let's just
try to parse:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="FTST?
"><pre><code>FTST?
</code></pre></div>
<p>Into:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="FirmwareCommand(&quot;FTST&quot;,true,[])
"><pre><span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[])</pre></div>
<p>This is easily matched with a regex:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; match(r&quot;(\w{4})(\??)&quot;, &quot;FTST?&quot;)
RegexMatch(&quot;FTST?&quot;, 1=&quot;FTST&quot;, 2=&quot;?&quot;)
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">match</span>(<span class="pl-sr"><span class="pl-pds">r"</span>(<span class="pl-cce">\w</span>{4})(<span class="pl-cce">\?</span>?)<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>FTST?<span class="pl-pds">"</span></span>)
<span class="pl-c1">RegexMatch</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST?<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>)</pre></div>
<p>And almost as easily with a grammar:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="g = grammar&quot;&quot;&quot;
    statement = command isquery
    command = ~&quot;\w{4}&quot;
    isquery = &quot;?&quot;?
    &quot;&quot;&quot;
"><pre>g <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">grammar</span>"""</span></span>
<span class="pl-s">    statement = command isquery</span>
<span class="pl-s">    command = ~"<span class="pl-cce">\w</span>{4}"</span>
<span class="pl-s">    isquery = "?"?</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; tree = parse(g, &quot;FTST?&quot;)
1 ParentNode{:statement}                                                'FTST?'
  .  1 LeafNode{:command}                                                'FTST'
  .  5 ParentNode{:isquery}                                                 '?'
  .    .  5 LeafNode{:}                                                     '?'
"><pre>julia<span class="pl-k">&gt;</span> tree <span class="pl-k">=</span> <span class="pl-c1">parse</span>(g, <span class="pl-s"><span class="pl-pds">"</span>FTST?<span class="pl-pds">"</span></span>)
<span class="pl-c1">1</span> ParentNode{<span class="pl-c1">:statement</span>}                                                <span class="pl-s"><span class="pl-pds">'</span>FTST?<span class="pl-pds">'</span></span>
  .  <span class="pl-c1">1</span> LeafNode{<span class="pl-c1">:command</span>}                                                <span class="pl-s"><span class="pl-pds">'</span>FTST<span class="pl-pds">'</span></span>
  .  <span class="pl-c1">5</span> ParentNode{<span class="pl-c1">:isquery</span>}                                                 <span class="pl-s"><span class="pl-pds">'</span>?<span class="pl-pds">'</span></span>
  .    .  <span class="pl-c1">5</span> LeafNode{:}                                                     <span class="pl-s"><span class="pl-pds">'</span>?<span class="pl-pds">'</span></span></pre></div>
<p>It's a parse tree. The goal is to fold it up.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="type FwVis &lt;: NodeVisitor end
"><pre>type FwVis <span class="pl-k">&lt;:</span> <span class="pl-c1">NodeVisitor</span> <span class="pl-k">end</span></pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; debug_govisit(FwVis(), tree)
(&quot;FTST&quot;,(&quot;?&quot;,))
---------------------------------------------------------------------------------------------------------------
 . visit(::NodeVisitor,n::LeafNode{T})                       | command   | &quot;FTST&quot; -&gt; &quot;FTST&quot;                  | 
 .  . visit(::NodeVisitor,n::LeafNode{T})                    |           | &quot;?&quot; -&gt; &quot;?&quot;                        | 
 . visit(::NodeVisitor,n::ParentNode{T},visited_children...) | isquery   | &quot;?&quot; -&gt; (&quot;?&quot;,)                     | 
visit(::NodeVisitor,n::ParentNode{T},visited_children...)    | statement | &quot;FTST&quot;, (&quot;?&quot;,) -&gt; (&quot;FTST&quot;,(&quot;?&quot;,)) | 
---------------------------------------------------------------------------------------------------------------
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">debug_govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,))
<span class="pl-k">---------------------------------------------------------------------------------------------------------------</span>
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">NodeVisitor</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                       <span class="pl-k">|</span> command   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>                  <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">NodeVisitor</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                    <span class="pl-k">|</span>           <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>                        <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">NodeVisitor</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>) <span class="pl-k">|</span> isquery   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,)                     <span class="pl-k">|</span> 
<span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">NodeVisitor</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)    <span class="pl-k">|</span> statement <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>, (<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,)) <span class="pl-k">|</span> 
<span class="pl-k">---------------------------------------------------------------------------------------------------------------</span></pre></div>
<p><strong>Sorry if you're reading this on Github you'll have to scroll the debug left
and right to see it. It's pretty wide. I don't know what to do about that.</strong></p>
<p>We haven't defined any visit methods but we get two for free. These fold the
tree up into <code>("FTST",("?",))</code> which is almost useful, but not really what
we want. Let's redefine those free rules so we can see what they do.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::LeafNode) = nodetext(n)
visit(::FwVis, n::ParentNode, visited_children...) = visited_children
"><pre><span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">LeafNode</span>) <span class="pl-k">=</span> <span class="pl-c1">nodetext</span>(n)
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode</span>, visited_children<span class="pl-k">...</span>) <span class="pl-k">=</span> visited_children</pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; debug_govisit(FwVis(), tree)
(&quot;FTST&quot;,(&quot;?&quot;,))
---------------------------------------------------------------------------------------------------------
 . visit(::FwVis,n::LeafNode{T})                       | command   | &quot;FTST&quot; -&gt; &quot;FTST&quot;                  | 
 .  . visit(::FwVis,n::LeafNode{T})                    |           | &quot;?&quot; -&gt; &quot;?&quot;                        | 
 . visit(::FwVis,n::ParentNode{T},visited_children...) | isquery   | &quot;?&quot; -&gt; (&quot;?&quot;,)                     | 
visit(::FwVis,n::ParentNode{T},visited_children...)    | statement | &quot;FTST&quot;, (&quot;?&quot;,) -&gt; (&quot;FTST&quot;,(&quot;?&quot;,)) | 
---------------------------------------------------------------------------------------------------------
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">debug_govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,))
<span class="pl-k">---------------------------------------------------------------------------------------------------------</span>
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                       <span class="pl-k">|</span> command   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>                  <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                    <span class="pl-k">|</span>           <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>                        <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>) <span class="pl-k">|</span> isquery   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,)                     <span class="pl-k">|</span> 
<span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)    <span class="pl-k">|</span> statement <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>, (<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>,)) <span class="pl-k">|</span> 
<span class="pl-k">---------------------------------------------------------------------------------------------------------</span></pre></div>
<p>Works the same. The <code>LeafNode</code> rule just returns whatever text the leaf rule
matched. The <code>ParentNode</code> rule takes the text from one or more <code>LeafNode</code>s and
returns a list. The list is in order. That's important.</p>
<p>Now, let's put the visitor to work doing our bidding.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::ParentNode{:isquery}, questionmark) = questionmark == &quot;?&quot;
visit(::FwVis, n::ParentNode{:statement}, command::String, isquery::Bool) = FirmwareCommand(command, isquery, [])
"><pre><span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:isquery}</span>, questionmark) <span class="pl-k">=</span> questionmark <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statement}</span>, command<span class="pl-k">::</span><span class="pl-c1">String</span>, isquery<span class="pl-k">::</span><span class="pl-c1">Bool</span>) <span class="pl-k">=</span> <span class="pl-c1">FirmwareCommand</span>(command, isquery, [])</pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; debug_govisit(FwVis(), tree)
FirmwareCommand(&quot;FTST&quot;,true,[])
---------------------------------------------------------------------------------------------------------------------------------------
 . visit(::FwVis,n::LeafNode{T})                                       | command   | &quot;FTST&quot; -&gt; &quot;FTST&quot;                                | 
 .  . visit(::FwVis,n::LeafNode{T})                                    |           | &quot;?&quot; -&gt; &quot;?&quot;                                      | 
 . visit(::FwVis,n::ParentNode{:isquery},questionmark)                 | isquery   | &quot;?&quot; -&gt; true                                     | 
visit(::FwVis,n::ParentNode{:statement},command::String,isquery::Bool) | statement | &quot;FTST&quot;, true -&gt; FirmwareCommand(&quot;FTST&quot;,true,[]) | 
---------------------------------------------------------------------------------------------------------------------------------------
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">debug_govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[])
<span class="pl-k">---------------------------------------------------------------------------------------------------------------------------------------</span>
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                       <span class="pl-k">|</span> command   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>                                <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                    <span class="pl-k">|</span>           <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span>                                      <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:isquery}</span>,questionmark)                 <span class="pl-k">|</span> isquery   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>?<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">true</span>                                     <span class="pl-k">|</span> 
<span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statement}</span>,command<span class="pl-k">::</span><span class="pl-c1">String</span>,isquery<span class="pl-k">::</span><span class="pl-c1">Bool</span>) <span class="pl-k">|</span> statement <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>, <span class="pl-c1">true</span> <span class="pl-k">-&gt;</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]) <span class="pl-k">|</span> 
<span class="pl-k">---------------------------------------------------------------------------------------------------------------------------------------</span></pre></div>
<p>Cool. Now we're getting back <code>FirmwareCommand("FTST",true,[])</code> which is what we
wanted. Of course, you won't want to see the debug info when you're done:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; govisit(FwVis(), tree)
FirmwareCommand(&quot;FTST&quot;,true,[])
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[])</pre></div>
<p>Ya dig? Okay, now we add features to the language. The grammar should already
support:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="FTST
"><pre><code>FTST
</code></pre></div>
<p>Does it?</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; tree = parse(g, &quot;FTST&quot;)
1 ParentNode{:statement}                                                 'FTST'
  .  1 LeafNode{:command}                                                'FTST'
  .  5 LeafNode{:isquery}                                                    ''
"><pre>julia<span class="pl-k">&gt;</span> tree <span class="pl-k">=</span> <span class="pl-c1">parse</span>(g, <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>)
<span class="pl-c1">1</span> ParentNode{<span class="pl-c1">:statement</span>}                                                 <span class="pl-s"><span class="pl-pds">'</span>FTST<span class="pl-pds">'</span></span>
  .  <span class="pl-c1">1</span> LeafNode{<span class="pl-c1">:command</span>}                                                <span class="pl-s"><span class="pl-pds">'</span>FTST<span class="pl-pds">'</span></span>
  .  <span class="pl-c1">5</span> LeafNode{<span class="pl-c1">:isquery</span>}                                                    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span></pre></div>
<p>It does. Let's visit:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; debug_govisit(FwVis(), tree)
(&quot;FTST&quot;,&quot;&quot;)
----------------------------------------------------------------------------------------------
 . visit(::FwVis,n::LeafNode{T})                    | command   | &quot;FTST&quot; -&gt; &quot;FTST&quot;          | 
 . visit(::FwVis,n::LeafNode{T})                    | isquery   | &quot;&quot; -&gt; &quot;&quot;                  | 
visit(::FwVis,n::ParentNode{T},visited_children...) | statement | &quot;FTST&quot;, &quot;&quot; -&gt; (&quot;FTST&quot;,&quot;&quot;) | 
----------------------------------------------------------------------------------------------
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">debug_govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)
<span class="pl-k">----------------------------------------------------------------------------------------------</span>
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                    <span class="pl-k">|</span> command   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>          <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                    <span class="pl-k">|</span> isquery   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>                  <span class="pl-k">|</span> 
<span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>) <span class="pl-k">|</span> statement <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>) <span class="pl-k">|</span> 
<span class="pl-k">----------------------------------------------------------------------------------------------</span></pre></div>
<p>Ohs nos! What happened? Looking carefully we see that <code>:isquery</code> is no-longer a
ParentNode but a LeafNode because nothing matched below <code>isquery</code> (but
<code>isquery</code> matched the nothing). So we add a <code>visit</code>:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::LeafNode{:isquery}) = false
"><pre><span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>) <span class="pl-k">=</span> <span class="pl-c1">false</span></pre></div>
<p>No questionmark means no query. Let's try again.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; govisit(FwVis(), tree)
FirmwareCommand(&quot;FTST&quot;,false,[])
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[])</pre></div>
<p>Great. How to recognize multiple statements? Noticing in the examples that
statements can be separated by ';' or '\n', let's add a rule to recognize
breaks between statements:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="termination = ~'[;\\n]'
"><pre><code>termination = ~'[;\\n]'
</code></pre></div>
<p>And another one to recognize multiple statements:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="statements = statement+
"><pre><code>statements = statement+
</code></pre></div>
<p>So now the grammar looks like:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="g = grammar&quot;&quot;&quot;
        statements = (statement termination)+
        statement = command isquery
        command = ~&quot;\w{4}&quot;
        isquery = &quot;?&quot;?
        termination = ~'[;\n]'
        &quot;&quot;&quot;
"><pre>g <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">grammar</span>"""</span></span>
<span class="pl-s">        statements = (statement termination)+</span>
<span class="pl-s">        statement = command isquery</span>
<span class="pl-s">        command = ~"<span class="pl-cce">\w</span>{4}"</span>
<span class="pl-s">        isquery = "?"?</span>
<span class="pl-s">        termination = ~'[;<span class="pl-cce">\n</span>]'</span>
<span class="pl-s">        <span class="pl-pds">"""</span></span></pre></div>
<p>It's important to notice that the grammar now matches <code>statements</code> instead of
<code>statement</code> so our previous tests are now broken. Usually <code>parse</code> matches the
first statement in the list, but for testing purposes you can parse against any
of the statements. Let's check the old functionality:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; govisit(FwVis(), parse(g.exprs[&quot;statement&quot;], &quot;FTST?&quot;))
FirmwareCommand(&quot;FTST&quot;,true,[])
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">govisit</span>(<span class="pl-c1">FwVis</span>(), <span class="pl-c1">parse</span>(g<span class="pl-k">.</span>exprs[<span class="pl-s"><span class="pl-pds">"</span>statement<span class="pl-pds">"</span></span>], <span class="pl-s"><span class="pl-pds">"</span>FTST?<span class="pl-pds">"</span></span>))
<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[])</pre></div>
<p>Good. And the other one:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; govisit(FwVis(), parse(g.exprs[&quot;statement&quot;], &quot;FTST&quot;))
FirmwareCommand(&quot;FTST&quot;,false,[])
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">govisit</span>(<span class="pl-c1">FwVis</span>(), <span class="pl-c1">parse</span>(g<span class="pl-k">.</span>exprs[<span class="pl-s"><span class="pl-pds">"</span>statement<span class="pl-pds">"</span></span>], <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>))
<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[])</pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="using Base.Test
"><pre><span class="pl-k">using</span> Base<span class="pl-k">.</span>Test</pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="function fwtest(name, grammar, text)
    tree = parse(g.exprs[name], text)
    govisit(FwVis(), tree)
end

import Base.isequal
function isequal(a::FirmwareCommand, b::FirmwareCommand)
    a.command == b.command &amp;&amp;
    a.isquery == b.isquery &amp;&amp;
    a.parameters == b.parameters
end

@test fwtest(&quot;statement&quot;, g, &quot;FTST?&quot;) == FirmwareCommand(&quot;FTST&quot;,true,[])
@test fwtest(&quot;statement&quot;, g, &quot;FTST&quot;) == FirmwareCommand(&quot;FTST&quot;,false,[])
"><pre><span class="pl-k">function</span> <span class="pl-en">fwtest</span>(name, grammar, text)
    tree <span class="pl-k">=</span> <span class="pl-c1">parse</span>(g<span class="pl-k">.</span>exprs[name], text)
    <span class="pl-c1">govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
<span class="pl-k">end</span>

<span class="pl-k">import</span> Base<span class="pl-k">.</span>isequal
<span class="pl-k">function</span> <span class="pl-en">isequal</span>(a<span class="pl-k">::</span><span class="pl-c1">FirmwareCommand</span>, b<span class="pl-k">::</span><span class="pl-c1">FirmwareCommand</span>)
    a<span class="pl-k">.</span>command <span class="pl-k">==</span> b<span class="pl-k">.</span>command <span class="pl-k">&amp;&amp;</span>
    a<span class="pl-k">.</span>isquery <span class="pl-k">==</span> b<span class="pl-k">.</span>isquery <span class="pl-k">&amp;&amp;</span>
    a<span class="pl-k">.</span>parameters <span class="pl-k">==</span> b<span class="pl-k">.</span>parameters
<span class="pl-k">end</span>

<span class="pl-c1">@test</span> <span class="pl-c1">fwtest</span>(<span class="pl-s"><span class="pl-pds">"</span>statement<span class="pl-pds">"</span></span>, g, <span class="pl-s"><span class="pl-pds">"</span>FTST?<span class="pl-pds">"</span></span>) <span class="pl-k">==</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[])
<span class="pl-c1">@test</span> <span class="pl-c1">fwtest</span>(<span class="pl-s"><span class="pl-pds">"</span>statement<span class="pl-pds">"</span></span>, g, <span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>) <span class="pl-k">==</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[])</pre></div>
<p>So we haven't lost ground. Now let's see if we can string some statements
together:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; fwtest(&quot;statements&quot;, g, &quot;FTST?;FTST?;FTST?\nFTST?\nFTST;FTST\n&quot;)
((FirmwareCommand(&quot;FTST&quot;,true,[]),&quot;;&quot;),(FirmwareCommand(&quot;FTST&quot;,true,[]),&quot;;&quot;),(FirmwareCommand(&quot;FTST&quot;,true,[]),&quot;\n&quot;),(FirmwareCommand(&quot;FTST&quot;,true,[]),&quot;\n&quot;),(FirmwareCommand(&quot;FTST&quot;,false,[]),&quot;;&quot;),(FirmwareCommand(&quot;FTST&quot;,false,[]),&quot;\n&quot;))
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">fwtest</span>(<span class="pl-s"><span class="pl-pds">"</span>statements<span class="pl-pds">"</span></span>, g, <span class="pl-s"><span class="pl-pds">"</span>FTST?;FTST?;FTST?<span class="pl-cce">\n</span>FTST?<span class="pl-cce">\n</span>FTST;FTST<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
((<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>),(<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>),(<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>),(<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>),(<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[]),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>),(<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[]),<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>))</pre></div>
<p>Which almost looks good, but clearly we need to <code>visit</code> <code>statemets</code> differently
to throw away the useless terminations and just return a list of statements.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::ParentNode{:statements}, statements...) = [statement_term[1] for statement_term in statements]
"><pre><span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statements}</span>, statements<span class="pl-k">...</span>) <span class="pl-k">=</span> [statement_term[<span class="pl-c1">1</span>] <span class="pl-k">for</span> statement_term <span class="pl-k">in</span> statements]</pre></div>
<p>Try it again:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; fwtest(&quot;statements&quot;, g, &quot;FTST?;FTST?;FTST?\nFTST?\nFTST;FTST\n&quot;)
{FirmwareCommand(&quot;FTST&quot;,true,[]),FirmwareCommand(&quot;FTST&quot;,true,[]),FirmwareCommand(&quot;FTST&quot;,true,[]),FirmwareCommand(&quot;FTST&quot;,true,[]),FirmwareCommand(&quot;FTST&quot;,false,[]),FirmwareCommand(&quot;FTST&quot;,false,[])}
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">fwtest</span>(<span class="pl-s"><span class="pl-pds">"</span>statements<span class="pl-pds">"</span></span>, g, <span class="pl-s"><span class="pl-pds">"</span>FTST?;FTST?;FTST?<span class="pl-cce">\n</span>FTST?<span class="pl-cce">\n</span>FTST;FTST<span class="pl-cce">\n</span><span class="pl-pds">"</span></span>)
{<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">true</span>,[]),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[]),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>FTST<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,[])}</pre></div>
<p>Nice. I wonder why sometimes list print in {} and other times in []. Oh well.</p>
<p>There's more kinds of statements. Each can have zero one or more parameters. To
match statements like:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="ASDF
ASDF 1
ASDF 1,2
"><pre><code>ASDF
ASDF 1
ASDF 1,2
</code></pre></div>
<p>We'll make three rules:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="params = more_params / one_param / no_params
"><pre><code>params = more_params / one_param / no_params
</code></pre></div>
<p>This is where ordered choice really comes in handy. First it will try to match
several parameters, failing that it will try to match one and only failing that
can we get by with none. Of course if we wrote:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="params = no_params / one_param / more_params
"><pre><code>params = no_params / one_param / more_params
</code></pre></div>
<p>Then we'd have a problem because no_params would always match and then we'd
never look for one_param or more_params and we'd get a parsing error. Moving
on:</p>
<p>Also, we have to start thinking about whitespace. If a command is followed by
parameters then there's at least one space separating them. But in the no
parameter case you don't need a space. How about:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="params = some_params / no_params
some_params = somespace (more_params / one_param)
somespace = ~'[ \t]+'
"><pre><code>params = some_params / no_params
some_params = somespace (more_params / one_param)
somespace = ~'[ \t]+'
</code></pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="g = grammar&quot;&quot;&quot;
    statements = (statement termination)+
    command = ~&quot;\w{4}&quot;
    isquery = &quot;?&quot;?
    termination = ~'[;\n]'

    ###### new stuff ##########################
    statement = command isquery params
    params = some_params / no_params
    some_params = somespace (more_params / param)
    more_params = param (comma param)+
    param = ~'[^ \t,;\n]*'
    no_params = ''
    comma = ','
    somespace = ~'[ \t]+'
    &quot;&quot;&quot;
"><pre>g <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">grammar</span>"""</span></span>
<span class="pl-s">    statements = (statement termination)+</span>
<span class="pl-s">    command = ~"<span class="pl-cce">\w</span>{4}"</span>
<span class="pl-s">    isquery = "?"?</span>
<span class="pl-s">    termination = ~'[;<span class="pl-cce">\n</span>]'</span>
<span class="pl-s"></span>
<span class="pl-s">    ###### new stuff ##########################</span>
<span class="pl-s">    statement = command isquery params</span>
<span class="pl-s">    params = some_params / no_params</span>
<span class="pl-s">    some_params = somespace (more_params / param)</span>
<span class="pl-s">    more_params = param (comma param)+</span>
<span class="pl-s">    param = ~'[^ <span class="pl-cce">\t</span>,;<span class="pl-cce">\n</span>]*'</span>
<span class="pl-s">    no_params = ''</span>
<span class="pl-s">    comma = ','</span>
<span class="pl-s">    somespace = ~'[ <span class="pl-cce">\t</span>]+'</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<p>I don't really want to think about it so let's just look at debug and go from
there.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="txt = &quot;ASDF;ASDF 1;ASDF 1,2,3,4;&quot;
tree = parse(g, txt)
"><pre>txt <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF;ASDF 1;ASDF 1,2,3,4;<span class="pl-pds">"</span></span>
tree <span class="pl-k">=</span> <span class="pl-c1">parse</span>(g, txt)</pre></div>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; debug_govisit(FwVis(), tree)
{(&quot;ASDF&quot;,false,(&quot;&quot;,)),(&quot;ASDF&quot;,false,((&quot; &quot;,(&quot;1&quot;,)),)),(&quot;ASDF&quot;,false,((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),))}
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 .  .  . visit(::FwVis,n::LeafNode{T})                                     | command     | &quot;ASDF&quot; -&gt; &quot;ASDF&quot;                                                           | 
 .  .  . visit(::FwVis,n::LeafNode{:isquery})                              | isquery     | &quot;&quot; -&gt; false                                                                | 
 .  .  .  . visit(::FwVis,n::LeafNode{T})                                  | no_params   | &quot;&quot; -&gt; &quot;&quot;                                                                   | 
 .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)               | params      | &quot;&quot; -&gt; (&quot;&quot;,)                                                                | 
 .  . visit(::FwVis,n::ParentNode{T},visited_children...)                  | statement   | &quot;ASDF&quot;, false, (&quot;&quot;,) -&gt; (&quot;ASDF&quot;,false,(&quot;&quot;,))                               | 
 .  . visit(::FwVis,n::LeafNode{T})                                        | termination | &quot;;&quot; -&gt; &quot;;&quot;                                                                 | 
 . visit(::FwVis,n::ParentNode{T},visited_children...)                     |             | (&quot;ASDF&quot;,false,(&quot;&quot;,)), &quot;;&quot; -&gt; ((&quot;ASDF&quot;,false,(&quot;&quot;,)),&quot;;&quot;)                    | 
 .  .  . visit(::FwVis,n::LeafNode{T})                                     | command     | &quot;ASDF&quot; -&gt; &quot;ASDF&quot;                                                           | 
 .  .  . visit(::FwVis,n::LeafNode{:isquery})                              | isquery     | &quot;&quot; -&gt; false                                                                | 
 .  .  .  .  . visit(::FwVis,n::LeafNode{T})                               | somespace   | &quot; &quot; -&gt; &quot; &quot;                                                                 | 
 .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                            | param       | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)         |             | &quot;1&quot; -&gt; (&quot;1&quot;,)                                                              | 
 .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)            | some_params | &quot; &quot;, (&quot;1&quot;,) -&gt; (&quot; &quot;,(&quot;1&quot;,))                                                | 
 .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)               | params      | (&quot; &quot;,(&quot;1&quot;,)) -&gt; ((&quot; &quot;,(&quot;1&quot;,)),)                                            | 
 .  . visit(::FwVis,n::ParentNode{T},visited_children...)                  | statement   | &quot;ASDF&quot;, false, ((&quot; &quot;,(&quot;1&quot;,)),) -&gt; (&quot;ASDF&quot;,false,((&quot; &quot;,(&quot;1&quot;,)),))           | 
 .  . visit(::FwVis,n::LeafNode{T})                                        | termination | &quot;;&quot; -&gt; &quot;;&quot;                                                                 | 
 . visit(::FwVis,n::ParentNode{T},visited_children...)                     |             | (&quot;ASDF&quot;,false,((&quot; &quot;,(&quot;1&quot;,)),)), &quot;;&quot; -&gt; ((&quot;ASDF&quot;,false,((&quot; &quot;,(&quot;1&quot;,)),)),&quot;;&quot; | 
                                                                           |             | )                                                                          | 
 .  .  . visit(::FwVis,n::LeafNode{T})                                     | command     | &quot;ASDF&quot; -&gt; &quot;ASDF&quot;                                                           | 
 .  .  . visit(::FwVis,n::LeafNode{:isquery})                              | isquery     | &quot;&quot; -&gt; false                                                                | 
 .  .  .  .  . visit(::FwVis,n::LeafNode{T})                               | somespace   | &quot; &quot; -&gt; &quot; &quot;                                                                 | 
 .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                         | param       | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | comma       | &quot;,&quot; -&gt; &quot;,&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | param       | &quot;2&quot; -&gt; &quot;2&quot;                                                                 | 
 .  .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children... |             | &quot;,&quot;, &quot;2&quot; -&gt; (&quot;,&quot;,&quot;2&quot;)                                                      | 
)                                                                          |             |                                                                            | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | comma       | &quot;,&quot; -&gt; &quot;,&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | param       | &quot;3&quot; -&gt; &quot;3&quot;                                                                 | 
 .  .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children... |             | &quot;,&quot;, &quot;3&quot; -&gt; (&quot;,&quot;,&quot;3&quot;)                                                      | 
)                                                                          |             |                                                                            | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | comma       | &quot;,&quot; -&gt; &quot;,&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | param       | &quot;4&quot; -&gt; &quot;4&quot;                                                                 | 
 .  .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children... |             | &quot;,&quot;, &quot;4&quot; -&gt; (&quot;,&quot;,&quot;4&quot;)                                                      | 
)                                                                          |             |                                                                            | 
 .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)   |             | (&quot;,&quot;,&quot;2&quot;), (&quot;,&quot;,&quot;3&quot;), (&quot;,&quot;,&quot;4&quot;) -&gt; ((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))         | 
 .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)      | more_params | &quot;1&quot;, ((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;)) -&gt; (&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot; | 
                                                                           |             | )))                                                                        | 
 .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)         |             | (&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))) -&gt; ((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot; | 
                                                                           |             | 4&quot;))),)                                                                    | 
 .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)            | some_params | &quot; &quot;, ((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),) -&gt; (&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;, | 
                                                                           |             | &quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),))                                                      | 
 .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)               | params      | (&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)) -&gt; ((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),( | 
                                                                           |             | &quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),)                                                  | 
 .  . visit(::FwVis,n::ParentNode{T},visited_children...)                  | statement   | &quot;ASDF&quot;, false, ((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),) -&gt; (&quot;ASDF | 
                                                                           |             | &quot;,false,((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),))                 | 
 .  . visit(::FwVis,n::LeafNode{T})                                        | termination | &quot;;&quot; -&gt; &quot;;&quot;                                                                 | 
 . visit(::FwVis,n::ParentNode{T},visited_children...)                     |             | (&quot;ASDF&quot;,false,((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),)), &quot;;&quot; -&gt; ( | 
                                                                           |             | (&quot;ASDF&quot;,false,((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),)),&quot;;&quot;)      | 
visit(::FwVis,n::ParentNode{:statements},statements...)                    | statements  | ((&quot;ASDF&quot;,false,(&quot;&quot;,)),&quot;;&quot;), ((&quot;ASDF&quot;,false,((&quot; &quot;,(&quot;1&quot;,)),)),&quot;;&quot;), ((&quot;ASDF&quot; | 
                                                                           |             | ,false,((&quot; &quot;,((&quot;1&quot;,((&quot;,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),)),&quot;;&quot;) -&gt; {(&quot;ASDF&quot; | 
                                                                           |             | ,false,(&quot;&quot;,)),(&quot;ASDF&quot;,false,((&quot; &quot;,(&quot;1&quot;,)),)),(&quot;ASDF&quot;,false,((&quot; &quot;,((&quot;1&quot;,((&quot; | 
                                                                           |             | ,&quot;,&quot;2&quot;),(&quot;,&quot;,&quot;3&quot;),(&quot;,&quot;,&quot;4&quot;))),)),))}                                       | 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">debug_govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
{(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,)),(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),)),(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),))}
<span class="pl-k">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                     <span class="pl-k">|</span> command     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>                                                           <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>)                              <span class="pl-k">|</span> isquery     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">false</span>                                                                <span class="pl-k">|</span> 
 .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                  <span class="pl-k">|</span> no_params   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>                                                                   <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)               <span class="pl-k">|</span> params      <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,)                                                                <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                  <span class="pl-k">|</span> statement   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, (<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,))                               <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                        <span class="pl-k">|</span> termination <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                     <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,)), <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> ((<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)                    <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                     <span class="pl-k">|</span> command     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>                                                           <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>)                              <span class="pl-k">|</span> isquery     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">false</span>                                                                <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                               <span class="pl-k">|</span> somespace   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                            <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)         <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)                                                              <span class="pl-k">|</span> 
 .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)            <span class="pl-k">|</span> some_params <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>, (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,))                                                <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)               <span class="pl-k">|</span> params      <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)) <span class="pl-k">-&gt;</span> ((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),)                                            <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                  <span class="pl-k">|</span> statement   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, ((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),))           <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                        <span class="pl-k">|</span> termination <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                     <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),)), <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> ((<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> )                                                                          <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                     <span class="pl-k">|</span> command     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>                                                           <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>)                              <span class="pl-k">|</span> isquery     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">false</span>                                                                <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                               <span class="pl-k">|</span> somespace   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                         <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> comma       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span> <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>)                                                      <span class="pl-k">|</span> 
)                                                                          <span class="pl-k">|</span>             <span class="pl-k">|</span>                                                                            <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> comma       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span> <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>)                                                      <span class="pl-k">|</span> 
)                                                                          <span class="pl-k">|</span>             <span class="pl-k">|</span>                                                                            <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> comma       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span> <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)                                                      <span class="pl-k">|</span> 
)                                                                          <span class="pl-k">|</span>             <span class="pl-k">|</span>                                                                            <span class="pl-k">|</span> 
 .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)   <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>), (<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>), (<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> ((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))         <span class="pl-k">|</span> 
 .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)      <span class="pl-k">|</span> more_params <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, ((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> )))                                                                        <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)         <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))) <span class="pl-k">-&gt;</span> ((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span> | </span>
<span class="pl-s">                                                                           |             | 4<span class="pl-pds">"</span></span>))),)                                                                    <span class="pl-k">|</span> 
 .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)            <span class="pl-k">|</span> some_params <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>, ((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>, | </span>
<span class="pl-s">                                                                           |             | <span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),))                                                      <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)               <span class="pl-k">|</span> params      <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)) <span class="pl-k">-&gt;</span> ((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),( <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),)                                                  <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                  <span class="pl-k">|</span> statement   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, ((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF | </span>
<span class="pl-s">                                                                           |             | <span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),))                 <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                        <span class="pl-k">|</span> termination <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                     <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),)), <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> ( <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)      <span class="pl-k">|</span> 
<span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statements}</span>,statements<span class="pl-k">...</span>)                    <span class="pl-k">|</span> statements  <span class="pl-k">|</span> ((<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>), ((<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>), ((<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> ,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> {(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> ,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,)),(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,)),)),(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,((<span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,((<span class="pl-s"><span class="pl-pds">"</span> | </span>
<span class="pl-s">                                                                           |             | ,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>),(<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))),)),))}                                       <span class="pl-k">|</span> 
<span class="pl-k">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></pre></div>
<p>Wow. The debug output barely fits on my 13-inch laptop screen. I wish I could
come up with something more compact and just as useful, but this is addressing
several common problems:</p>
<ul>
<li>Parse not matching exactly the way I expected</li>
<li>Wrong <code>visit</code> method handles a node</li>
</ul>
<p>If you have a better idea, let me know.</p>
<p><code>visit</code> time:</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::LeafNode{:no_params}) = nothing
visit(::FwVis, n::LeafNode{:comma}) = nothing
visit(::FwVis, n::LeafNode{:somespace}) = nothing
visit(::FwVis, n::ParentNode{:statement}, command::String, isquery::Bool, params) = FirmwareCommand(command, isquery, params)
visit(::FwVis, n::ParentNode{:more_params}, param1::String, param2::String) = (param1, param2)
visit(::FwVis, n::ParentNode{:more_params}, param::String, params::Tuple) = tuple(param, params...)
visit(::FwVis, n::ParentNode, one_child) = one_child # don't rebox one child
"><pre><span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:no_params}</span>) <span class="pl-k">=</span> <span class="pl-c1">nothing</span>
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:comma}</span>) <span class="pl-k">=</span> <span class="pl-c1">nothing</span>
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:somespace}</span>) <span class="pl-k">=</span> <span class="pl-c1">nothing</span>
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statement}</span>, command<span class="pl-k">::</span><span class="pl-c1">String</span>, isquery<span class="pl-k">::</span><span class="pl-c1">Bool</span>, params) <span class="pl-k">=</span> <span class="pl-c1">FirmwareCommand</span>(command, isquery, params)
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:more_params}</span>, param1<span class="pl-k">::</span><span class="pl-c1">String</span>, param2<span class="pl-k">::</span><span class="pl-c1">String</span>) <span class="pl-k">=</span> (param1, param2)
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:more_params}</span>, param<span class="pl-k">::</span><span class="pl-c1">String</span>, params<span class="pl-k">::</span><span class="pl-c1">Tuple</span>) <span class="pl-k">=</span> <span class="pl-c1">tuple</span>(param, params<span class="pl-k">...</span>)
<span class="pl-en">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>, n<span class="pl-k">::</span><span class="pl-c1">ParentNode</span>, one_child) <span class="pl-k">=</span> one_child <span class="pl-c"><span class="pl-c">#</span> don't rebox one child</span></pre></div>
<p>About now we realize, oh shit, things have gotten interesting. Julia's
multiple-dispatch feature is really working hard for us.</p>
<p>First, we've overloaded one of the most generic visit functions just for the case when there's only one child.</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::ParentNode, one_child) = one_child # don't rebox one child
"><pre><code>visit(::FwVis, n::ParentNode, one_child) = one_child # don't rebox one child
</code></pre></div>
<p>Remember, the original (and still existing) generic rule for ParentNode is:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::ParentNode, visited_children...) = visited_children
"><pre><code>visit(::FwVis, n::ParentNode, visited_children...) = visited_children
</code></pre></div>
<p>Which basically means that several children will get boxed up. <code>"a", "b", "c" -&gt; ("a", "b", "c")</code>. The problem is that there's these anonymous rules
everywhere and when they get called with one child, they put it in a box. So
after several iterations, you end up with <code>((("a",),),)</code></p>
<p>Also fun is using the type to fix behavior. For example:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="visit(::FwVis, n::ParentNode{:more_params}, param1::String, param2::String) = (param1, param2)
visit(::FwVis, n::ParentNode{:more_params}, param::String, params::Tuple) = tuple(param, params...)
"><pre><code>visit(::FwVis, n::ParentNode{:more_params}, param1::String, param2::String) = (param1, param2)
visit(::FwVis, n::ParentNode{:more_params}, param::String, params::Tuple) = tuple(param, params...)
</code></pre></div>
<p>We really want <code>more_params</code> to just give us a list of parameters, but since the rule is nested like so:</p>
<div class="snippet-clipboard-content position-relative" data-snippet-clipboard-copy-content="more_params = param (comma param)+
"><pre><code>more_params = param (comma param)+
</code></pre></div>
<p><code>visit more_params</code> is sometimes being called with two individual parameters
and sometimes with a parameter and another <code>more_params</code>. Using the type system
this way we make sure that what comes out is always a flat list without
having to think about it further.</p>
<p>Finally, notice that several garbage tokens like <code>no_params</code>, <code>comma</code> and
<code>some_space</code> return <code>nothing</code>. When a <code>visit</code> returns <code>nothing</code> we don't even
send the <code>nothing</code> to the parent. It's just like it never happened which is
good for taking out the trash.</p>
<p>I'm a little nervous -- don't get me wrong -- relying so heavily on the
vagaries of Julia's dispatch system for the programs logic. But it looks like
it's working! Once you go hack you never go back.</p>
<p>Oh, and obviously I didn't crap this out fully formed. I wrote and tested each line
carefully refering back to the debug table.</p>
<div class="highlight highlight-source-julia position-relative" data-snippet-clipboard-copy-content="julia&gt; debug_govisit(FwVis(), tree)
{FirmwareCommand(&quot;ASDF&quot;,false,()),FirmwareCommand(&quot;ASDF&quot;,false,&quot;1&quot;),FirmwareCommand(&quot;ASDF&quot;,false,(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;))}
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 .  .  . visit(::FwVis,n::LeafNode{T})                                     | command     | &quot;ASDF&quot; -&gt; &quot;ASDF&quot;                                                           | 
 .  .  . visit(::FwVis,n::LeafNode{:isquery})                              | isquery     | &quot;&quot; -&gt; false                                                                | 
 .  .  .  . visit(::FwVis,n::LeafNode{:no_params})                         | no_params   | &quot;&quot; -&gt; nothing                                                              | 
 .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)               | params      |  -&gt; ()                                                                     | 
 .  . visit(::FwVis,n::ParentNode{:statement},command::String,isquery::Boo | statement   | &quot;ASDF&quot;, false, () -&gt; FirmwareCommand(&quot;ASDF&quot;,false,())                      | 
l,params)                                                                  |             |                                                                            | 
 .  . visit(::FwVis,n::LeafNode{T})                                        | termination | &quot;;&quot; -&gt; &quot;;&quot;                                                                 | 
 . visit(::FwVis,n::ParentNode{T},visited_children...)                     |             | FirmwareCommand(&quot;ASDF&quot;,false,()), &quot;;&quot; -&gt; (FirmwareCommand(&quot;ASDF&quot;,false,()) | 
                                                                           |             | ,&quot;;&quot;)                                                                      | 
 .  .  . visit(::FwVis,n::LeafNode{T})                                     | command     | &quot;ASDF&quot; -&gt; &quot;ASDF&quot;                                                           | 
 .  .  . visit(::FwVis,n::LeafNode{:isquery})                              | isquery     | &quot;&quot; -&gt; false                                                                | 
 .  .  .  .  . visit(::FwVis,n::LeafNode{:somespace})                      | somespace   | &quot; &quot; -&gt; nothing                                                             | 
 .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                            | param       | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)                   |             | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)                      | some_params | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  .  . visit(::FwVis,n::ParentNode{T},one_child)                         | params      | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  . visit(::FwVis,n::ParentNode{:statement},command::String,isquery::Boo | statement   | &quot;ASDF&quot;, false, &quot;1&quot; -&gt; FirmwareCommand(&quot;ASDF&quot;,false,&quot;1&quot;)                    | 
l,params)                                                                  |             |                                                                            | 
 .  . visit(::FwVis,n::LeafNode{T})                                        | termination | &quot;;&quot; -&gt; &quot;;&quot;                                                                 | 
 . visit(::FwVis,n::ParentNode{T},visited_children...)                     |             | FirmwareCommand(&quot;ASDF&quot;,false,&quot;1&quot;), &quot;;&quot; -&gt; (FirmwareCommand(&quot;ASDF&quot;,false,&quot;1 | 
                                                                           |             | &quot;),&quot;;&quot;)                                                                    | 
 .  .  . visit(::FwVis,n::LeafNode{T})                                     | command     | &quot;ASDF&quot; -&gt; &quot;ASDF&quot;                                                           | 
 .  .  . visit(::FwVis,n::LeafNode{:isquery})                              | isquery     | &quot;&quot; -&gt; false                                                                | 
 .  .  .  .  . visit(::FwVis,n::LeafNode{:somespace})                      | somespace   | &quot; &quot; -&gt; nothing                                                             | 
 .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                         | param       | &quot;1&quot; -&gt; &quot;1&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{:comma})              | comma       | &quot;,&quot; -&gt; nothing                                                             | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | param       | &quot;2&quot; -&gt; &quot;2&quot;                                                                 | 
 .  .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)          |             | &quot;2&quot; -&gt; &quot;2&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{:comma})              | comma       | &quot;,&quot; -&gt; nothing                                                             | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | param       | &quot;3&quot; -&gt; &quot;3&quot;                                                                 | 
 .  .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)          |             | &quot;3&quot; -&gt; &quot;3&quot;                                                                 | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{:comma})              | comma       | &quot;,&quot; -&gt; nothing                                                             | 
 .  .  .  .  .  .  .  .  . visit(::FwVis,n::LeafNode{T})                   | param       | &quot;4&quot; -&gt; &quot;4&quot;                                                                 | 
 .  .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)          |             | &quot;4&quot; -&gt; &quot;4&quot;                                                                 | 
 .  .  .  .  .  .  . visit(::FwVis,n::ParentNode{T},visited_children...)   |             | &quot;2&quot;, &quot;3&quot;, &quot;4&quot; -&gt; (&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)                                             | 
 .  .  .  .  .  . visit(::FwVis,n::ParentNode{:more_params},param::String, | more_params | &quot;1&quot;, (&quot;2&quot;,&quot;3&quot;,&quot;4&quot;) -&gt; (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)                                    | 
params::(Any...,))                                                         |             |                                                                            | 
 .  .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)                   |             | (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;) -&gt; (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)                                     | 
 .  .  .  . visit(::FwVis,n::ParentNode{T},one_child)                      | some_params | (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;) -&gt; (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)                                     | 
 .  .  . visit(::FwVis,n::ParentNode{T},one_child)                         | params      | (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;) -&gt; (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)                                     | 
 .  . visit(::FwVis,n::ParentNode{:statement},command::String,isquery::Boo | statement   | &quot;ASDF&quot;, false, (&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;) -&gt; FirmwareCommand(&quot;ASDF&quot;,false,(&quot;1&quot;,&quot;2&quot;, | 
l,params)                                                                  |             | &quot;3&quot;,&quot;4&quot;))                                                                  | 
 .  . visit(::FwVis,n::LeafNode{T})                                        | termination | &quot;;&quot; -&gt; &quot;;&quot;                                                                 | 
 . visit(::FwVis,n::ParentNode{T},visited_children...)                     |             | FirmwareCommand(&quot;ASDF&quot;,false,(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)), &quot;;&quot; -&gt; (FirmwareCommand(&quot; | 
                                                                           |             | ASDF&quot;,false,(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)),&quot;;&quot;)                                        | 
visit(::FwVis,n::ParentNode{:statements},statements...)                    | statements  | (FirmwareCommand(&quot;ASDF&quot;,false,()),&quot;;&quot;), (FirmwareCommand(&quot;ASDF&quot;,false,&quot;1&quot;) | 
                                                                           |             | ,&quot;;&quot;), (FirmwareCommand(&quot;ASDF&quot;,false,(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;)),&quot;;&quot;) -&gt; {FirmwareC | 
                                                                           |             | ommand(&quot;ASDF&quot;,false,()),FirmwareCommand(&quot;ASDF&quot;,false,&quot;1&quot;),FirmwareCommand( | 
                                                                           |             | &quot;ASDF&quot;,false,(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;))}                                           | 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">debug_govisit</span>(<span class="pl-c1">FwVis</span>(), tree)
{<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,()),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))}
<span class="pl-k">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                     <span class="pl-k">|</span> command     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>                                                           <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>)                              <span class="pl-k">|</span> isquery     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">false</span>                                                                <span class="pl-k">|</span> 
 .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:no_params}</span>)                         <span class="pl-k">|</span> no_params   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">nothing</span>                                                              <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)               <span class="pl-k">|</span> params      <span class="pl-k">|</span>  <span class="pl-k">-&gt;</span> ()                                                                     <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statement}</span>,command<span class="pl-k">::</span><span class="pl-c1">String</span>,isquery<span class="pl-k">::</span><span class="pl-c1">Boo</span> <span class="pl-k">|</span> statement   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, () <span class="pl-k">-&gt;</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,())                      <span class="pl-k">|</span> 
l,params)                                                                  <span class="pl-k">|</span>             <span class="pl-k">|</span>                                                                            <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                        <span class="pl-k">|</span> termination <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                     <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,()), <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,()) <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> ,<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)                                                                      <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                     <span class="pl-k">|</span> command     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>                                                           <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>)                              <span class="pl-k">|</span> isquery     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">false</span>                                                                <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:somespace}</span>)                      <span class="pl-k">|</span> somespace   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">nothing</span>                                                             <span class="pl-k">|</span> 
 .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                            <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)                   <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)                      <span class="pl-k">|</span> some_params <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)                         <span class="pl-k">|</span> params      <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statement}</span>,command<span class="pl-k">::</span><span class="pl-c1">String</span>,isquery<span class="pl-k">::</span><span class="pl-c1">Boo</span> <span class="pl-k">|</span> statement   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>)                    <span class="pl-k">|</span> 
l,params)                                                                  <span class="pl-k">|</span>             <span class="pl-k">|</span>                                                                            <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                        <span class="pl-k">|</span> termination <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                     <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">"</span>1 | </span>
<span class="pl-s">                                                                           |             | <span class="pl-pds">"</span></span>),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)                                                                    <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                     <span class="pl-k">|</span> command     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>                                                           <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:isquery}</span>)                              <span class="pl-k">|</span> isquery     <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">false</span>                                                                <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:somespace}</span>)                      <span class="pl-k">|</span> somespace   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span> <span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">nothing</span>                                                             <span class="pl-k">|</span> 
 .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                         <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:comma}</span>)              <span class="pl-k">|</span> comma       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">nothing</span>                                                             <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)          <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:comma}</span>)              <span class="pl-k">|</span> comma       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">nothing</span>                                                             <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)          <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{:comma}</span>)              <span class="pl-k">|</span> comma       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-c1">nothing</span>                                                             <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                   <span class="pl-k">|</span> param       <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)          <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 .  .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)   <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)                                             <span class="pl-k">|</span> 
 .  .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:more_params}</span>,param<span class="pl-k">::</span><span class="pl-c1">String</span>, <span class="pl-k">|</span> more_params <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>, (<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)                                    <span class="pl-k">|</span> 
params<span class="pl-k">::</span><span class="pl-c1">(Any...,)</span>)                                                         <span class="pl-k">|</span>             <span class="pl-k">|</span>                                                                            <span class="pl-k">|</span> 
 .  .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)                   <span class="pl-k">|</span>             <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)                                     <span class="pl-k">|</span> 
 .  .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)                      <span class="pl-k">|</span> some_params <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)                                     <span class="pl-k">|</span> 
 .  .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,one_child)                         <span class="pl-k">|</span> params      <span class="pl-k">|</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)                                     <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statement}</span>,command<span class="pl-k">::</span><span class="pl-c1">String</span>,isquery<span class="pl-k">::</span><span class="pl-c1">Boo</span> <span class="pl-k">|</span> statement   <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, (<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>, <span class="pl-k">|</span> 
l,params)                                                                  <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))                                                                  <span class="pl-k">|</span> 
 .  . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">LeafNode{T}</span>)                                        <span class="pl-k">|</span> termination <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>                                                                 <span class="pl-k">|</span> 
 . <span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{T}</span>,visited_children<span class="pl-k">...</span>)                     <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)), <span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span> <span class="pl-k">-&gt;</span> (<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span> | </span>
<span class="pl-s">                                                                           |             | ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>)                                        <span class="pl-k">|</span> 
<span class="pl-c1">visit</span>(<span class="pl-k">::</span><span class="pl-c1">FwVis</span>,n<span class="pl-k">::</span><span class="pl-c1">ParentNode{:statements}</span>,statements<span class="pl-k">...</span>)                    <span class="pl-k">|</span> statements  <span class="pl-k">|</span> (<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,()),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>), (<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>) <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> ,<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>), (<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>)),<span class="pl-s"><span class="pl-pds">"</span>;<span class="pl-pds">"</span></span>) <span class="pl-k">-&gt;</span> {FirmwareC <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-c1">ommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,()),<span class="pl-c1">FirmwareCommand</span>(<span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>),<span class="pl-c1">FirmwareCommand</span>( <span class="pl-k">|</span> 
                                                                           <span class="pl-k">|</span>             <span class="pl-k">|</span> <span class="pl-s"><span class="pl-pds">"</span>ASDF<span class="pl-pds">"</span></span>,<span class="pl-c1">false</span>,(<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span>))}                                           <span class="pl-k">|</span> 
<span class="pl-k">-------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></pre></div>
</article></div>