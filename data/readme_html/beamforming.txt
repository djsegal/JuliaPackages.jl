<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-beamforming" class="anchor" aria-hidden="true" href="#beamforming"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Beamforming</h1>
<p dir="auto">Beamforming is a Julia module for the array analysis of seismic
data, using <a href="https://github.com/anowacki/Seis.jl">Seis.jl</a>.</p>
<h2 dir="auto"><a id="user-content-build-status" class="anchor" aria-hidden="true" href="#build-status"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Build status</h2>
<p dir="auto"><a href="https://github.com/anowacki/Beamforming.jl/actions"><img src="https://github.com/anowacki/Beamforming.jl/workflows/CI/badge.svg" alt="Build Status" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/anowacki/Beamforming.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/a0c04306cb8137dce4a5e68a80bbf46df0aa71fa55a70c0f9a29fea302a848af/68747470733a2f2f636f6465636f762e696f2f67682f616e6f7761636b692f4265616d666f726d696e672e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e7376673f746f6b656e3d643065506341316d3534" alt="codecov" data-canonical-src="https://codecov.io/gh/anowacki/Beamforming.jl/branch/master/graph/badge.svg?token=d0ePcA1m54" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; ] # press ']' to enter pkg mode

(v1.7) pkg&gt; add https://github.com/anowacki/Geodesics.jl https://github.com/anowacki/Seis.jl https://github.com/anowacki/Beamforming.jl"><pre>julia<span class="pl-k">&gt;</span> ] <span class="pl-c"><span class="pl-c">#</span> press ']' to enter pkg mode</span>

(v1.<span class="pl-c1">7</span>) pkg<span class="pl-k">&gt;</span> add https<span class="pl-k">:</span><span class="pl-k">//</span>github<span class="pl-k">.</span>com<span class="pl-k">/</span>anowacki<span class="pl-k">/</span>Geodesics<span class="pl-k">.</span>jl https<span class="pl-k">:</span><span class="pl-k">//</span>github<span class="pl-k">.</span>com<span class="pl-k">/</span>anowacki<span class="pl-k">/</span>Seis<span class="pl-k">.</span>jl https<span class="pl-k">:</span><span class="pl-k">//</span>github<span class="pl-k">.</span>com<span class="pl-k">/</span>anowacki<span class="pl-k">/</span>Beamforming<span class="pl-k">.</span>jl</pre></div>
<p dir="auto">Beamforming.jl requires Julia v1.6 or above.</p>
<h2 dir="auto"><a id="user-content-usage-overview" class="anchor" aria-hidden="true" href="#usage-overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage overview</h2>
<p dir="auto">The main functions exported are:</p>
<ul dir="auto">
<li>For traditional beamforming:
<ul dir="auto">
<li><code>array_response</code>: Compute the array response function for a set
of stations</li>
<li><code>beamform</code>: Compute the beam power across a grid of slowness points
(as in f–k analysis)</li>
<li><code>vespagram</code>: Compute a slowness vespagram</li>
</ul>
</li>
<li>For cross-correlation beamforming:
<ul dir="auto">
<li><code>crosscorrelation_array_response</code></li>
<li><code>crosscorrelation_beamform</code></li>
</ul>
</li>
</ul>
<p dir="auto">Docstrings are exhaustive, and can be consulted for usage of these
functions.  To bring up docstrings in the REPL, type <code>?</code> followed
by the name of the function and press return.</p>
<h3 dir="auto"><a id="user-content-array-response" class="anchor" aria-hidden="true" href="#array-response"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Array response</h3>
<p dir="auto">The array response for a set of stations can be computed like so:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using Beamforming, Seis
t = sample_data(:array); # 60 UK stations
# Array response parameters
arf = array_response(t,
                     5,   # Maximum slowness in s/°
                     0.1, # Slowness grid spacing
                     0.1, # Minimum frequency in Hz
                     1,   # Maximum frequency
                     0.1, # Frequency spacing
                     true # `true` for s/° slowness; `false` for s/km
                     )
plot(arf, powscale=:dB)   # If Plots is installed"><pre><span class="pl-k">using</span> Beamforming, Seis
t <span class="pl-k">=</span> <span class="pl-c1">sample_data</span>(<span class="pl-c1">:array</span>); <span class="pl-c"><span class="pl-c">#</span> 60 UK stations</span>
<span class="pl-c"><span class="pl-c">#</span> Array response parameters</span>
arf <span class="pl-k">=</span> <span class="pl-c1">array_response</span>(t,
                     <span class="pl-c1">5</span>,   <span class="pl-c"><span class="pl-c">#</span> Maximum slowness in s/°</span>
                     <span class="pl-c1">0.1</span>, <span class="pl-c"><span class="pl-c">#</span> Slowness grid spacing</span>
                     <span class="pl-c1">0.1</span>, <span class="pl-c"><span class="pl-c">#</span> Minimum frequency in Hz</span>
                     <span class="pl-c1">1</span>,   <span class="pl-c"><span class="pl-c">#</span> Maximum frequency</span>
                     <span class="pl-c1">0.1</span>, <span class="pl-c"><span class="pl-c">#</span> Frequency spacing</span>
                     <span class="pl-c1">true</span> <span class="pl-c"><span class="pl-c">#</span> `true` for s/° slowness; `false` for s/km</span>
                     )
<span class="pl-c1">plot</span>(arf, powscale<span class="pl-k">=</span><span class="pl-c1">:dB</span>)   <span class="pl-c"><span class="pl-c">#</span> If Plots is installed</span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="doc/images/array_response.svg"><img src="doc/images/array_response.svg" alt="" style="max-width: 100%;"></a></p>
<h3 dir="auto"><a id="user-content-beamforming-1" class="anchor" aria-hidden="true" href="#beamforming-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Beamforming</h3>
<p dir="auto">Beamforming can be performed like so:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bf = beamform(t,
              1100, # Start time in s
              1160, # End time in s
              -1,   # Minimum east slowness in s/°
              0.5,  # Maximum east slowness
              0,    # Minimum north slowness
              4,    # Maximum north slowness
              0.01  # Slowness spacing
              )
plot(bf, phases=[&quot;PKiKP&quot;, &quot;PKIKP&quot;])"><pre>bf <span class="pl-k">=</span> <span class="pl-c1">beamform</span>(t,
              <span class="pl-c1">1100</span>, <span class="pl-c"><span class="pl-c">#</span> Start time in s</span>
              <span class="pl-c1">1160</span>, <span class="pl-c"><span class="pl-c">#</span> End time in s</span>
              <span class="pl-k">-</span><span class="pl-c1">1</span>,   <span class="pl-c"><span class="pl-c">#</span> Minimum east slowness in s/°</span>
              <span class="pl-c1">0.5</span>,  <span class="pl-c"><span class="pl-c">#</span> Maximum east slowness</span>
              <span class="pl-c1">0</span>,    <span class="pl-c"><span class="pl-c">#</span> Minimum north slowness</span>
              <span class="pl-c1">4</span>,    <span class="pl-c"><span class="pl-c">#</span> Maximum north slowness</span>
              <span class="pl-c1">0.01</span>  <span class="pl-c"><span class="pl-c">#</span> Slowness spacing</span>
              )
<span class="pl-c1">plot</span>(bf, phases<span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">"</span>PKiKP<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>PKIKP<span class="pl-pds">"</span></span>])</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="doc/images/beamforming.svg"><img src="doc/images/beamforming.svg" alt="" style="max-width: 100%;"></a></p>
<h3 dir="auto"><a id="user-content-vespagrams" class="anchor" aria-hidden="true" href="#vespagrams"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Vespagrams</h3>
<p dir="auto">Compute a vespagram like so:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="vesp = vespagram(t,
                 1110, # Start time in s
                 1150, # End time
                 0,    # Minimum slowness in s/°
                 4,    # Maximum slowness
                 0.01, # Slowness spacing
                 )
plot(vesp, phases=[&quot;PKiKP&quot;, &quot;PKIKP&quot;], clim=(-1,1))"><pre>vesp <span class="pl-k">=</span> <span class="pl-c1">vespagram</span>(t,
                 <span class="pl-c1">1110</span>, <span class="pl-c"><span class="pl-c">#</span> Start time in s</span>
                 <span class="pl-c1">1150</span>, <span class="pl-c"><span class="pl-c">#</span> End time</span>
                 <span class="pl-c1">0</span>,    <span class="pl-c"><span class="pl-c">#</span> Minimum slowness in s/°</span>
                 <span class="pl-c1">4</span>,    <span class="pl-c"><span class="pl-c">#</span> Maximum slowness</span>
                 <span class="pl-c1">0.01</span>, <span class="pl-c"><span class="pl-c">#</span> Slowness spacing</span>
                 )
<span class="pl-c1">plot</span>(vesp, phases<span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">"</span>PKiKP<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>PKIKP<span class="pl-pds">"</span></span>], clim<span class="pl-k">=</span>(<span class="pl-k">-</span><span class="pl-c1">1</span>,<span class="pl-c1">1</span>))</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="doc/images/vespagram.svg"><img src="doc/images/vespagram.svg" alt="" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-optional-extras" class="anchor" aria-hidden="true" href="#optional-extras"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Optional extras</h2>
<h3 dir="auto"><a id="user-content-plotting" class="anchor" aria-hidden="true" href="#plotting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Plotting</h3>
<p dir="auto">If you have installed Plots to your environment, then you can easily
create plots as shown above.</p>
<p dir="auto">For more help on plotting commands provided in this package, call up
the online help for <code>Beamforming.plot</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="help?&gt; Beamforming.plot"><pre>help?<span class="pl-k">&gt;</span> Beamforming<span class="pl-k">.</span>plot</pre></div>
<h3 dir="auto"><a id="user-content-travel-times" class="anchor" aria-hidden="true" href="#travel-times"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Travel times</h3>
<p dir="auto">To plot the predicted location in slowness and time of arrivals,
you can install <a href="https://github.com/anowacki/SeisTau.jl">SeisTau.jl</a>.
(See the <a href="https://github.com/anowacki/SeisTau.jl#installation">installation notes</a> for more.)</p>
<p dir="auto">Simply do <code>using SeisTau</code>, then the <code>phases</code> option to <code>plot</code> will
enable easy predicted phase arrival plotting for <code>BeamformGrid</code>s
and <code>VespaGrid</code>s, produced respectively by <code>beamform</code> and
<code>vespagram</code>.</p>
</article></div>