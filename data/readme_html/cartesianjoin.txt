<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-cartesianjoin" class="anchor" aria-hidden="true" href="#cartesianjoin"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>CartesianJoin</h1>
<p dir="auto"><a href="https://github.com/dyeeee/CartesianJoin.jl/actions/workflows/CI.yml?query=branch%3Amain"><img src="https://github.com/dyeeee/CartesianJoin.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status" style="max-width: 100%;"></a></p>
<h1 dir="auto"><a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Introduction</h1>
<p dir="auto"><a href="">CartesianJoin.jl</a> is a join extension package developed based on the high-performance data processing package <a href="https://github.com/sl-solution/InMemoryDatasets.jl">InMemoryDatasets</a>, which expands the <code>cartesianjoin</code> function of the <code>Dataset</code> object. The performance of this package was developed according to the requirements of IMD, including minimal allocations and high operating speeds.</p>
<h1 dir="auto"><a id="user-content-updating" class="anchor" aria-hidden="true" href="#updating"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Updating</h1>
<p dir="auto">...</p>
<h1 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h1>
<ol dir="auto">
<li>Supports arbitrary user-defined Boolean functions as join conditions.  This also means that not only inequal join or range join, but also arbitrary conditional join.</li>
</ol>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  function fun(left_x, right_x)
    # user-defined operations
    return true/false
  end

  cartesianjoin(dsl,dsr,on = [:x1 =&gt; :y1 =&gt; fun])"><pre lang="{Julia}" class="notranslate"><code>  function fun(left_x, right_x)
    # user-defined operations
    return true/false
  end

  cartesianjoin(dsl,dsr,on = [:x1 =&gt; :y1 =&gt; fun])
</code></pre></div>
<ol start="2" dir="auto">
<li>
<p dir="auto">Any number of columns are supported using arbitrary conditional associations.</p>
</li>
<li>
<p dir="auto">Enabling multi-threading for acceleration, the performance better than implementing the same data operations in R.</p>
</li>
<li>
<p dir="auto">Very few allocations, other than the necessary auxiliary variables, do not produce any additional allocations.</p>
</li>
<li>
<p dir="auto">Support all IMD Dataset index column names are supported, user can use symbol, string, index to indicate columns then join two datasets.</p>
</li>
<li>
<p dir="auto">All parameters related to the join in IMD are supported, including <code>mapdformats</code>, <code>multiple_match</code> (whether the display is a duplicate match), <code>obs_id</code> (displaying the index in the original data set), etc.</p>
</li>
<li>
<p dir="auto">Use <code>cartesianjoin_timer(dsl,dsr,on = [:x1=&gt;:y1, :x2=&gt;:y2=&gt;func])</code> to check the time and memory consumption of each process.</p>
</li>
</ol>
<h1 dir="auto"><a id="user-content-algorithmic-flow" class="anchor" aria-hidden="true" href="#algorithmic-flow"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Algorithmic flow</h1>
<h2 dir="auto"><a id="user-content-basic-flow" class="anchor" aria-hidden="true" href="#basic-flow"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Basic flow</h2>
<div align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dyeeee/CartesianJoin.jl/blob/main/files/flow/CJ_pces12.png"><img src="https://github.com/dyeeee/CartesianJoin.jl/raw/main/files/flow/CJ_pces12.png" width="500" style="max-width: 100%;"></a>
</div>
<h2 dir="auto"><a id="user-content-computing-flag" class="anchor" aria-hidden="true" href="#computing-flag"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Computing flag</h2>
<div align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dyeeee/CartesianJoin.jl/blob/main/files/flow/flag1.png"><img src="https://github.com/dyeeee/CartesianJoin.jl/raw/main/files/flow/flag1.png" width="500" style="max-width: 100%;"></a>
</div>
<h2 dir="auto"><a id="user-content-filling-left" class="anchor" aria-hidden="true" href="#filling-left"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Filling left</h2>
<div align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dyeeee/CartesianJoin.jl/blob/main/files/flow/flag2.png"><img src="https://github.com/dyeeee/CartesianJoin.jl/raw/main/files/flow/flag2.png" width="500" style="max-width: 100%;"></a>
</div>
<h2 dir="auto"><a id="user-content-filling-right" class="anchor" aria-hidden="true" href="#filling-right"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Filling right</h2>
<div align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dyeeee/CartesianJoin.jl/blob/main/files/flow/flag3.png"><img src="https://github.com/dyeeee/CartesianJoin.jl/raw/main/files/flow/flag3.png" width="500" style="max-width: 100%;"></a>
</div>
<h1 dir="auto"><a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Examples</h1>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="using Pkg
Pkg.add(&quot;CartesianJoin&quot;)

dsl = Dataset(xid = [111,222,333,444,222], 
              x1 = [1,2,1,4,3], 
              x2 = [-1.2,-3,2.1,-3.5,2.8],
              x3 = [Date(&quot;2019-10-03&quot;), Date(&quot;2019-09-30&quot;), Date(&quot;2019-10-04&quot;), Date(&quot;2019-10-03&quot;), Date(&quot;2019-10-03&quot;)],
              x4 = [&quot;abcd&quot;,&quot;efgh&quot;,&quot;ijkl&quot;,&quot;mnop&quot;,&quot;qrst&quot;]);

dsr = Dataset(yid = [111,111,222,444,333],
              y1 = [3,3,3,3,3],
              y2 = [0,0, -3,1,2],
              y3 = [Date(&quot;2019-10-01&quot;),Date(&quot;2019-10-01&quot;), Date(&quot;2019-09-30&quot;), Date(&quot;2019-10-05&quot;), Date(&quot;2019-10-05&quot;)],
              y4 = [&quot;abc&quot;,&quot;abcd&quot;,&quot;efg&quot;,&quot;mnop&quot;,&quot;qrst&quot;]);

function fun1(x,y) 
  x &lt;= y
end

function fun2(x,y) 
  x &gt;= y
end

function fun3(x,y) 
  length(x) == length(y)
end

# Return cartesian join result.
newds = cartesianjoin(dsl,dsr);

# Cartesian join with conditions. Default function is `isequal()`.
newds = cartesianjoin(dsl,dsr,on = [:xid=&gt;:yid, :x1=&gt;:y1=&gt;fun1]);

# Cartesian join with multi user defined conditions.
newds = cartesianjoin(dsl,dsr,
          on = [:xid=&gt;:yid=&gt;fun2, :x1=&gt;:y1=&gt;fun1, :x4=&gt;:y4=&gt;:fun4],
          multiple_match=[true,false],
          obs_id=[true,false]);"><pre lang="{julia}" class="notranslate"><code>using Pkg
Pkg.add("CartesianJoin")

dsl = Dataset(xid = [111,222,333,444,222], 
              x1 = [1,2,1,4,3], 
              x2 = [-1.2,-3,2.1,-3.5,2.8],
              x3 = [Date("2019-10-03"), Date("2019-09-30"), Date("2019-10-04"), Date("2019-10-03"), Date("2019-10-03")],
              x4 = ["abcd","efgh","ijkl","mnop","qrst"]);

dsr = Dataset(yid = [111,111,222,444,333],
              y1 = [3,3,3,3,3],
              y2 = [0,0, -3,1,2],
              y3 = [Date("2019-10-01"),Date("2019-10-01"), Date("2019-09-30"), Date("2019-10-05"), Date("2019-10-05")],
              y4 = ["abc","abcd","efg","mnop","qrst"]);

function fun1(x,y) 
  x &lt;= y
end

function fun2(x,y) 
  x &gt;= y
end

function fun3(x,y) 
  length(x) == length(y)
end

# Return cartesian join result.
newds = cartesianjoin(dsl,dsr);

# Cartesian join with conditions. Default function is `isequal()`.
newds = cartesianjoin(dsl,dsr,on = [:xid=&gt;:yid, :x1=&gt;:y1=&gt;fun1]);

# Cartesian join with multi user defined conditions.
newds = cartesianjoin(dsl,dsr,
          on = [:xid=&gt;:yid=&gt;fun2, :x1=&gt;:y1=&gt;fun1, :x4=&gt;:y4=&gt;:fun4],
          multiple_match=[true,false],
          obs_id=[true,false]);
</code></pre></div>
<h1 dir="auto"><a id="user-content-benchmark" class="anchor" aria-hidden="true" href="#benchmark"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Benchmark</h1>
<h2 dir="auto"><a id="user-content----working-on-comparison-with-dataframeintervaljl-and-flexijoinjl" class="anchor" aria-hidden="true" href="#---working-on-comparison-with-dataframeintervaljl-and-flexijoinjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>-- working on comparison with DataFrameInterval.jl and FlexiJoin.jl</h2>
<ul dir="auto">
<li>
<p dir="auto"><em>size</em> for dataset: the rows number for both right and left dataset.  All cols number are 5 (type: Int, Int, String, Float, Date).</p>
</li>
<li>
<p dir="auto"><em>machine</em> : Mac with 2.9 GHz quad-core Intel Core i7 and 16 GB memory. Thread for Julia and R data.table is set to be 8.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-1-cartesianjoin-without-on-conditions" class="anchor" aria-hidden="true" href="#1-cartesianjoin-without-on-conditions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>1. Cartesianjoin without on conditions.</h2>
<table>
<thead>
<tr>
<th align="center">size\method</th>
<th align="center">crtesianjoin()</th>
<th align="center">R data.table</th>
<th align="center">R data.frame</th>
<th align="center">Python pandas</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">0.95 ms</td>
<td align="center">4.89 ms</td>
<td align="center">10.16 ms</td>
<td align="center">4.49 ms</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">29.90 ms</td>
<td align="center">65.69 ms</td>
<td align="center">2.57 s</td>
<td align="center">177.90 ms</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">5.71 s</td>
<td align="center">9.15 s</td>
<td align="center">/</td>
<td align="center">24.36 s</td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-2-inequality-join-for-multiple-cols" class="anchor" aria-hidden="true" href="#2-inequality-join-for-multiple-cols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>2. Inequality join for multiple cols</h2>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="@benchmark cartesianjoin(dsl_1e3,dsr_1e3,
              on = [:x1 =&gt; :y1 =&gt; isless, :x2 =&gt; :y2 =&gt; isless, :x4 =&gt; :y4 =&gt; isless],
              threads = true, check = false)"><pre lang="{julia}" class="notranslate"><code>@benchmark cartesianjoin(dsl_1e3,dsr_1e3,
              on = [:x1 =&gt; :y1 =&gt; isless, :x2 =&gt; :y2 =&gt; isless, :x4 =&gt; :y4 =&gt; isless],
              threads = true, check = false)
</code></pre></div>
<table>
<thead>
<tr>
<th align="center">size\method</th>
<th align="center">crtesianjoin()</th>
<th align="center">R data.table</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">0.70 ms</td>
<td align="center">4.24 ms</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">21.39 ms</td>
<td align="center">29.12 ms</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">2.16 s</td>
<td align="center">1.92 s</td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-3-inequality-join-for-multiple-cols" class="anchor" aria-hidden="true" href="#3-inequality-join-for-multiple-cols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>3. Inequality join for multiple cols</h2>
<p dir="auto">for data.table, do crossjoin and filter by conditions</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="function str_match(x,y)
  return x[8] === y[8]
end

@benchmark cartesianjoin(dsl_1e3,dsr_1e3,
                    on = [:x3 =&gt; :y3 =&gt; str_match],
                    threads = true, check = false)"><pre lang="{Julia}" class="notranslate"><code>function str_match(x,y)
  return x[8] === y[8]
end

@benchmark cartesianjoin(dsl_1e3,dsr_1e3,
                    on = [:x3 =&gt; :y3 =&gt; str_match],
                    threads = true, check = false)
</code></pre></div>
<table>
<thead>
<tr>
<th align="center">size\method</th>
<th align="center">crtesianjoin()</th>
<th align="center">R data.table</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">0.50 ms</td>
<td align="center">6.83 ms</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">11.51 ms</td>
<td align="center">173.36 ms</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">1.13 s</td>
<td align="center">19.18 s</td>
</tr>
</tbody>
</table>
<h1 dir="auto"><a id="user-content-version-history" class="anchor" aria-hidden="true" href="#version-history"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Version history</h1>
<h2 dir="auto"><a id="user-content-first-release-01" class="anchor" aria-hidden="true" href="#first-release-01"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>First release 0.1</h2>
<p dir="auto">0.1.3 - Normal Cartesianjoin supported.</p>
<p dir="auto">0.1.2 - All arguments from IMD.join is supported.</p>
<p dir="auto">0.1.1 - Split a join with a timer for performance evaluation.</p>
<h2 dir="auto"><a id="user-content-beta" class="anchor" aria-hidden="true" href="#beta"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Beta</h2>
<p dir="auto">v1 - Basic ideas. Using Flag matrix.</p>
<p dir="auto">v1t - Multi-threading.</p>
<p dir="auto">v2 - Vector operation refactoring.</p>
<p dir="auto">v3 - Better function barriers to further optimize vector operations.</p>
<p dir="auto">v4 - Flag <strong>vector</strong> replaced Flag <strong>matrix</strong>.</p>
<p dir="auto">v5 - Better function barriers when computing flag and generating new datset.</p>
<p dir="auto">v6 - Remove findall funtion to minimize allocations.</p>
</article></div>