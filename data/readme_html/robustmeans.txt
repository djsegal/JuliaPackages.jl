<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-robustmeans" class="anchor" aria-hidden="true" href="#robustmeans"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>RobustMeans</h1>
<p dir="auto">This package aim is to implement in Julia some (one-dimensional for now) robust mean estimators.
See <a href="https://arxiv.org/pdf/1906.04280.pdf" rel="nofollow">Mean Estimation and Regression Under Heavy-Tailed Distributions: A Survey</a> for a recent but but not up to date since the field is very active) survey.</p>
<p dir="auto"><strong>I am currently trying some stuff on the package</strong></p>
<h2 dir="auto"><a id="user-content-what-is-it-about" class="anchor" aria-hidden="true" href="#what-is-it-about"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What is it about?</h2>
<p dir="auto">Computing the empirical mean over a data set is one of the most common operations in data analysis.
However, this operation is not robust to outliers or contaminated samples.
Robust mean estimators are mean estimator that are <code>robust</code> (in some sense) against such outliers or contaminated samples.</p>
<h2 dir="auto"><a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Example</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using Distributions
using RobustMeans"><pre><span class="pl-k">using</span> Distributions
<span class="pl-k">using</span> RobustMeans</pre></div>
<h3 dir="auto"><a id="user-content-generate-samples" class="anchor" aria-hidden="true" href="#generate-samples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Generate samples</h3>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="n = 8 * 7
M = 10^5 # M = 10^7 is used for the plot
α = 3.1
distribution = Pareto(α)
μ = mean(distribution) # True mean
σ = std(distribution) # True std
x = rand(distribution, M, n) # M realization of samples of size n"><pre>n <span class="pl-k">=</span> <span class="pl-c1">8</span> <span class="pl-k">*</span> <span class="pl-c1">7</span>
M <span class="pl-k">=</span> <span class="pl-c1">10</span><span class="pl-k">^</span><span class="pl-c1">5</span> <span class="pl-c"><span class="pl-c">#</span> M = 10^7 is used for the plot</span>
α <span class="pl-k">=</span> <span class="pl-c1">3.1</span>
distribution <span class="pl-k">=</span> <span class="pl-c1">Pareto</span>(α)
μ <span class="pl-k">=</span> <span class="pl-c1">mean</span>(distribution) <span class="pl-c"><span class="pl-c">#</span> True mean</span>
σ <span class="pl-k">=</span> <span class="pl-c1">std</span>(distribution) <span class="pl-c"><span class="pl-c">#</span> True std</span>
x <span class="pl-k">=</span> <span class="pl-c1">rand</span>(distribution, M, n) <span class="pl-c"><span class="pl-c">#</span> M realization of samples of size n</span></pre></div>
<h3 dir="auto"><a id="user-content-estimate-the-mean-with-different-estimators" class="anchor" aria-hidden="true" href="#estimate-the-mean-with-different-estimators"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Estimate the mean with different estimators</h3>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Store all the realizations into a Dictionary
p = 1 # Parameter of MinskerNdaoud
δ = 3exp(-8) # 0.001
estimators = [EmpiricalMean(), Catoni(σ), Huber(σ), LeeValiant(), MinskerNdaoud(p)]
short_names = [&quot;EM&quot;, &quot;CA&quot;, &quot;HU&quot;, &quot;LV&quot;, &quot;MN&quot;]
estimates = Dict{MeanEstimator,Vector}()
for estimator in estimators
    estimates[estimator] = [mean(r, δ, estimator) for r in eachrow(x)]
    end"><pre><span class="pl-c"><span class="pl-c">#</span> Store all the realizations into a Dictionary</span>
p <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-c"><span class="pl-c">#</span> Parameter of MinskerNdaoud</span>
δ <span class="pl-k">=</span> <span class="pl-c1">3</span><span class="pl-c1">exp</span>(<span class="pl-k">-</span><span class="pl-c1">8</span>) <span class="pl-c"><span class="pl-c">#</span> 0.001</span>
estimators <span class="pl-k">=</span> [<span class="pl-c1">EmpiricalMean</span>(), <span class="pl-c1">Catoni</span>(σ), <span class="pl-c1">Huber</span>(σ), <span class="pl-c1">LeeValiant</span>(), <span class="pl-c1">MinskerNdaoud</span>(p)]
short_names <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>EM<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>CA<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>HU<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>LV<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>MN<span class="pl-pds">"</span></span>]
estimates <span class="pl-k">=</span> <span class="pl-c1">Dict</span><span class="pl-c1">{MeanEstimator,Vector}</span>()
<span class="pl-k">for</span> estimator <span class="pl-k">in</span> estimators
    estimates[estimator] <span class="pl-k">=</span> [<span class="pl-c1">mean</span>(r, δ, estimator) <span class="pl-k">for</span> r <span class="pl-k">in</span> <span class="pl-c1">eachrow</span>(x)]
    <span class="pl-k">end</span></pre></div>
<h3 dir="auto"><a id="user-content-plot" class="anchor" aria-hidden="true" href="#plot"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Plot</h3>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# To have nice LaTeX font plots.
using StatsPlots, LaTeXStrings
gr()
plot_font = &quot;Computer Modern&quot;
default(
    fontfamily = plot_font,
    linewidth = 2,
    label = nothing,
    grid = true,
    framestyle = :default
)
# The plot 
begin
    plot(thickness_scaling = 2, size = (1000, 600))
    plot!(Normal(), label = L&quot;\mathcal{N}(0,1)&quot;, c = :black, alpha = 0.6)
    for (ns, s) in enumerate(estimators)
        W = √(n) * (estimates[s] .- μ) / σ
        stephist!(W, alpha = 0.6, norm = :pdf, label = short_names[ns], c = ns)
        vline!([quantile(W, 1-δ)], s = :dot, c = ns)
    end

    vline!([0], label = :none, c = :black, lw = 1, alpha = 0.9)
    yaxis!(:log10, yminorticks = 9, minorgrid = :y, legend = :topright, minorgridlinewidth = 1.2)
    ylims!((1/M*10, 2))
    ylabel!(L&quot;\sqrt{n}(\hat{\mu}_n-\mu)/\sigma&quot;, tickfonthalign = :center)
    xlims!((-5, 10))
    yticks!(10.0 .^ (-7:-0))
end"><pre><span class="pl-c"><span class="pl-c">#</span> To have nice LaTeX font plots.</span>
<span class="pl-k">using</span> StatsPlots, LaTeXStrings
<span class="pl-c1">gr</span>()
plot_font <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Computer Modern<span class="pl-pds">"</span></span>
<span class="pl-c1">default</span>(
    fontfamily <span class="pl-k">=</span> plot_font,
    linewidth <span class="pl-k">=</span> <span class="pl-c1">2</span>,
    label <span class="pl-k">=</span> <span class="pl-c1">nothing</span>,
    grid <span class="pl-k">=</span> <span class="pl-c1">true</span>,
    framestyle <span class="pl-k">=</span> <span class="pl-c1">:default</span>
)
<span class="pl-c"><span class="pl-c">#</span> The plot </span>
<span class="pl-k">begin</span>
    <span class="pl-c1">plot</span>(thickness_scaling <span class="pl-k">=</span> <span class="pl-c1">2</span>, size <span class="pl-k">=</span> (<span class="pl-c1">1000</span>, <span class="pl-c1">600</span>))
    <span class="pl-c1">plot!</span>(<span class="pl-c1">Normal</span>(), label <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">L</span>"</span><span class="pl-cce">\m</span>athcal{N}(0,1)<span class="pl-pds">"</span></span>, c <span class="pl-k">=</span> <span class="pl-c1">:black</span>, alpha <span class="pl-k">=</span> <span class="pl-c1">0.6</span>)
    <span class="pl-k">for</span> (ns, s) <span class="pl-k">in</span> <span class="pl-c1">enumerate</span>(estimators)
        W <span class="pl-k">=</span> <span class="pl-k">√</span>(n) <span class="pl-k">*</span> (estimates[s] <span class="pl-k">.-</span> μ) <span class="pl-k">/</span> σ
        <span class="pl-c1">stephist!</span>(W, alpha <span class="pl-k">=</span> <span class="pl-c1">0.6</span>, norm <span class="pl-k">=</span> <span class="pl-c1">:pdf</span>, label <span class="pl-k">=</span> short_names[ns], c <span class="pl-k">=</span> ns)
        <span class="pl-c1">vline!</span>([<span class="pl-c1">quantile</span>(W, <span class="pl-c1">1</span><span class="pl-k">-</span>δ)], s <span class="pl-k">=</span> <span class="pl-c1">:dot</span>, c <span class="pl-k">=</span> ns)
    <span class="pl-k">end</span>

    <span class="pl-c1">vline!</span>([<span class="pl-c1">0</span>], label <span class="pl-k">=</span> <span class="pl-c1">:none</span>, c <span class="pl-k">=</span> <span class="pl-c1">:black</span>, lw <span class="pl-k">=</span> <span class="pl-c1">1</span>, alpha <span class="pl-k">=</span> <span class="pl-c1">0.9</span>)
    <span class="pl-c1">yaxis!</span>(<span class="pl-c1">:log10</span>, yminorticks <span class="pl-k">=</span> <span class="pl-c1">9</span>, minorgrid <span class="pl-k">=</span> <span class="pl-c1">:y</span>, legend <span class="pl-k">=</span> <span class="pl-c1">:topright</span>, minorgridlinewidth <span class="pl-k">=</span> <span class="pl-c1">1.2</span>)
    <span class="pl-c1">ylims!</span>((<span class="pl-c1">1</span><span class="pl-k">/</span>M<span class="pl-k">*</span><span class="pl-c1">10</span>, <span class="pl-c1">2</span>))
    <span class="pl-c1">ylabel!</span>(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">L</span>"</span><span class="pl-cce">\s</span>qrt{n}(<span class="pl-cce">\h</span>at{<span class="pl-cce">\m</span>u}_n-<span class="pl-cce">\m</span>u)/<span class="pl-cce">\s</span>igma<span class="pl-pds">"</span></span>, tickfonthalign <span class="pl-k">=</span> <span class="pl-c1">:center</span>)
    <span class="pl-c1">xlims!</span>((<span class="pl-k">-</span><span class="pl-c1">5</span>, <span class="pl-c1">10</span>))
    <span class="pl-c1">yticks!</span>(<span class="pl-c1">10.0</span> <span class="pl-k">.^</span> (<span class="pl-k">-</span><span class="pl-c1">7</span><span class="pl-k">:</span><span class="pl-k">-</span><span class="pl-c1">0</span>))
<span class="pl-k">end</span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="img/robust_n_56_alpha_3p1_delta_0p001_1000000_EMCAHULVMN.svg"><img src="img/robust_n_56_alpha_3p1_delta_0p001_1000000_EMCAHULVMN.svg" alt="robust_n_56_alpha_3p1_delta_0p001_1000000_EMCAHULVMN.svg" style="max-width: 100%;"></a></p>
</article></div>