<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/jtkornel/DiffRaster2D.jl/actions/workflows/main.yml/badge.svg"><img src="https://github.com/jtkornel/DiffRaster2D.jl/actions/workflows/main.yml/badge.svg" alt="ci tests" style="max-width: 100%;"></a>  <a href="https://codecov.io/gh/jtkornel/DiffRaster2D.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/21e74d57d5544e9196ec29bc467843486d65edbc093c91e5fd9f8d6378298330/68747470733a2f2f636f6465636f762e696f2f67682f6a746b6f726e656c2f4469666652617374657232442e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e7376673f746f6b656e3d45353941303230415939" alt="codecov" data-canonical-src="https://codecov.io/gh/jtkornel/DiffRaster2D.jl/branch/main/graph/badge.svg?token=E59A020AY9" style="max-width: 100%;"></a></p>
<h1 dir="auto"><a id="user-content-diffraster2djl---differentiable-2d-rasterizer-in-julia" class="anchor" aria-hidden="true" href="#diffraster2djl---differentiable-2d-rasterizer-in-julia"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>DiffRaster2D.jl - Differentiable 2d rasterizer in Julia</h1>
<p dir="auto">A basic rasterizer which lets you take any image and and fit the parameters of a vector-graphics model to it, using the same techiques that form the backbone of deep learning.</p>
<p dir="auto">By using <a href="https://en.wikipedia.org/wiki/Signed_distance_function" rel="nofollow">signed distance functions</a> (SDF) to represent geometric primitives, and rendering with 1d anti-aliasing, one can get a fully differentiable graphics pipeline. That in turn makes it possible to set up a loss funtion for a rendered image against some reference image, and optimize the rendering parameters to minimize the loss using gradient search techniques. The SDF technique for graphics is not novel, but using it for differentiable 2d-rendering like here was recently described in <a href="https://people.csail.mit.edu/tzumao/diffvg/diffvg.pdf" rel="nofollow">this paper by Tzu-Mao Li and collaborators</a></p>
<p dir="auto">This toolbox shows the concept using the <a href="https://github.com/FluxML/Zygote.jl">Zygote</a> framework in <a href="https://julialang.org" rel="nofollow">Julia</a>.</p>
<p dir="auto">For now circle and triangle primitives are supported, in addition to face-vertex triangle meshes.</p>
<p dir="auto">Each primitive can be shaded with a linear color gradient which can also be optimized.</p>
<p dir="auto">To do a basic test, run <code>examples/visualize_circle_recovery.jl</code></p>
<p dir="auto">This shows selected iterations when fitting a shaded circle:<br>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/jtkornel/DiffRaster2D.jl/main/media/visualize_circle_recovery.png"><img alt="visualize_circle_recovery" src="https://raw.githubusercontent.com/jtkornel/DiffRaster2D.jl/main/media/visualize_circle_recovery.png" style="max-width: 100%;"></a></p>
<p dir="auto">For a more advanced example fitting a triangle mesh to a raster image, run <code>examples/triangle_mesh_optimization.jl</code></p>
<p dir="auto">By running for quite a few iterations you should get something like this:<br>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/jtkornel/DiffRaster2D.jl/main/media/triangle_mesh_optimization.png"><img alt="triangle_mesh_optimization" src="https://raw.githubusercontent.com/jtkornel/DiffRaster2D.jl/main/media/triangle_mesh_optimization.png" style="max-width: 100%;"></a></p>
<p dir="auto">Note that since the vertex positions are unconstrained, the mesh quality may end up being so-so with some very elongated rectangles.</p>
<h2 dir="auto"><a id="user-content-todo-list" class="anchor" aria-hidden="true" href="#todo-list"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Todo-list</h2>
<ul dir="auto">
<li>A better selection of SDF primitives</li>
<li>Documentation</li>
<li>Integration with other Julia geometry packages</li>
<li>Mesh quality regularization</li>
<li>Tailor for more efficient gradients from Zygote</li>
<li>Faster rendering with tiles or kD-tree</li>
</ul>
</article></div>