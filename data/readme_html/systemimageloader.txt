<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-systemimageloaderjl" class="anchor" aria-hidden="true" href="#systemimageloaderjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>SystemImageLoader.jl</h1>
<p dir="auto">Use Julia's artifact system to ship pre-built system images to users.</p>
<h2 dir="auto"><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module MyCustomImages

using SystemImageLoader

const install = @ArtifactInstaller(
    artifact&quot;MyImage&quot;,
)
const config = ArtifactConfig(install)

end"><pre><span class="pl-k">module</span> MyCustomImages

<span class="pl-k">using</span> SystemImageLoader

<span class="pl-k">const</span> install <span class="pl-k">=</span> <span class="pl-c1">@ArtifactInstaller</span>(
    <span class="pl-s"><span class="pl-pds"><span class="pl-c1">artifact</span>"</span>MyImage<span class="pl-pds">"</span></span>,
)
<span class="pl-k">const</span> config <span class="pl-k">=</span> <span class="pl-c1">ArtifactConfig</span>(install)

<span class="pl-k">end</span></pre></div>
<p dir="auto">Provide an <code>Artifacts.toml</code> file in your <code>MyCustomImages.jl</code> package that lists
the artifact <code>MyImage</code>. The <code>.tar.gz</code> must have the following structure:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="/artifacts
  # All the Julia artifacts required by the system image.
/system-images
  # The system image with the name `ImageOne`."><pre class="notranslate"><code>/artifacts
  # All the Julia artifacts required by the system image.
/system-images
  # The system image with the name `ImageOne`.
</code></pre></div>
<p dir="auto">This is a minimal Julia depot folder, with everything not required removed. You
can leave other content in the tarball if you want but this will waste space
so best practise is to remove the extra folders.</p>
<p dir="auto">Users of your package can then perform the following steps to install and use your
custom system image:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(@v1.7) pkg&gt; add https://github.com/USER_NAME/MyCustomImages.jl

julia&gt; using MyCustomImages

julia&gt; MyCustomImages.install()"><pre class="notranslate"><code>(@v1.7) pkg&gt; add https://github.com/USER_NAME/MyCustomImages.jl

julia&gt; using MyCustomImages

julia&gt; MyCustomImages.install()
</code></pre></div>
<p dir="auto"><code>install()</code> will start an interactive prompt to allow the user to pick which
images (if you have several) that they would like to install.</p>
<p dir="auto">Once installed custom <code>juliaup</code> channels will be automatically created for each
available system image.</p>
<p dir="auto">Starting <code>julia</code> with the newly added channel will look like the following:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ julia +1.7.3/MyCustomImages/MyImage"><pre class="notranslate"><code>$ julia +1.7.3/MyCustomImages/MyImage
</code></pre></div>
<p dir="auto">where <code>1.7.3</code> would be whatever Julia version you installed <code>MyCustomImages</code>
with.</p>
<p dir="auto">If the channel name is too long for your liking then you can alias it to
another shorter channel name with <code>juliaup</code> like so:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ juliaup link MyImage julia +1.7.3/MyCustomImages/MyImage"><pre class="notranslate"><code>$ juliaup link MyImage julia +1.7.3/MyCustomImages/MyImage
</code></pre></div>
<p dir="auto">which can then be started with just <code>julia +MyImage</code>.</p>
<h1 dir="auto"><a id="user-content-associated-projects" class="anchor" aria-hidden="true" href="#associated-projects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Associated Projects</h1>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://github.com/MichaelHatherly/system-image-loader"><code>system-image-loader</code></a>
provides the binary loader used to locate depot and image file paths for a
given custom channel.</p>
</li>
<li>
<p dir="auto"><a href="https://github.com/MichaelHatherly/CuratedSystemImages.jl"><code>CuratedSystemImages.jl</code></a>
provides a selection of pre-built system images as Julia artifacts that can
be installed and used as custom channels.</p>
</li>
<li>
<p dir="auto"><a href="https://github.com/MichaelHatherly/curated-system-images"><code>curated-system-images</code></a>
is the builder repository for the above Julia package and is where all the
project manifests are located for generating specific system image bundles.</p>
</li>
</ul>
</article></div>