<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-dbftables" class="anchor" aria-hidden="true" href="#dbftables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DBFTables</h1>
<p><a href="https://travis-ci.org/JuliaData/DBFTables.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/eecf1fed9b2388bb070f4095ed11b2baaf0d98d2/68747470733a2f2f7472617669732d63692e6f72672f4a756c6961446174612f4442465461626c65732e6a6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/JuliaData/DBFTables.jl.svg?branch=master" style="max-width:100%;"></a>
<a href="https://coveralls.io/github/JuliaData/DBFTables.jl?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/ba92c40eb6bff7e887ca3ecbc410ae2e8d0c4636/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f4a756c6961446174612f4442465461626c65732e6a6c2f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/JuliaData/DBFTables.jl/badge.svg?branch=master&amp;service=github" style="max-width:100%;"></a>
<a href="http://codecov.io/github/JuliaData/DBFTables.jl?branch=master" rel="nofollow"><img src="https://camo.githubusercontent.com/6ce2151e92267450a3ab3a293eace265368159a9/687474703a2f2f636f6465636f762e696f2f6769746875622f4a756c6961446174612f4442465461626c65732e6a6c2f636f7665726167652e7376673f6272616e63683d6d6173746572" alt="codecov.io" data-canonical-src="http://codecov.io/github/JuliaData/DBFTables.jl/coverage.svg?branch=master" style="max-width:100%;"></a></p>
<p>Read xBase / dBASE III+ <a href="https://en.wikipedia.org/wiki/.dbf" rel="nofollow">.dbf</a> files in Julia. Supports the <a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a> interface.</p>
<p><a href="https://github.com/JuliaGeo/Shapefile.jl">Shapefile.jl</a> uses this package to read the information associated to the geometries of the <code>.shp</code> file.</p>
<h2><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<div class="highlight highlight-source-julia"><pre><span class="pl-k">using</span> DBFTables
dbf <span class="pl-k">=</span> DBFTables<span class="pl-k">.</span><span class="pl-c1">Table</span>(<span class="pl-s"><span class="pl-pds">"</span>test.dbf<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">#</span> whole columns can be retrieved by their name</span>
<span class="pl-c"><span class="pl-c">#</span> note that this creates a copy, so instead of repeated `dbf.field` calls,</span>
<span class="pl-c"><span class="pl-c">#</span> it is faster to once do `field = dbf.field` and then use `field` instead</span>
dbf<span class="pl-k">.</span>INTEGER  <span class="pl-c"><span class="pl-c">#</span> =&gt; Union{Missing, Int64}[100, 101, 102, 0, 2222222222, 4444444444, missing]</span>

<span class="pl-c"><span class="pl-c">#</span> example function that iterates over the rows and uses two columns</span>
<span class="pl-k">function</span> <span class="pl-en">sumif</span>(dbf)
    total <span class="pl-k">=</span> <span class="pl-c1">0.0</span>
    <span class="pl-k">for</span> row <span class="pl-k">in</span> dbf
        <span class="pl-k">if</span> row<span class="pl-k">.</span>BOOLEAN <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span><span class="pl-c1">ismissing</span>(row<span class="pl-k">.</span>NUMERIC)
            value <span class="pl-k">+=</span> row<span class="pl-k">.</span>NUMERIC
        <span class="pl-k">end</span>
    <span class="pl-k">end</span>
    <span class="pl-k">return</span> total
<span class="pl-k">end</span>

<span class="pl-c"><span class="pl-c">#</span> for other functionality, convert to other Tables such as DataFrame</span>
<span class="pl-k">using</span> DataFrames
df <span class="pl-k">=</span> <span class="pl-c1">DataFrame</span>(dbf)</pre></div>
<h2><a id="user-content-format-description-resources" class="anchor" aria-hidden="true" href="#format-description-resources"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Format description resources</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/.dbf" rel="nofollow">https://en.wikipedia.org/wiki/.dbf</a></li>
<li><a href="https://www.clicketyclick.dk/databases/xbase/format/dbf.html" rel="nofollow">https://www.clicketyclick.dk/databases/xbase/format/dbf.html</a></li>
<li><a href="http://www.independent-software.com/dbase-dbf-dbt-file-format.html" rel="nofollow">http://www.independent-software.com/dbase-dbf-dbt-file-format.html</a></li>
</ul>
<h2><a id="user-content-implementation-details" class="anchor" aria-hidden="true" href="#implementation-details"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation details</h2>
<p>The DBF header contains information on the amount of rows, which columns are present, what type they are, and how many bytes the entries are. Based on this we can create a <code>Tables.Schema</code>. Each row is a fixed amount of bytes. All data is represented as strings, with different conventions based on the specified type. There are no delimiters between the entries, but since we know the sizes from the header, it is not needed.</p>
<p>The <code>DBFTables.Table</code> struct holds both the header and data. All data is read into memory in one go as a <code>Vector{UInt8}</code>. To provide efficient access into the individual entries, we use <a href="https://github.com/JuliaData/WeakRefStrings.jl/">WeakRefStrings</a>. WeakRefStrings' <code>StringArray</code> only holds the offsets and lengths into the <code>Vector{UInt8}</code> with all the data. Then we still need to convert from the string to the julia type. This is done on demand with <code>dbf_value</code>.</p>
<p>Note that the format also contains a "record deleted" flag, which is represented by a <code>'*'</code> at the start of the row. When this is encountered the record should be treated as if it doesn't exist. Since normally writers strip these records when writing, they are rarely encountered. For that reason this package ignores these flags by default right now. To check for the flags yourself, there is the <code>isdeleted</code> function. A sample file with deleted record flags is available <a href="https://issues.qgis.org/issues/11007#note-30" rel="nofollow">here</a>.</p>
</article></div>