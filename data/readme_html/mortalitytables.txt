<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1><a id="user-content-mortalitytables" class="anchor" aria-hidden="true" href="#mortalitytables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MortalityTables</h1>
<p><a href="https://JuliaActuary.github.io/MortalityTables.jl/stable" rel="nofollow"><img src="https://camo.githubusercontent.com/f7b92a177c912c1cc007fc9b40f17ff3ee3bb414/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="Stable" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width:100%;"></a>
<a href="https://JuliaActuary.github.io/MortalityTables.jl/dev" rel="nofollow"><img src="https://camo.githubusercontent.com/3e353c26ddfe819150acbc732248f4f2a37f5175/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6465762d626c75652e737667" alt="Dev" data-canonical-src="https://img.shields.io/badge/docs-dev-blue.svg" style="max-width:100%;"></a>
<a href="https://github.com/JuliaActuary/MortalityTables.jl/actions?query=workflow%3ACI"><img src="https://github.com/JuliaActuary/MortalityTables.jl/workflows/CI/badge.svg" alt="CI" style="max-width:100%;"></a>
<a href="https://codecov.io/gh/JuliaActuary/MortalityTables.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/cee8daf38d3bfeb2a419a71922f79c6ce5e28a2a/68747470733a2f2f636f6465636f762e696f2f67682f4a756c6961416374756172792f4d6f7274616c6974795461626c65732e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/JuliaActuary/MortalityTables.jl/branch/master/graph/badge.svg" style="max-width:100%;"></a></p>
<p>A Julia package for working with MortalityTables. Has:</p>
<ul>
<li>First-class support for missing values.</li>
<li>Lots of bundled SOA mort.soa.org tables</li>
<li><code>survivorship</code> and <code>cumualtive_decrement</code> functions to calculate decrements over period of time</li>
<li>Partial year mortality calculations (Uniform, Constant, Balducci)</li>
<li>Friendly syntax and flexible usage</li>
</ul>
<h2><a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h2>
<h3><a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h3>
<p>Loading the package and bundled tables:</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> MortalityTables

julia<span class="pl-k">&gt;</span> tables <span class="pl-k">=</span> MortalityTables<span class="pl-k">.</span><span class="pl-c1">tables</span>()
Dict{String,MortalityTable} with <span class="pl-c1">266</span> entries<span class="pl-k">:</span>
  <span class="pl-s"><span class="pl-pds">"</span>2015 VBT Female Non-Smoker RR90 ALB<span class="pl-pds">"</span></span>                                       <span class="pl-k">=&gt;</span> SelectUltimateTable{OffsetArray{OffsetArray{Float64,<span class="pl-c1">1</span>,Array{Float64,<span class="pl-c1">1</span>}},<span class="pl-c1">1</span>,Array{OffsetArray{F…  
  <span class="pl-s"><span class="pl-pds">"</span>2017 Loaded CSO Preferred Structure Nonsmoker Preferred Female ANB<span class="pl-pds">"</span></span>        <span class="pl-k">=&gt;</span> SelectUltimateTable{OffsetArray{OffsetArray{Float64,<span class="pl-c1">1</span>,Array{Float64,<span class="pl-c1">1</span>}},<span class="pl-c1">1</span>,Array{OffsetArray{F…  
  ⋮                                                                            <span class="pl-k">=&gt;</span> ⋮</pre></div>
<p>Get information about a particular table:</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> vbt2001 <span class="pl-k">=</span> tables[<span class="pl-s"><span class="pl-pds">"</span>2001 VBT Residual Standard Select and Ultimate - Male Nonsmoker, ANB<span class="pl-pds">"</span></span>]
MortalityTable<span class="pl-k">:</span>
   Name<span class="pl-k">:</span>
       <span class="pl-c1">2001</span> VBT Residual Standard Select and Ultimate <span class="pl-k">-</span> Male Nonsmoker, ANB
   Provider<span class="pl-k">:</span>
       Society of Actuaries
   mort<span class="pl-k">.</span>SOA<span class="pl-k">.</span>org ID<span class="pl-k">:</span>
       <span class="pl-c1">1118</span>
   mort<span class="pl-k">.</span>SOA<span class="pl-k">.</span>org link<span class="pl-k">:</span>
       https<span class="pl-k">:</span><span class="pl-k">//</span>mort<span class="pl-k">.</span>soa<span class="pl-k">.</span>org<span class="pl-k">/</span>ViewTable<span class="pl-k">.</span>aspx?<span class="pl-k">&amp;</span>TableIdentity<span class="pl-k">=</span><span class="pl-c1">1118</span>
   Description<span class="pl-k">:</span>
       <span class="pl-c1">2001</span> Valuation Basic Table (VBT) Residual Standard Select and Ultimate Table <span class="pl-k">-</span>  Male Nonsmoker. Basis<span class="pl-k">:</span> Age Nearest Birthday. Minimum Select Age<span class="pl-k">:</span> <span class="pl-c1">0.</span> Maximum Select Age<span class="pl-k">:</span> <span class="pl-c1">99.</span> Minimum Ultimate Age<span class="pl-k">:</span> <span class="pl-c1">25.</span> Maximum Ultimate Age<span class="pl-k">:</span> <span class="pl-c1">120</span></pre></div>
<p>The package revolves around easy-to-access vectors which are indexed by attained age:</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> vbt2001<span class="pl-k">.</span>select[<span class="pl-c1">35</span>] <span class="pl-c"><span class="pl-c">#</span> vector of rates for issue age 35</span>
 <span class="pl-c1">0.00036</span>
 <span class="pl-c1">0.00048</span>
 ⋮
 <span class="pl-c1">0.94729</span>
 <span class="pl-c1">1.0</span>
julia<span class="pl-k">&gt;</span> vbt2001<span class="pl-k">.</span>select[<span class="pl-c1">35</span>][<span class="pl-c1">35</span>] <span class="pl-c"><span class="pl-c">#</span>issue age 35, attained age 35</span>

julia<span class="pl-k">&gt;</span> vbt2001<span class="pl-k">.</span>ultimate[<span class="pl-c1">95</span>]  <span class="pl-c"><span class="pl-c">#</span> ultimate vectors only need to be called with the attained age</span>
<span class="pl-c1">0.24298</span></pre></div>
<p>Calculate the force of mortality or survivorship over a range of time:</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">survivorship</span>(vbt2001<span class="pl-k">.</span>ultimate,<span class="pl-c1">30</span>,<span class="pl-c1">40</span>) <span class="pl-c"><span class="pl-c">#</span> the survivorship between ages 30 and 40</span>
<span class="pl-c1">0.9894404665434904</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">cumulative_decrement</span>(vbt2001<span class="pl-k">.</span>ultimate,<span class="pl-c1">30</span>,<span class="pl-c1">40</span>) <span class="pl-c"><span class="pl-c">#</span> the survivorship between ages 30 and 40</span>
<span class="pl-c1">0.010559533456509618</span></pre></div>
<p>Non-whole periods of time are supported when you specify the assumption (<code>Constant()</code>, <code>Uniform()</code>, or <code>Balducci()</code>) for fractional periods:</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">survivorship</span>(vbt2001<span class="pl-k">.</span>ultimate,<span class="pl-c1">30</span>,<span class="pl-c1">40.5</span>,<span class="pl-c1">Uniform</span>()) <span class="pl-c"><span class="pl-c">#</span> the survivorship between ages 30 and 40.5</span>
<span class="pl-c1">0.9887676470262408</span></pre></div>
<h3><a id="user-content-example-quickly-access-and-compare-tables" class="anchor" aria-hidden="true" href="#example-quickly-access-and-compare-tables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example: Quickly access and compare tables</h3>
<div class="highlight highlight-source-julia"><pre><span class="pl-k">using</span> MortalityTables, Plots


tables <span class="pl-k">=</span> MortalityTables<span class="pl-k">.</span><span class="pl-c1">tables</span>()
cso_2001 <span class="pl-k">=</span> tables[<span class="pl-s"><span class="pl-pds">"</span>2001 CSO Super Preferred Select and Ultimate - Male Nonsmoker, ANB<span class="pl-pds">"</span></span>]
cso_2017 <span class="pl-k">=</span> tables[<span class="pl-s"><span class="pl-pds">"</span>2017 Loaded CSO Preferred Structure Nonsmoker Super Preferred Male ANB<span class="pl-pds">"</span></span>]

issue_age <span class="pl-k">=</span> <span class="pl-c1">27</span>
durations <span class="pl-k">=</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">30</span>
mort <span class="pl-k">=</span> [
     cso_2001<span class="pl-k">.</span>select[issue_age][issue_age <span class="pl-k">.+</span> durations <span class="pl-k">.-</span> <span class="pl-c1">1</span>],
     cso_2017<span class="pl-k">.</span>select[issue_age][issue_age <span class="pl-k">.+</span> durations <span class="pl-k">.-</span> <span class="pl-c1">1</span>],
     ]
<span class="pl-c1">plot</span>(
   durations,
   mort,
   label <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>2001 CSO<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>2017 CSO<span class="pl-pds">"</span></span>],
   title <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Comparison of 2107 and 2001 CSO <span class="pl-cce">\n</span> for SuperPref NS 27-year-old male<span class="pl-pds">"</span></span>,
   xlabel<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>duration<span class="pl-pds">"</span></span>)</pre></div>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/711879/83955217-1c8d7180-a816-11ea-9406-d98ed360d5c8.png"><img src="https://user-images.githubusercontent.com/711879/83955217-1c8d7180-a816-11ea-9406-d98ed360d5c8.png" alt="Comparison of 1980 and 2001 CSO \n for 27-year-old male" style="max-width:100%;"></a></p>
<p>Easily extend the analysis to move up the <a href="http://worrydream.com/LadderOfAbstraction/" rel="nofollow">ladder of abstraction</a>:</p>
<div class="highlight highlight-source-julia"><pre>issue_ages <span class="pl-k">=</span> <span class="pl-c1">18</span><span class="pl-k">:</span><span class="pl-c1">80</span>
durations <span class="pl-k">=</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">40</span>

<span class="pl-c"><span class="pl-c">#</span> compute the relative rates with the element-wise division ("brodcasting" in Julia)</span>
<span class="pl-k">function</span> <span class="pl-en">rel_diff</span>(a, b, issue_age,duration)
        att_age <span class="pl-k">=</span> issue_age <span class="pl-k">+</span> duration <span class="pl-k">-</span> <span class="pl-c1">1</span>
        <span class="pl-k">return</span> a[issue_age][att_age] <span class="pl-k">/</span> b[issue_age][att_age]
<span class="pl-k">end</span>


diff <span class="pl-k">=</span> [<span class="pl-c1">rel_diff</span>(cso_2017<span class="pl-k">.</span>select,cso_2001<span class="pl-k">.</span>select,ia,dur) <span class="pl-k">for</span> ia <span class="pl-k">in</span> issue_ages, dur <span class="pl-k">in</span> durations]
<span class="pl-c1">contour</span>(durations,
        issue_ages,
        diff,
        xlabel<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>duration<span class="pl-pds">"</span></span>,ylabel<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>issue ages<span class="pl-pds">"</span></span>,
        title<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Relative difference between 2017 and 2001 CSO <span class="pl-cce">\n</span> M PFN<span class="pl-pds">"</span></span>,
        fill<span class="pl-k">=</span><span class="pl-c1">true</span>
        )</pre></div>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/711879/83955100-11861180-a815-11ea-9a22-c85bacceb4bc.png"><img src="https://user-images.githubusercontent.com/711879/83955100-11861180-a815-11ea-9a22-c85bacceb4bc.png" alt="heatmap comparison of 2017 CSO and 2001 CSO Mortality Table" style="max-width:100%;"></a></p>
<h3><a id="user-content-example-scaling-and-capping-a-table" class="anchor" aria-hidden="true" href="#example-scaling-and-capping-a-table"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example: Scaling and capping a table</h3>
<p>Say that you want to take a given mortality table, scale it by <code>130%</code>, and cap it at <code>1.0</code>. You can do this easliy by <a href="https://docs.julialang.org/en/v1/manual/arrays/index.html#Broadcasting-1" rel="nofollow">broadcasting</a> over the underlying rates (which is really just a vector of numbers at the end of the day):</p>
<div class="highlight highlight-source-julia"><pre>issue_age <span class="pl-k">=</span> <span class="pl-c1">30</span>
m <span class="pl-k">=</span> cso_2001<span class="pl-k">.</span>select[issue_age]

scaled_m <span class="pl-k">=</span> <span class="pl-c1">min</span>.(cso_2001<span class="pl-k">.</span>select[issue_age] <span class="pl-k">.*</span> <span class="pl-c1">1.3</span>, <span class="pl-c1">1.0</span>) <span class="pl-c"><span class="pl-c">#</span> 130% and capped at 1.0 version of `m`</span></pre></div>
<p>Note that <code>min.(cso_2001.select .* 1.3, 1.0)</code> won't work because <code>cso_2001.select</code> is still a vector-of-vectors (a vector for each issue age). You need to drill down to a given issue age or use an <code>ulitmate</code> table to manipulate the rates in this way.</p>
<h2><a id="user-content-fractional-years" class="anchor" aria-hidden="true" href="#fractional-years"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fractional Years</h2>
<p>When evaluating survival over partial years when you are given full year mortality
rates, you must make an assumption over how those deaths are distributed throughout
the year. Three assumptions are provided as options and are based on formulas
from the <a href="https://www.soa.org/globalassets/assets/Files/Research/2016-10-experience-study-calculations.pdf" rel="nofollow">2016 Experience Study Calculations paper from the SOA</a>, specifically pages 40-44.</p>
<p>The three assumptions are:</p>
<ul>
<li><code>Uniform()</code> which assumes an increasing force of mortality throughout the year.</li>
<li><code>Constant()</code> which assumes a level force of mortality throughout the year.</li>
<li><code>Balducci()</code> which assumes a decreasing force of mortality over the year. It seems <a href="https://www.soa.org/globalassets/assets/library/research/actuarial-research-clearing-house/1978-89/1988/arch-1/arch88v17.pdf" rel="nofollow">to
be for</a> making it easier to calculate successive months by hand.</li>
</ul>
<h2><a id="user-content-some-batteries-included" class="anchor" aria-hidden="true" href="#some-batteries-included"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Some Batteries Included</h2>
<p>Comes with some tables built in via <a href="https://mort.soa.org" rel="nofollow">mort.SOA.org</a> and by using <a href="https://mort.soa.org/TermsOfUse.aspx" rel="nofollow">you agree to their terms</a>.</p>
<p>Not all tables have been tested that they work by default, though no issues have
been reported with any of the the VBT/CSO/other common tables.</p>
<p>Sample of some of the included table sets:</p>
<pre lang="plaintext"><code>2017 Loaded CSO
2015 VBT
2001 VBT
2001 CSO
1980 CSO
1980 CET
</code></pre>
<p><a href="BundledTables.md">Click here to see the full list of tables included.</a></p>
<h2><a id="user-content-parameterized-models" class="anchor" aria-hidden="true" href="#parameterized-models"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Parameterized Models</h2>
<p>Makeham and Gompertz's Law is included. Use like so:</p>
<div class="highlight highlight-source-julia"><pre>a <span class="pl-k">=</span> <span class="pl-c1">0.00022</span>
b <span class="pl-k">=</span> <span class="pl-c1">2.7e-6</span>
c <span class="pl-k">=</span> <span class="pl-c1">1.124</span>
m <span class="pl-k">=</span> <span class="pl-c1">Makeham</span>(a,b,c)
g <span class="pl-k">=</span> <span class="pl-c1">Gompertz</span>(b,c)</pre></div>
<p>Now some examples with <code>m</code>, but could use <code>g</code> interchangably:</p>
<div class="highlight highlight-source-julia"><pre>age <span class="pl-k">=</span> <span class="pl-c1">20</span>
m[<span class="pl-c1">20</span>] <span class="pl-c"><span class="pl-c">#</span> the mortality rate at age 20</span>
<span class="pl-c1">cumulative_decrement</span>(m,<span class="pl-c1">20</span>,<span class="pl-c1">25</span>) <span class="pl-c"><span class="pl-c">#</span> the five year cumulative mortality rate</span>
<span class="pl-c1">survivorship</span>(m,<span class="pl-c1">20</span>,<span class="pl-c1">25</span>) <span class="pl-c"><span class="pl-c">#</span> the five year survivorship rate</span></pre></div>
<h2><a id="user-content-adding-more-tables" class="anchor" aria-hidden="true" href="#adding-more-tables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Adding more tables</h2>
<h3><a id="user-content-getting-tables-from-mortsoaorg" class="anchor" aria-hidden="true" href="#getting-tables-from-mortsoaorg"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting tables from <a href="https://mort.soa.org" rel="nofollow">mort.SOA.org</a></h3>
<p>Given a table id (<a href="https://mort.soa.org/ViewTable.aspx?&amp;TableIdentity=60029" rel="nofollow">for example</a> <code>60029</code>)
you can request the table directly from the SOA's mortality table service. Remember
that not all tables have been tested, though the standard source format should mean
compatibility with <code>MortalityTables.jl</code>.</p>
<div class="highlight highlight-source-julia"><pre>aus_life_table_female <span class="pl-k">=</span> <span class="pl-c1">get_SOA_table</span>(<span class="pl-c1">60029</span>)
aus_life_table_female[<span class="pl-c1">0</span>]  <span class="pl-c"><span class="pl-c">#</span> returns the attained age 0 rate of 0.10139</span></pre></div>
<p>You can combine it with the bundled tables too:</p>
<div class="highlight highlight-source-julia"><pre>tables <span class="pl-k">=</span> MortalityTables<span class="pl-k">.</span><span class="pl-c1">tables</span>()

<span class="pl-c1">get_SOA_table!</span>(tables,<span class="pl-c1">60029</span>) <span class="pl-c"><span class="pl-c">#</span> this modifies `tables` by adding the new table</span>

t <span class="pl-k">=</span> tables[<span class="pl-s"><span class="pl-pds">"</span>Australian Life Tables 1891-1900 Female<span class="pl-pds">"</span></span>]
t[<span class="pl-c1">0</span>]  <span class="pl-c"><span class="pl-c">#</span> returns the attained age 0 rate of 0.10139</span></pre></div>
<h3><a id="user-content-constructing-dynamically" class="anchor" aria-hidden="true" href="#constructing-dynamically"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Constructing Dynamically</h3>
<p>Say you have an ultimate vector and select matrix, and you want to leverage the MortalityTables package.</p>
<p>Here's an example, where we first construct the <code>UlitmateMortality</code> and then combine
it with the select rates to get a <code>SelectMortality</code> table.</p>
<div class="highlight highlight-source-julia"><pre><span class="pl-k">using</span> MortalityTables

<span class="pl-c"><span class="pl-c">#</span> represents attained ages of 15 through 100</span>
ult_vec <span class="pl-k">=</span> [<span class="pl-c1">0.005</span>, <span class="pl-c1">0.008</span>, <span class="pl-k">...</span>,<span class="pl-c1">0.805</span>,<span class="pl-c1">1.00</span>]
ult <span class="pl-k">=</span> <span class="pl-c1">UltimateMortality</span>(ult_vec,start_age <span class="pl-k">=</span> <span class="pl-c1">15</span>)</pre></div>
<p>We can now use this the ulitmate rates all by itself:</p>
<div class="highlight highlight-source-julia"><pre><span class="pl-c1">q</span>(ult,<span class="pl-c1">15</span>,<span class="pl-c1">1</span>) <span class="pl-c"><span class="pl-c">#</span> 0.005</span></pre></div>
<p>And join with the select rates, which for our example will start at age 0:</p>
<div class="highlight highlight-source-julia"><pre><span class="pl-c"><span class="pl-c">#</span> attained age going down the column, duration across</span>
select_matrix <span class="pl-k">=</span> [ <span class="pl-c1">0.001</span> <span class="pl-c1">0.002</span> <span class="pl-k">...</span> <span class="pl-c1">0.010</span>;
                  <span class="pl-c1">0.002</span> <span class="pl-c1">0.003</span> <span class="pl-k">...</span> <span class="pl-c1">0.012</span>;
                  <span class="pl-k">...</span>
                ]
sel_start_age <span class="pl-k">=</span> <span class="pl-c1">0</span>
sel <span class="pl-k">=</span> <span class="pl-c1">SelectMortality</span>(select_matrix,ult,start_age <span class="pl-k">=</span> <span class="pl-c1">0</span>)

sel[<span class="pl-c1">0</span>][<span class="pl-c1">0</span>] <span class="pl-c"><span class="pl-c">#</span>issue age 0, attained age 0 rate of  0.001</span>
sel[<span class="pl-c1">0</span>][<span class="pl-c1">100</span>] <span class="pl-c"><span class="pl-c">#</span>issue age 0, attained age 100 rate of  1.0</span></pre></div>
<p>Lastly, to take the <code>SelectMortality</code> and <code>UltimateMortality</code> we just created,
we can combine them into one stored object, along with a <code>TableMetaData</code>:</p>
<div class="highlight highlight-source-julia"><pre>my_table <span class="pl-k">=</span> <span class="pl-c1">MortalityTable</span>(
              s1,
              u1,
              metadata<span class="pl-k">=</span><span class="pl-c1">TableMetaData</span>(name<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>My Table<span class="pl-pds">"</span></span>, comments<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Rates for Product XYZ<span class="pl-pds">"</span></span>)
              )</pre></div>
<h3><a id="user-content-load-with-bundled-tables" class="anchor" aria-hidden="true" href="#load-with-bundled-tables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Load with bundled tables</h3>
<p>To add more tables for your use when loading with all of the other bundled tables, download the <code>.xml</code> <a href="https://mort.soa.org/About.aspx" rel="nofollow">aka the (<code>XTbML</code> format)</a> version of the table from <a href="https://mort.soa.org" rel="nofollow">mort.SOA.org</a> and place it in the directory the package is installed in. This is usually <code>~user/.julia/packages/MortalityTables/[changing hash value]/src/tables/</code>.</p>
<blockquote>
<p><g-emoji class="g-emoji" alias="warning" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png">⚠️</g-emoji> <em>updating the package may remove your existing tables. Make a backup before updating your packages</em></p>
</blockquote>
<p>After placing packages in the folder above, restart Julia and the should be discoverable when you run <code>mt.Tables()</code></p>
<h3><a id="user-content-getting-more-tables-bundled-with-the-package" class="anchor" aria-hidden="true" href="#getting-more-tables-bundled-with-the-package"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting more tables bundled with the package</h3>
<p>If you would like more tables added by default, please open a GitHub issue with the request.</p>
<h2><a id="user-content-references" class="anchor" aria-hidden="true" href="#references"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>References</h2>
<ul>
<li><a href="https://mort.soa.org/" rel="nofollow">SOA Mortality Tables</a></li>
<li><a href="https://www.cambridge.org/vi/academic/subjects/statistics-probability/statistics-econometrics-finance-and-insurance/actuarial-mathematics-life-contingent-risks-2nd-edition?format=HB" rel="nofollow">Actuarial Mathematics for Life Contingent Risks, 2nd ed</a></li>
<li><a href="https://www.soa.org/globalassets/assets/Files/Research/2016-10-experience-study-calculations.pdf" rel="nofollow">Experience Study Calculations, SOA</a></li>
</ul>
<h2><a id="user-content-similar-projects" class="anchor" aria-hidden="true" href="#similar-projects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Similar Projects</h2>
<ul>
<li><a href="https://github.com/franciscogarate/pyliferisk">Pyliferisk, a Python package</a></li>
</ul>
</article></div>