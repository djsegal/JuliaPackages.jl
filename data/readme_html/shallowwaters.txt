<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-shallowwatersjl---a-type-flexible-16-bit-shallow-water-model" class="anchor" aria-hidden="true" href="#shallowwatersjl---a-type-flexible-16-bit-shallow-water-model"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ShallowWaters.jl - A type-flexible 16-bit shallow water model</h1>
<p dir="auto"><a href="https://github.com/milankl/ShallowWaters.jl/actions/workflows/CI.yml"><img src="https://github.com/milankl/ShallowWaters.jl/actions/workflows/CI.yml/badge.svg" alt="CI" style="max-width: 100%;"></a>
<a href="https://zenodo.org/badge/latestdoi/132787050" rel="nofollow"><img src="https://camo.githubusercontent.com/44a2a66956f7916040f8b588a5a3e5efdac2a35c265470fedd33dc1ebfa14e12/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f3133323738373035302e737667" alt="DOI" data-canonical-src="https://zenodo.org/badge/132787050.svg" style="max-width: 100%;"></a>
<a href="https://milankl.github.io/ShallowWaters.jl/dev" rel="nofollow"><img src="https://camo.githubusercontent.com/7fcec4b2d3ab291529fce8ef6a4fcd4129a0683b2f5d5fe2f5c648f02db8b616/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6465762d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-dev-blue.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="figs/isambard_float16.png?raw=true"><img src="figs/isambard_float16.png?raw=true" alt="sst" title="Float16 simulation with ShallowWaters.jl on Isambard's A64FX" style="max-width: 100%;"></a></p>
<p dir="auto">A shallow water model with a focus on type-flexibility and 16-bit number formats. ShallowWaters allows for Float64/32/16,
<a href="https://github.com/milankl/SoftPosit.jl">Posit32/16/8</a>, <a href="https://github.com/JuliaComputing/BFloat16s.jl">BFloat16</a>,
<a href="https://github.com/milankl/LogFixPoint16s.jl">LogFixPoint16</a>, <a href="https://github.com/milankl/Sonums.jl">Sonum16</a>,
<a href="https://github.com/milankl/StochasticRounding.jl">Float32/16 &amp; BFloat16 with stochastic rounding</a> and in
general every number format with arithmetics and conversions implemented. ShallowWaters also allows for
mixed-precision and reduced precision communication.</p>
<p dir="auto">ShallowWaters uses an energy and enstrophy conserving advection scheme and a Smagorinsky-like biharmonic diffusion operator.
Tracer advection is implemented with a semi-Lagrangian advection scheme. Strong stability-preserving Runge-Kutta schemes of
various orders and stages are used with a semi-implicit treatment of the continuity equation. Boundary conditions are either
periodic (only in x direction) or non-periodic super-slip, free-slip, partial-slip, or no-slip.
Output via <a href="https://github.com/JuliaGeo/NetCDF.jl">NetCDF</a>.</p>
<p dir="auto">Please feel free to raise an <a href="https://github.com/milankl/ShallowWaters.jl/issues">issue</a> if you discover bugs or have an idea how to improve ShallowWaters.</p>
<p dir="auto">Requires: Julia 1.2 or higher</p>
<h2 dir="auto"><a id="user-content-how-to-use" class="anchor" aria-hidden="true" href="#how-to-use"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How to use</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using ShallowWaters
julia&gt; run_model()
Starting ShallowWaters on Thu, 20 Jan 2022 15:44:30 without output.
100% Integration done in 0.61s."><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> ShallowWaters
julia<span class="pl-k">&gt;</span> <span class="pl-c1">run_model</span>()
Starting ShallowWaters on Thu, <span class="pl-c1">20</span> Jan <span class="pl-c1">2022</span> <span class="pl-c1">15</span><span class="pl-k">:</span><span class="pl-c1">44</span><span class="pl-k">:</span><span class="pl-c1">30</span> without output.
<span class="pl-c1">100</span><span class="pl-k">%</span> Integration done <span class="pl-k">in</span> <span class="pl-c1">0.61</span>s.</pre></div>
<p dir="auto">You just successfully ran ShallowWaters.jl! For more examples and arguments to pass on to <code>run_model</code> see the <a href="https://milankl.github.io/ShallowWaters.jl/dev" rel="nofollow">documentation</a>.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">ShallowWaters.jl is a registered package, so simply do</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; ] add ShallowWaters"><pre>julia<span class="pl-k">&gt;</span> ] add ShallowWaters</pre></div>
<h2 dir="auto"><a id="user-content-references" class="anchor" aria-hidden="true" href="#references"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>References</h2>
<p dir="auto">ShallowWaters.jl was used and is described in more detail in</p>
<blockquote>
<p dir="auto">[1] Klöwer M, PD Düben, and TN Palmer, 2020. Number formats, error mitigation and scope for 16-bit arithmetics in weather and climate modelling analysed with a shallow water model. <strong>Journal of Advances in Modeling Earth Systems</strong>, <a href="https://dx.doi.org/10.1029/2020MS002246" rel="nofollow">10.1029/2020MS002246</a></p>
</blockquote>
<blockquote>
<p dir="auto">[2] Klöwer M, PD Düben, and TN Palmer, 2019. Posits as an alternative to floats for weather and climate models. In: <strong>Proceedings of the Conference for Next Generation Arithmetic 2019</strong>, Singapore, <strong>ACM</strong>, <a href="https://dx.doi.org/10.1145/3316279.3316281" rel="nofollow">10.1145/3316279.3316281</a></p>
</blockquote>
<p dir="auto">If you use this package please cite us.</p>
</article></div>