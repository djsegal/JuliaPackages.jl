<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-gpi2jl" class="anchor" aria-hidden="true" href="#gpi2jl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>GPI2.jl</h1>
<p dir="auto"><a href="https://hlrs-tasc.github.io/GPI2.jl/stable" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="Docs-stable" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a>
<a href="https://hlrs-tasc.github.io/GPI2.jl/dev" rel="nofollow"><img src="https://camo.githubusercontent.com/7fcec4b2d3ab291529fce8ef6a4fcd4129a0683b2f5d5fe2f5c648f02db8b616/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6465762d626c75652e737667" alt="Docs-dev" data-canonical-src="https://img.shields.io/badge/docs-dev-blue.svg" style="max-width: 100%;"></a>
<a href="https://github.com/klimakoffer/Klimakoffer.jl/actions?query=workflow%3ACI"><img src="https://github.com/klimakoffer/Klimakoffer.jl/workflows/CI/badge.svg" alt="Build Status" style="max-width: 100%;"></a>
<a href="https://github.com/hlrs-tasc/GPI2.jl/actions/workflows/ci.yml"><img src="https://github.com/hlrs-tasc/GPI2.jl/actions/workflows/ci.yml/badge.svg" alt="Build Status" style="max-width: 100%;"></a>
<a href="https://coveralls.io/github/hlrs-tasc/GPI2.jl?branch=main" rel="nofollow"><img src="https://camo.githubusercontent.com/6851b76a0857e9e4519b8702610cf732541c16e430e4ee8a737b9256552e0ff9/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f686c72732d746173632f475049322e6a6c2f62616467652e7376673f6272616e63683d6d61696e" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/hlrs-tasc/GPI2.jl/badge.svg?branch=main" style="max-width: 100%;"></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/2da4b47047416995ad40532496f4b028e9aeca4a9ad036ed17bee5d2fb753b32/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d737563636573732e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-success.svg" style="max-width: 100%;"></a></p>
<p dir="auto">GPI2.jl is a lightweight Julia wrapper for the <a href="https://www.gaspi.de/" rel="nofollow">GASPI</a>-conforming
<a href="https://github.com/cc-hpc-itwm/GPI-2">GPI-2</a> library.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">If you have not yet installed Julia, please <a href="https://julialang.org/downloads/platform/" rel="nofollow">follow the instructions for your
operating system</a>. GPI2.jl works
with Julia v1.7. Since GPI-2 only works on Linux systems, GPI2.jl is also
restricted to this platform.</p>
<p dir="auto">GPI2.jl is a registered package. Thus to install it
in your default environment, execute the following command:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using Pkg; Pkg.add(&quot;GPI2.jl&quot;)'"><pre>julia -e <span class="pl-s"><span class="pl-pds">'</span>using Pkg; Pkg.add("GPI2.jl")<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">Alternatively, you can also just clone this repository and then instantiate it,
i.e., installing all dependencies:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/hlrs-tasc/GPI2.jl.git
julia --project=GPI2.jl -e 'using Pkg; Pkg.instantiate()'"><pre>git clone https://github.com/hlrs-tasc/GPI2.jl.git
julia --project=GPI2.jl -e <span class="pl-s"><span class="pl-pds">'</span>using Pkg; Pkg.instantiate()<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">If you decide to use the latter approach with a cloned <code>GPI2.jl</code> directory, in
the following, you need to add <code>--project=path/to/GPI2.jl</code> to the <code>julia</code>
command, e.g.,</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia --project=. -e 'using GPI2; ...'"><pre>julia --project=. -e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; ...<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">if you are starting Julia from within the <code>GPI2.jl</code> folder.</p>
<h2 dir="auto"><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<h3 dir="auto"><a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting started</h3>
<p dir="auto">You can start running GASPI functions after executing <code>using GPI2</code>. All GASPI
functions are prefixed by <code>gaspi_</code>. For example, to check the version of the
currently used GPI-2 library, start the Julia REPL and paste the following
snippet:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using GPI2

julia&gt; version = Ref{Cfloat}()
Base.RefValue{Float32}(0.0f0)

julia&gt; gaspi_version(version)
GASPI_SUCCESS::gaspi_return_t = 0

julia&gt; println(&quot;GPI-2 library version: $(version[])&quot;)
GPI-2 library version: 1.51"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> GPI2

julia<span class="pl-k">&gt;</span> version <span class="pl-k">=</span> <span class="pl-c1">Ref</span><span class="pl-c1">{Cfloat}</span>()
Base<span class="pl-k">.</span><span class="pl-c1">RefValue</span><span class="pl-c1">{Float32}</span>(<span class="pl-c1">0.0f0</span>)

julia<span class="pl-k">&gt;</span> <span class="pl-c1">gaspi_version</span>(version)
GASPI_SUCCESS<span class="pl-k">::</span><span class="pl-c1">gaspi_return_t</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>GPI-2 library version: <span class="pl-v">$(version[])</span><span class="pl-pds">"</span></span>)
GPI<span class="pl-k">-</span><span class="pl-c1">2</span> library version<span class="pl-k">:</span> <span class="pl-c1">1.51</span></pre></div>
<h3 dir="auto"><a id="user-content-parallel-execution" class="anchor" aria-hidden="true" href="#parallel-execution"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Parallel execution</h3>
<p dir="auto">To run a GPI-2 program in parallel, you need to start it with the helper script
<code>gaspi_run</code>. It requires a machinefile with the names of the nodes on which a
rank should be started, see also the GPI-2 <a href="https://github.com/cc-hpc-itwm/GPI-2">docs</a>.
For a simple test, you can create a machinefile that will start three ranks on
the current node by running</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="yes `hostname` | head -n 3 &gt; machinefile"><pre>yes <span class="pl-s"><span class="pl-pds">`</span>hostname<span class="pl-pds">`</span></span> <span class="pl-k">|</span> head -n 3 <span class="pl-k">&gt;</span> machinefile</pre></div>
<p dir="auto">For convenience, GPI2.jl provides the function <code>gaspi_run()</code> that
will start <code>gaspi_run</code> for you, using the GPI2_jll.jl-provided executable. GPI2.jl also
provides some example files in the <a href="examples/">examples/</a> folder you can check
out to get started.</p>
<p dir="auto">For example, to run the <a href="examples/hello_world.jl"><code>hello_world.jl</code></a> example in
parallel, execute the following commands from the GPI2.jl directory:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using GPI2; gaspi_run()' -- -m machinefile $(which julia) $(pwd)/examples/hello_world.jl"><pre>julia -e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; gaspi_run()<span class="pl-pds">'</span></span> -- -m machinefile <span class="pl-s"><span class="pl-pds">$(</span>which julia<span class="pl-pds">)</span></span> <span class="pl-s"><span class="pl-pds">$(</span>pwd<span class="pl-pds">)</span></span>/examples/hello_world.jl</pre></div>
<p dir="auto">You need <code>julia</code> twice in the command: The first one just executes the <code>gaspi_run</code>
command, while the second one is the command that is executed in parallel.
You also need the <code>$(pwd)</code> to ensure that <code>gaspi_run</code> picks the right
file.</p>
<h3 dir="auto"><a id="user-content-issues-when-relying-on-the-module-command" class="anchor" aria-hidden="true" href="#issues-when-relying-on-the-module-command"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Issues when relying on the <code>module</code> command</h3>
<p dir="auto">If you want to start a parallel process using GPI-2's <code>gaspi_run</code> on a cluster
where paths are set using the <code>module</code> command provided by, e.g., Lmod, there are
some issues you need to handle in order to make a GASPI program run properly.
They boil down to the fact that, as far as I can tell, GPI-2 uses SSH to set up
communication between nodes and uses a non-login shell for this purpose. This
means that, e.g., the <code>module</code> command will not work and thus you need to
manually put all relevant changes to the environment variables directly in your
<code>~/.bashrc</code> file.</p>
<p dir="auto">As a workaround, this repository provides two auxiliary utilities:
<a href="utils/storeenv.jl"><code>storeenv.jl</code></a> and <a href="utils/launcher.jl"><code>launcher.jl</code></a>. They
help you to run a GPI-2-powered Julia program on a cluster with an environment
modules setup by storing the entire environment and reloading it.</p>
<p dir="auto">First, go to the folder from which you want to start your GASPI-parallelized Julia program
and execute the <code>storeenv.jl</code> script:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia path/to/storeenv.jl"><pre>julia path/to/storeenv.jl</pre></div>
<p dir="auto">The <code>storeenv.jl</code> script will record the current environment variables and store
them in a file <code>gaspi-jl-env.toml</code>.</p>
<p dir="auto">Then, run your Julia program in parallel with the <code>launcher.jl</code> script using the
following command:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using GPI2; gaspi_run()' -- -m &lt;machinefile&gt; $(which julia) /abs/path/to/launcher.jl $(pwd)/gaspi-jl-env.toml path/to/julia/program.jl"><pre>julia -e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; gaspi_run()<span class="pl-pds">'</span></span> -- -m <span class="pl-k">&lt;</span>machinefile<span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">$(</span>which julia<span class="pl-pds">)</span></span> /abs/path/to/launcher.jl <span class="pl-s"><span class="pl-pds">$(</span>pwd<span class="pl-pds">)</span></span>/gaspi-jl-env.toml path/to/julia/program.jl</pre></div>
<p dir="auto">The <code>&lt;machinefile&gt;</code> is the normal machinefile with all nodes on which to start a
GASPI rank. The <code>/abs/path/to/launcher.jl</code> must be an <em>absolute</em> path again. The
launcher script will take care of recreating the environment using the
information in the TOML file <code>$(pwd)/gaspi-jl-env.toml</code>. Finally, you can
provide the path to the Julia programm (and optional command line arguments to
it) as the final part. The path to the Julia program may be relative or
absolute, since the launcher knows your current directory by now.</p>
<h2 dir="auto"><a id="user-content-configuration" class="anchor" aria-hidden="true" href="#configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Configuration</h2>
<h3 dir="auto"><a id="user-content-using-a-system-library" class="anchor" aria-hidden="true" href="#using-a-system-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Using a system library</h3>
<p dir="auto">When using GPI2.jl, you can specify the path to the GASPI
library you want to use. By default, GPI2.jl uses the precompiled GPI-2 library
available in the GPI2_jll.jl package. This is only recommended for
non-performance critical usage and/or development. To switch to a
library installed on your system, execute</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using GPI2; GPI2.use_system_library(&quot;path/to/libGPI2.so&quot;)'"><pre>julia <span class="pl-k">-</span>e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; GPI2.use_system_library("path/to/libGPI2.so")<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">where <code>path/to/libGPI.so</code> should be the path to your <em>shared</em> GPI-2 library.
To switch back to using the JLL-provided library, execute</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using GPI2; GPI2.use_jll_library()'"><pre>julia <span class="pl-k">-</span>e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; GPI2.use_jll_library()<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">After switching the library, you need to restart Julia for the changes to take
effect.</p>
<h3 dir="auto"><a id="user-content-generating-c-bindings" class="anchor" aria-hidden="true" href="#generating-c-bindings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Generating C bindings</h3>
<p dir="auto">In case you are using a system-provided GPI-2 library with an API that is different
to the one provided by the JLL-provided library, you need to re-generate the
C bindings file <code>LibGPI2.jl</code> and tell the GPI2.jl package to use it.</p>
<p dir="auto">To this end, enter the <code>bindings/</code> directory and run the following command:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia --project=. -e 'using Pkg; Pkg.instantiate()' # only required once
GPI_INCLUDE_DIR=path/to/GPI-2/include julia --project=. generator.jl"><pre>julia --project=. -e <span class="pl-s"><span class="pl-pds">'</span>using Pkg; Pkg.instantiate()<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> only required once</span>
GPI_INCLUDE_DIR=path/to/GPI-2/include julia --project=. generator.jl</pre></div>
<p dir="auto">This will create a <code>LibGPI2.jl</code> file in the current working directory. To switch
to the custom bindings file, execute</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using GPI2; GPI2.use_system_bindings(&quot;path/to/LibGPI2.jl&quot;)'"><pre>julia <span class="pl-k">-</span>e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; GPI2.use_system_bindings("path/to/LibGPI2.jl")<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">where <code>path/to/libGPI.so</code> should be the path to your custom C bindings file.
To switch back to using the JLL-compatible library, execute</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia -e 'using GPI2; GPI2.use_jll_bindings()'"><pre>julia <span class="pl-k">-</span>e <span class="pl-s"><span class="pl-pds">'</span>using GPI2; GPI2.use_jll_bindings()<span class="pl-pds">'</span></span></pre></div>
<p dir="auto">After switching the C bindings, you need to restart Julia for the changes to take
effect.</p>
<h2 dir="auto"><a id="user-content-authors" class="anchor" aria-hidden="true" href="#authors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Authors</h2>
<p dir="auto">GPI2.jl is maintained by
<a href="https://www.hlrs.de/about-us/organization/divisions-departments/av/tasc/" rel="nofollow">Michael Schlottke-Lakemper</a>
(University of Stuttgart, Germany). The GPI-2 library itself is developed by the
<a href="https://www.itwm.fraunhofer.de/" rel="nofollow">Fraunhofer Institute for Industrial Mathematics (ITWM)</a>.</p>
<h2 dir="auto"><a id="user-content-license-and-contributing" class="anchor" aria-hidden="true" href="#license-and-contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License and contributing</h2>
<p dir="auto">GPI2.jl is published under the MIT license (see <a href="LICENSE.md">LICENSE.md</a>). We
are very happy to accept contributions from everyone, preferably in the form of
a PR.
<a href="https://github.com/cc-hpc-itwm/GPI-2">GPI-2</a> itself is published under the GNU
General Public license, version 3.</p>
</article></div>