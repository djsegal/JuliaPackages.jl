<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-bapcodvrpsolver" class="anchor" aria-hidden="true" href="#bapcodvrpsolver"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>BaPCodVRPSolver</h1>
<p dir="auto">The BaPCodVRPSolver.jl package is a Julia interface for <a href="https://vrpsolver.math.u-bordeaux.fr/" rel="nofollow">VRPSolver</a>. Unlike the
original distribution, this package allows one to run VRPSolver on any major operating system without Docker.</p>
<p dir="auto">This package is <em>only for academic use</em>.</p>
<h2 dir="auto"><a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Requirements</h2>
<ul dir="auto">
<li><a href="https://julialang.org/downloads/oldreleases/" rel="nofollow">Julia</a> versions 1.0.5 -- 1.5.4.</li>
<li><a href="https://www.ibm.com/products/ilog-cplex-optimization-studio" rel="nofollow">CPLEX</a> versions 12.9 and higher.</li>
<li><a href="https://bapcod.math.u-bordeaux.fr/" rel="nofollow">BaPCod</a> shared library version 0.66 (see below how to generate it).</li>
</ul>
<p dir="auto">Julia versions 1.6 and later are not supported for the moment due to a
<a href="https://github.com/jump-dev/JuMP.jl/issues/2438" data-hovercard-type="issue" data-hovercard-url="/jump-dev/JuMP.jl/issues/2438/hovercard">JuMP issue</a>. Support of Julia 1.6 requires a significant work and will
depend on the number of inquiries for it. Please let the contributors of this package know if this support is critical
for you.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">Open the Julia REPL and type:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    ]add https://github.com/inria-UFF/BaPCodVRPSolver.jl.git"><pre class="notranslate"><code>    ]add https://github.com/inria-UFF/BaPCodVRPSolver.jl.git
</code></pre></div>
<p dir="auto">On Linux, set the <code>LD_LIBRARY_PATH</code> environment variable with the absolute path to the subdirectory of your CPLEX
installation which contains the executable files and shared libraries.  For example, if your CPLEX is installed at
<code>/opt/ibm/ILOG/CPLEX_Studio1210</code> and you are using Bash, you can declare it in the <code>~/.bashrc</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="export LD_LIBRARY_PATH=/opt/ibm/ILOG/CPLEX_Studio1210/cplex/bin/x86-64_linux/:$LD_LIBRARY_PATH"><pre class="notranslate"><code>export LD_LIBRARY_PATH=/opt/ibm/ILOG/CPLEX_Studio1210/cplex/bin/x86-64_linux/:$LD_LIBRARY_PATH
</code></pre></div>
<p dir="auto">On Windows, be sure that the <code>PATH</code> environment variable contains the folder with CPLEX dynamic library.</p>
<p dir="auto">Next, set the <code>BAPCOD_RCSP_LIB</code> environment variable with the absolute path to the BaPCod shared library (which has
<code>.so</code> extension on linux, <code>.dylib</code> extension on Mac OS, and <code>.dll</code> extension on Windows).
For example, if you are using Bash on Linux, you can declare it in the <code>~/.bashrc</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="export BAPCOD_RCSP_LIB=/path/to/lib/libbapcod-shared.so"><pre class="notranslate"><code>export BAPCOD_RCSP_LIB=/path/to/lib/libbapcod-shared.so
</code></pre></div>
<p dir="auto">If you want to use the <a href="https://vrpsolver.math.u-bordeaux.fr/doc/methods.html#VrpSolver.get_complete_formulation" rel="nofollow">complete formulation</a> (the one that includes mapping constraints with Î» variables for paths, and it's very useful for debugging), then you have to configurate a MIP solver via <a href="https://jump.dev/JuMP.jl/0.18/" rel="nofollow">JuMP 0.18</a> interface for that (e.g. you can install <a href="https://github.com/jump-dev/CPLEX.jl">CPLEX.jl</a>, which requires CPLEX version 12.10 or higher).</p>
<h2 dir="auto"><a id="user-content-producing-bapcod-shared-library" class="anchor" aria-hidden="true" href="#producing-bapcod-shared-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Producing BaPCod shared library</h2>
<p dir="auto">If the BaPCod shared library you have does not work for you, or you do not have one, you can produce it in the following
way.</p>
<p dir="auto">Download BaPCod source code on its <a href="https://bapcod.math.u-bordeaux.fr/" rel="nofollow">web-page</a>. You need an e-mail address from an academic institution for this. Then, install BaPCod using installation instructions in the <a href="https://bapcod.math.u-bordeaux.fr/#userguide" rel="nofollow">BaPCod user guide</a>.</p>
<p dir="auto">Then run the following command from the folder you have installed BaPCod</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cmake --build build --config Release --target bapcod-shared"><pre class="notranslate"><code>cmake --build build --config Release --target bapcod-shared
</code></pre></div>
<p dir="auto">This will produce shared library file <code>&lt;path to BaPCod&gt;/build/Bapcod/libbapcod-shared.so</code> on Linux, <code>&lt;path to BaPCod&gt;/build/Bapcod/libbapcod-shared.dylib</code> on Mac OS, and <code>&lt;path to BaPCod&gt;/build/Bapcod/Release/bapcod-shared.dll</code> on Windows. Note that the <code>BAPCOD_RCSP_LIB</code> environment variable should contain the absolute path to this BaPCod shared library, and not to RCSP library.</p>
<h2 dir="auto"><a id="user-content-troubleshooting" class="anchor" aria-hidden="true" href="#troubleshooting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Troubleshooting</h2>
<p dir="auto">On Linux, you may have error:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="ERROR: LoadError: could not load library &quot;&lt;path to&gt;/libbapcod-shared.so&quot;
&lt;path to Julia&gt;/bin/../lib/julia/libstdc++.so.6: version `GLIBCXX_3.4.26' not found (required by &quot;&lt;path to&gt;/libbapcod-shared.so&quot;)"><pre class="notranslate"><code>ERROR: LoadError: could not load library "&lt;path to&gt;/libbapcod-shared.so"
&lt;path to Julia&gt;/bin/../lib/julia/libstdc++.so.6: version `GLIBCXX_3.4.26' not found (required by "&lt;path to&gt;/libbapcod-shared.so")
</code></pre></div>
<p dir="auto">This is because Julia comes with an older version of the <code>libstdc++.so.6</code> library. One solution is build Julia from sources.
An easier solution is to replace file <code>&lt;path to Julia&gt;/lib/julia/libstdc++.so.6</code> with your system <code>libstdc++.so.6</code> file. For local machines it is usually located in the folder <code>/usr/lib/x86_64-linux-gnu/</code>.</p>
<h2 dir="auto"><a id="user-content-running-an-application" class="anchor" aria-hidden="true" href="#running-an-application"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running an application</h2>
<p dir="auto">Firstly, add the folowing dependences:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="   ]add JuMP, ArgParse"><pre class="notranslate"><code>   ]add JuMP, ArgParse
</code></pre></div>
<p dir="auto">All the demos available in the <a href="https://vrpsolver.math.u-bordeaux.fr/" rel="nofollow">VRPSolver website</a> will work after replacing <code>using VrpSolver</code> with <code>using BaPCodVRPSolver</code> in the file <em>src/run.jl</em>. Also, you should comment/remove the using of CPLEX.jl at the beginning of <em>src/run.jl</em> if the package is not installed.</p>
<p dir="auto">For example, the <a href="https://vrpsolver.math.u-bordeaux.fr/cvrpdemo.zip" rel="nofollow">CVRP demo</a> can be invoked (after making the aforementioned replacement) for the instance X-n101-k25 using an upper bound of 27591.1 as follows:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="julia src/run.jl data/X/X-n101-k25.vrp -u 27591.1"><pre class="notranslate"><code>julia src/run.jl data/X/X-n101-k25.vrp -u 27591.1
</code></pre></div>
</article></div>