<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-psidjl" class="anchor" aria-hidden="true" href="#psidjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>PSID.jl</h1>
<p dir="auto"><a href="https://travis-ci.com/aaowens/PSID.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/3922180c12761a39edc916b282bff3a5d2097e7fa2dda9dc3f7c283325389c2e/68747470733a2f2f7472617669732d63692e636f6d2f61616f77656e732f505349442e6a6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.com/aaowens/PSID.jl.svg?branch=master" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/aaowens/PSID.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/476e83820e9c55c45ba08063bf03645a534534c571060cf2e6dc86e4b33b90fc/68747470733a2f2f636f6465636f762e696f2f67682f61616f77656e732f505349442e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/aaowens/PSID.jl/branch/master/graph/badge.svg" style="max-width: 100%;"></a></p>
<p dir="auto">The Panel Study of Income Dynamics (PSID) is a longitudinal public dataset which has been following a collection of families and their descendants since 1968. It provides a breadth of information about labor supply and life-cycle dynamics. More information is available at <a href="https://psidonline.isr.umich.edu/" rel="nofollow">https://psidonline.isr.umich.edu/</a>.</p>
<p dir="auto">This package produces a labeled panel of individuals with a consistent individual ID across time. You provide a JSON file describing the variables you want. An example input file can be found at <a href="https://github.com/aaowens/PSID.jl/blob/master/examples/user_input.json">examples/user_input.json.</a>. Currently only variables in the family files can be added, but in the future it should be possible to support variables in the individual files or the supplements.</p>
<h1 dir="auto"><a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Example</h1>
<p dir="auto">An example workflow can be found on my blog post <a href="https://aaowens.github.io/julia/2020/02/11/Using-the-Panel-Study-of-Income-Dynamics.html" rel="nofollow">here</a>.</p>
<h1 dir="auto"><a id="user-content-instructions" class="anchor" aria-hidden="true" href="#instructions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Instructions</h1>
<p dir="auto">To add this package, use</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="(@v1.6) pkg&gt; add PSID"><pre class="notranslate"><code>(@v1.6) pkg&gt; add PSID
</code></pre></div>
<p dir="auto">Next, download the PSID data files yourself. The package can't automatically fetch them because the PSID requires you to register for a free account before using the data.</p>
<p dir="auto">The list of data files required to be in the current directory can be found <a href="https://github.com/aaowens/PSID.jl/blob/master/src/allfiles_hash.json">here</a>. These files are</p>
<ol dir="auto">
<li>The PSID codebook in XML format. You used to be able to download this from the PSID here <a href="https://simba.isr.umich.edu/downloads/PSIDCodebook.zip" rel="nofollow">https://simba.isr.umich.edu/downloads/PSIDCodebook.zip</a> , but the link is broken. I put it in my Google Drive here <a href="https://drive.google.com/file/d/1CPwM5tsphdezi4RqlHGMkS1hiLLRZIT7/view" rel="nofollow">https://drive.google.com/file/d/1CPwM5tsphdezi4RqlHGMkS1hiLLRZIT7/view</a> .</li>
<li>The zipped PSID family files and cross-year individual file, which can be downloaded here <a href="https://simba.isr.umich.edu/Zips/ZipMain.aspx" rel="nofollow">https://simba.isr.umich.edu/Zips/ZipMain.aspx</a>. Do not extract the files--leave them zipped. You need to download every family file from 1968 to 2019, and you also need to download the cross-year individual file.</li>
<li>The XLSX cross-year index for the variables, which can be downloaded here <a href="https://psidonline.isr.umich.edu/help/xyr/psid.xlsx" rel="nofollow">https://psidonline.isr.umich.edu/help/xyr/psid.xlsx</a>.</li>
</ol>
<p dir="auto">After acquiring the data, run</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="julia&gt; using PSID
julia&gt; makePSID(&quot;user_input.json&quot;)
# to not code missings, makePSID(&quot;user_input.json&quot;, codemissings = false)"><pre class="notranslate"><code>julia&gt; using PSID
julia&gt; makePSID("user_input.json")
# to not code missings, makePSID("user_input.json", codemissings = false)
</code></pre></div>
<p dir="auto">It will verify the required files exist and then construct the data. If successful, it will print <code>Finished constructing individual data, saved to output/allinds.csv</code> after about 5 minutes.</p>
<p dir="auto">This will use about 15 GB of RAM. It may not work on machines without much memory.</p>
<h2 dir="auto"><a id="user-content-the-input-json-file" class="anchor" aria-hidden="true" href="#the-input-json-file"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>The input JSON file</h2>
<p dir="auto">The file passed to <code>makePSID</code> describes the variables you want.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="{
    &quot;name_user&quot;: &quot;hours&quot;,
    &quot;varID&quot;: &quot;V465&quot;,
    &quot;unit&quot;: &quot;head&quot;
  },"><pre class="notranslate"><code>{
    "name_user": "hours",
    "varID": "V465",
    "unit": "head"
  },
</code></pre></div>
<p dir="auto">There are three fields, <code>name_user</code>, <code>varID</code>, and <code>unit</code>. <code>name_user</code> is a name chosen by you. <code>varID</code> is one of the codes assigned by the PSID to this variable. These can be looked up in the PSID <a href="https://simba.isr.umich.edu/VS/i.aspx" rel="nofollow">cross-year index</a>. For example, hours above can be found in the crosswalk at <code>	Family Public Data Index 01&gt;WORK 02&gt;Hours and Weeks 03&gt;annual in prior year 04&gt;head 05&gt;total:</code>. Clicking on the variable info will show the the list of years and associated IDs when that variable is available. Choose any of the IDs for <code>varID</code>, it does not matter. <code>PSID.jl</code> will look up all available years for that variable in the crosswalk. You must also indicate the unit, which can be <code>head</code>, <code>spouse</code>, or <code>family</code>. This makes sure the variable is assigned to the correct individual.</p>
<h1 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h1>
<p dir="auto">This package provides the following features:</p>
<ol dir="auto">
<li>Automatically labels missing values by searching the value labels from the codebook for strings like "NA", "Inap.", or "Missing".</li>
<li>Tries to produce consistent value labels across years for categorical variables. This is difficult because the labels in the PSID sometimes change between years. This package uses an algorithm to try to harmonize the labels when possible by removing common subsets. For example, in one year race is labeled as "Asian" but in the next year it is "Asian, Pacific Islander". The first is a subset of the second, so the final label will be "Asian, Pacific Islander". When this is not possible, the final label will be "A or B or C" for however many incomparable labels were found.</li>
<li>Matches the individuals across time to produce a panel with consistent (ID, year) keys and their associated variables.</li>
<li>Produces consistent individual or spouse variables for individuals. In the input JSON file, you must indicate whether a variable is family level, household head level, or household spouse level. The final output will have variables of the form <code>VAR_family</code>, <code>VAR_ind</code>, or <code>VAR_spouse</code>. When the individual is a household head, <code>VAR_ind</code> will come from the household head version of that variable, and <code>VAR_spouse</code> will come from the household spouse version. If the individual is a household spouse, it is the reverse. Both individuals will get all family level variables.</li>
<li>It's easiest to track individuals, but this package also produces a consistent family ID by treating a family as a combination of head and spouse (if spouse exists). If you keep only household heads and drop years before 1970, (famid, year) should be an ID.</li>
</ol>
<h1 dir="auto"><a id="user-content-notable-omissions" class="anchor" aria-hidden="true" href="#notable-omissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Notable Omissions</h1>
<p dir="auto">Certain variables are not in the family files. For example, the wealth data are in separate files, and there is some unique information in the individual file directly. In the future I plan to add support for these data, but you can manually add them by constructing the unique individual ID yourself as (ER30001 * 1000) + ER30002, and then joining your data on that ID with the dataset produced by PSID.jl.</p>
<p dir="auto">Please file issues if you find a bug.</p>
<h1 dir="auto"><a id="user-content-donate-your-input-json" class="anchor" aria-hidden="true" href="#donate-your-input-json"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Donate your input JSON</h1>
<p dir="auto">If you've made an input JSON file containing variables useful for some topic, feel free to file an issue or make a PR to add your file to the examples.</p>
</article></div>