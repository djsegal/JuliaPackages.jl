<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-longdatasetsort" class="anchor" aria-hidden="true" href="#longdatasetsort"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>LongDatasetSort</h1>
<h1 dir="auto"><a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Introduction</h1>
<p dir="auto"><code>LongDatasetSort.jl</code> is a sort package based on the high-performance data processing package <a href="https://github.com/sl-solution/InMemoryDatasets.jl">InMemoryDatasets.jl</a> (IMD), which provides in-place sorting function <code>longsort!</code> for the <code>Dataset</code> object of IMD. The package performance only considers avoiding extra allocations created by dataset sorting, enabling the sorting method to take up almost no space when dealing with large datasets with many rows.</p>
<h1 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h1>
<ul dir="auto">
<li>
<p dir="auto">No extra allocation created by sorting long <code>Dataset</code></p>
<ul dir="auto">
<li>Allocation does not increase as the row number of the dataset increases</li>
<li>It will be fixed when the column number is less than or equals to 32</li>
</ul>
</li>
<li>
<p dir="auto">Provide Heap Sort and Quick Sort algorithms</p>
<ul dir="auto">
<li>Use Heap Sort by default</li>
<li>Use Quick Sort may improve computational efficiency on large datasets</li>
</ul>
</li>
<li>
<p dir="auto">Support sorting by all types of IMD column indexes and multi-column sorting</p>
<ul dir="auto">
<li>Column name, column index and symbol</li>
<li>Pass a <code>Vector</code> for multi-column sorting</li>
</ul>
</li>
<li>
<p dir="auto">Same optional parameters as InMemoryDatasets, including <code>rev</code> and <code>mapformats</code></p>
<ul dir="auto">
<li>Support sorting by different columns in a different order</li>
<li>Sort with or without formats</li>
</ul>
</li>
<li>
<p dir="auto">Provide alias functions</p>
<ul dir="auto">
<li>Can use <code>heapsort!</code> and <code>quicksort!</code> function to specify algorithms instead of <code>alg</code> parameter</li>
<li>The result of <code>quicksort!</code> will be equal to <code>longsort!(ds, cols, alg = QuickSort)</code></li>
</ul>
</li>
</ul>
<h1 dir="auto"><a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Examples</h1>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using LongDatasetSort
julia&gt; ds = Dataset(x = [5,4,3,2,1], y = [42,52,4,1,55])
5×2 Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   1 │        5        42
   2 │        4        52
   3 │        3         4
   4 │        2         1
   5 │        1        55

julia&gt; longsort!(ds, :x)
5×2 Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   1 │        1        55
   2 │        2         1
   3 │        3         4
   4 │        4        52
   5 │        5        42

julia&gt; longsort!(ds, &quot;y&quot;, rev = true)
5×2 Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   1 │        1        55
   2 │        4        52
   3 │        5        42
   4 │        3         4
   5 │        2         1

julia&gt; ds = Dataset(x = [5, 4, missing, 4],
                    y = [3, missing, missing , 1])
4×2 Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   1 │        5         3
   2 │        4   missing
   3 │  missing   missing
   4 │        4         1

julia&gt; longsort!(ds, 1:2)
4×2 Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   1 │        4         1
   2 │        4   missing
   3 │        5         3
   4 │  missing   missing

julia&gt; longsort!(ds, [:x, :y], rev = [false, true])
4×2 Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   1 │        4   missing
   2 │        4         1
   3 │        5         3
   4 │  missing   missing"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> LongDatasetSort
julia<span class="pl-k">&gt;</span> ds <span class="pl-k">=</span> <span class="pl-c1">Dataset</span>(x <span class="pl-k">=</span> [<span class="pl-c1">5</span>,<span class="pl-c1">4</span>,<span class="pl-c1">3</span>,<span class="pl-c1">2</span>,<span class="pl-c1">1</span>], y <span class="pl-k">=</span> [<span class="pl-c1">42</span>,<span class="pl-c1">52</span>,<span class="pl-c1">4</span>,<span class="pl-c1">1</span>,<span class="pl-c1">55</span>])
<span class="pl-c1">5</span><span class="pl-k">×</span><span class="pl-c1">2</span> Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   <span class="pl-c1">1</span> │        <span class="pl-c1">5</span>        <span class="pl-c1">42</span>
   <span class="pl-c1">2</span> │        <span class="pl-c1">4</span>        <span class="pl-c1">52</span>
   <span class="pl-c1">3</span> │        <span class="pl-c1">3</span>         <span class="pl-c1">4</span>
   <span class="pl-c1">4</span> │        <span class="pl-c1">2</span>         <span class="pl-c1">1</span>
   <span class="pl-c1">5</span> │        <span class="pl-c1">1</span>        <span class="pl-c1">55</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, <span class="pl-c1">:x</span>)
<span class="pl-c1">5</span><span class="pl-k">×</span><span class="pl-c1">2</span> Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   <span class="pl-c1">1</span> │        <span class="pl-c1">1</span>        <span class="pl-c1">55</span>
   <span class="pl-c1">2</span> │        <span class="pl-c1">2</span>         <span class="pl-c1">1</span>
   <span class="pl-c1">3</span> │        <span class="pl-c1">3</span>         <span class="pl-c1">4</span>
   <span class="pl-c1">4</span> │        <span class="pl-c1">4</span>        <span class="pl-c1">52</span>
   <span class="pl-c1">5</span> │        <span class="pl-c1">5</span>        <span class="pl-c1">42</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, <span class="pl-s"><span class="pl-pds">"</span>y<span class="pl-pds">"</span></span>, rev <span class="pl-k">=</span> <span class="pl-c1">true</span>)
<span class="pl-c1">5</span><span class="pl-k">×</span><span class="pl-c1">2</span> Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   <span class="pl-c1">1</span> │        <span class="pl-c1">1</span>        <span class="pl-c1">55</span>
   <span class="pl-c1">2</span> │        <span class="pl-c1">4</span>        <span class="pl-c1">52</span>
   <span class="pl-c1">3</span> │        <span class="pl-c1">5</span>        <span class="pl-c1">42</span>
   <span class="pl-c1">4</span> │        <span class="pl-c1">3</span>         <span class="pl-c1">4</span>
   <span class="pl-c1">5</span> │        <span class="pl-c1">2</span>         <span class="pl-c1">1</span>

julia<span class="pl-k">&gt;</span> ds <span class="pl-k">=</span> <span class="pl-c1">Dataset</span>(x <span class="pl-k">=</span> [<span class="pl-c1">5</span>, <span class="pl-c1">4</span>, <span class="pl-c1">missing</span>, <span class="pl-c1">4</span>],
                    y <span class="pl-k">=</span> [<span class="pl-c1">3</span>, <span class="pl-c1">missing</span>, <span class="pl-c1">missing</span> , <span class="pl-c1">1</span>])
<span class="pl-c1">4</span><span class="pl-k">×</span><span class="pl-c1">2</span> Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   <span class="pl-c1">1</span> │        <span class="pl-c1">5</span>         <span class="pl-c1">3</span>
   <span class="pl-c1">2</span> │        <span class="pl-c1">4</span>   <span class="pl-c1">missing</span>
   <span class="pl-c1">3</span> │  <span class="pl-c1">missing</span>   <span class="pl-c1">missing</span>
   <span class="pl-c1">4</span> │        <span class="pl-c1">4</span>         <span class="pl-c1">1</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">2</span>)
<span class="pl-c1">4</span><span class="pl-k">×</span><span class="pl-c1">2</span> Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   <span class="pl-c1">1</span> │        <span class="pl-c1">4</span>         <span class="pl-c1">1</span>
   <span class="pl-c1">2</span> │        <span class="pl-c1">4</span>   <span class="pl-c1">missing</span>
   <span class="pl-c1">3</span> │        <span class="pl-c1">5</span>         <span class="pl-c1">3</span>
   <span class="pl-c1">4</span> │  <span class="pl-c1">missing</span>   <span class="pl-c1">missing</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, [<span class="pl-c1">:x</span>, <span class="pl-c1">:y</span>], rev <span class="pl-k">=</span> [<span class="pl-c1">false</span>, <span class="pl-c1">true</span>])
<span class="pl-c1">4</span><span class="pl-k">×</span><span class="pl-c1">2</span> Dataset
 Row │ x         y
     │ identity  identity
     │ Int64?    Int64?
─────┼────────────────────
   <span class="pl-c1">1</span> │        <span class="pl-c1">4</span>   <span class="pl-c1">missing</span>
   <span class="pl-c1">2</span> │        <span class="pl-c1">4</span>         <span class="pl-c1">1</span>
   <span class="pl-c1">3</span> │        <span class="pl-c1">5</span>         <span class="pl-c1">3</span>
   <span class="pl-c1">4</span> │  <span class="pl-c1">missing</span>   <span class="pl-c1">missing</span></pre></div>
<p dir="auto">Examples of sorting with or without formats:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Dates
julia&gt; ds = Dataset(state = [&quot;CA&quot;, &quot;TX&quot;, &quot;IL&quot;, &quot;IL&quot;, &quot;IL&quot;, &quot;CA&quot;, &quot;TX&quot;, &quot;TX&quot;],
                           date = [Date(&quot;2020-01-01&quot;), Date(&quot;2020-03-01&quot;), Date(&quot;2020-01-01&quot;),
                                   Date(&quot;2020-03-01&quot;), Date(&quot;2020-02-01&quot;), Date(&quot;2021-03-01&quot;),
                                   Date(&quot;2021-02-01&quot;), Date(&quot;2020-02-01&quot;)],
                             qt = [123, 143, 144, 199, 153, 144, 134, 188])
8×3 Dataset
 Row │ state     date        qt
     │ identity  identity    identity
     │ String?   Date?       Int64?
─────┼────────────────────────────────
   1 │ CA        2020-01-01       123
   2 │ TX        2020-03-01       143
   3 │ IL        2020-01-01       144
   4 │ IL        2020-03-01       199
   5 │ IL        2020-02-01       153
   6 │ CA        2021-03-01       144
   7 │ TX        2021-02-01       134
   8 │ TX        2020-02-01       188

julia&gt; setformat!(ds, :date=&gt;month)
8×3 Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   1 │ CA        1           123
   2 │ TX        3           143
   3 │ IL        1           144
   4 │ IL        3           199
   5 │ IL        2           153
   6 │ CA        3           144
   7 │ TX        2           134
   8 │ TX        2           188

julia&gt; longsort!(ds, [2,1])
8×3 Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   1 │ CA        1           123
   2 │ IL        1           144
   3 │ IL        2           153
   4 │ TX        2           134
   5 │ TX        2           188
   6 │ CA        3           144
   7 │ IL        3           199
   8 │ TX        3           143

julia&gt; longsort!(ds, [2,1], mapformats = false)
8×3 Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   1 │ CA        1           123
   2 │ IL        1           144
   3 │ IL        2           153
   4 │ TX        2           188
   5 │ IL        3           199
   6 │ TX        3           143
   7 │ TX        2           134
   8 │ CA        3           144

julia&gt; longsort!(ds, [1,2], mapformats = false)
8×3 Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   1 │ CA        1           123
   2 │ CA        3           144
   3 │ IL        1           144
   4 │ IL        2           153
   5 │ IL        3           199
   6 │ TX        2           188
   7 │ TX        3           143
   8 │ TX        2           134"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Dates
julia<span class="pl-k">&gt;</span> ds <span class="pl-k">=</span> <span class="pl-c1">Dataset</span>(state <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>CA<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>TX<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>IL<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>IL<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>IL<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>CA<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>TX<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>TX<span class="pl-pds">"</span></span>],
                           date <span class="pl-k">=</span> [<span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2020-01-01<span class="pl-pds">"</span></span>), <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2020-03-01<span class="pl-pds">"</span></span>), <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2020-01-01<span class="pl-pds">"</span></span>),
                                   <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2020-03-01<span class="pl-pds">"</span></span>), <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2020-02-01<span class="pl-pds">"</span></span>), <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2021-03-01<span class="pl-pds">"</span></span>),
                                   <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2021-02-01<span class="pl-pds">"</span></span>), <span class="pl-c1">Date</span>(<span class="pl-s"><span class="pl-pds">"</span>2020-02-01<span class="pl-pds">"</span></span>)],
                             qt <span class="pl-k">=</span> [<span class="pl-c1">123</span>, <span class="pl-c1">143</span>, <span class="pl-c1">144</span>, <span class="pl-c1">199</span>, <span class="pl-c1">153</span>, <span class="pl-c1">144</span>, <span class="pl-c1">134</span>, <span class="pl-c1">188</span>])
<span class="pl-c1">8</span><span class="pl-k">×</span><span class="pl-c1">3</span> Dataset
 Row │ state     date        qt
     │ identity  identity    identity
     │ String?   Date?       Int64?
─────┼────────────────────────────────
   <span class="pl-c1">1</span> │ CA        <span class="pl-c1">2020</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">123</span>
   <span class="pl-c1">2</span> │ TX        <span class="pl-c1">2020</span><span class="pl-k">-</span><span class="pl-c1">03</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">143</span>
   <span class="pl-c1">3</span> │ IL        <span class="pl-c1">2020</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">144</span>
   <span class="pl-c1">4</span> │ IL        <span class="pl-c1">2020</span><span class="pl-k">-</span><span class="pl-c1">03</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">199</span>
   <span class="pl-c1">5</span> │ IL        <span class="pl-c1">2020</span><span class="pl-k">-</span><span class="pl-c1">02</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">153</span>
   <span class="pl-c1">6</span> │ CA        <span class="pl-c1">2021</span><span class="pl-k">-</span><span class="pl-c1">03</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">144</span>
   <span class="pl-c1">7</span> │ TX        <span class="pl-c1">2021</span><span class="pl-k">-</span><span class="pl-c1">02</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">134</span>
   <span class="pl-c1">8</span> │ TX        <span class="pl-c1">2020</span><span class="pl-k">-</span><span class="pl-c1">02</span><span class="pl-k">-</span><span class="pl-c1">01</span>       <span class="pl-c1">188</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">setformat!</span>(ds, <span class="pl-c1">:date</span><span class="pl-k">=&gt;</span>month)
<span class="pl-c1">8</span><span class="pl-k">×</span><span class="pl-c1">3</span> Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   <span class="pl-c1">1</span> │ CA        <span class="pl-c1">1</span>           <span class="pl-c1">123</span>
   <span class="pl-c1">2</span> │ TX        <span class="pl-c1">3</span>           <span class="pl-c1">143</span>
   <span class="pl-c1">3</span> │ IL        <span class="pl-c1">1</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">4</span> │ IL        <span class="pl-c1">3</span>           <span class="pl-c1">199</span>
   <span class="pl-c1">5</span> │ IL        <span class="pl-c1">2</span>           <span class="pl-c1">153</span>
   <span class="pl-c1">6</span> │ CA        <span class="pl-c1">3</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">7</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">134</span>
   <span class="pl-c1">8</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">188</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, [<span class="pl-c1">2</span>,<span class="pl-c1">1</span>])
<span class="pl-c1">8</span><span class="pl-k">×</span><span class="pl-c1">3</span> Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   <span class="pl-c1">1</span> │ CA        <span class="pl-c1">1</span>           <span class="pl-c1">123</span>
   <span class="pl-c1">2</span> │ IL        <span class="pl-c1">1</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">3</span> │ IL        <span class="pl-c1">2</span>           <span class="pl-c1">153</span>
   <span class="pl-c1">4</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">134</span>
   <span class="pl-c1">5</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">188</span>
   <span class="pl-c1">6</span> │ CA        <span class="pl-c1">3</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">7</span> │ IL        <span class="pl-c1">3</span>           <span class="pl-c1">199</span>
   <span class="pl-c1">8</span> │ TX        <span class="pl-c1">3</span>           <span class="pl-c1">143</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, [<span class="pl-c1">2</span>,<span class="pl-c1">1</span>], mapformats <span class="pl-k">=</span> <span class="pl-c1">false</span>)
<span class="pl-c1">8</span><span class="pl-k">×</span><span class="pl-c1">3</span> Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   <span class="pl-c1">1</span> │ CA        <span class="pl-c1">1</span>           <span class="pl-c1">123</span>
   <span class="pl-c1">2</span> │ IL        <span class="pl-c1">1</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">3</span> │ IL        <span class="pl-c1">2</span>           <span class="pl-c1">153</span>
   <span class="pl-c1">4</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">188</span>
   <span class="pl-c1">5</span> │ IL        <span class="pl-c1">3</span>           <span class="pl-c1">199</span>
   <span class="pl-c1">6</span> │ TX        <span class="pl-c1">3</span>           <span class="pl-c1">143</span>
   <span class="pl-c1">7</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">134</span>
   <span class="pl-c1">8</span> │ CA        <span class="pl-c1">3</span>           <span class="pl-c1">144</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">longsort!</span>(ds, [<span class="pl-c1">1</span>,<span class="pl-c1">2</span>], mapformats <span class="pl-k">=</span> <span class="pl-c1">false</span>)
<span class="pl-c1">8</span><span class="pl-k">×</span><span class="pl-c1">3</span> Dataset
 Row │ state     date   qt
     │ identity  month  identity
     │ String?   Date?  Int64?
─────┼───────────────────────────
   <span class="pl-c1">1</span> │ CA        <span class="pl-c1">1</span>           <span class="pl-c1">123</span>
   <span class="pl-c1">2</span> │ CA        <span class="pl-c1">3</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">3</span> │ IL        <span class="pl-c1">1</span>           <span class="pl-c1">144</span>
   <span class="pl-c1">4</span> │ IL        <span class="pl-c1">2</span>           <span class="pl-c1">153</span>
   <span class="pl-c1">5</span> │ IL        <span class="pl-c1">3</span>           <span class="pl-c1">199</span>
   <span class="pl-c1">6</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">188</span>
   <span class="pl-c1">7</span> │ TX        <span class="pl-c1">3</span>           <span class="pl-c1">143</span>
   <span class="pl-c1">8</span> │ TX        <span class="pl-c1">2</span>           <span class="pl-c1">134</span></pre></div>
<h1 dir="auto"><a id="user-content-benchmark" class="anchor" aria-hidden="true" href="#benchmark"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Benchmark</h1>
<ul dir="auto">
<li>
<p dir="auto">Compare the running time and allocation with the <code>sort!</code> function of IMD. A computer with Windows system, 4 cores i5-7500 CPU and 16GB memory is used for the test.</p>
</li>
<li>
<p dir="auto">The testing <code>Dataset</code> is of type <code>Int64</code> with 1e2-1e7 rows and 32 columns. Randomly select 10 columns and convert them to Float type, and sort the dataset in ascending order according to the first three columns.</p>
</li>
<li>
<p dir="auto">The result is given by the macro <code>@benchmarkable</code> from package <a href="https://github.com/JuliaCI/BenchmarkTools.jl">BenchmarkTools.jl</a>. The copy of the testing <code>Dataset</code> has been set up before running the test to avoid extra time and allocations. The test result of running time takes the median value returned by <code>@benchmarkable</code>.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-heap-sort" class="anchor" aria-hidden="true" href="#heap-sort"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Heap Sort</h2>
<h3 dir="auto"><a id="user-content-running-time" class="anchor" aria-hidden="true" href="#running-time"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running Time</h3>
<table>
<thead>
<tr>
<th align="center">nrow\function</th>
<th align="center">LDS.longsort!</th>
<th align="center">IMD.sort!</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">46.600 μs</td>
<td align="center">246.900 μs</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">867.800 μs</td>
<td align="center">375.800 μs</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">28.397 ms</td>
<td align="center">1.492 ms</td>
</tr>
<tr>
<td align="center">1e5</td>
<td align="center">340.060 ms</td>
<td align="center">11.174 ms</td>
</tr>
<tr>
<td align="center">1e6</td>
<td align="center">9.283 s</td>
<td align="center">391.984 ms</td>
</tr>
<tr>
<td align="center">1e7</td>
<td align="center">148.782 s</td>
<td align="center">4.440 s</td>
</tr>
</tbody>
</table>
<h3 dir="auto"><a id="user-content-allocations" class="anchor" aria-hidden="true" href="#allocations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Allocations</h3>
<table>
<thead>
<tr>
<th align="center">nrow\function</th>
<th align="center">LDS.longsort!</th>
<th align="center">IMD.sort!</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1227 allocations: 163.12 KiB</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1402 allocations: 477.20 KiB</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1537 allocations:   3.43 MiB</td>
</tr>
<tr>
<td align="center">1e5</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1422 allocations:  32.94 MiB</td>
</tr>
<tr>
<td align="center">1e6</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">11405 allocations: 328.65 MiB</td>
</tr>
<tr>
<td align="center">1e7</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">2162 allocations:   3.20 GiB</td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-quick-sort" class="anchor" aria-hidden="true" href="#quick-sort"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Quick Sort</h2>
<h3 dir="auto"><a id="user-content-running-time-1" class="anchor" aria-hidden="true" href="#running-time-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running Time</h3>
<table>
<thead>
<tr>
<th align="center">nrow\function</th>
<th align="center">LDS.longsort!</th>
<th align="center">IMD.sort!</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">20.900 μs</td>
<td align="center">244.500 μs</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">378.300 μs</td>
<td align="center">381.300 μs</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">7.603 ms</td>
<td align="center">1.505 ms</td>
</tr>
<tr>
<td align="center">1e5</td>
<td align="center">86.040 ms</td>
<td align="center">11.189 ms</td>
</tr>
<tr>
<td align="center">1e6</td>
<td align="center">1.723 s</td>
<td align="center">502.890 ms</td>
</tr>
<tr>
<td align="center">1e7</td>
<td align="center">20.808 s</td>
<td align="center">4.331 s</td>
</tr>
</tbody>
</table>
<h3 dir="auto"><a id="user-content-allocations-1" class="anchor" aria-hidden="true" href="#allocations-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Allocations</h3>
<table>
<thead>
<tr>
<th align="center">nrow\function</th>
<th align="center">LDS.longsort!</th>
<th align="center">IMD.sort!</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1e2</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1221 allocations: 162.80 KiB</td>
</tr>
<tr>
<td align="center">1e3</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1399 allocations: 477.03 KiB</td>
</tr>
<tr>
<td align="center">1e4</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1435 allocations:   3.42 MiB</td>
</tr>
<tr>
<td align="center">1e5</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1412 allocations:  32.94 MiB</td>
</tr>
<tr>
<td align="center">1e6</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1404 allocations: 328.20 MiB</td>
</tr>
<tr>
<td align="center">1e7</td>
<td align="center">12 allocations: 1.06 KiB</td>
<td align="center">1455 allocations:   3.20 GiB</td>
</tr>
</tbody>
</table>
</article></div>