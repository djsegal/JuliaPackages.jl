<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-mpitapejl" class="anchor" aria-hidden="true" href="#mpitapejl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>MPITape.jl</h1>


<p dir="auto"><em>Record MPI Operations on Tape</em></p>
<table>
<thead>
<tr>
<th align="center"><strong>Documentation</strong></th>
<th align="center"><strong>Build Status</strong></th>
<th align="center"><strong>Quality</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="https://pc2.github.io/MPITape.jl/stable" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a> <a href="https://pc2.github.io/MPITape.jl/dev" rel="nofollow"><img src="https://camo.githubusercontent.com/7fcec4b2d3ab291529fce8ef6a4fcd4129a0683b2f5d5fe2f5c648f02db8b616/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6465762d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-dev-blue.svg" style="max-width: 100%;"></a></td>
<td align="center"><a href="https://git.uni-paderborn.de/pc2-ci/julia/MPITape-jl/-/pipelines" rel="nofollow"><img src="https://camo.githubusercontent.com/55bd24b38ade192f8ac5f273b82e420e7911b08ac578aee49baef6f95cf5c70c/68747470733a2f2f6769742e756e692d7061646572626f726e2e64652f7063322d63692f6a756c69612f4d5049546170652d6a6c2f6261646765732f6d61696e2f706970656c696e652e7376673f6b65795f746578743d434940504332" alt="" data-canonical-src="https://git.uni-paderborn.de/pc2-ci/julia/MPITape-jl/badges/main/pipeline.svg?key_text=CI@PC2" style="max-width: 100%;"></a> <a href="https://codecov.io/gh/pc2/MPITape.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/262a2c280d8ca8fdb2dcfeb4c4a2b8fadc38e104eb83a28ea0dcc95de7e3d6a0/68747470733a2f2f636f6465636f762e696f2f67682f7063322f4d5049546170652e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e7376673f746f6b656e3d3978344a4746457a7a75" alt="" data-canonical-src="https://codecov.io/gh/pc2/MPITape.jl/branch/main/graph/badge.svg?token=9x4JGFEzzu" style="max-width: 100%;"></a></td>
<td align="center"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/0058ce9713cb93a553c2f23207afbb49b1b852a70a4a24de20e2e816c58b299e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6966656379636c652d6578706572696d656e74616c2d6f72616e67652e737667"><img src="https://camo.githubusercontent.com/0058ce9713cb93a553c2f23207afbb49b1b852a70a4a24de20e2e816c58b299e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6966656379636c652d6578706572696d656e74616c2d6f72616e67652e737667" alt="" data-canonical-src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" style="max-width: 100%;"></a> <a href="https://github.com/pc2/MPITape.jl/actions/workflows/FormatCheck.yml"><img src="https://github.com/pc2/MPITape.jl/actions/workflows/FormatCheck.yml/badge.svg" alt="" style="max-width: 100%;"></a></td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-quick-demo" class="anchor" aria-hidden="true" href="#quick-demo"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Quick Demo</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using MPI
using MPITape

function your_mpi_code()
    # Your MPI Code...
end

@record your_mpi_code()

rank = MPI.Comm_rank(MPI.COMM_WORLD)
# delayed printing
sleep(rank)
MPITape.print_mytape()

# save local tapes to disk
MPITape.save()

MPI.Barrier(MPI.COMM_WORLD)
if rank == 0 # on master
    # read all tapes and merge them into one
    tape_merged = MPITape.readall_and_merge()
    # print the merged tape
    MPITape.print_merged(tape_merged)
    # plot the merged tape (beta)
    # display(MPITape.plot_sequence_merged(tape_merged))
    # MPITape.plot_merged(tape_merged)
end
"><pre><span class="pl-k">using</span> MPI
<span class="pl-k">using</span> MPITape

<span class="pl-k">function</span> <span class="pl-en">your_mpi_code</span>()
    <span class="pl-c"><span class="pl-c">#</span> Your MPI Code...</span>
<span class="pl-k">end</span>

<span class="pl-c1">@record</span> <span class="pl-c1">your_mpi_code</span>()

rank <span class="pl-k">=</span> MPI<span class="pl-k">.</span><span class="pl-c1">Comm_rank</span>(MPI<span class="pl-k">.</span>COMM_WORLD)
<span class="pl-c"><span class="pl-c">#</span> delayed printing</span>
<span class="pl-c1">sleep</span>(rank)
MPITape<span class="pl-k">.</span><span class="pl-c1">print_mytape</span>()

<span class="pl-c"><span class="pl-c">#</span> save local tapes to disk</span>
MPITape<span class="pl-k">.</span><span class="pl-c1">save</span>()

MPI<span class="pl-k">.</span><span class="pl-c1">Barrier</span>(MPI<span class="pl-k">.</span>COMM_WORLD)
<span class="pl-k">if</span> rank <span class="pl-k">==</span> <span class="pl-c1">0</span> <span class="pl-c"><span class="pl-c">#</span> on master</span>
    <span class="pl-c"><span class="pl-c">#</span> read all tapes and merge them into one</span>
    tape_merged <span class="pl-k">=</span> MPITape<span class="pl-k">.</span><span class="pl-c1">readall_and_merge</span>()
    <span class="pl-c"><span class="pl-c">#</span> print the merged tape</span>
    MPITape<span class="pl-k">.</span><span class="pl-c1">print_merged</span>(tape_merged)
    <span class="pl-c"><span class="pl-c">#</span> plot the merged tape (beta)</span>
    <span class="pl-c"><span class="pl-c">#</span> display(MPITape.plot_sequence_merged(tape_merged))</span>
    <span class="pl-c"><span class="pl-c">#</span> MPITape.plot_merged(tape_merged)</span>
<span class="pl-k">end</span>
</pre></div>
<p dir="auto">See <code>example/</code> for an actual example which leads to outputs like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Rank: 0
    Init                (Δt=1.37E-06)
    Barrier             (Δt=3.27E-06)
    Send -&gt; 1           (Δt=2.30E-05)
    Send -&gt; 1           (Δt=2.35E-05)
    Send -&gt; 1           (Δt=2.36E-05)
    Send -&gt; 2           (Δt=2.40E-05)
    Send -&gt; 2           (Δt=2.40E-05)
    Send -&gt; 2           (Δt=2.42E-05)
    Send -&gt; 3           (Δt=2.44E-05)
    Send -&gt; 3           (Δt=2.46E-05)
    Send -&gt; 3           (Δt=2.47E-05)
    Send -&gt; 4           (Δt=2.49E-05)
    Send -&gt; 4           (Δt=2.51E-05)
    Send -&gt; 4           (Δt=2.53E-05)
    Recv &lt;- 1           (Δt=7.59E-05)
    Recv &lt;- 2           (Δt=9.35E-05)
    Recv &lt;- 3           (Δt=9.80E-05)
    Recv &lt;- 4           (Δt=9.84E-05)
    Barrier             (Δt=1.30E-04)

Rank: 1
    Init                (Δt=7.99E-06)
    Barrier             (Δt=1.49E-05)
    Recv &lt;- 0           (Δt=1.81E-05)
    Recv &lt;- 0           (Δt=2.99E-05)
    Recv &lt;- 0           (Δt=3.30E-05)
    Send -&gt; 0           (Δt=9.19E-05)
    Barrier             (Δt=9.25E-05)

Rank: 2
    Init                (Δt=8.47E-06)
    Barrier             (Δt=1.59E-05)
    Recv &lt;- 0           (Δt=1.78E-05)
    Recv &lt;- 0           (Δt=3.18E-05)
    Recv &lt;- 0           (Δt=3.48E-05)
    Send -&gt; 0           (Δt=9.60E-05)
    Barrier             (Δt=9.67E-05)

Rank: 3
    Init                (Δt=8.79E-06)
    Barrier             (Δt=1.64E-05)
    Recv &lt;- 0           (Δt=1.90E-05)
    Recv &lt;- 0           (Δt=3.16E-05)
    Recv &lt;- 0           (Δt=3.49E-05)
    Send -&gt; 0           (Δt=9.23E-05)
    Barrier             (Δt=9.30E-05)

Rank: 4
    Init                (Δt=9.64E-06)
    Barrier             (Δt=1.64E-05)
    Recv &lt;- 0           (Δt=1.81E-05)
    Recv &lt;- 0           (Δt=3.09E-05)
    Recv &lt;- 0           (Δt=3.39E-05)
    Send -&gt; 0           (Δt=9.58E-05)
    Barrier             (Δt=9.63E-05)"><pre class="notranslate"><code>Rank: 0
    Init                (Δt=1.37E-06)
    Barrier             (Δt=3.27E-06)
    Send -&gt; 1           (Δt=2.30E-05)
    Send -&gt; 1           (Δt=2.35E-05)
    Send -&gt; 1           (Δt=2.36E-05)
    Send -&gt; 2           (Δt=2.40E-05)
    Send -&gt; 2           (Δt=2.40E-05)
    Send -&gt; 2           (Δt=2.42E-05)
    Send -&gt; 3           (Δt=2.44E-05)
    Send -&gt; 3           (Δt=2.46E-05)
    Send -&gt; 3           (Δt=2.47E-05)
    Send -&gt; 4           (Δt=2.49E-05)
    Send -&gt; 4           (Δt=2.51E-05)
    Send -&gt; 4           (Δt=2.53E-05)
    Recv &lt;- 1           (Δt=7.59E-05)
    Recv &lt;- 2           (Δt=9.35E-05)
    Recv &lt;- 3           (Δt=9.80E-05)
    Recv &lt;- 4           (Δt=9.84E-05)
    Barrier             (Δt=1.30E-04)

Rank: 1
    Init                (Δt=7.99E-06)
    Barrier             (Δt=1.49E-05)
    Recv &lt;- 0           (Δt=1.81E-05)
    Recv &lt;- 0           (Δt=2.99E-05)
    Recv &lt;- 0           (Δt=3.30E-05)
    Send -&gt; 0           (Δt=9.19E-05)
    Barrier             (Δt=9.25E-05)

Rank: 2
    Init                (Δt=8.47E-06)
    Barrier             (Δt=1.59E-05)
    Recv &lt;- 0           (Δt=1.78E-05)
    Recv &lt;- 0           (Δt=3.18E-05)
    Recv &lt;- 0           (Δt=3.48E-05)
    Send -&gt; 0           (Δt=9.60E-05)
    Barrier             (Δt=9.67E-05)

Rank: 3
    Init                (Δt=8.79E-06)
    Barrier             (Δt=1.64E-05)
    Recv &lt;- 0           (Δt=1.90E-05)
    Recv &lt;- 0           (Δt=3.16E-05)
    Recv &lt;- 0           (Δt=3.49E-05)
    Send -&gt; 0           (Δt=9.23E-05)
    Barrier             (Δt=9.30E-05)

Rank: 4
    Init                (Δt=9.64E-06)
    Barrier             (Δt=1.64E-05)
    Recv &lt;- 0           (Δt=1.81E-05)
    Recv &lt;- 0           (Δt=3.09E-05)
    Recv &lt;- 0           (Δt=3.39E-05)
    Send -&gt; 0           (Δt=9.58E-05)
    Barrier             (Δt=9.63E-05)
</code></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/pc2/MPITape.jl/main/example/colored_output_combined.png"><img src="https://raw.githubusercontent.com/pc2/MPITape.jl/main/example/colored_output_combined.png" alt="" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">The package is not registered. You can use</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="] add MPITape"><pre class="notranslate"><code>] add MPITape
</code></pre></div>
<p dir="auto">to add the package to your Julia environment.</p>
<h2 dir="auto"><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Documentation</h2>
<p dir="auto">For more information, please find the <a href="https://pc2.github.io/MPITape.jl/stable" rel="nofollow">documentation</a> here.</p>
<h2 dir="auto"><a id="user-content-acknowledgements" class="anchor" aria-hidden="true" href="#acknowledgements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Acknowledgements</h2>
<p dir="auto">This package is an effort of the <a href="https://pc2.uni-paderborn.de/" rel="nofollow">Paderborn Center for Parallel Computing (PC²)</a>, a national HPC center in Germany.</p>
</article></div>