<div id="readme" class="md" data-path="Readme.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p>Problem:<br>
Polymake needs flint needs gmp
Nemo needs antic needs flint needs gmp</p>
<p>Depending on the order of the calls to <strong>init</strong> two copies of libflint (and libgmp) are loaded.
The ones coming from Nemo have the memory allocators set to use the julia allocators, while
Polymake does not.</p>
<p>Later in the code
I call libantic
which calls libflint to alloc memory
Then I call libflint to free the memory, as antic is a derivative of flint.</p>
<p>Now antic calls the 2nd copy of libflint, the one where memory management is done by
the system</p>
<p>Thus the free from the 1st call to libflint crashes.</p>
<p>Alternative approach
set all memory functions in all gmp's to match julia:
fails as allocations in polymake are happening before Julia can change this.</p>
<p>Thus LoadFlint</p>
<p>which will only make sure that libgmp and libflint are in the process space and properly initialized.</p>
</article></div>