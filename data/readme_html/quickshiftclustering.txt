<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-quickshiftclustering" class="anchor" aria-hidden="true" href="#quickshiftclustering"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>QuickShiftClustering</h1>
<p><a href="https://travis-ci.org/rened/QuickShiftClustering.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/f41c818c8335aa5a30cb48c677644a00f08480e1/68747470733a2f2f7472617669732d63692e6f72672f72656e65642f517569636b5368696674436c7573746572696e672e6a6c2e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/rened/QuickShiftClustering.jl.png" style="max-width:100%;"></a>
<a href="http://pkg.julialang.org/?pkg=QuickShiftClustering&amp;ver=0.4" rel="nofollow"><img src="https://camo.githubusercontent.com/e7555fc694d9b3cbd80c6486f0f74eebe9481c78/687474703a2f2f706b672e6a756c69616c616e672e6f72672f6261646765732f517569636b5368696674436c7573746572696e675f302e342e737667" alt="Build Status" data-canonical-src="http://pkg.julialang.org/badges/QuickShiftClustering_0.4.svg" style="max-width:100%;"></a>
<a href="http://pkg.julialang.org/?pkg=QuickShiftClustering&amp;ver=0.5" rel="nofollow"><img src="https://camo.githubusercontent.com/a4ebe49764e368ef57ed61635660a30ba81a2a80/687474703a2f2f706b672e6a756c69616c616e672e6f72672f6261646765732f517569636b5368696674436c7573746572696e675f302e352e737667" alt="Build Status" data-canonical-src="http://pkg.julialang.org/badges/QuickShiftClustering_0.5.svg" style="max-width:100%;"></a></p>
<p>QuickShift [1] is a fast method for hierarchical clustering, which first constructs the clustering tree, and subsequently allows to quickly cut links in the tree which exceed a specified length. This second step can be performed for different link-lengths without having to re-run the clustering itself. Care has been taken to provide a high-performance implementation.</p>
<p>[1] <a href="http://cronos.rutgers.edu/~meer/TEACH/ADD/vedaldiS08quick.pdf" rel="nofollow">Quick Shift and Kernel Methods
for Mode Seeking</a></p>
<h4><a id="user-content-functions" class="anchor" aria-hidden="true" href="#functions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Functions</h4>
<div class="highlight highlight-source-julia"><pre>a <span class="pl-k">=</span> <span class="pl-c1">quickshift</span>(data)
a <span class="pl-k">=</span> <span class="pl-c1">quickshift</span>(data, sigma)
<span class="pl-c"><span class="pl-c">#</span> cluster ndim x nsamplex matrix data.</span>
<span class="pl-c"><span class="pl-c">#</span> sigma: Gaussian kernel width, see paper</span>

labels <span class="pl-k">=</span> <span class="pl-c1">quickshiftlabels</span>(a<span class="pl-k">::</span><span class="pl-c1">QuickShift</span>)
labels <span class="pl-k">=</span> <span class="pl-c1">quickshiftlabels</span>(a<span class="pl-k">::</span><span class="pl-c1">QuickShift</span>, maxlinklength)
<span class="pl-c"><span class="pl-c">#</span> cut links in the tree with length &gt; maxlinklength</span>
<span class="pl-c"><span class="pl-c">#</span> return cluster labels for data points.</span>

<span class="pl-c1">quickshiftplot</span>(a, data, labels)
<span class="pl-c"><span class="pl-c">#</span> plot data points and hierarchical links</span>
<span class="pl-c"><span class="pl-c">#</span> needs PyPlot installed, only for 2D</span></pre></div>
<h4><a id="user-content-performance" class="anchor" aria-hidden="true" href="#performance"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Performance</h4>
<table>
<thead>
<tr>
<th>data 2 x N</th>
<th>Runtime quickshift</th>
<th>Runtime quickshiftlabels</th>
</tr>
</thead>
<tbody>
<tr>
<td>1000</td>
<td>0.06 sec</td>
<td>0.0002 sec</td>
</tr>
<tr>
<td>10000</td>
<td>0.27 sec</td>
<td>0.004 sec</td>
</tr>
<tr>
<td>100000</td>
<td>9.67 sec</td>
<td>0.04 sec</td>
</tr>
</tbody>
</table>
<p>For larger numbers of data points, you might want to use <a href="https://github.com/rened/KShiftsClustering.jl">KShiftsClustering.jl</a> to cluster the <code>N</code> data points to e.g. 10.000 cluster centers, and then perform QuickShift on those.</p>
<p>Comparison with <code>kmedoids</code> for 20.000 points:</p>
<div class="highlight highlight-source-julia"><pre><span class="pl-k">using</span> Clustering, QuickShiftClustering, FunctionalDataUtils

data <span class="pl-k">=</span> <span class="pl-c1">rand</span>(<span class="pl-c1">2</span>,<span class="pl-c1">20000</span>)
<span class="pl-c1">@time</span> a <span class="pl-k">=</span> <span class="pl-c1">kmedoids</span>(<span class="pl-c1">1</span><span class="pl-k">-</span><span class="pl-c1">exp</span>(<span class="pl-k">-</span><span class="pl-c1">distance</span>(data,data)<span class="pl-k">*</span><span class="pl-c1">10</span>),<span class="pl-c1">10</span>)
<span class="pl-c"><span class="pl-c">#</span>  =&gt;  elapsed time: 56.666481916 seconds (41126243444 bytes allocated, 15.31% gc time)</span>

<span class="pl-c1">@time</span> labels <span class="pl-k">=</span> <span class="pl-c1">quickshiftlabels</span>(<span class="pl-c1">quickshift</span>(data))
<span class="pl-c"><span class="pl-c">#</span>  =&gt;  elapsed time: 1.187448525 seconds (277816624 bytes allocated, 28.79% gc time)</span></pre></div>
<h4><a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<div class="highlight highlight-source-julia"><pre><span class="pl-k">using</span> FunctionalData
data <span class="pl-k">=</span> <span class="pl-c1">@p</span> map <span class="pl-c1">unstack</span>(<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">10</span>) (x<span class="pl-k">-&gt;</span><span class="pl-c1">10</span><span class="pl-k">*</span><span class="pl-c1">randn</span>(<span class="pl-c1">2</span>,<span class="pl-c1">1</span>)<span class="pl-k">.+</span><span class="pl-c1">randn</span>(<span class="pl-c1">2</span>,<span class="pl-c1">100</span>)) <span class="pl-k">|</span> flatten

<span class="pl-k">using</span> QuickShiftClustering
a <span class="pl-k">=</span> <span class="pl-c1">quickshift</span>(data)           
labels <span class="pl-k">=</span> <span class="pl-c1">quickshiftlabels</span>(a)   

<span class="pl-c1">quickshiftplot</span>(a, data, labels)</pre></div>
<p><a target="_blank" rel="noopener noreferrer" href="example.png"><img src="example.png" alt="" style="max-width:100%;"></a></p>
</article></div>