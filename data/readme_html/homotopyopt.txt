<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-homotopyoptjl" class="anchor" aria-hidden="true" href="#homotopyoptjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>HomotopyOpt.jl</h1>
<p dir="auto">This package solves a constrained optimization problem which minimizes an objective function restricted to an algebraic variety.
There are two main ideas. First, we use parameter homotopy (using <code>HomotopyContinuation.jl</code>) to attempt a line search in the direction of the projected gradient vector.
Because we use parameter homotopy, this <em>line search</em> is really a <em>curve search</em> along a curve that stays on the constraint variety.</p>
<p dir="auto">Second, we use <em>parallel transport</em> to decide when to slow down and search more carefully. Whenever we observe that the norm of the projected
gradient has been decreasing and then starts to increase, we parallel transport a projected gradient from one tangent space to the other,
compute their dot product, and if it's negative, that means the projected gradient has <em>reversed direction</em>, so that we skipped past a critical point.
If this happens, we go back a bit, and slow down our search, looking more carefully in that neighborhood.
The end result is that we slow down in the correct places to find critical points where the projected gradient vector is essentially the zero vector.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="julia&gt; ]
(@v1.7) pkg&gt; add HomotopyOpt"><pre class="notranslate"><code>julia&gt; ]
(@v1.7) pkg&gt; add HomotopyOpt
</code></pre></div>
<h2 dir="auto"><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using HomotopyOpt

sexticcurve(x) = [(x[1]^4 + x[2]^4 - 1) * (x[1]^2 + x[2]^2 - 2) + x[1]^5 * x[2]] # sextic curve
N,d = 2,1 # ambient dimension, variety dimension
numsamples = 100 # we want to compute some random starting points for our optimization problem

G = ConstraintVariety(sexticcurve, N, d, numsamples); # if you dont ask for samples, it will not compute them."><pre><span class="pl-k">using</span> HomotopyOpt

<span class="pl-en">sexticcurve</span>(x) <span class="pl-k">=</span> [(x[<span class="pl-c1">1</span>]<span class="pl-k">^</span><span class="pl-c1">4</span> <span class="pl-k">+</span> x[<span class="pl-c1">2</span>]<span class="pl-k">^</span><span class="pl-c1">4</span> <span class="pl-k">-</span> <span class="pl-c1">1</span>) <span class="pl-k">*</span> (x[<span class="pl-c1">1</span>]<span class="pl-k">^</span><span class="pl-c1">2</span> <span class="pl-k">+</span> x[<span class="pl-c1">2</span>]<span class="pl-k">^</span><span class="pl-c1">2</span> <span class="pl-k">-</span> <span class="pl-c1">2</span>) <span class="pl-k">+</span> x[<span class="pl-c1">1</span>]<span class="pl-k">^</span><span class="pl-c1">5</span> <span class="pl-k">*</span> x[<span class="pl-c1">2</span>]] <span class="pl-c"><span class="pl-c">#</span> sextic curve</span>
N,d <span class="pl-k">=</span> <span class="pl-c1">2</span>,<span class="pl-c1">1</span> <span class="pl-c"><span class="pl-c">#</span> ambient dimension, variety dimension</span>
numsamples <span class="pl-k">=</span> <span class="pl-c1">100</span> <span class="pl-c"><span class="pl-c">#</span> we want to compute some random starting points for our optimization problem</span>

G <span class="pl-k">=</span> <span class="pl-c1">ConstraintVariety</span>(sexticcurve, N, d, numsamples); <span class="pl-c"><span class="pl-c">#</span> if you dont ask for samples, it will not compute them.</span></pre></div>
<p dir="auto">Above we created a <code>ConstraintVariety</code>, and now we need to create a function that evaluates the gradient of the objective function.
For the objective function, we choose the squared distance from the point <math-renderer class="js-inline-math" style="display: inline" data-static-url="https://github.githubassets.com/static" data-run-id="09dcb5eec3aeac65aa8051425f980e71">$(2,2)$</math-renderer> in the plane, for visualization purposes in this example.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="Q = x-&gt;(x[1]-2)^2+(x[2]-2)^2"><pre>Q <span class="pl-k">=</span> x<span class="pl-k">-&gt;</span>(x[<span class="pl-c1">1</span>]<span class="pl-k">-</span><span class="pl-c1">2</span>)<span class="pl-k">^</span><span class="pl-c1">2</span><span class="pl-k">+</span>(x[<span class="pl-c1">2</span>]<span class="pl-k">-</span><span class="pl-c1">2</span>)<span class="pl-k">^</span><span class="pl-c1">2</span></pre></div>
<p dir="auto">The main function is <code>findminima</code> which actually implements our algorithm. It takes inputs as follows:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="p0 = rand(G.samples) # choose a random starting point on the curve
tolerance = 1e-3

result = findminima(p0, tolerance, G, Q);"><pre>p0 <span class="pl-k">=</span> <span class="pl-c1">rand</span>(G<span class="pl-k">.</span>samples) <span class="pl-c"><span class="pl-c">#</span> choose a random starting point on the curve</span>
tolerance <span class="pl-k">=</span> <span class="pl-c1">1e-3</span>

result <span class="pl-k">=</span> <span class="pl-c1">findminima</span>(p0, tolerance, G, Q);</pre></div>
<p dir="auto">Now we can <code>watch</code> our result.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="watch(result)"><pre><span class="pl-c1">watch</span>(result)</pre></div>
<p dir="auto">which produces the following output:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/matthiashimmelmann/HomotopyOpt.jl/blob/firstbranch/test/watch1.661497754964e9.gif"><img src="https://github.com/matthiashimmelmann/HomotopyOpt.jl/raw/firstbranch/test/watch1.661497754964e9.gif" alt="" style="max-width: 100%;"></a></p>
</article></div>