<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-climate-analysis-tools-in-julia" class="anchor" aria-hidden="true" href="#climate-analysis-tools-in-julia"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Climate analysis tools in Julia</h1>
<p dir="auto"><a href="http://www.repostatus.org/#active" rel="nofollow"><img src="https://camo.githubusercontent.com/ed51270ad41e2b842f9423b165977ac42f8498581be7c17c78818d1a45b834d5/687474703a2f2f7777772e7265706f7374617475732e6f72672f6261646765732f6c61746573742f6163746976652e737667" alt="Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed." data-canonical-src="http://www.repostatus.org/badges/latest/active.svg" style="max-width: 100%;"></a>
<a href="https://github.com/JuliaClimate/ClimateTools.jl/actions"><img src="https://github.com/JuliaClimate/ClimateTools.jl/workflows/CI/badge.svg" alt="Build status" style="max-width: 100%;"></a>
<a href="https://ci.appveyor.com/project/Balinus/climatetools-jl-xhihv/branch/master" rel="nofollow"><img src="https://camo.githubusercontent.com/5ad7b212b1718612cfa37e8af80748d3e53fa6158db0aca0ece41e71551c1e6a/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f766a3534386c6d6938356231387567722f6272616e63682f6d61737465723f7376673d74727565" alt="Build status" data-canonical-src="https://ci.appveyor.com/api/projects/status/vj548lmi85b18ugr/branch/master?svg=true" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/JuliaClimate/ClimateTools.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/eb099c967ea15fa7e35a0487a54518a58fe3548c9b035ec133ad368915b190dd/68747470733a2f2f636f6465636f762e696f2f67682f4a756c6961436c696d6174652f436c696d617465546f6f6c732e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/JuliaClimate/ClimateTools.jl/branch/master/graph/badge.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://zenodo.org/badge/latestdoi/76293821" rel="nofollow"><img src="https://camo.githubusercontent.com/35f4ea51e3f7640c1f48ff45a972418410c1fea1a458151c8175b5e6e6c2a242/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f37363239333832312e737667" alt="DOI" data-canonical-src="https://zenodo.org/badge/76293821.svg" style="max-width: 100%;"></a> <a href="https://gitter.im/ClimateTools-jl" rel="nofollow"><img src="https://camo.githubusercontent.com/275e18815979c0d6cc8e64f65d167ea86bae2f4b3fc69ce899de3eccd3f1feba/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636861742d6f6e2532306769747465722d6263303036372e737667" alt="chat" data-canonical-src="https://img.shields.io/badge/chat-on%20gitter-bc0067.svg" style="max-width: 100%;"></a>
<a href="http://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/9f6b5dca9fd95975898fb95c2cc5b995351004a6c4443ccb13e1916a97bb122a/687474703a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d627269676874677265656e2e737667" alt="MIT license" data-canonical-src="http://img.shields.io/badge/license-MIT-brightgreen.svg" style="max-width: 100%;"></a></p>
<p dir="auto">Latest release: <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8545d1612e2cccf43052df24c36e82f23b9df055cb4b5e8fa58a3f55362921c7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f4a756c6961436c696d6174652f436c696d617465546f6f6c732e6a6c"><img src="https://camo.githubusercontent.com/8545d1612e2cccf43052df24c36e82f23b9df055cb4b5e8fa58a3f55362921c7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f4a756c6961436c696d6174652f436c696d617465546f6f6c732e6a6c" alt="GitHub release (latest SemVer)" data-canonical-src="https://img.shields.io/github/v/release/JuliaClimate/ClimateTools.jl" style="max-width: 100%;"></a></p>
<h1 dir="auto"><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Documentation</h1>
<p dir="auto"><a href="https://juliaclimate.github.io/ClimateTools.jl/stable" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a> <a href="https://juliaclimate.github.io/ClimateTools.jl/dev" rel="nofollow"><img src="https://camo.githubusercontent.com/56f8252ba8e9d3f0b810769543f77823d2fe031ce560d4c2d69fb1fcad800383/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6c61746573742d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-latest-blue.svg" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-overview" class="anchor" aria-hidden="true" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Overview</h2>
<p dir="auto"><em>Note. Compatible with Julia 1.2 and higher</em></p>
<p dir="auto">ClimateTools.jl is a collection of commonly-used tools in Climate science. Basics of climate field analysis are covered, with some forays into exploratory techniques associated with climate scenarios design. The package is aimed to ease the typical steps of analysis climate models outputs and gridded datasets (support for weather stations is a work-in-progress).</p>
<p dir="auto">ClimateTools.jl is registered on METADATA.jl and can be added and updated with <code>Pkg</code> commands. See <a href="https://juliaclimate.github.io/ClimateTools.jl/dev/installation/" rel="nofollow">installation documentation</a> for detailed installation instructions and Python's dependencies (for mapping features).</p>
<p dir="auto">Climate indices and bias correction functions are coded to leverage the use of <strong>multiple threads</strong>. To gain maximum performance, use (bash shell Linux/MacOSX) <code>export JULIA_NUM_THREADS=n</code>, where <em>n</em> is the number of threads. To get an idea of the number of threads you can use type (in Julia) <code>Sys.THREADS</code>. This is especially useful for bias correction.</p>
<h2 dir="auto"><a id="user-content-contributors" class="anchor" aria-hidden="true" href="#contributors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contributors</h2>
<p dir="auto">If you'd like to have other climate indices coded, please, submit them through a Pull Request! I'd be more than happy to include them. Alternatively, provide the equation in Issues.</p>
<h2 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h2>
<ul dir="auto">
<li>Extraction and visualization of CF-compliant netCDF datasets</li>
<li>Custom user-provided polygons and start and end date for localized studies</li>
<li>Climate indices from The joint CCl/CLIVAR/JCOMM Expert Team (ET) on Climate Change Detection and Indices (ETCCDI) as well as custom climate indices. <a href="https://juliaclimate.github.io/ClimateTools.jl/stable/indices/" rel="nofollow">See list</a>.</li>
<li>Regridding of a datasets onto another grid</li>
<li>Post-processing of climate timeseries using Quantile-Quantile mapping method (cf. ThemeÃŸl et al. 2012, Piani et al. 2010)</li>
<li>Support for physical units through the <a href="https://github.com/ajkeller34/Unitful.jl">Unitful.jl</a> package.</li>
</ul>
<h2 dir="auto"><a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting started</h2>
<p dir="auto"><em>Note. More in-depth documentation is provided in the official documentation (Links: <a href="https://juliaclimate.github.io/ClimateTools.jl/stable/" rel="nofollow">stable</a>/<a href="https://juliaclimate.github.io/ClimateTools.jl/dev/" rel="nofollow">latest</a>).</em></p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using ClimateTools"><pre><span class="pl-k">using</span> ClimateTools</pre></div>
<h3 dir="auto"><a id="user-content-reading-a-netcdf-file" class="anchor" aria-hidden="true" href="#reading-a-netcdf-file"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Reading a NetCDF file</h3>
<p dir="auto">The entry point of <code>ClimateTools</code> is to load data with the <code>load</code> function. Optional polygon clipping feature is available. By providing such polygon, the <code>load</code> function  returns a <code>ClimGrid</code> with grid points contained in the polygon.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = load(filename::String, vari::String; poly::Array, data_units::String, start_date::Tuple, end_date::Tuple)"><pre>C <span class="pl-k">=</span> <span class="pl-c1">load</span>(filename<span class="pl-k">::</span><span class="pl-c1">String</span>, vari<span class="pl-k">::</span><span class="pl-c1">String</span>; poly<span class="pl-k">::</span><span class="pl-c1">Array</span>, data_units<span class="pl-k">::</span><span class="pl-c1">String</span>, start_date<span class="pl-k">::</span><span class="pl-c1">Tuple</span>, end_date<span class="pl-k">::</span><span class="pl-c1">Tuple</span>)</pre></div>
<p dir="auto"><code>load</code> returns a <code>ClimGrid</code> type. Using the optional <code>poly</code> argument, the user can provide a polygon and the returned <code>ClimGrid</code> will only contains the grid points inside the provided polygon. For some variable, the optional keyword argument <code>data_units</code> can be provided. For example, precipitation in climate models are usually provided as <code>kg/m^2/s</code>. By specifying <code>data_units = mm</code>, the <code>load</code> function returns accumulation at the data time resolution. Similarly, the user can provide <code>Celsius</code> as <code>data_units</code> and <code>load</code> will return <code>Celsius</code> instead of <code>Kelvin</code>.</p>
<p dir="auto">The <code>ClimGrid</code> is a in-memory representation of a CF-compliant netCDF file for a single variable.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="struct ClimGrid
  data::AxisArray # labeled axis
  longrid::AbstractArray{N,2} where N # the longitude grid
  latgrid::AbstractArray{N,2} where N # the latitude grid
  msk::Array{N, 2} where N
  grid_mapping::Dict # bindings of native grid
  dimension_dict::Dict
  model::String
  frequency::String
  experiment::String
  run::String
  project::String # CORDEX, CMIP5, etc.
  institute::String
  filename::String
  dataunits::String
  latunits::String # of the coordinate variable
  lonunits::String # of the coordinate variable
  variable::String # Type of variable (i.e. can be the same as &quot;var&quot;, but it is changed when calculating indices)
  typeofvar::String # Variable type (e.g. tasmax, tasmin, pr)
  typeofcal::String # Calendar type
  timeattrib::Dict # Time attributes
  varattribs::Dict # Variable attributes
  globalattribs::Dict # Global attributes

end"><pre><span class="pl-k">struct</span> ClimGrid
  data<span class="pl-k">::</span><span class="pl-c1">AxisArray</span> <span class="pl-c"><span class="pl-c">#</span> labeled axis</span>
  longrid<span class="pl-k">::</span><span class="pl-c1">AbstractArray{N,2}</span> <span class="pl-k">where</span> N <span class="pl-c"><span class="pl-c">#</span> the longitude grid</span>
  latgrid<span class="pl-k">::</span><span class="pl-c1">AbstractArray{N,2}</span> <span class="pl-k">where</span> N <span class="pl-c"><span class="pl-c">#</span> the latitude grid</span>
  msk<span class="pl-k">::</span><span class="pl-c1">Array{N, 2}</span> <span class="pl-k">where</span> N
  grid_mapping<span class="pl-k">::</span><span class="pl-c1">Dict</span> <span class="pl-c"><span class="pl-c">#</span> bindings of native grid</span>
  dimension_dict<span class="pl-k">::</span><span class="pl-c1">Dict</span>
  model<span class="pl-k">::</span><span class="pl-c1">String</span>
  frequency<span class="pl-k">::</span><span class="pl-c1">String</span>
  experiment<span class="pl-k">::</span><span class="pl-c1">String</span>
  run<span class="pl-k">::</span><span class="pl-c1">String</span>
  project<span class="pl-k">::</span><span class="pl-c1">String</span> <span class="pl-c"><span class="pl-c">#</span> CORDEX, CMIP5, etc.</span>
  institute<span class="pl-k">::</span><span class="pl-c1">String</span>
  filename<span class="pl-k">::</span><span class="pl-c1">String</span>
  dataunits<span class="pl-k">::</span><span class="pl-c1">String</span>
  latunits<span class="pl-k">::</span><span class="pl-c1">String</span> <span class="pl-c"><span class="pl-c">#</span> of the coordinate variable</span>
  lonunits<span class="pl-k">::</span><span class="pl-c1">String</span> <span class="pl-c"><span class="pl-c">#</span> of the coordinate variable</span>
  variable<span class="pl-k">::</span><span class="pl-c1">String</span> <span class="pl-c"><span class="pl-c">#</span> Type of variable (i.e. can be the same as "var", but it is changed when calculating indices)</span>
  typeofvar<span class="pl-k">::</span><span class="pl-c1">String</span> <span class="pl-c"><span class="pl-c">#</span> Variable type (e.g. tasmax, tasmin, pr)</span>
  typeofcal<span class="pl-k">::</span><span class="pl-c1">String</span> <span class="pl-c"><span class="pl-c">#</span> Calendar type</span>
  timeattrib<span class="pl-k">::</span><span class="pl-c1">Dict</span> <span class="pl-c"><span class="pl-c">#</span> Time attributes</span>
  varattribs<span class="pl-k">::</span><span class="pl-c1">Dict</span> <span class="pl-c"><span class="pl-c">#</span> Variable attributes</span>
  globalattribs<span class="pl-k">::</span><span class="pl-c1">Dict</span> <span class="pl-c"><span class="pl-c">#</span> Global attributes</span>

<span class="pl-k">end</span></pre></div>
<h3 dir="auto"><a id="user-content-subsetting" class="anchor" aria-hidden="true" href="#subsetting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Subsetting</h3>
<p dir="auto">Further subsets can be done in the temporal and spatial domains. <code>spatialsubset</code> function acts on <code>ClimGrid</code> type and subset the data using a user polygon. The function returns another <code>ClimGrid</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = spatialsubset(C::ClimGrid, poly:Array{N, 2} where N)"><pre>C <span class="pl-k">=</span> <span class="pl-c1">spatialsubset</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, poly<span class="pl-k">:</span>Array{N, <span class="pl-c1">2</span>} <span class="pl-k">where</span> N)</pre></div>
<p dir="auto">Temporal subset of the data is done with <code>temporalsubset</code> function, which returns a continuous timeserie between <code>startdate</code> and <code>enddate</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = temporalsubset(C::ClimGrid, startdate::Tuple, enddate::Tuple)"><pre>C <span class="pl-k">=</span> <span class="pl-c1">temporalsubset</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, startdate<span class="pl-k">::</span><span class="pl-c1">Tuple</span>, enddate<span class="pl-k">::</span><span class="pl-c1">Tuple</span>)</pre></div>
<p dir="auto">Resampling is available with the <code>resample</code>, which returns a given period for each year (e.g. only summer months).</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = resample(C::ClimGrid, startmonth::Int, endmonth::Ind)
C = resample(C::ClimGrid, season::String) # hardcoded seasons -&gt; &quot;DJF&quot;, &quot;MAM&quot;, &quot;JJA&quot; and &quot;SON&quot;"><pre>C <span class="pl-k">=</span> <span class="pl-c1">resample</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, startmonth<span class="pl-k">::</span><span class="pl-c1">Int</span>, endmonth<span class="pl-k">::</span><span class="pl-c1">Ind</span>)
C <span class="pl-k">=</span> <span class="pl-c1">resample</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, season<span class="pl-k">::</span><span class="pl-c1">String</span>) <span class="pl-c"><span class="pl-c">#</span> hardcoded seasons -&gt; "DJF", "MAM", "JJA" and "SON"</span></pre></div>
<h3 dir="auto"><a id="user-content-mapping-the-climgrid-type" class="anchor" aria-hidden="true" href="#mapping-the-climgrid-type"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Mapping the ClimGrid type</h3>
<p dir="auto">Mapping climate information can be done by using <code>mapclimgrid</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mapclimgrid(C::ClimGrid; region = &quot;World&quot;)"><pre><span class="pl-c1">mapclimgrid</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>; region <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>World<span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">Which should return the time average of ClimGrid <code>C</code> over the world region.</p>
<p align="center" dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://cloud.githubusercontent.com/assets/3630311/23712122/e97bd322-03ef-11e7-93da-749c961c4070.png?raw=true"><img src="https://cloud.githubusercontent.com/assets/3630311/23712122/e97bd322-03ef-11e7-93da-749c961c4070.png?raw=true" width="771" height="388" alt="Precipitation example" style="max-width: 100%;"></a>
</p>
<p dir="auto">Note that if the <code>ClimGrid</code> data structure has 3 dimensions (time x longitude x latitude) the <code>mapclimgrid</code> function makes a time-average (i.e. climatological mean). Right now, there are a growing list of hardcoded regions (see help section of <code>mapclimgrid</code> function) and the default <code>auto</code> which use the maximum and minimum of the lat-long coordinates inside the <code>ClimGrid</code> structure. The user can also provide a polygon(s) and the <code>mapclimgrid</code> function will clip the grid points outside the specified polygon. Another option is to provide a mask (with dimensions identical to the spatial dimension of the <code>ClimGrid</code> data) which contains <code>NaN</code> and <code>1.0</code> and the data inside the <code>ClimGrid</code> struct will be clipped with the mask. Other regions will be added in the future, as well as the option to send a custom region defined by a lat-lon box.</p>
<h3 dir="auto"><a id="user-content-indices" class="anchor" aria-hidden="true" href="#indices"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Indices</h3>
<p dir="auto">More than 20 climate indices are available in the package, such as the annual number of tropical nights, annual maximum and minimum, etc. You can calculate such indices simply with:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="ind = annualmax(C::ClimGrid)"><pre>ind <span class="pl-k">=</span> <span class="pl-c1">annualmax</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>)</pre></div>
<p dir="auto">Which returns another <code>ClimGrid</code>. You can also map this <code>ClimGrid</code> with the <code>mapclimgrid</code> function and returns the climatological mean of the annual maximum (e.g. daily precipitation in the example below). From the figure, we clearly sees the monsoon regions (India) and region with wind-driven precipitations (e.g. western sides of the oceans).</p>
<p dir="auto">A list of indices can be found in the documentation and in the <code>functions.jl</code> source code.</p>
<p align="center" dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://cloud.githubusercontent.com/assets/3630311/23873133/59b85c08-0807-11e7-967b-7cc7d28aada0.png?raw=true"><img src="https://cloud.githubusercontent.com/assets/3630311/23873133/59b85c08-0807-11e7-967b-7cc7d28aada0.png?raw=true" width="771" height="388" alt="Precipitation example" style="max-width: 100%;"></a>
</p>
<p dir="auto">Climate indices can easily be developed by following the source code or looking at the available metadata inside a ClimGrid.</p>
<h3 dir="auto"><a id="user-content-interpolation" class="anchor" aria-hidden="true" href="#interpolation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Interpolation</h3>
<p dir="auto">A typical step in climate analysis is to interpolate a given grid onto another grid. <code>ClimateTools</code> provides such a tool by wrapping Scipy griddata function. It is intended for visualization or as a 1st step before bias-correcting the <code>ClimGrid</code> dataset.</p>
<p dir="auto">The following command will interpolate the data contained in <code>ClimGrid A</code> into the coordinates of <code>ClimGrid B</code> and returns a new <code>ClimGrid C</code> which contains the interpolated data of <code>A</code> into the grid of <code>B</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = regrid(A::ClimGrid, B::ClimGrid)"><pre>C <span class="pl-k">=</span> <span class="pl-c1">regrid</span>(A<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, B<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>)</pre></div>
<p dir="auto">It is also possible to interpolate a <code>ClimGrid</code> onto specified longitude and latitude vectors.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = regrid(A::ClimGrid, lon::AbstractArray{N, 1}, lat::AbstractArray{N, 1})"><pre>C <span class="pl-k">=</span> <span class="pl-c1">regrid</span>(A<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, lon<span class="pl-k">::</span><span class="pl-c1">AbstractArray{N, 1}</span>, lat<span class="pl-k">::</span><span class="pl-c1">AbstractArray{N, 1}</span>)</pre></div>
<h3 dir="auto"><a id="user-content-bias-correction" class="anchor" aria-hidden="true" href="#bias-correction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Bias-correction</h3>
<p dir="auto">See <a href="https://juliaclimate.github.io/ClimateTools.jl/stable/biascorrection/" rel="nofollow">Documentation</a>.</p>
<h3 dir="auto"><a id="user-content-merging-climgrids" class="anchor" aria-hidden="true" href="#merging-climgrids"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Merging ClimGrids</h3>
<p dir="auto">Sometimes, the timeseries are split among multiple files (e.g. climate models outputs). To obtain the complete timeseries, you can <code>merge</code> 2 <code>ClimGrid</code>. The method is based on the merging of two <code>AxisArrays</code> and is overloaded for the <code>ClimGrid</code> type.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="C = merge(C1::ClimGrid, C2::ClimGrid)"><pre>C <span class="pl-k">=</span> <span class="pl-c1">merge</span>(C1<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, C2<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>)</pre></div>
<h3 dir="auto"><a id="user-content-exporting" class="anchor" aria-hidden="true" href="#exporting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Exporting</h3>
<p dir="auto">It is possible to export to a netCDF file with the command <code>write</code></p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="write(C::ClimGrid, filename::String)"><pre><span class="pl-c1">write</span>(C<span class="pl-k">::</span><span class="pl-c1">ClimGrid</span>, filename<span class="pl-k">::</span><span class="pl-c1">String</span>)</pre></div>
<h2 dir="auto"><a id="user-content-to-do" class="anchor" aria-hidden="true" href="#to-do"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>TO-DO</h2>
<ul dir="auto">
<li>Dashboard tool. This will return the main characteristics of a ClimGrid: maps of minimum, maximum and mean climatological values, seasonal cycle, timeseries of annual maximum, minimum and mean values, etc...</li>
<li>Create a WeatherStation type.</li>
<li>Add a more complex quantile-quantile mapping technique, combining extreme value theory and quantile-quantile standard technique</li>
</ul>
</article></div>