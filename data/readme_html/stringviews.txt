<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-stringviews" class="anchor" aria-hidden="true" href="#stringviews"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>StringViews</h1>
<p dir="auto"><a href="https://github.com/JuliaStrings/StringViews.jl/actions?query=workflow%3ACI"><img src="https://github.com/JuliaStrings/StringViews.jl/workflows/CI/badge.svg" alt="CI" style="max-width: 100%;"></a></p>
<p dir="auto">This Julia package implements a new type of <code>AbstractString</code>, a <code>StringView</code>,
that provides a string representation of any underlying array of bytes
(any <code>AbstractVector{UInt8}</code>), interpreted as UTF-8 encoded Unicode data.</p>
<p dir="auto">Unlike Julia's built-in <code>String</code> type (which also wraps UTF-8 data), the
<code>StringView</code> type is a copy-free wrap of <em>any</em> <code>AbstractVector{UInt8}</code>
instance, and does not take "ownership" of or modify the array.
You can also use <code>StringView(buf)</code> with a <code>buf::IOBuffer</code>, as
a non-destructive alternative to <code>String(take!(buf))</code>.  Otherwise,
a <code>StringView</code> is intended to be usable in any context where you might
have otherwise used <code>String</code>.</p>
<p dir="auto">(In particular, as much as possible we try to implement efficient copy-free
<code>String</code>-like operations on <code>StringView</code>, such as iteration and regular-expression
searching, as long as the underlying <code>UInt8</code> array is a contiguous dense array.)</p>
<p dir="auto">For example:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; b = [0x66, 0x6f, 0x6f, 0x62, 0x61, 0x72];

julia&gt; s = StringView(b) # does not make a copy
&quot;foobar&quot;

julia&gt; collect(eachmatch(r&quot;[aeiou]+&quot;, s))
2-element Vector{SVRegexMatch{StringView{Vector{UInt8}}}}:
 SVRegexMatch(&quot;oo&quot;)
 SVRegexMatch(&quot;a&quot;)

julia&gt; StringView(@view b[1:3]) # also works for subarrays, with no copy
&quot;foo&quot;

julia&gt; abc = StringView(0x61:0x63) # and for other array types
&quot;abc&quot;"><pre>julia<span class="pl-k">&gt;</span> b <span class="pl-k">=</span> [<span class="pl-c1">0x66</span>, <span class="pl-c1">0x6f</span>, <span class="pl-c1">0x6f</span>, <span class="pl-c1">0x62</span>, <span class="pl-c1">0x61</span>, <span class="pl-c1">0x72</span>];

julia<span class="pl-k">&gt;</span> s <span class="pl-k">=</span> <span class="pl-c1">StringView</span>(b) <span class="pl-c"><span class="pl-c">#</span> does not make a copy</span>
<span class="pl-s"><span class="pl-pds">"</span>foobar<span class="pl-pds">"</span></span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">collect</span>(<span class="pl-c1">eachmatch</span>(<span class="pl-sr"><span class="pl-pds">r"</span>[aeiou]+<span class="pl-pds">"</span></span>, s))
<span class="pl-c1">2</span><span class="pl-k">-</span>element Vector{SVRegexMatch{StringView{Vector{UInt8}}}}<span class="pl-k">:</span>
 <span class="pl-c1">SVRegexMatch</span>(<span class="pl-s"><span class="pl-pds">"</span>oo<span class="pl-pds">"</span></span>)
 <span class="pl-c1">SVRegexMatch</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>)

julia<span class="pl-k">&gt;</span> <span class="pl-c1">StringView</span>(<span class="pl-c1">@view</span> b[<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">3</span>]) <span class="pl-c"><span class="pl-c">#</span> also works for subarrays, with no copy</span>
<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>

julia<span class="pl-k">&gt;</span> abc <span class="pl-k">=</span> <span class="pl-c1">StringView</span>(<span class="pl-c1">0x61</span><span class="pl-k">:</span><span class="pl-c1">0x63</span>) <span class="pl-c"><span class="pl-c">#</span> and for other array types</span>
<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">Or, with an <code>IOBuffer</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; buf = IOBuffer();

julia&gt; write(buf, b);

julia&gt; print(buf, &quot;baz&quot;)

julia&gt; StringView(buf) # does not modify buf
&quot;foobarbaz&quot;

julia&gt; String(take!(buf)) # clears buf
&quot;foobarbaz&quot;

julia&gt; StringView(buf) # now empty
&quot;&quot;"><pre>julia<span class="pl-k">&gt;</span> buf <span class="pl-k">=</span> <span class="pl-c1">IOBuffer</span>();

julia<span class="pl-k">&gt;</span> <span class="pl-c1">write</span>(buf, b);

julia<span class="pl-k">&gt;</span> <span class="pl-c1">print</span>(buf, <span class="pl-s"><span class="pl-pds">"</span>baz<span class="pl-pds">"</span></span>)

julia<span class="pl-k">&gt;</span> <span class="pl-c1">StringView</span>(buf) <span class="pl-c"><span class="pl-c">#</span> does not modify buf</span>
<span class="pl-s"><span class="pl-pds">"</span>foobarbaz<span class="pl-pds">"</span></span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">String</span>(<span class="pl-c1">take!</span>(buf)) <span class="pl-c"><span class="pl-c">#</span> clears buf</span>
<span class="pl-s"><span class="pl-pds">"</span>foobarbaz<span class="pl-pds">"</span></span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">StringView</span>(buf) <span class="pl-c"><span class="pl-c">#</span> now empty</span>
<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span></pre></div>
<p dir="auto">Other optimized (copy-free) operations include I/O, hashing, iteration/indexing,
comparisons, parsing, searching, and validation.  Working with a <code>SubString</code> of
a <code>StringView</code> is similarly efficient.</p>
</article></div>