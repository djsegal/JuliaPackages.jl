<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-testenv" class="anchor" aria-hidden="true" href="#testenv"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>TestEnv</h1>
<p dir="auto"><a href="https://github.com/invenia/BlueStyle"><img src="https://camo.githubusercontent.com/c18fbaa52d94d16b90b19701fc90d289b8a5bb920c74c79bab200b14e75420a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c75652d3434393564312e737667" alt="Code Style: Blue" data-canonical-src="https://img.shields.io/badge/code%20style-blue-4495d1.svg" style="max-width: 100%;"></a>
<a href="https://github.com/SciML/ColPrac"><img src="https://camo.githubusercontent.com/a6c1efcb19a957860ecb25966a730260b03d6e05380d0c27992ee7f9e3b1feb3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6c507261632d436f6e7472696275746f72277325323047756964652d626c756576696f6c6574" alt="ColPrac: Contributor's Guide on Collaborative Practices for Community Packages" data-canonical-src="https://img.shields.io/badge/ColPrac-Contributor's%20Guide-blueviolet" style="max-width: 100%;"></a></p>
<p dir="auto">This is a 1-function package: <code>TestEnv.activate</code>.
It lets you activate the test enviroment from a given package.
Just like <code>Pkg.activate</code> lets you activate it's main enviroment.</p>
<p dir="auto">Consider for example <strong>ChainRules.jl</strong> has as a test-only dependency of <strong>ChainRulesTestUtils.jl</strong>,
not a main dependency</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pkg&gt; activate ~/.julia/dev/ChainRules

julia&gt; using TestEnv;

julia&gt; TestEnv.activate();

julia&gt; using ChainRulesTestUtils"><pre>pkg<span class="pl-k">&gt;</span> activate <span class="pl-k">~</span><span class="pl-k">/</span><span class="pl-k">.</span>julia<span class="pl-k">/</span>dev<span class="pl-k">/</span>ChainRules

julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> TestEnv;

julia<span class="pl-k">&gt;</span> TestEnv<span class="pl-k">.</span><span class="pl-c1">activate</span>();

julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> ChainRulesTestUtils</pre></div>
<p dir="auto">Use <code>Pkg.activate</code> to re-activate the previous environment, e.g. <code>Pkg.activate("~/.julia/dev/ChainRules")</code>.</p>
<p dir="auto">You can also pass in the name of a package, to activate that package and it's test dependencies:
<code>TestEnv.activate("Javis")</code> for example would activate Javis.jl's test environment.</p>
<p dir="auto">Finally you can pass in a function to run in this environment.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using TestEnv, ReTest
TestEnv.activate(&quot;Example&quot;) do
    retest()
end"><pre><span class="pl-k">using</span> TestEnv, ReTest
TestEnv<span class="pl-k">.</span><span class="pl-c1">activate</span>(<span class="pl-s"><span class="pl-pds">"</span>Example<span class="pl-pds">"</span></span>) <span class="pl-k">do</span>
    <span class="pl-c1">retest</span>()
<span class="pl-k">end</span></pre></div>
<h2 dir="auto"><a id="user-content-where-is-the-code" class="anchor" aria-hidden="true" href="#where-is-the-code"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Where is the code?</h2>
<p dir="auto">The astute reader has probably notice that the default branch of this git repo is basically empty.
This is because we keep all the code in other branches.
One per minor release: <code>release-1.0</code>, <code>release-1.1</code> etc.
We do this because TestEnv.jl accesses a whole ton of interals of <a href="https://github.com/JuliaLang/Pkg.jl">Pkg</a>.
These internals change basically every single release.
Maintaining compatibility in a single branch for multiple julia versions leads to code that is a nightmare.
As such, we instead maintain 1 branch per julia minor version.
And we tag releases off that branch with major and minor versions matching the julia version supported, but with patch versions allowed to change freely.</p>
<ul dir="auto">
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.0">release-1.0</a> contains the code to support julia v1.0.x</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.1">release-1.1</a> contains the code to support julia v1.1.x</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.2">release-1.2</a> contains the code to support julia v1.2.x</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.3">release-1.3</a> contains the code to support julia v1.3.x</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.4">release-1.4</a> contains the code to support julia v1.4.x, v1.5.x, and v1.6.x
<ul dir="auto">
<li>This was a rare goldern ages where the internals of Pkg did not change for almost a year.</li>
</ul>
</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.7">release-1.7</a> contains the code to support julia v1.7.x</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.8">release-1.8</a> contains the code to support julia v1.8.x and v1.9.x
<ul dir="auto">
<li>Another period of stability when the internals of Pkg didn't change. Long may it continue.</li>
</ul>
</li>
<li><a href="https://github.com/JuliaTesting/TestEnv.jl/tree/release-1.10">release-1.10</a> contains the code to support julia v1.10.x</li>
</ul>
<p dir="auto"><strong>Do not make PRs against this COVER branch.</strong>
Except to update this README.
Instead you probably want to PR a branch for some current version of Julia.</p>
<p dir="auto">This is a bit weird for semver.
New features <em>can</em> be added in patch release, but they must be ported to all later branches, and patch releases must be made there also.
For the this reason: we <em>only</em> support the latest patch release of any branch.
Older ones may be yanked if they start causing issues for people.</p>
<h2 dir="auto"><a id="user-content-what-should-i-put-in-my-projecttoml-compat-section" class="anchor" aria-hidden="true" href="#what-should-i-put-in-my-projecttoml-compat-section"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What should I put in my Project.toml <code>[compat]</code> section</h2>
<p dir="auto">If using this as a dependency of a package that supports many versions of julia you may wonder what to put in your Project.toml's [compat] section.
Do not fear, the package manager has your back.
If you put in your <code>[compat]</code> for <code>TestEnv=</code>: <code>1</code> or equivalently <code>1.0</code> or <code>1.0</code> or <code>1.0.0</code> or <code>^1</code>, or <code>^1.0</code> or <code>^1.0</code> or <code>^1.0.0</code>,
then the package manager is free to choose any compatible version <code>v</code> with <code>1.0.0 &lt;= v &lt; 2.0.0</code>.
It will thus chose the corret minor version of TestEnv that is compatible with the loaded version of Julia.</p>
<h3 dir="auto"><a id="user-content-see-also" class="anchor" aria-hidden="true" href="#see-also"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>See also:</h3>
<ul dir="auto">
<li><a href="https://discourse.julialang.org/t/ann-testenv-jl-activate-your-test-enviroment-so-you-can-use-your-test-dependencies/65739" rel="nofollow">Discourse Release Announcement</a></li>
</ul>
</article></div>