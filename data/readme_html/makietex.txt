<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="" class="anchor" aria-hidden="true" href="#"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165514916-4337e55a-18ec-4831-ab0f-11ebcb679600.svg"><img src="https://user-images.githubusercontent.com/32143268/165514916-4337e55a-18ec-4831-ab0f-11ebcb679600.svg" alt="MakieTeX.jl" height="50" align="top" style="max-width: 100%;"></a></h1>
<h2 dir="auto"><a id="user-content--integration-for-" class="anchor" aria-hidden="true" href="#-integration-for-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><a href="https://www.latex-project.org/" rel="nofollow"><img src="https://camo.githubusercontent.com/96b994379ddb07a76815c60efe47c6733eae37b5a9ef17ffe06b2ef6b89ec05f/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f392f39322f4c615465585f6c6f676f2e737667" alt="LaTeX" height="30" align="top" data-canonical-src="https://upload.wikimedia.org/wikipedia/commons/9/92/LaTeX_logo.svg" style="max-width: 100%;"></a> integration for <a href="https://www.github.com/MakieOrg/Makie.jl"><img src="https://raw.githubusercontent.com/MakieOrg/Makie.jl/master/assets/logo.png" alt="Makie.jl" height="30" align="top" style="max-width: 100%;"></a></h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/169671023-4d4c8cf7-eb3d-4ee1-8634-8b73fa38d31c.svg"><img src="https://user-images.githubusercontent.com/32143268/169671023-4d4c8cf7-eb3d-4ee1-8634-8b73fa38d31c.svg" height="400" style="max-width: 100%;"></a></p>
<p dir="auto">MakieTeX allows you to draw and visualize arbitrary TeX documents in Makie!  You can insert anything from a single line of math to a large and complex TikZ diagram.</p>
<p dir="auto">It works by compiling a stand-alone <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/96b994379ddb07a76815c60efe47c6733eae37b5a9ef17ffe06b2ef6b89ec05f/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f392f39322f4c615465585f6c6f676f2e737667"><img src="https://camo.githubusercontent.com/96b994379ddb07a76815c60efe47c6733eae37b5a9ef17ffe06b2ef6b89ec05f/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f392f39322f4c615465585f6c6f676f2e737667" alt="LaTeX" height="20" align="center" data-canonical-src="https://upload.wikimedia.org/wikipedia/commons/9/92/LaTeX_logo.svg" style="max-width: 100%;"></a> document to PDF.  For CairoMakie, the PDF is read and rendered directly, and a raster image is rendered in GLMakie.</p>
<h3 dir="auto"><a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Quick start</h3>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using Makie, MakieTeX
using CairoMakie # or whichever other backend
fig = Figure()
l1 = LTeX(
    fig[1, 1], L&quot;A \emph{convex} function $f \in C$ is \textcolor{blue}{denoted} as \tikz{\draw[line width=1pt, &gt;-&gt;] (0, -2pt) arc (-180:0:8pt);}&quot;;
    tellwidth = false, tellheight = true
)
ax1 = Axis(
    fig[2, 1];
)
heatmap!(ax1, Makie.peaks())
fig"><pre><span class="pl-k">using</span> Makie, MakieTeX
<span class="pl-k">using</span> CairoMakie <span class="pl-c"><span class="pl-c">#</span> or whichever other backend</span>
fig <span class="pl-k">=</span> <span class="pl-c1">Figure</span>()
l1 <span class="pl-k">=</span> <span class="pl-c1">LTeX</span>(
    fig[<span class="pl-c1">1</span>, <span class="pl-c1">1</span>], <span class="pl-s"><span class="pl-pds"><span class="pl-c1">L</span>"</span>A <span class="pl-cce">\e</span>mph{convex} function $f <span class="pl-cce">\i</span>n C$ is <span class="pl-cce">\t</span>extcolor{blue}{denoted} as <span class="pl-cce">\t</span>ikz{<span class="pl-cce">\d</span>raw[line width=1pt, &gt;-&gt;] (0, -2pt) arc (-180:0:8pt);}<span class="pl-pds">"</span></span>;
    tellwidth <span class="pl-k">=</span> <span class="pl-c1">false</span>, tellheight <span class="pl-k">=</span> <span class="pl-c1">true</span>
)
ax1 <span class="pl-k">=</span> <span class="pl-c1">Axis</span>(
    fig[<span class="pl-c1">2</span>, <span class="pl-c1">1</span>];
)
<span class="pl-c1">heatmap!</span>(ax1, Makie<span class="pl-k">.</span><span class="pl-c1">peaks</span>())
fig</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/170724177-d7cf9d16-8feb-4f6e-bb22-68fa8269066c.svg"><img src="https://user-images.githubusercontent.com/32143268/170724177-d7cf9d16-8feb-4f6e-bb22-68fa8269066c.svg" height="300" style="max-width: 100%;"></a></p>
<p dir="auto">You need not install anything for MakieTeX to work, since we ship a minimal TeX renderer called <a href="https://tectonic-typesetting.github.io/en-US/" rel="nofollow"><code>tectonic</code></a> (based on XeLaTeX).  This will download any missing packages when it encounters them the first time.  However, it will likely not know about any local packages or TEXMF paths, nor will it be able to render advanced features like TikZ graphs which require LuaTeX.  The latexmk/lualatex combination will also likely be faster, and able to use advanced features like calling to other languages with <code>pythontex</code> (oh, the heresy!)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/170724393-727fd7f3-277d-46c2-9616-9fcc988e8715.svg"><img src="https://user-images.githubusercontent.com/32143268/170724393-727fd7f3-277d-46c2-9616-9fcc988e8715.svg" height="300" style="max-width: 100%;"></a></p>
<h3 dir="auto"><a id="user-content-scaling-tex" class="anchor" aria-hidden="true" href="#scaling-tex"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Scaling TeX</h3>
<p dir="auto">MakieTeX always plots TeX to its stated dimensions.  This allows it to be extremely accurate and easily match font sizes, but it comes at a price - when using the standard text pipeline, latex results may look very small, especially with the default figure resolution.</p>
<p dir="auto">We provide a layoutable object, <code>LTeX</code>, which aims to solve this.  <code>LTeX</code>s are for all intents and purposes the same as <code>Label</code>s, with two extra keywords:</p>
<ul dir="auto">
<li><code>scale = 1</code>, which literally scales the generated PDF by the provided factor;</li>
<li><code>render_density = 5</code>, which specifies how densely any PDF must be rendered for the image fallback.  This only really affects GLMakie and WGLMakie, so feel free to ignore it or set it to 1 for CairoMakie purposes.</li>
</ul>
<p dir="auto">An example follows:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fig = Figure(resolution = (400, 300));
tex1 = LTeX(fig[1, 1], L&quot;\int \mathbf E \cdot d\mathbf a = \frac{Q_{encl}}{4\pi\epsilon_0}&quot;, scale=1);
tex2 = LTeX(fig[2, 1], L&quot;\int \mathbf E \cdot d\mathbf a = \frac{Q_{encl}}{4\pi\epsilon_0}&quot;, scale=2);
fig"><pre>fig <span class="pl-k">=</span> <span class="pl-c1">Figure</span>(resolution <span class="pl-k">=</span> (<span class="pl-c1">400</span>, <span class="pl-c1">300</span>));
tex1 <span class="pl-k">=</span> <span class="pl-c1">LTeX</span>(fig[<span class="pl-c1">1</span>, <span class="pl-c1">1</span>], <span class="pl-s"><span class="pl-pds"><span class="pl-c1">L</span>"</span><span class="pl-cce">\i</span>nt <span class="pl-cce">\m</span>athbf E <span class="pl-cce">\c</span>dot d<span class="pl-cce">\m</span>athbf a = <span class="pl-cce">\f</span>rac{Q_{encl}}{4<span class="pl-cce">\p</span>i<span class="pl-cce">\e</span>psilon_0}<span class="pl-pds">"</span></span>, scale<span class="pl-k">=</span><span class="pl-c1">1</span>);
tex2 <span class="pl-k">=</span> <span class="pl-c1">LTeX</span>(fig[<span class="pl-c1">2</span>, <span class="pl-c1">1</span>], <span class="pl-s"><span class="pl-pds"><span class="pl-c1">L</span>"</span><span class="pl-cce">\i</span>nt <span class="pl-cce">\m</span>athbf E <span class="pl-cce">\c</span>dot d<span class="pl-cce">\m</span>athbf a = <span class="pl-cce">\f</span>rac{Q_{encl}}{4<span class="pl-cce">\p</span>i<span class="pl-cce">\e</span>psilon_0}<span class="pl-pds">"</span></span>, scale<span class="pl-k">=</span><span class="pl-c1">2</span>);
fig</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/169671194-fc81d086-26fd-462b-8348-789ba763dbbd.svg"><img src="https://user-images.githubusercontent.com/32143268/169671194-fc81d086-26fd-462b-8348-789ba763dbbd.svg" alt="latex" style="max-width: 100%;"></a></p>
<h3 dir="auto"><a id="user-content-inner-workings" class="anchor" aria-hidden="true" href="#inner-workings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Inner workings</h3>
<p dir="auto">MakieTeX provides high-level dispatches on <code>LaTeXString</code>s from the <a href="github.com/stevengj/LaTeXStrings.jl"><code>LaTeXStrings.jl</code></a> package, as well as some lower level types.</p>
<p dir="auto">Any input is converted to a <code>TeXDocument</code>, which is then compiled to <code>CachedTeX</code>. This last type contains the compiled PDF and some pointers to in-memory versions of the PDF.  These are what MakieTeX eventually uses to plot to the screen.</p>
<p dir="auto">When plotting arrays of LaTeXStrings, MakieTeX takes a more efficient pathway by batching the array into a multi-page <code>standalone</code> document.  This allows the relevant packages in LaTeX to be loaded once per array instead of once per string, and decreases the runtime of the README example by a sixth.</p>
<p dir="auto">In general, we use the packages <code>amsmath, amssymb, amsfonts, esint, lmodern, fontenc, xcolor</code> in rendered latexstrings.  However, work is ongoing on a good API for users to provide arbitrary preamble code.</p>
<h3 dir="auto"><a id="user-content-configuration" class="anchor" aria-hidden="true" href="#configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Configuration</h3>
<p dir="auto">There are several configuration constants you can set in MakieTeX, stored as const <code>Ref</code>s.  These are:</p>
<p dir="auto"><code>CURRENT_TEX_ENGINE[] = `lualatex` </code> - The current <code>TeX</code> engine which MakieTeX uses.  Will default to <code>tectonic</code> if <code>latexmk</code> and <code>lualatex</code> are inaccessible on your system.
<code>RENDER_EXTRASAFE[] = false</code> - Render with Poppler pipeline (false) or Cairo pipeline (true).  The Poppler pipeline offers better rendering but may be slightly slower.
<code>_PDFCROP_DEFAULT_MARGINS[] = [0,0,0,0]</code> - Default margins for <code>pdfcrop</code>.  Feel free to set this to <code>fill(1, 4)</code> or higher if you need looser margins.  The numbers are in the order <code>[&lt;left&gt;, &lt;top&gt;, &lt;right&gt;, &lt;bottom&gt;]</code>.
<code>TEXT_RENDER_DENSITY[] = 5</code> - Default density when rendering from calls to <code>text</code>.  Useful only for GLMakie.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using GLMakie, Makie, MakieTeX
fig = Figure(resolution = (400, 300));
ax = Axis(fig[1, 1]);
lines!(rand(10), color = 1:10);
tex = LTeX(fig[2, 1], L&quot;\int \mathbf E \cdot d\mathbf a = \frac{Q_{encl}}{4\pi\epsilon_0}&quot;, scale=2);
fig"><pre><span class="pl-k">using</span> GLMakie, Makie, MakieTeX
fig <span class="pl-k">=</span> <span class="pl-c1">Figure</span>(resolution <span class="pl-k">=</span> (<span class="pl-c1">400</span>, <span class="pl-c1">300</span>));
ax <span class="pl-k">=</span> <span class="pl-c1">Axis</span>(fig[<span class="pl-c1">1</span>, <span class="pl-c1">1</span>]);
<span class="pl-c1">lines!</span>(<span class="pl-c1">rand</span>(<span class="pl-c1">10</span>), color <span class="pl-k">=</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">10</span>);
tex <span class="pl-k">=</span> <span class="pl-c1">LTeX</span>(fig[<span class="pl-c1">2</span>, <span class="pl-c1">1</span>], <span class="pl-s"><span class="pl-pds"><span class="pl-c1">L</span>"</span><span class="pl-cce">\i</span>nt <span class="pl-cce">\m</span>athbf E <span class="pl-cce">\c</span>dot d<span class="pl-cce">\m</span>athbf a = <span class="pl-cce">\f</span>rac{Q_{encl}}{4<span class="pl-cce">\p</span>i<span class="pl-cce">\e</span>psilon_0}<span class="pl-pds">"</span></span>, scale<span class="pl-k">=</span><span class="pl-c1">2</span>);
fig</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/10947937/110216157-d1d87d00-7ead-11eb-8507-62ddcff2a841.png"><img src="https://user-images.githubusercontent.com/10947937/110216157-d1d87d00-7ead-11eb-8507-62ddcff2a841.png" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-including-full-latex-documents" class="anchor" aria-hidden="true" href="#including-full-latex-documents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Including full LaTeX documents</h2>
<p dir="auto">With the <code>TeXDocument</code> struct, you can feed in a String which contains a full LaTeX document, and show it at real scale in Makie!</p>
<p dir="auto">This example is from <a href="https://texample.net/tikz/examples/title-graphics/" rel="nofollow">Texample.net</a></p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using MakieTeX, CairoMakie, Makie
td = TeXDocument(read(download(&quot;https://texample.net/media/tikz/examples/TEX/title-graphics.tex&quot;), String))
fig = Figure()
lt = Label(fig[1, 1], td; tellheight=false)
ax = Axis(fig[1, 2])
lines!(ax, rand(10); color = 1:10)
fig"><pre><span class="pl-k">using</span> MakieTeX, CairoMakie, Makie
td <span class="pl-k">=</span> <span class="pl-c1">TeXDocument</span>(<span class="pl-c1">read</span>(<span class="pl-c1">download</span>(<span class="pl-s"><span class="pl-pds">"</span>https://texample.net/media/tikz/examples/TEX/title-graphics.tex<span class="pl-pds">"</span></span>), String))
fig <span class="pl-k">=</span> <span class="pl-c1">Figure</span>()
lt <span class="pl-k">=</span> <span class="pl-c1">Label</span>(fig[<span class="pl-c1">1</span>, <span class="pl-c1">1</span>], td; tellheight<span class="pl-k">=</span><span class="pl-c1">false</span>)
ax <span class="pl-k">=</span> <span class="pl-c1">Axis</span>(fig[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>])
<span class="pl-c1">lines!</span>(ax, <span class="pl-c1">rand</span>(<span class="pl-c1">10</span>); color <span class="pl-k">=</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">10</span>)
fig</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165130481-53ee0fe1-4c70-4453-b430-7a2ad37082f8.png"><img src="https://user-images.githubusercontent.com/32143268/165130481-53ee0fe1-4c70-4453-b430-7a2ad37082f8.png" alt="makietex" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-cool-graphics" class="anchor" aria-hidden="true" href="#cool-graphics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Cool graphics!</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165445977-79fbb1fe-6bd5-47c9-9501-be6c1ae837b9.svg"><img src="https://user-images.githubusercontent.com/32143268/165445977-79fbb1fe-6bd5-47c9-9501-be6c1ae837b9.svg" alt="2plots" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165446027-a5cae0e4-f48a-41de-8170-ab4059651bc9.svg"><img src="https://user-images.githubusercontent.com/32143268/165446027-a5cae0e4-f48a-41de-8170-ab4059651bc9.svg" alt="cielab" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165446028-0504abf9-7362-48c0-a07a-19a5cf038de0.svg"><img src="https://user-images.githubusercontent.com/32143268/165446028-0504abf9-7362-48c0-a07a-19a5cf038de0.svg" alt="dominoes" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165446029-93578a5e-7825-40cc-9c1b-573ecaa2630f.svg"><img src="https://user-images.githubusercontent.com/32143268/165446029-93578a5e-7825-40cc-9c1b-573ecaa2630f.svg" alt="or-gate" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165446030-15d8e53c-06b9-4fa9-8867-03a0449fa9dc.svg"><img src="https://user-images.githubusercontent.com/32143268/165446030-15d8e53c-06b9-4fa9-8867-03a0449fa9dc.svg" alt="planets" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/32143268/165446031-1502461b-8599-4d27-9526-9f1c4d4c8267.svg"><img src="https://user-images.githubusercontent.com/32143268/165446031-1502461b-8599-4d27-9526-9f1c4d4c8267.svg" alt="rotated-triangle" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">Simply run:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import Pkg; Pkg.add(&quot;MakieTeX&quot;)"><pre><span class="pl-k">import</span> Pkg; Pkg<span class="pl-k">.</span><span class="pl-c1">add</span>(<span class="pl-s"><span class="pl-pds">"</span>MakieTeX<span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">and watch the magic happen!</p>
<h2 dir="auto"><a id="user-content-the-rendering-pipeline" class="anchor" aria-hidden="true" href="#the-rendering-pipeline"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>The rendering pipeline</h2>
<p dir="auto">The standard rendering pipeline works as follows: the string is converted in to a TeXDocument, which is compiled to pdf using the given renderer, or <code>tectonic</code> if it does not exist.  The pdf file is then cropped using the <code>pdfcrop</code> Perl script (this is what requires <code>Perl_jll</code> and <code>Ghostscript_jll</code>).</p>
<p dir="auto">This cropped PDF is then loaded by Poppler, accessed through <code>Poppler_jll.jl</code> and <code>libpoppler-glib</code>.  If using the Cairo backend, it is plotted directly to a surface; if using another backend, it is rasterized to an image, and plotted using <code>scatter</code> with image markers.  The alignment is in this case depicted by <code>marker_offset</code>.</p>
<p dir="auto">Thus, you only need a TeX engine, preferably LuaTeX, installed on your system.  We don't automatically detect the TeX engine, though, so if you want to change that, set <code>MakieTeX.CURRENT_TEX_ENGINE[] = `xelatex`</code> (note the backticks in place of quotes) or some other engine, as long as it is compatible with <code>latexmk</code>.</p>
<h2 dir="auto"><a id="user-content-todos-and-planned-features" class="anchor" aria-hidden="true" href="#todos-and-planned-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>TODOS and planned features</h2>
<ul dir="auto">
<li>Better rasterization for GLMakie</li>
<li>Math and text font switching ability (preferably arbitrary)</li>
<li>Better font size algorithms</li>
<li>Multithreaded latex compilation if possible</li>
<li>Faster latex compilation (perhaps through latex caching?)</li>
</ul>
</article></div>