<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content" itemprop="text"><h2><a id="user-content-d3magic-is-broken" class="anchor" aria-hidden="true" href="#d3magic-is-broken"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>D3Magic is Broken</h2>
<p>Sorry, this package is broken atm. It hasn't been updated in a while, and probably won't be (by me) for a while unfortunately - sorry for any inconvenience. PRs with fixes welcome though.</p>
<p>The rest of this README is thus mostly lies, do not believe what it says!</p>
<hr>
<h3><a id="user-content-about" class="anchor" aria-hidden="true" href="#about"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About</h3>
<p>Allows you to run D3 code in IJulia/Jupyter notebooks. Largely a port of <a href="https://github.com/ResidentMario/py_d3">https://github.com/ResidentMario/py_d3</a></p>
<h3><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>Not registered (yet) so:
<code>Pkg.clone("https://github.com/JobJob/D3Magic.jl.git")</code></p>
<h3><a id="user-content-basic-usage" class="anchor" aria-hidden="true" href="#basic-usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic Usage</h3>
<pre><code>d3"""
&lt;g&gt;&lt;/g&gt;

&lt;script&gt;
d3.select("g").text("Hello There");
&lt;/script&gt;
"""
</code></pre>
<p>displays:</p>
<pre><code>Hello There
</code></pre>
<h3><a id="user-content-syntax-highlighting" class="anchor" aria-hidden="true" href="#syntax-highlighting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntax Highlighting</h3>
<p>If you add this to your custom.js - mine is in <code>~/.jupyter/custom/custom.js</code> you can get proper html highlighting:</p>
<pre><code>require(["notebook/js/codecell"], function(codecell) {
    codecell.CodeCell.options_default.highlight_modes["text/html"] = {"reg":[/^d3/]}
})
</code></pre>
<h3><a id="user-content-d3-version" class="anchor" aria-hidden="true" href="#d3-version"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>D3 version</h3>
<p>This uses D3 version 4.9.1 by default. You can use a different version by calling, e.g.,
<code>D3Magic.setD3version("3.5.11")</code></p>
<h3><a id="user-content-limitations" class="anchor" aria-hidden="true" href="#limitations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitations</h3>
<p>Most of the quirks <a href="https://github.com/ResidentMario/py_d3#porting">mentioned here</a> and <a href="https://github.com/ResidentMario/py_d3#technicals">here</a>, and probably a few more to boot, also apply to this package.</p>
<h3><a id="user-content-how-it-works" class="anchor" aria-hidden="true" href="#how-it-works"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How it works</h3>
<p>D3Magic does these simple steps when you execute <code>d3"""..."""</code>:</p>
<ol>
<li>creates a unique id, e.g. it might set <code>id = 123</code></li>
<li>replaces any instances of <code>d3.select</code> or <code>d3.selectAll</code> to <code>d3.select("#d3-cell-$id").select</code> and <code>d3.select("#d3-cell-$id").selectAll</code> respectively (using find and replace :O)</li>
<li>displays as html: <code>&lt;g id="d3-cell-$id"&gt;...&lt;/g&gt;</code></li>
</ol>
<h3><a id="user-content-global-d3_select-and-d3_selectall" class="anchor" aria-hidden="true" href="#global-d3_select-and-d3_selectall"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Global <code>d3._select</code> and <code>d3_selectAll</code></h3>
<p>If you want to actually select elements outside the <code>&lt;g id="d3-cell-$id"&gt;...&lt;/g&gt;</code> created by D3Magic, use
<code>d3._select</code> and <code>d3_selectAll</code> instead. This would be useful e.g. for appending something to the document body - like so <code>d3._select("body").append(...)</code></p>
<h3><a id="user-content-usage-with-interactinteractnext-etc" class="anchor" aria-hidden="true" href="#usage-with-interactinteractnext-etc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage with Interact/InteractNext etc</h3>
<p>Some things to note about this example:</p>
<ul>
<li>uses the (slightly) lower level <code>display_d3</code> function</li>
<li>uses <code>d3update_display</code> so selections select elements created in the previous call to <code>display_d3</code></li>
<li>interpolates a julia array into the javascript with</li>
</ul>
<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> dataset <span class="pl-k">=</span> <span class="pl-en">$</span>(jl_dataset[<span class="pl-c1">1</span><span class="pl-k">:</span>n])</pre></div>
<h4><a id="user-content-example-display-a-graph-that-you-can-modify-by-moving-the-sliders" class="anchor" aria-hidden="true" href="#example-display-a-graph-that-you-can-modify-by-moving-the-sliders"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example: display a graph that you can modify by moving the sliders</h4>
<div class="highlight highlight-source-julia"><pre><span class="pl-c1">display_d3</span>(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    &lt;g&gt;&lt;/g&gt;</span>
<span class="pl-s"></span>
<span class="pl-s">    &lt;style&gt;</span>
<span class="pl-s">    element {</span>
<span class="pl-s">        height: 25px;</span>
<span class="pl-s">    }</span>
<span class="pl-s">    div.bar {</span>
<span class="pl-s">        display: inline-block;</span>
<span class="pl-s">        width: 20px;</span>
<span class="pl-s">        height: 75px;</span>
<span class="pl-s">        margin-right: 2px;</span>
<span class="pl-s">        background-color: teal;</span>
<span class="pl-s">    }</span>
<span class="pl-s">    &lt;/style&gt;</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>)

<span class="pl-c1">@manipulate</span> <span class="pl-k">for</span> h <span class="pl-k">in</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">30</span>, i <span class="pl-k">in</span> <span class="pl-c1">slider</span>(<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">20</span>, value<span class="pl-k">=</span><span class="pl-c1">5</span>, label<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>), n <span class="pl-k">in</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">20</span>
    jl_dataset <span class="pl-k">=</span> [<span class="pl-c1">5</span>, <span class="pl-c1">10</span>, <span class="pl-c1">13</span>, <span class="pl-c1">19</span>, <span class="pl-c1">21</span>, <span class="pl-c1">10</span>, <span class="pl-c1">22</span>, <span class="pl-c1">18</span>, <span class="pl-c1">15</span>, <span class="pl-c1">13</span>,
                   <span class="pl-c1">11</span>, <span class="pl-c1">12</span>, <span class="pl-c1">15</span>, <span class="pl-c1">20</span>, <span class="pl-c1">18</span>, <span class="pl-c1">17</span>, <span class="pl-c1">16</span>, <span class="pl-c1">18</span>, <span class="pl-c1">23</span>, <span class="pl-c1">25</span>]
    jl_dataset[i] <span class="pl-k">=</span> h

    <span class="pl-c1">d3update_display</span>(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">        &lt;script&gt;</span>
<span class="pl-s">        var dataset = <span class="pl-v">$(jl_dataset[<span class="pl-c1">1</span><span class="pl-k">:</span>n])</span></span>
<span class="pl-s"></span>
<span class="pl-s">        d3.select("g").selectAll("div")</span>
<span class="pl-s">            .data(dataset)</span>
<span class="pl-s">            .enter()</span>
<span class="pl-s">            .append("div")</span>
<span class="pl-s"></span>
<span class="pl-s">        d3.select("g").selectAll("div")</span>
<span class="pl-s">            .data(dataset)</span>
<span class="pl-s">            .exit()</span>
<span class="pl-s">            .remove()</span>
<span class="pl-s"></span>
<span class="pl-s">        d3.select("g").selectAll("div")</span>
<span class="pl-s">            .data(dataset)</span>
<span class="pl-s">            .attr("class", "bar")</span>
<span class="pl-s">            .style("height", function(d) {</span>
<span class="pl-s">                var barHeight = d * 5;</span>
<span class="pl-s">                return barHeight + "px";</span>
<span class="pl-s">            });</span>
<span class="pl-s">        &lt;/script&gt;</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>)
<span class="pl-k">end</span>;</pre></div>
<p><a target="_blank" rel="noopener noreferrer" href="images/barplot_example.png"><img src="images/barplot_example.png" alt="barplot example" style="max-width:100%;"></a></p>
<p>Sliders not shown, but they should appear below the graph. Moving them should update it.</p>
</article></div>