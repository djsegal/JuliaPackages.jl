<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-cmblensingjl" class="anchor" aria-hidden="true" href="#cmblensingjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CMBLensing.jl</h1>
<p><a href="https://github.com/marius311/CMBLensing.jl"><img src="https://camo.githubusercontent.com/a5d203959accb117e9e1a28f87a9bb3d0aff941b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f736f757263652d6769746875622d626c7565" alt="" data-canonical-src="https://img.shields.io/badge/source-github-blue" style="max-width:100%;"></a> <a href="https://cosmicmar.com/CMBLensing.jl/" rel="nofollow"><img src="https://camo.githubusercontent.com/f7b92a177c912c1cc007fc9b40f17ff3ee3bb414/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width:100%;"></a> <a href="https://mybinder.org/v2/gh/marius311/CMBLensing.jl/master?urlpath=lab" rel="nofollow"><img src="https://camo.githubusercontent.com/483bae47a175c24dfbfc57390edd8b6982ac5fb3/68747470733a2f2f6d7962696e6465722e6f72672f62616467655f6c6f676f2e737667" alt="Binder" data-canonical-src="https://mybinder.org/badge_logo.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/marius311/CMBLensing.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/e0872632a81dca458acb25e6568fba8e39b5bf40/68747470733a2f2f7472617669732d63692e6f72672f6d61726975733331312f434d424c656e73696e672e6a6c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/marius311/CMBLensing.jl.svg?branch=master" style="max-width:100%;"></a></p>
<p>CMBLensing.jl is a next-generation tool for analysis of the lensed Cosmic Microwave Background. It is written in <a href="https://julialang.org/" rel="nofollow">Julia</a> and transparently callable from Python.</p>
<p>At its heart, CMBLensing.jl maximizes or samples the Bayesian posterior for the CMB lensing problem. It also contains tools to quickly manipulate and process CMB maps, set up modified posteriors, and take gradients using automatic differentation.</p>
<h3><a id="user-content-highlights" class="anchor" aria-hidden="true" href="#highlights"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Highlights</h3>
<ul>
<li>Fully Nvidia GPU compatible (speedups over CPU are currently 3x-10x, depending on the problem size and hardware).</li>
<li>Automatic differentation (via <a href="https://fluxml.ai/Zygote.jl/" rel="nofollow">Zygote.jl</a>) provides for-free gradients of your custom posteriors.</li>
<li>Includes the following algorithms to lense a map:
<ul>
<li><code>LenseFlow</code> (<a href="https://arxiv.org/abs/1708.06753" rel="nofollow">Millea, Anderes, &amp; Wandelt 2017</a>)</li>
<li><code>Taylens</code> (<a href="https://arxiv.org/abs/1307.0719" rel="nofollow">NÃ¦ss &amp; Louis 2013</a>)</li>
<li>Taylor series expansion to any order</li>
</ul>
</li>
<li>Maximize and sample $\mathcal{P}(f,\phi,\theta,|,d)$, the joint maximum a posteriori estimate of the lensing potential, $\phi$, the  temperature and/or polarization fields, $f$, and cosmological parameters, $\theta$ (<a href="https://arxiv.org/abs/1708.06753" rel="nofollow">Millea, Anderes, &amp; Wandelt 2017</a>)</li>
<li>Maximize $\mathcal{P}(\phi,|,d,\theta)$, i.e. the marginal maximum a posteriori estimate of the lensing potential, $\phi$, at fixed cosmological parameters, $\theta$ (<a href="https://arxiv.org/abs/1704.08230" rel="nofollow">Carron &amp; Lewis 2017</a>)</li>
<li>Do quadratic estimation of $\phi$ (<a href="https://arxiv.org/abs/astro-ph/0111606" rel="nofollow">Hu &amp; Okamoto 2003</a>)</li>
</ul>
<h2><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Documentation</h2>
<p>The best place to get started is to read the <a href="https://cosmicmar.com/CMBLensing.jl/" rel="nofollow">documentation</a> (which is a work-in-progress, but contains many useful examples).</p>
<p>Most of the pages in the documentation are Jupyter notebooks, and you can click the "launch binder" link at the top of each page to launch a Jupyterlab server running the notebook in your browser (courtesy of <a href="https://mybinder.org/" rel="nofollow">binder</a>). You can also find the notebooks in <a href="https://github.com/marius311/CMBLensing.jl/tree/gh-pages/src">this folder</a> if you want to run them locally (which will usually lead to higher performance).</p>
<h2><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<h3><a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h3>
<ul>
<li>Julia 1.3 or higher</li>
<li>Python 3 + matplotlib (used for plotting)</li>
<li><em>(recommended)</em> <a href="https://github.com/cmbant/CAMB">pycamb</a> to generate $C_\ell$'s</li>
<li><em>(optional)</em> An Nvidia GPU and <a href="https://github.com/JuliaGPU/CuArrays.jl">CuArrays</a> for GPU support</li>
<li><em>(optional)</em> <a href="https://github.com/healpy/healpy">healpy</a> for experimental curved sky support</li>
</ul>
<h3><a id="user-content-native-installation" class="anchor" aria-hidden="true" href="#native-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Native installation</h3>
<p>To install the Julia package locally, run:</p>
<pre lang="juliapkg"><code>pkg&gt; add https://github.com/marius311/CMBLensing.jl#master
</code></pre>
<p>(type <code>]</code> at the Julia REPL to reach the <code>pkg&gt;</code> prompt)</p>
<h3><a id="user-content-docker-installation" class="anchor" aria-hidden="true" href="#docker-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker installation</h3>
<p>Also provided is a Docker container which includes a Jupyterlab server and all the recommended and optional dependencies to run and use <code>CMBLensing.jl</code>. Launch this container with:</p>
<div class="highlight highlight-source-shell"><pre>git clone https://github.com/marius311/CMBLensing.jl.git
<span class="pl-c1">cd</span> CMBLensing.jl
docker-compose pull
docker-compose up</pre></div>
<p>The first time you run this, it will automatically download the (~1Gb) container from the Docker hub. The command will prompt you with the URL which you should open in a browser to access the notebook.</p>
<p>To run the notebook on a different port than the default <code>8888</code>, do <code>PORT=1234 docker-compose up</code> where <code>1234</code> is whatever port number you want.</p>
<p>You can also build the container locally by replacing <code>docker-compose pull</code> with <code>docker-compose build</code> above.</p>
</article></div>