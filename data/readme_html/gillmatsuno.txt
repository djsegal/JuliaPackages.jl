<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-gillmatsunojl" class="anchor" aria-hidden="true" href="#gillmatsunojl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><strong><div align="center" dir="auto">GillMatsuno.jl</div></strong></h1>
<p align="center" dir="auto">
  <a href="https://www.repostatus.org/#active" rel="nofollow">
    <img alt="Repo Status" src="https://camo.githubusercontent.com/3b32dc5183a4fd39fab11f974c151297877f38723b8b7c450d42cbf0d9d9849a/68747470733a2f2f7777772e7265706f7374617475732e6f72672f6261646765732f6c61746573742f6163746976652e7376673f7374796c653d666c61742d737175617265" data-canonical-src="https://www.repostatus.org/badges/latest/active.svg?style=flat-square" style="max-width: 100%;">
  </a>
  <a href="https://travis-ci.com/github/natgeo-wong/GillMatsuno.jl" rel="nofollow">
    <img alt="Travis CI" src="https://camo.githubusercontent.com/3961f7ef815cd5539d7c778d08def173030e00d8395249b86777e3f5892b144e/68747470733a2f2f7472617669732d63692e636f6d2f6e617467656f2d776f6e672f47696c6c4d617473756e6f2e6a6c2e7376673f6272616e63683d6d6173746572267374796c653d666c61742d737175617265" data-canonical-src="https://travis-ci.com/natgeo-wong/GillMatsuno.jl.svg?branch=master&amp;style=flat-square" style="max-width: 100%;">
  </a>
  <a href="https://github.com/natgeo-wong/GillMatsuno.jl/actions?query=workflow%3ADocumentation">
    <img alt="Documentation Build" src="https://github.com/natgeo-wong/GillMatsuno.jl/workflows/Documentation/badge.svg" style="max-width: 100%;">
  </a>
  <br>
  <a href="https://mit-license.org" rel="nofollow">
    <img alt="MIT License" src="https://camo.githubusercontent.com/ad3ef6f300e4672d89c879c54ee490a4bae95c62b0930b74eecdf702205af3c4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d626c75652e7376673f7374796c653d666c61742d737175617265" data-canonical-src="https://img.shields.io/badge/License-MIT-blue.svg?style=flat-square" style="max-width: 100%;">
  </a>
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/7ef0469d54ea01ec6612a715887bf20e336e5a232098922fe811b797f29e71d0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f6e617467656f2d776f6e672f47696c6c4d617473756e6f2e6a6c"><img alt="Latest Release" src="https://camo.githubusercontent.com/7ef0469d54ea01ec6612a715887bf20e336e5a232098922fe811b797f29e71d0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f6e617467656f2d776f6e672f47696c6c4d617473756e6f2e6a6c" data-canonical-src="https://img.shields.io/github/v/release/natgeo-wong/GillMatsuno.jl" style="max-width: 100%;"></a>
  <a href="https://natgeo-wong.github.io/GillMatsuno.jl/stable/" rel="nofollow">
    <img alt="Latest Documentation" src="https://camo.githubusercontent.com/509d23557a7f7d925ca45b7b398e7d8d15eda8c8fc6c4f093b522b198a2c125f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e7376673f7374796c653d666c61742d737175617265" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg?style=flat-square" style="max-width: 100%;">
  </a>
  <a href="https://natgeo-wong.github.io/GillMatsuno.jl/dev/" rel="nofollow">
    <img alt="Latest Documentation" src="https://camo.githubusercontent.com/60c56f486c48f0113ea48065c9bacbd023522f60dd57bd23d1f296c6c62efce8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6c61746573742d626c75652e7376673f7374796c653d666c61742d737175617265" data-canonical-src="https://img.shields.io/badge/docs-latest-blue.svg?style=flat-square" style="max-width: 100%;">
  </a>
</p>
<p dir="auto"><strong>Created By:</strong> Nathanael Wong (<a href="mailto:nathanaelwong@fas.harvard.edu">nathanaelwong@fas.harvard.edu</a>)</p>
<h2 dir="auto"><a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Introduction</h2>
<p dir="auto"><code>GillMatsuno.jl</code> is a Julia package that:</p>
<ul dir="auto">
<li>numerically solves the Shallow-Water Equations on a <math-renderer class="js-inline-math" style="display: inline" data-static-url="https://github.githubassets.com/static" data-run-id="15bdce95190c2e2640f9380670eb23aa">$\beta$</math-renderer>-plane using finite-difference methods</li>
<li>allows the user to define custom heat-forcing <math-renderer class="js-inline-math" style="display: inline" data-static-url="https://github.githubassets.com/static" data-run-id="15bdce95190c2e2640f9380670eb23aa">$Q$</math-renderer>
</li>
</ul>
<p dir="auto"><code>GillMatsuno.jl</code> can be installed via</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="] add GillMatsuno"><pre class="notranslate"><code>] add GillMatsuno
</code></pre></div>
<p dir="auto">Due to the recent improvements in memory allocations in Julia, <code>GillMatsuno.jl</code> <code>v2</code> works best in Julia <code>v1.5</code> and above, but can work from <code>v1.3</code> onwards.</p>
<h2 dir="auto">
<a id="user-content-using-gillmatsunojl" class="anchor" aria-hidden="true" href="#using-gillmatsunojl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Using <code>GillMatsuno.jl</code>
</h2>
<p dir="auto">There are four components to running a model in <code>GillMatsuno.jl</code>.  They are:</p>
<ol dir="auto">
<li>Grid <code>G</code>
</li>
<li>Domain parameters <code>D</code>
</li>
<li>Heat Source <code>Q</code>
</li>
<li>Simulation Setup <code>S</code>
</li>
</ol>
<h3 dir="auto">
<a id="user-content-1-defining-the-grid-g" class="anchor" aria-hidden="true" href="#1-defining-the-grid-g"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>1. Defining the Grid <code>G</code>
</h3>
<p dir="auto"><code>GillMatsuno.jl</code> uses a staggered Arakawa C-Grid.  The Grid <code>G</code> is generated via the function <code>GenerateGrid</code>, as follows</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="G = GenerateGrid(size = (nx,ny), x = (xmin,xmax), y = (ymin,ymax))"><pre class="notranslate"><code>G = GenerateGrid(size = (nx,ny), x = (xmin,xmax), y = (ymin,ymax))
</code></pre></div>
<p dir="auto">It is to be noted that the shallow-water equations to be solved have been nondimensionalized.  Typical values of <code>xmin</code> and <code>xmax</code> are <em>O</em>(25) (negative and positive respectively), and <em>O</em>(10) for <code>ymin</code> and <code>ymax</code>.</p>
<h3 dir="auto">
<a id="user-content-2-defining-the-domain-parameters-d" class="anchor" aria-hidden="true" href="#2-defining-the-domain-parameters-d"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>2. Defining the Domain Parameters <code>D</code>
</h3>
<p dir="auto">We define the domain parameters using the <code>DomainProperties()</code> function.  The default values are:</p>
<ul dir="auto">
<li>
<code>α</code> represents the damping coefficient on the winds induced by the heat-forcing (default: <code>α = 0.1</code>)</li>
<li>
<code>β</code> is the Coriolis Factor (nondimensionalized to <code>β = 0.5</code> as the default)</li>
<li>
<code>g</code> and <code>H</code> represent gravity and the height of the domain (both nondimensionalized to 1 as default)</li>
</ul>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="D = DomainParameters(α=0.2,β=0.5,g=1.0,H=1.0)"><pre class="notranslate"><code>D = DomainParameters(α=0.2,β=0.5,g=1.0,H=1.0)
</code></pre></div>
<h3 dir="auto">
<a id="user-content-3-defining-the-heat-source-q" class="anchor" aria-hidden="true" href="#3-defining-the-heat-source-q"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>3. Defining the Heat Source <em>Q</em>
</h3>
<p dir="auto">The heat source <em>Q</em> is analogous to a mass source/sink.  As of now, <em>Q</em> can only be defined as a gaussian peak (or the cumulative sums of gaussian peaks), though we aim to extend this to equatorial bands.</p>
<p dir="auto"><em>Q</em> can be defined via the function <code>QfieldProperties</code></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Q = QfieldProperties(A=1.0,Lx=2.0,Ly=2.0,Qx=0,Qy=0)"><pre class="notranslate"><code>Q = QfieldProperties(A=1.0,Lx=2.0,Ly=2.0,Qx=0,Qy=0)
</code></pre></div>
<p dir="auto">Where we have that</p>
<ul dir="auto">
<li>
<code>A</code> is the amplitude of the source</li>
<li>
<code>Lx</code> and <code>Ly</code> are the non-dimensionalized widths of the <code>Q</code> in the <code>x</code>- and <code>y</code>-directions respectively</li>
<li>
<code>Qx</code> and <code>Qy</code> denote the location of the center of <code>Q</code>
</li>
</ul>
<h3 dir="auto">
<a id="user-content-4-setting-up-the-simulation-s" class="anchor" aria-hidden="true" href="#4-setting-up-the-simulation-s"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>4. Setting up the Simulation <code>S</code>
</h3>
<p dir="auto">The simulation structure <code>S</code> is defined as follows:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="S = CreateSimulation(δt=5e-4,tt=50,ft=0.5,fnc=&quot;test.nc&quot;)"><pre class="notranslate"><code>S = CreateSimulation(δt=5e-4,tt=50,ft=0.5,fnc="test.nc")
</code></pre></div>
<p dir="auto">Where we have that</p>
<ul dir="auto">
<li>
<code>δt</code> is the model timestep</li>
<li>
<code>tt</code> is the total model runtime</li>
<li>
<code>ft</code> is the output frequency in model runtime</li>
</ul>
<p dir="auto">So, using the parameters above, we see that the model is ran for 10^6 timesteps, with the fields output every 10000 steps to the netCDF file <code>test.nc</code>.</p>
<h3 dir="auto">
<a id="user-content-5-running-the-simulation" class="anchor" aria-hidden="true" href="#5-running-the-simulation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>5. Running the Simulation</h3>
<p dir="auto">With the fields we have defined above, we put them into the function <code>runGillMatsuno(S,G,[Q],D)</code>, and then we can extract the fields and do plotting/analysis, as you wish!</p>
</article></div>