<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div align="center">
<a href="https://en.wikipedia.org/wiki/Chinese_garden" rel="nofollow"> <img src="./docs/imgs/window.jpg" height="300px" style="max-width:100%;"> </a>
<p> If it works, it works everywhere!</p>
</div>
<hr>
<p align="center">
  <a href="https://github.com/JuliaReinforcementLearning/DistributedReinforcementLearning.jl/actions?query=workflow%3ACI">
  <img src="https://github.com/JuliaReinforcementLearning/DistributedReinforcementLearning.jl/workflows/CI/badge.svg" style="max-width:100%;">
  </a>
</p>
<h2><a id="user-content-design" class="anchor" aria-hidden="true" href="#design"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Design</h2>
<p><a target="_blank" rel="noopener noreferrer" href="./docs/imgs/design.png"><img src="./docs/imgs/design.png" alt="" style="max-width:100%;"></a></p>
<h3><a id="user-content-components" class="anchor" aria-hidden="true" href="#components"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Components</h3>
<ul>
<li><g-emoji class="g-emoji" alias="construction_worker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f477.png">👷</g-emoji> <strong>Worker</strong>, a worker creates a task to run an experiment in background. It periodically sends out transitions between agent and environment, and fetches latest parameter.</li>
<li><g-emoji class="g-emoji" alias="loudspeaker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e2.png">📢</g-emoji> <strong>WorkerProxy</strong>, a worker proxy collects messages from/to workers on the same node so that some message data (model params) can be shared accross different workers.</li>
<li><g-emoji class="g-emoji" alias="cd" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4bf.png">💿</g-emoji> <strong>TrajectoryManager</strong>, a trajectory manager is a wrapper around an <code>AbstractTrajectory</code>. It takes in a bulk of transitions and samples a batch of training data in respond to rquests.</li>
<li><g-emoji class="g-emoji" alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> <strong>Trainer</strong>, a trainer is a wrapper around an <code>AbstractPolicy</code>, it does nothing but to update its internal parameters when received a batch of training data and periodically broadcast its latest parameters.</li>
<li><g-emoji class="g-emoji" alias="stopwatch" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/23f1.png">⏱️</g-emoji> <strong>Orchestrator</strong>, an orchestrator is in charge of controlling the start, stop and the speed of communications between the above components.</li>
</ul>
<p>Note that:</p>
<ol>
<li>We adopt the <a href="https://en.wikipedia.org/wiki/Actor_model" rel="nofollow">actor model</a> here. Each instance of the above components is an actor. Only messages are passing between them.</li>
<li>A node is a process in Julia. Different nodes can be on one machine or accross different machines.</li>
<li>Tasks in different workers are initiated with <code>Threads.@spawn</code>. There's no direct communication between them by design.</li>
<li>In single node environment (<code>WorkerNode</code> and <code>MainNode</code> are the same one), the <strong>WorkerProxy</strong> can be removed and workers communicate with <strong>Orchestrator</strong> directly.</li>
</ol>
<h3><a id="user-content-messages" class="anchor" aria-hidden="true" href="#messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Messages</h3>
<ul>
<li><g-emoji class="g-emoji" alias="one" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png">1️⃣</g-emoji> (<g-emoji class="g-emoji" alias="construction_worker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f477.png">👷</g-emoji> → <g-emoji class="g-emoji" alias="loudspeaker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e2.png">📢</g-emoji>) <code>InsertTransitionMsg</code>, contains the local transitions between agent and environment in an experiment.</li>
<li><g-emoji class="g-emoji" alias="two" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png">2️⃣</g-emoji> (<g-emoji class="g-emoji" alias="loudspeaker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e2.png">📢</g-emoji> → <g-emoji class="g-emoji" alias="stopwatch" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/23f1.png">⏱️</g-emoji>) <code>InsertTransitionMsg</code> from different workers.</li>
<li><g-emoji class="g-emoji" alias="three" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0033-20e3.png">3️⃣</g-emoji> (<g-emoji class="g-emoji" alias="stopwatch" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/23f1.png">⏱️</g-emoji> → <g-emoji class="g-emoji" alias="cd" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4bf.png">💿</g-emoji>) <code>InsertTransitionMsg</code> and <code>SampleBatchMsg</code> (which contains the address of <strong>Trainer</strong>).</li>
<li><g-emoji class="g-emoji" alias="four" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0034-20e3.png">4️⃣</g-emoji> (<g-emoji class="g-emoji" alias="cd" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4bf.png">💿</g-emoji> → <g-emoji class="g-emoji" alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji>) <code>BatchTrainingDataMsg</code></li>
<li><g-emoji class="g-emoji" alias="five" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0035-20e3.png">5️⃣</g-emoji> (<g-emoji class="g-emoji" alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> → <g-emoji class="g-emoji" alias="cd" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4bf.png">💿</g-emoji>) <code>UpdatePriorityMsg</code>, only necessary in prioritized experience replay related algorithms.</li>
<li><g-emoji class="g-emoji" alias="six" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0036-20e3.png">6️⃣</g-emoji> (<g-emoji class="g-emoji" alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> → <g-emoji class="g-emoji" alias="stopwatch" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/23f1.png">⏱️</g-emoji>) <code>LoadParamsMsg</code>, contains the latest parameters of the policy.</li>
<li><g-emoji class="g-emoji" alias="seven" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0037-20e3.png">7️⃣</g-emoji> (<g-emoji class="g-emoji" alias="stopwatch" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/23f1.png">⏱️</g-emoji> → <g-emoji class="g-emoji" alias="loudspeaker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e2.png">📢</g-emoji>) <code>LoadParamsMsg</code></li>
<li><g-emoji class="g-emoji" alias="eight" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/0038-20e3.png">8️⃣</g-emoji> (<g-emoji class="g-emoji" alias="loudspeaker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e2.png">📢</g-emoji> → <g-emoji class="g-emoji" alias="construction_worker" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f477.png">👷</g-emoji>) <code>LoadParamsMsg</code></li>
</ul>
</article></div>