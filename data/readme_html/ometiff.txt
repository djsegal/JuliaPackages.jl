<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-ometiffjl" class="anchor" aria-hidden="true" href="#ometiffjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OMETIFF.jl</h1>
<table>
<thead>
<tr>
<th align="left"><strong>Documentation</strong></th>
<th align="left"><strong>Build Status</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://tamasnagy.com/OMETIFF.jl/stable/" rel="nofollow"><img src="https://camo.githubusercontent.com/f7b92a177c912c1cc007fc9b40f17ff3ee3bb414/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width:100%;"></a></td>
<td align="left"><a href="https://www.repostatus.org/#active" rel="nofollow"><img src="https://camo.githubusercontent.com/fd7a93e9eedafe6205ebee65c9e3579f44df25b7/68747470733a2f2f7777772e7265706f7374617475732e6f72672f6261646765732f6c61746573742f6163746976652e737667" alt="" data-canonical-src="https://www.repostatus.org/badges/latest/active.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/tlnagy/OMETIFF.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/a9b5d0169d18f195bace734ba82a27c9bf02fe77/68747470733a2f2f7472617669732d63692e6f72672f746c6e6167792f4f4d45544946462e6a6c2e7376673f6272616e63683d6d6173746572" alt="" data-canonical-src="https://travis-ci.org/tlnagy/OMETIFF.jl.svg?branch=master" style="max-width:100%;"></a> <a href="https://codecov.io/gh/tlnagy/OMETIFF.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/5fd8512e5442416f34b5ea1678447496475c7afc/68747470733a2f2f636f6465636f762e696f2f67682f746c6e6167792f4f4d45544946462e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="" data-canonical-src="https://codecov.io/gh/tlnagy/OMETIFF.jl/branch/master/graph/badge.svg" style="max-width:100%;"></a></td>
</tr>
</tbody>
</table>
<p>Adds support for reading OME-TIFF files to the <a href="https://github.com/JuliaImages/Images.jl">Images.jl</a>
platform. Allows fast and easy interfacing with high-dimensional data with nice
labeled axes provided by <a href="https://github.com/JuliaImages/AxisArrays.jl">AxisArrays.jl</a>.</p>
<h2><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h2>
<ul>
<li>Can open a wide-range of OMETIFF files with a special focus on <a href="https://github.com/tlnagy/OMETIFF.jl/blob/master/test/runtests.jl">correctness</a></li>
<li>Supports memory-mapping to open large TIFF files quickly even on
memory-constrained machines</li>
<li>Spatial and temporal axes are annotated with units if available (like Œºm, s, etc)</li>
<li>Channel and position axes use their original names</li>
<li>Elapsed times are extracted and returned using the same labeled axes</li>
<li>Important metadata is extracted and included in an easy to access format</li>
</ul>
<h2><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<p><code>OMETIFF.jl</code> will be automatically installed when you use <a href="https://github.com/JuliaIO/FileIO.jl">FileIO</a> to open an OME-TIFF file. You can also install it by running the following in the Julia REPL:</p>
<div class="highlight highlight-source-julia"><pre>] add OMETIFF</pre></div>
<h2><a id="user-content-usage" class="anchor" aria-hidden="true" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> FileIO, Images

julia<span class="pl-k">&gt;</span> img <span class="pl-k">=</span> <span class="pl-c1">load</span>(<span class="pl-s"><span class="pl-pds">"</span>/Users/tamasnagy/Downloads/66perc-h2o-vs-iso_1_MMStack.ome.tif<span class="pl-pds">"</span></span>)
Gray ImageMeta with<span class="pl-k">:</span>
  data<span class="pl-k">:</span> <span class="pl-c1">4</span><span class="pl-k">-</span>dimensional AxisArray{Gray{N0f16},<span class="pl-c1">4</span>,<span class="pl-k">...</span>} with axes<span class="pl-k">:</span>
    <span class="pl-c1">:y</span>, <span class="pl-c1">0.0</span> Œºm<span class="pl-k">:</span><span class="pl-c1">0.6518</span> Œºm<span class="pl-k">:</span><span class="pl-c1">666.7914000000001</span> Œºm
    <span class="pl-c1">:x</span>, <span class="pl-c1">0.0</span> Œºm<span class="pl-k">:</span><span class="pl-c1">0.6518</span> Œºm<span class="pl-k">:</span><span class="pl-c1">666.7914000000001</span> Œºm
    <span class="pl-c1">:time</span>, <span class="pl-c1">0.0</span> ms<span class="pl-k">:</span><span class="pl-c1">15000.0</span> ms<span class="pl-k">:</span><span class="pl-c1">405000.0</span> ms
    <span class="pl-c1">:position</span>, Symbol[<span class="pl-c1">:A5_Site_0</span>, <span class="pl-c1">:A5_Site_1</span>, <span class="pl-c1">:B5_Site_0</span>, <span class="pl-c1">:B5_Site_1</span>]
And data, a <span class="pl-c1">1024</span><span class="pl-k">√ó</span><span class="pl-c1">1024</span><span class="pl-k">√ó</span><span class="pl-c1">28</span><span class="pl-k">√ó</span><span class="pl-c1">4</span> <span class="pl-c1">reshape</span>(<span class="pl-c1">reinterpret</span>(Gray{N0f16}, <span class="pl-k">::</span><span class="pl-c1">Array{UInt16,6}</span>), <span class="pl-c1">1024</span>, <span class="pl-c1">1024</span>, <span class="pl-c1">28</span>, <span class="pl-c1">4</span>) with eltype Gray{Normed{UInt16,<span class="pl-c1">16</span>}}
  properties<span class="pl-k">:</span>
    Elapsed_Times<span class="pl-k">:</span> Unitful<span class="pl-k">.</span>Quantity{Float64,ùêì,Unitful<span class="pl-k">.</span>FreeUnits{(s,),ùêì,<span class="pl-c1">nothing</span>}}[<span class="pl-c1">2.525</span> s <span class="pl-c1">3.35</span> s <span class="pl-c1">5.638</span> s <span class="pl-c1">6.534</span> s; <span class="pl-c1">15.398</span> s <span class="pl-c1">16.195</span> s <span class="pl-c1">18.743</span> s <span class="pl-c1">19.506</span> s; ‚Ä¶ ; <span class="pl-c1">390.389</span> s <span class="pl-c1">391.154</span> s <span class="pl-c1">393.282</span> s <span class="pl-c1">393.984</span> s; <span class="pl-c1">405.391</span> s <span class="pl-c1">406.13</span> s <span class="pl-c1">408.316</span> s <span class="pl-c1">409.101</span> s]
    Description<span class="pl-k">:</span> nd4 <span class="pl-k">+</span> nd8 <span class="pl-k">in</span>

julia<span class="pl-k">&gt;</span> <span class="pl-c1">size</span>(img) <span class="pl-c"><span class="pl-c">#</span> lets get the dimensions</span>
(<span class="pl-c1">1024</span>, <span class="pl-c1">1024</span>, <span class="pl-c1">28</span>, <span class="pl-c1">4</span>)

julia<span class="pl-k">&gt;</span> <span class="pl-c1">axisnames</span>(img) <span class="pl-c"><span class="pl-c">#</span> wait, but what do they correspond to?</span>
(<span class="pl-c1">:y</span>, <span class="pl-c1">:x</span>, <span class="pl-c1">:time</span>, <span class="pl-c1">:position</span>)

julia<span class="pl-k">&gt;</span> img[<span class="pl-c1">Axis</span><span class="pl-c1">{:position}</span>(<span class="pl-c1">:A5_Site_1</span>), <span class="pl-c1">Axis</span><span class="pl-c1">{:time}</span>(<span class="pl-c1">2</span>)]; <span class="pl-c"><span class="pl-c">#</span> get the 2nd time point in position A5</span>

julia<span class="pl-k">&gt;</span> img[<span class="pl-s"><span class="pl-pds">"</span>Elapsed_Times<span class="pl-pds">"</span></span>][<span class="pl-c1">Axis</span><span class="pl-c1">{:position}</span>(<span class="pl-c1">:A5_Site_1</span>), <span class="pl-c1">Axis</span><span class="pl-c1">{:time}</span>(<span class="pl-c1">2</span>)] <span class="pl-c"><span class="pl-c">#</span> get exact time when that slice was taken</span>
<span class="pl-c1">16.195</span> s

julia<span class="pl-k">&gt;</span> img[<span class="pl-s"><span class="pl-pds">"</span>Description<span class="pl-pds">"</span></span>] <span class="pl-c"><span class="pl-c">#</span> get any notes embedded in the image</span>
<span class="pl-s"><span class="pl-pds">"</span>nd4 + nd8 in<span class="pl-pds">"</span></span></pre></div>
<h3><a id="user-content-more-advanced-usage" class="anchor" aria-hidden="true" href="#more-advanced-usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More advanced usage</h3>
<p>The image updates all the axes as we subset it. Observe that since we're grabbing 5x5x1x1 subset of
the image, all the axes update to reflect this slice.</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Unitful

julia<span class="pl-k">&gt;</span> img[<span class="pl-c1">Axis</span><span class="pl-c1">{:y}</span>(<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">5</span>), <span class="pl-c1">Axis</span><span class="pl-c1">{:x}</span>(<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">5</span>), <span class="pl-c1">Axis</span><span class="pl-c1">{:time}</span>(<span class="pl-c1">15000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>ms<span class="pl-pds">"</span></span>), <span class="pl-c1">Axis</span><span class="pl-c1">{:position}</span>(<span class="pl-c1">1</span>)]
Gray ImageMeta with<span class="pl-k">:</span>
  data<span class="pl-k">:</span> <span class="pl-c1">2</span><span class="pl-k">-</span>dimensional AxisArray{Gray{N0f16},<span class="pl-c1">2</span>,<span class="pl-k">...</span>} with axes<span class="pl-k">:</span>
    <span class="pl-c1">:y</span>, <span class="pl-c1">0.0</span> Œºm<span class="pl-k">:</span><span class="pl-c1">0.6518</span> Œºm<span class="pl-k">:</span><span class="pl-c1">2.6072</span> Œºm
    <span class="pl-c1">:x</span>, <span class="pl-c1">0.0</span> Œºm<span class="pl-k">:</span><span class="pl-c1">0.6518</span> Œºm<span class="pl-k">:</span><span class="pl-c1">2.6072</span> Œºm
And data, a <span class="pl-c1">5</span><span class="pl-k">√ó</span><span class="pl-c1">5</span> Array{Gray{N0f16},<span class="pl-c1">2</span>} with eltype Gray{Normed{UInt16,<span class="pl-c1">16</span>}}
  properties<span class="pl-k">:</span>
    Elapsed_Times<span class="pl-k">:</span> Quantity{Float64,ùêì,Unitful<span class="pl-k">.</span>FreeUnits{(s,),ùêì,<span class="pl-c1">nothing</span>}}[<span class="pl-c1">2.525</span> s <span class="pl-c1">3.35</span> s <span class="pl-c1">5.638</span> s <span class="pl-c1">6.534</span> s; <span class="pl-c1">15.398</span> s <span class="pl-c1">16.195</span> s <span class="pl-c1">18.743</span> s <span class="pl-c1">19.506</span> s; ‚Ä¶ ; <span class="pl-c1">390.389</span> s <span class="pl-c1">391.154</span> s <span class="pl-c1">393.282</span> s <span class="pl-c1">393.984</span> s; <span class="pl-c1">405.391</span> s <span class="pl-c1">406.13</span> s <span class="pl-c1">408.316</span> s <span class="pl-c1">409.101</span> s]
    Description<span class="pl-k">:</span> nd4 <span class="pl-k">+</span> nd8 <span class="pl-k">in</span></pre></div>
<h3><a id="user-content-dumping-embedded-ome-xml" class="anchor" aria-hidden="true" href="#dumping-embedded-ome-xml"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dumping embedded OME-XML</h3>
<p>To quickly access the OME-XML stored inside a TIFF file, use the
<code>OMETIFF.dump_omexml</code> function:</p>
<div class="highlight highlight-source-julia"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> OMETIFF

julia<span class="pl-k">&gt;</span> <span class="pl-c1">println</span>(OMETIFF<span class="pl-k">.</span><span class="pl-c1">dump_omexml</span>(<span class="pl-s"><span class="pl-pds">"</span>test/testdata/singles/single-channel.ome.tif<span class="pl-pds">"</span></span>))
<span class="pl-k">&lt;</span>OME xmlns<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>http://www.openmicroscopy.org/Schemas/OME/2016-06<span class="pl-pds">"</span></span> xmlns<span class="pl-k">:</span>xsi<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="pl-pds">"</span></span> Creator<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>OME Bio-Formats 5.2.2<span class="pl-pds">"</span></span> UUID<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>urn:uuid:2bc2aa39-30d2-44ee-8399-c513492dd5de<span class="pl-pds">"</span></span> xsi<span class="pl-k">:</span>schemaLocation<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>http://www.openmicroscopy.org/Schemas/OME/2016-06 http://www.openmicroscopy.org/Schemas/OME/2016-06/ome.xsd<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>
  <span class="pl-k">&lt;</span>Image ID<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Image:0<span class="pl-pds">"</span></span> Name<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>single-channel.ome.tif<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span>Pixels BigEndian<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span> DimensionOrder<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>XYZCT<span class="pl-pds">"</span></span> ID<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Pixels:0<span class="pl-pds">"</span></span> SizeC<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> SizeT<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> SizeX<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>439<span class="pl-pds">"</span></span> SizeY<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>167<span class="pl-pds">"</span></span> SizeZ<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> Type<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>int8<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span>Channel ID<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Channel:0:0<span class="pl-pds">"</span></span> SamplesPerPixel<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span>LightPath<span class="pl-k">/</span><span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span><span class="pl-k">/</span>Channel<span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span>TiffData FirstC<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> FirstT<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> FirstZ<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> IFD<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> PlaneCount<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span>UUID FileName<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>single-channel.ome.tif<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>urn<span class="pl-k">:</span>uuid<span class="pl-k">:</span><span class="pl-c1">2</span>bc2aa39<span class="pl-k">-</span><span class="pl-c1">30</span>d2<span class="pl-k">-</span><span class="pl-c1">44</span>ee<span class="pl-k">-</span><span class="pl-c1">8399</span><span class="pl-k">-</span>c513492dd5de<span class="pl-k">&lt;</span><span class="pl-k">/</span>UUID<span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span><span class="pl-k">/</span>TiffData<span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span><span class="pl-k">/</span>Pixels<span class="pl-k">&gt;</span>
  <span class="pl-k">&lt;</span><span class="pl-k">/</span>Image<span class="pl-k">&gt;</span>
<span class="pl-k">&lt;</span><span class="pl-k">/</span>OME<span class="pl-k">&gt;</span></pre></div>
</article></div>