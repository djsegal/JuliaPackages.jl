<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/juliasymbolics/Metatheory.jl/master/docs/src/assets/dragon.jpg"><img width="400px" src="https://raw.githubusercontent.com/juliasymbolics/Metatheory.jl/master/docs/src/assets/dragon.jpg" style="max-width: 100%;"></a>
</p>
<h1 dir="auto"><a id="user-content-metatheoryjl" class="anchor" aria-hidden="true" href="#metatheoryjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Metatheory.jl</h1>
<p dir="auto"><a href="https://juliasymbolics.github.io/Metatheory.jl/dev/" rel="nofollow"><img src="https://camo.githubusercontent.com/56f8252ba8e9d3f0b810769543f77823d2fe031ce560d4c2d69fb1fcad800383/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6c61746573742d626c75652e737667" alt="Docs" data-canonical-src="https://img.shields.io/badge/docs-latest-blue.svg" style="max-width: 100%;"></a>
<a href="https://juliasymbolics.github.io/Metatheory.jl/stable/" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="Docs" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/juliasymbolics/Metatheory.jl/workflows/CI/badge.svg"><img src="https://github.com/juliasymbolics/Metatheory.jl/workflows/CI/badge.svg" alt="CI" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/juliasymbolics/Metatheory.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/0d8ee120722b392816c6446f19ccf2e17a9860babc6946dc30235a4d63901373/68747470733a2f2f636f6465636f762e696f2f67682f6a756c696173796d626f6c6963732f4d6574617468656f72792e6a6c2f6272616e63682f6d61737465722f67726170682f62616467652e7376673f746f6b656e3d45574e59504437415358" alt="codecov" data-canonical-src="https://codecov.io/gh/juliasymbolics/Metatheory.jl/branch/master/graph/badge.svg?token=EWNYPD7ASX" style="max-width: 100%;"></a>
<a href="https://arxiv.org/abs/2102.07888" rel="nofollow"><img src="https://camo.githubusercontent.com/dc5bad71abc52168f9c311d69b6e851d3fa2cb84208b6f4ec15508a56e49977a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f61725869762d323130322e30373838382d6233316231622e737667" alt="arXiv" data-canonical-src="https://img.shields.io/badge/arXiv-2102.07888-b31b1b.svg" style="max-width: 100%;"></a>
<a href="https://joss.theoj.org/papers/3266e8a08a75b9be2f194126a9c6f0e9" rel="nofollow"><img src="https://camo.githubusercontent.com/40dcf47f6452106f380998d45ad42d841192923c4aba2bc8dcda9c8911e6e662/68747470733a2f2f6a6f73732e7468656f6a2e6f72672f7061706572732f33323636653861303861373562396265326631393431323661396336663065392f7374617475732e737667" alt="status" data-canonical-src="https://joss.theoj.org/papers/3266e8a08a75b9be2f194126a9c6f0e9/status.svg" style="max-width: 100%;"></a>
<a href="https://julialang.zulipchat.com/#narrow/stream/277860-metatheory.2Ejl" rel="nofollow"><img src="https://camo.githubusercontent.com/983f5cf59b23a327957720ae2657d1c15ae0713e7a6636c98a9c64b788e06f46/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436861742d5a756c69702d626c7565" alt="Zulip" data-canonical-src="https://img.shields.io/badge/Chat-Zulip-blue" style="max-width: 100%;"></a></p>
<p dir="auto"><strong>Metatheory.jl</strong> is a general purpose term rewriting, metaprogramming and algebraic computation library for the Julia programming language, designed to take advantage of the powerful reflection capabilities to bridge the gap between symbolic mathematics, abstract interpretation, equational reasoning, optimization, composable compiler transforms, and advanced
homoiconic pattern matching features. The core features of Metatheory.jl are a powerful rewrite rule definition language, a vast library of functional combinators for classical term rewriting and an <em>e-graph rewriting</em>, a fresh approach to term rewriting achieved through an equality saturation algorithm. Metatheory.jl can manipulate any kind of
Julia symbolic expression type, as long as it satisfies the <a href="https://github.com/JuliaSymbolics/TermInterface.jl">TermInterface.jl</a>.</p>
<p dir="auto">Metatheory.jl provides:</p>
<ul dir="auto">
<li>An eDSL (domain specific language) to define different kinds of symbolic rewrite rules.</li>
<li>A classical rewriting backend, derived from the <a href="https://github.com/JuliaSymbolics/SymbolicUtils.jl">SymbolicUtils.jl</a> pattern matcher, supporting associative-commutative rules. It is based on the pattern matcher in the <a href="https://mitpress.mit.edu/sites/default/files/titles/content/sicm_edition_2/book.html" rel="nofollow">SICM book</a>.</li>
<li>A flexible library of rewriter combinators.</li>
<li>An e-graph rewriting (equality saturation) backend and pattern matcher, based on the <a href="https://egraphs-good.github.io/" rel="nofollow">egg</a> library, supporting backtracking and non-deterministic term rewriting by using a data structure called <em>e-graph</em>, efficiently incorporating the notion of equivalence in order to reduce the amount of user effort required to achieve optimization tasks and equational reasoning.</li>
<li><code>@capture</code> macro for flexible metaprogramming.</li>
</ul>
<p dir="auto">Intuitively, Metatheory.jl transforms Julia expressions
in other Julia expressions and can achieve such at both compile and run time. This allows Metatheory.jl users to perform customized and composable compiler optimizations specifically tailored to single, arbitrary Julia packages.
Our library provides a simple, algebraically composable interface to help scientists in implementing and reasoning about semantics and all kinds of formal systems, by defining concise rewriting rules in pure, syntactically valid Julia on a high level of abstraction. Our implementation of equality saturation on e-graphs is based on the excellent, state-of-the-art technique implemented in the <a href="https://egraphs-good.github.io/" rel="nofollow">egg</a> library, reimplemented in pure Julia.</p>
<h2 dir="auto"><a id="user-content-20-is-out" class="anchor" aria-hidden="true" href="#20-is-out"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>2.0 is out!</h2>
<p dir="auto">Second stable version is out:</p>
<ul dir="auto">
<li>New e-graph pattern matching system, relies on functional programming and closures, and is much more extensible than 1.0's virtual machine.</li>
<li>No longer dispatch against types, but instead dispatch against objects.</li>
<li>Faster E-Graph Analysis</li>
<li>Better library macros</li>
<li>Updated TermInterface to 0.3.3</li>
<li>New interface for e-graph extraction using <code>EGraphs.egraph_reconstruct_expression</code></li>
<li>Simplify E-Graph Analysis Interface. Use Symbols or functions for identifying Analyses.</li>
<li>Remove duplicates in E-Graph analyses data.</li>
</ul>
<p dir="auto">Many features have been ported from SymbolicUtils.jl. Metatheory.jl can be used in place of SymbolicUtils.jl when you have no need of manipulating mathematical expressions. The introduction of  <a href="https://github.com/JuliaSymbolics/TermInterface.jl">TermInterface.jl</a> has allowed for large potential in generalization of term rewriting and symbolic analysis and manipulation features. Integration between Metatheory.jl with Symbolics.jl, as it has been shown in the <a href="https://arxiv.org/abs/2105.03949" rel="nofollow">"High-performance symbolic-numerics via multiple dispatch"</a> paper.</p>
<h2 dir="auto"><a id="user-content-recommended-readings---selected-publications" class="anchor" aria-hidden="true" href="#recommended-readings---selected-publications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Recommended Readings - Selected Publications</h2>
<ul dir="auto">
<li>The <a href="https://juliasymbolics.github.io/Metatheory.jl/stable/" rel="nofollow">Metatheory.jl manual</a></li>
<li><strong>OUT OF DATE</strong>: The <a href="https://joss.theoj.org/papers/10.21105/joss.03078#" rel="nofollow">Metatheory.jl introductory paper</a> gives a brief high level overview on the library and its functionalities.</li>
<li>The Julia Manual <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/" rel="nofollow">metaprogramming section</a> is fundamental to understand what homoiconic expression manipulation is and how it happens in Julia.</li>
<li>An <a href="https://blog.sigplan.org/2021/04/06/equality-saturation-with-egg/" rel="nofollow">introductory blog post on SIGPLAN</a> about <code>egg</code> and e-graphs rewriting.</li>
<li><a href="https://dl.acm.org/doi/pdf/10.1145/3434304" rel="nofollow">egg: Fast and Extensible Equality Saturation</a> contains the definition of <em>E-Graphs</em> on which Metatheory.jl's equality saturation rewriting backend is based. This is a strongly recommended reading.</li>
<li><a href="https://arxiv.org/abs/2105.03949" rel="nofollow">High-performance symbolic-numerics via multiple dispatch</a>: a paper about how we used Metatheory.jl to optimize code generation in <a href="https://github.com/JuliaSymbolics/Symbolics.jl">Symbolics.jl</a></li>
<li><a href="https://arxiv.org/abs/2112.14714" rel="nofollow">Automated Code Optimization with E-Graphs</a>. Alessandro Cheli's Thesis on Metatheory.jl</li>
</ul>
<h2 dir="auto"><a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contributing</h2>
<p dir="auto">If you'd like to give us a hand and contribute to this repository you can:</p>
<ul dir="auto">
<li>Find a high level description of the project architecture in <a href="https://github.com/juliasymbolics/Metatheory.jl/blob/master/ARCHITECTURE.md">ARCHITECTURE.md</a></li>
<li>Read the contribution guidelines in <a href="https://github.com/juliasymbolics/Metatheory.jl/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></li>
</ul>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">You can install the stable version:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Pkg; Pkg.add(&quot;Metatheory&quot;)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Pkg; Pkg<span class="pl-k">.</span><span class="pl-c1">add</span>(<span class="pl-s"><span class="pl-pds">"</span>Metatheory<span class="pl-pds">"</span></span>)</pre></div>
<p dir="auto">Or you can install the developer version (recommended by now for latest bugfixes)</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Pkg; Pkg.add(url=&quot;https://github.com/JuliaSymbolics/Metatheory.jl&quot;)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Pkg; Pkg<span class="pl-k">.</span><span class="pl-c1">add</span>(url<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>https://github.com/JuliaSymbolics/Metatheory.jl<span class="pl-pds">"</span></span>)</pre></div>
<h2 dir="auto"><a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Documentation</h2>
<p dir="auto">Extensive Metatheory.jl is available <a href="https://juliasymbolics.github.io/Metatheory.jl/dev" rel="nofollow">here</a></p>
<h2 dir="auto"><a id="user-content-citing" class="anchor" aria-hidden="true" href="#citing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Citing</h2>
<p dir="auto">If you use Metatheory.jl in your research, please <a href="https://github.com/juliasymbolics/Metatheory.jl/blob/master/CITATION.bib">cite</a> our works.</p>
<hr>
<h1 dir="auto"><a id="user-content-sponsors" class="anchor" aria-hidden="true" href="#sponsors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Sponsors</h1>
<p dir="auto">If you enjoyed Metatheory.jl and would like to help, you can donate a coffee or choose place your logo and name in this page. <a href="https://github.com/sponsors/0x0f0f0f/">See 0x0f0f0f's Github Sponsors page</a>!</p>
<p align="center" dir="auto">
<a href="https://planting.space" rel="nofollow"> 
    <img width="300px" src="https://raw.githubusercontent.com/juliasymbolics/Metatheory.jl/master/.github/plantingspace.png" style="max-width: 100%;">
</a>
</p>
</article></div>