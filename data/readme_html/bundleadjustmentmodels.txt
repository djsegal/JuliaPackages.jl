<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-bundleadjustmentmodels" class="anchor" aria-hidden="true" href="#bundleadjustmentmodels"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>BundleAdjustmentModels</h1>
<table>
<thead>
<tr>
<th align="center"><strong>Documentation</strong></th>
<th align="center"><strong>CI</strong></th>
<th align="center"><strong>Coverage</strong></th>
<th align="center"><strong>Release</strong></th>
<th align="center"><strong>DOI</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="https://juliasmoothoptimizers.github.io/BundleAdjustmentModels.jl/stable/" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="docs-stable" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a> <a href="https://juliasmoothoptimizers.github.io/BundleAdjustmentModels.jl/dev/" rel="nofollow"><img src="https://camo.githubusercontent.com/ef2963f072da1a61a3df68686ccef86709fad9d7007c9ae6d734e85ef0a6ba7c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6465762d707572706c652e737667" alt="docs-dev" data-canonical-src="https://img.shields.io/badge/docs-dev-purple.svg" style="max-width: 100%;"></a></td>
<td align="center"><a href="https://github.com/JuliaSmoothOptimizers/BundleAdjustmentModels.jl/actions"><img src="https://github.com/JuliaSmoothOptimizers/BundleAdjustmentModels.jl/workflows/CI/badge.svg?branch=main" alt="build-ci" style="max-width: 100%;"></a></td>
<td align="center"><a href="https://app.codecov.io/gh/JuliaSmoothOptimizers/BundleAdjustmentModels.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/962e9e1adb0728e3915f800226e38a30fd3b4ffca3bded4783766180a53cb50c/68747470733a2f2f636f6465636f762e696f2f67682f4a756c6961536d6f6f74684f7074696d697a6572732f42756e646c6541646a7573746d656e744d6f64656c732e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/JuliaSmoothOptimizers/BundleAdjustmentModels.jl/branch/main/graph/badge.svg" style="max-width: 100%;"></a></td>
<td align="center"><a href="https://github.com/JuliaSmoothOptimizers/BundleAdjustmentModels.jl/releases"><img src="https://camo.githubusercontent.com/f9f10dd06f96dde2744399e29c839b4282bc2c29ba5b8ab6f205e99c99e955a1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f4a756c6961536d6f6f74684f7074696d697a6572732f42756e646c6541646a7573746d656e744d6f64656c732e6a6c2e7376673f7374796c653d666c61742d737175617265" alt="release" data-canonical-src="https://img.shields.io/github/v/release/JuliaSmoothOptimizers/BundleAdjustmentModels.jl.svg?style=flat-square" style="max-width: 100%;"></a></td>
<td align="center"><a href="https://zenodo.org/badge/latestdoi/383587358" rel="nofollow"><img src="https://camo.githubusercontent.com/79c868dc9e2916318eb016894ab99a7695a36c375cf8109cfce790fa0ffeeeae/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f3338333538373335382e737667" alt="doi" data-canonical-src="https://zenodo.org/badge/383587358.svg" style="max-width: 100%;"></a></td>
</tr>
</tbody>
</table>
<p dir="auto">Julia repository of <a href="https://en.wikipedia.org/wiki/Bundle_adjustment" rel="nofollow">bundle adjustment</a> problems from the <a href="http://grail.cs.washington.edu/projects/bal/" rel="nofollow">Bundle Adjustment in the Large</a> repository</p>
<h2 dir="auto"><a id="user-content-how-to-cite" class="anchor" aria-hidden="true" href="#how-to-cite"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How to Cite</h2>
<p dir="auto">If you use BundleAdjustmentModels.jl in your work, please cite using the format given in <a href="https://github.com/JuliaSmoothOptimizers/BundleAdjustmentModels.jl/blob/main/CITATION.bib"><code>CITATION.bib</code></a>.</p>
<h1 dir="auto"><a id="user-content-bug-reports-and-discussions" class="anchor" aria-hidden="true" href="#bug-reports-and-discussions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Bug reports and discussions</h1>
<p dir="auto">If you think you found a bug, feel free to open an <a href="https://github.com/JuliaSmoothOptimizers/BundleAdjustmentModels.jl/issues">issue</a>.
Focused suggestions and requests can also be opened as issues. Before opening a pull request, start an issue or a discussion on the topic, please.</p>
<p dir="auto">If you want to ask a question not suited for a bug report, feel free to start a discussion <a href="https://github.com/JuliaSmoothOptimizers/Organization/discussions">here</a>. This forum is for general discussion about this repository and the <a href="https://github.com/JuliaSmoothOptimizers">JuliaSmoothOptimizers</a>, so questions about any of our packages are welcome.</p>
<h2 dir="auto"><a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Examples</h2>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using BundleAdjustmentModels"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> BundleAdjustmentModels</pre></div>
<p dir="auto"><code>problems_df()</code> returns a DataFrame of all the problems, their group and other features.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; df = problems_df()
74×5 DataFrame
 Row │ name                     group      nequ      nvar     nnzj      
     │ String                   String     Int64     Int64    Int64     
─────┼──────────────────────────────────────────────────────────────────
   1 │ problem-16-22106-pre     dubrovnik    167436    66462    2009232
  ⋮  │            ⋮                 ⋮         ⋮         ⋮         ⋮
  74 │ problem-1778-993923-pre  venice     10003892  2997771  120046704
                                                         72 rows omitted"><pre>julia<span class="pl-k">&gt;</span> df <span class="pl-k">=</span> <span class="pl-c1">problems_df</span>()
<span class="pl-c1">74</span><span class="pl-k">×</span><span class="pl-c1">5</span> DataFrame
 Row │ name                     group      nequ      nvar     nnzj      
     │ String                   String     Int64     Int64    Int64     
─────┼──────────────────────────────────────────────────────────────────
   <span class="pl-c1">1</span> │ problem<span class="pl-k">-</span><span class="pl-c1">16</span><span class="pl-k">-</span><span class="pl-c1">22106</span><span class="pl-k">-</span>pre     dubrovnik    <span class="pl-c1">167436</span>    <span class="pl-c1">66462</span>    <span class="pl-c1">2009232</span>
  ⋮  │            ⋮                 ⋮         ⋮         ⋮         ⋮
  <span class="pl-c1">74</span> │ problem<span class="pl-k">-</span><span class="pl-c1">1778</span><span class="pl-k">-</span><span class="pl-c1">993923</span><span class="pl-k">-</span>pre  venice     <span class="pl-c1">10003892</span>  <span class="pl-c1">2997771</span>  <span class="pl-c1">120046704</span>
                                                         <span class="pl-c1">72</span> rows omitted</pre></div>
<p dir="auto">When you get this dataframe you can sort through it to get the problems that you want. For example, if you want to filter problems based on their size you can apply this filter:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; filter_df = df[ ( df.nequ .≥ 50000 ) .&amp; ( df.nvar .≤ 34000 ), :]
2×5 DataFrame
 Row │ name                  group    nequ   nvar   nnzj    
     │ String                String   Int64  Int64  Int64   
─────┼──────────────────────────────────────────────────────
   1 │ problem-49-7776-pre   ladybug  63686  23769   764232
   2 │ problem-73-11032-pre  ladybug  92244  33753  1106928"><pre>julia<span class="pl-k">&gt;</span> filter_df <span class="pl-k">=</span> df[ ( df<span class="pl-k">.</span>nequ <span class="pl-k">.≥</span> <span class="pl-c1">50000</span> ) <span class="pl-k">.&amp;</span> ( df<span class="pl-k">.</span>nvar <span class="pl-k">.≤</span> <span class="pl-c1">34000</span> ), :]
<span class="pl-c1">2</span><span class="pl-k">×</span><span class="pl-c1">5</span> DataFrame
 Row │ name                  group    nequ   nvar   nnzj    
     │ String                String   Int64  Int64  Int64   
─────┼──────────────────────────────────────────────────────
   <span class="pl-c1">1</span> │ problem<span class="pl-k">-</span><span class="pl-c1">49</span><span class="pl-k">-</span><span class="pl-c1">7776</span><span class="pl-k">-</span>pre   ladybug  <span class="pl-c1">63686</span>  <span class="pl-c1">23769</span>   <span class="pl-c1">764232</span>
   <span class="pl-c1">2</span> │ problem<span class="pl-k">-</span><span class="pl-c1">73</span><span class="pl-k">-</span><span class="pl-c1">11032</span><span class="pl-k">-</span>pre  ladybug  <span class="pl-c1">92244</span>  <span class="pl-c1">33753</span>  <span class="pl-c1">1106928</span></pre></div>
<p dir="auto">You can get the problem name directly from the dataframe:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; name = filter_df[1, :name]
&quot;problem-49-7776-pre&quot;"><pre>julia<span class="pl-k">&gt;</span> name <span class="pl-k">=</span> filter_df[<span class="pl-c1">1</span>, <span class="pl-c1">:name</span>]
<span class="pl-s"><span class="pl-pds">"</span>problem-49-7776-pre<span class="pl-pds">"</span></span></pre></div>
<p dir="auto"><code>fetch_ba_name</code> returns the path to the problem artifact. The artifact will download automatically:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; path = fetch_ba_name(name)
&quot;C:\\Users\\xxxx\\.julia\\artifacts\\dd2da5f94014b5f9086a2b38a87f8c1bc171b9c2&quot;"><pre>julia<span class="pl-k">&gt;</span> path <span class="pl-k">=</span> <span class="pl-c1">fetch_ba_name</span>(name)
<span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>dd2da5f94014b5f9086a2b38a87f8c1bc171b9c2<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">You can also get an array of the paths to an entire group of problems</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; path = fetch_ba_group(&quot;ladybug&quot;)
30-element Vector{String}:
 &quot;C:\\Users\\xxxx\\.julia\\artifacts\\dd2da5f94014b5f9086a2b38a87f8c1bc171b9c2&quot;
 &quot;C:\\Users\\xxxx\\.julia\\artifacts\\3d0853a3ca8e585814697fea9cd4d6956692e103&quot;
 &quot;C:\\Users\\xxxx\\.julia\\artifacts\\5c5c938c998d6c083f549bc584cfeb07bd296d89&quot;
 ⋮
 &quot;C:\\Users\\xxxx\\.julia\\artifacts\\00be55410c27068ec73261e122a39258100a1a11&quot;
 &quot;C:\\Users\\xxxx\\.julia\\artifacts\\0303e7ae8256c494c9da052d977277f21265899b&quot;
 &quot;C:\\Users\\xxxx\\.julia\\artifacts\\389ecea5c2f2e2b637a2b4439af0bd4ca98e6d84&quot;"><pre>julia<span class="pl-k">&gt;</span> path <span class="pl-k">=</span> <span class="pl-c1">fetch_ba_group</span>(<span class="pl-s"><span class="pl-pds">"</span>ladybug<span class="pl-pds">"</span></span>)
<span class="pl-c1">30</span><span class="pl-k">-</span>element Vector{String}<span class="pl-k">:</span>
 <span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>dd2da5f94014b5f9086a2b38a87f8c1bc171b9c2<span class="pl-pds">"</span></span>
 <span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>3d0853a3ca8e585814697fea9cd4d6956692e103<span class="pl-pds">"</span></span>
 <span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>5c5c938c998d6c083f549bc584cfeb07bd296d89<span class="pl-pds">"</span></span>
 ⋮
 <span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>00be55410c27068ec73261e122a39258100a1a11<span class="pl-pds">"</span></span>
 <span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>0303e7ae8256c494c9da052d977277f21265899b<span class="pl-pds">"</span></span>
 <span class="pl-s"><span class="pl-pds">"</span>C:<span class="pl-cce">\\</span>Users<span class="pl-cce">\\</span>xxxx<span class="pl-cce">\\</span>.julia<span class="pl-cce">\\</span>artifacts<span class="pl-cce">\\</span>389ecea5c2f2e2b637a2b4439af0bd4ca98e6d84<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">You can directly construct a nonlinear least-squares model based on <a href="http://juliasmoothoptimizers.github.io/NLPModels.jl/latest/" rel="nofollow">NLPModels</a>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; model = BundleAdjustmentModel(&quot;problem-49-7776&quot;)
BundleAdjustmentModel{Float64, Vector{Float64}}"><pre>julia<span class="pl-k">&gt;</span> model <span class="pl-k">=</span> <span class="pl-c1">BundleAdjustmentModel</span>(<span class="pl-s"><span class="pl-pds">"</span>problem-49-7776<span class="pl-pds">"</span></span>)
BundleAdjustmentModel{Float64, Vector{Float64}}</pre></div>
<p dir="auto">You can then evaluate the residual and jacobian (or their in-place version) from NLPModels:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using NLPModels"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> NLPModels</pre></div>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; residual(model, model.meta.x0)
63686-element Vector{Float64}:
 -9.020226301243213
 11.263958304987227
  ⋮
 -0.01443314653496941
 -0.4486499211288866"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">residual</span>(model, model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0)
<span class="pl-c1">63686</span><span class="pl-k">-</span>element Vector{Float64}<span class="pl-k">:</span>
 <span class="pl-k">-</span><span class="pl-c1">9.020226301243213</span>
 <span class="pl-c1">11.263958304987227</span>
  ⋮
 <span class="pl-k">-</span><span class="pl-c1">0.01443314653496941</span>
 <span class="pl-k">-</span><span class="pl-c1">0.4486499211288866</span></pre></div>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; meta_nls = nls_meta(model)
julia&gt; Fx = similar(model.meta.x0, meta_nls.nequ)
julia&gt; residual!(model, model.meta.x0, Fx)
63686-element Vector{Float64}:
 -9.020226301243213
 11.263958304987227
  ⋮
 -0.01443314653496941
 -0.4486499211288866"><pre>julia<span class="pl-k">&gt;</span> meta_nls <span class="pl-k">=</span> <span class="pl-c1">nls_meta</span>(model)
julia<span class="pl-k">&gt;</span> Fx <span class="pl-k">=</span> <span class="pl-c1">similar</span>(model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0, meta_nls<span class="pl-k">.</span>nequ)
julia<span class="pl-k">&gt;</span> <span class="pl-c1">residual!</span>(model, model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0, Fx)
<span class="pl-c1">63686</span><span class="pl-k">-</span>element Vector{Float64}<span class="pl-k">:</span>
 <span class="pl-k">-</span><span class="pl-c1">9.020226301243213</span>
 <span class="pl-c1">11.263958304987227</span>
  ⋮
 <span class="pl-k">-</span><span class="pl-c1">0.01443314653496941</span>
 <span class="pl-k">-</span><span class="pl-c1">0.4486499211288866</span></pre></div>
<p dir="auto">You need to call <code>jac_structure_residual!</code> at least once before calling <code>jac_op_residual!</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; meta_nls = nls_meta(model)
julia&gt; rows = Vector{Int}(undef, meta_nls.nnzj)
julia&gt; cols = Vector{Int}(undef, meta_nls.nnzj)
julia&gt; jac_structure_residual!(model, rows, cols)
([1, 1 … 63686, 63686], [1, 2 … 23768, 23769])"><pre>julia<span class="pl-k">&gt;</span> meta_nls <span class="pl-k">=</span> <span class="pl-c1">nls_meta</span>(model)
julia<span class="pl-k">&gt;</span> rows <span class="pl-k">=</span> <span class="pl-c1">Vector</span><span class="pl-c1">{Int}</span>(undef, meta_nls<span class="pl-k">.</span>nnzj)
julia<span class="pl-k">&gt;</span> cols <span class="pl-k">=</span> <span class="pl-c1">Vector</span><span class="pl-c1">{Int}</span>(undef, meta_nls<span class="pl-k">.</span>nnzj)
julia<span class="pl-k">&gt;</span> <span class="pl-c1">jac_structure_residual!</span>(model, rows, cols)
([<span class="pl-c1">1</span>, <span class="pl-c1">1</span> … <span class="pl-c1">63686</span>, <span class="pl-c1">63686</span>], [<span class="pl-c1">1</span>, <span class="pl-c1">2</span> … <span class="pl-c1">23768</span>, <span class="pl-c1">23769</span>])</pre></div>
<p dir="auto">You need to call <code>jac_coord_residual!</code> everytime before calling <code>jac_op_residual!</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; vals = similar(model.meta.x0, meta_nls.nnzj)
julia&gt; jac_coord_residual!(model, model.meta.x0, vals)
764232-element Vector{Float64}:
   545.1179297695714
    -5.058282392703829
     ⋮
     1.680958440896614
     0.06413511779846102"><pre>julia<span class="pl-k">&gt;</span> vals <span class="pl-k">=</span> <span class="pl-c1">similar</span>(model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0, meta_nls<span class="pl-k">.</span>nnzj)
julia<span class="pl-k">&gt;</span> <span class="pl-c1">jac_coord_residual!</span>(model, model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0, vals)
<span class="pl-c1">764232</span><span class="pl-k">-</span>element Vector{Float64}<span class="pl-k">:</span>
   <span class="pl-c1">545.1179297695714</span>
    <span class="pl-k">-</span><span class="pl-c1">5.058282392703829</span>
     ⋮
     <span class="pl-c1">1.680958440896614</span>
     <span class="pl-c1">0.06413511779846102</span></pre></div>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; Jv = similar(model.meta.x0, meta_nls.nequ)
julia&gt; Jtv = similar(model.meta.x0, meta_nls.nvar)
julia&gt; Jx = jac_op_residual!(model, rows, cols, vals, Jv, Jtv)
Linear operator
  nrow: 63686
  ncol: 23769
  eltype: Float64
  symmetric: false
  hermitian: false
  nprod:   0
  ntprod:  0
  nctprod: 0"><pre>julia<span class="pl-k">&gt;</span> Jv <span class="pl-k">=</span> <span class="pl-c1">similar</span>(model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0, meta_nls<span class="pl-k">.</span>nequ)
julia<span class="pl-k">&gt;</span> Jtv <span class="pl-k">=</span> <span class="pl-c1">similar</span>(model<span class="pl-k">.</span>meta<span class="pl-k">.</span>x0, meta_nls<span class="pl-k">.</span>nvar)
julia<span class="pl-k">&gt;</span> Jx <span class="pl-k">=</span> <span class="pl-c1">jac_op_residual!</span>(model, rows, cols, vals, Jv, Jtv)
Linear operator
  nrow<span class="pl-k">:</span> <span class="pl-c1">63686</span>
  ncol<span class="pl-k">:</span> <span class="pl-c1">23769</span>
  eltype<span class="pl-k">:</span> Float64
  symmetric<span class="pl-k">:</span> <span class="pl-c1">false</span>
  hermitian<span class="pl-k">:</span> <span class="pl-c1">false</span>
  nprod<span class="pl-k">:</span>   <span class="pl-c1">0</span>
  ntprod<span class="pl-k">:</span>  <span class="pl-c1">0</span>
  nctprod<span class="pl-k">:</span> <span class="pl-c1">0</span></pre></div>
<p dir="auto">There is no second order information available for problems in this module.</p>
<p dir="auto">Delete unneeded artifacts and free up disk space with <code>delete_ba_artifact!</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; delete_ba_artifact!(&quot;problem-49-7776-pre&quot;)
[ Info: The artifact ladybug/problem-49-7776-pre.txt.bz2 has been deleted"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">delete_ba_artifact!</span>(<span class="pl-s"><span class="pl-pds">"</span>problem-49-7776-pre<span class="pl-pds">"</span></span>)
[ Info<span class="pl-k">:</span> The artifact ladybug<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">49</span><span class="pl-k">-</span><span class="pl-c1">7776</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 has been deleted</pre></div>
<p dir="auto">Use  <code>delete_all_ba_artifacts!</code> to delete all artifacts:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; delete_all_ba_artifacts!()
[ Info: The artifact dubrovnik/problem-16-22106-pre.txt.bz2 was not found
[ Info: The artifact dubrovnik/problem-88-64298-pre.txt.bz2 was not found
 ⋮
[ Info: The artifact ladybug/problem-138-19878-pre.txt.bz2 has been deleted
[ Info: The artifact ladybug/problem-318-41628-pre.txt.bz2 has been deleted
 ⋮
[ Info: The artifact venice/problem-1408-912229-pre.txt.bz2 was not found
[ Info: The artifact venice/problem-1778-993923-pre.txt.bz2 was not found"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">delete_all_ba_artifacts!</span>()
[ Info<span class="pl-k">:</span> The artifact dubrovnik<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">16</span><span class="pl-k">-</span><span class="pl-c1">22106</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 was not found
[ Info<span class="pl-k">:</span> The artifact dubrovnik<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">88</span><span class="pl-k">-</span><span class="pl-c1">64298</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 was not found
 ⋮
[ Info<span class="pl-k">:</span> The artifact ladybug<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">138</span><span class="pl-k">-</span><span class="pl-c1">19878</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 has been deleted
[ Info<span class="pl-k">:</span> The artifact ladybug<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">318</span><span class="pl-k">-</span><span class="pl-c1">41628</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 has been deleted
 ⋮
[ Info<span class="pl-k">:</span> The artifact venice<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">1408</span><span class="pl-k">-</span><span class="pl-c1">912229</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 was not found
[ Info<span class="pl-k">:</span> The artifact venice<span class="pl-k">/</span>problem<span class="pl-k">-</span><span class="pl-c1">1778</span><span class="pl-k">-</span><span class="pl-c1">993923</span><span class="pl-k">-</span>pre<span class="pl-k">.</span>txt<span class="pl-k">.</span>bz2 was not found</pre></div>
<p dir="auto">Special thanks to Célestine Angla for her initial work on this project during her internship.</p>
<p dir="auto">Licensed under the MPL-2.0 <a href="LICENSE.md">License</a></p>
</article></div>