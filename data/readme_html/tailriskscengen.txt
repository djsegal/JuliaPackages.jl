<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-tailriskscengenjl" class="anchor" aria-hidden="true" href="#tailriskscengenjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>TailRiskScenGen.jl</h1>
<p dir="auto">This Julia package provides functionality for generating scenarios for stochastic programs which use a tail risk measure such as the conditional value-at-risk. For problems involving tail risk measure, the value of the tail risk measure depends only a subset of the support of the distribution called the <strong>risk region</strong>. By prioritising the generation of scenarios in the risk region, one can approximate much better the value of a tail risk measure in a stochastic program.</p>
<p dir="auto">This package allows users to construct risk regions and use these scenario generaion and reduction.
Currently risk regions are provided for two types of problems:</p>
<ul dir="auto">
<li>Portfolio selection problem with Elliptical return distributions</li>
<li>Stochastic programs with monotonic loss/recourse functions.</li>
</ul>
<p dir="auto">In the former case it has been shown that the methodology still performs well when the returns have near-elliptical distributions.</p>
<p dir="auto">For more details on this methodology see the following two papers:</p>
<ul dir="auto">
<li><a href="http://arxiv.org/abs/1511.03074" rel="nofollow">Problem-driven scenario generation: an analytical approach for stochastic programs with tail risk measure</a></li>
<li><a href="https://pubsonline.informs.org/doi/10.1287/ijoc.2017.0790" rel="nofollow">Scenario Generation for Single-Period Portfolio Selection Problems with Tail Risk Measures: Coping with High Dimensions and Integer Variables</a></li>
</ul>
<h1 dir="auto"><a id="user-content-risk-regions" class="anchor" aria-hidden="true" href="#risk-regions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Risk regions</h1>
<p dir="auto">The risk region for our class of problems have the following form:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/riskregion1.png?raw=true"><img src="/docs/riskregion1.png?raw=true" alt="Basic form of risk regions" title="Formula for risk regions" style="max-width: 100%;"></a></p>
<p dir="auto">Given this formulation It is difficult to test whether a scenario <code>y</code> is in the risk region. When <code>K</code> is a convex cone, the above expression can be rewritten as follows:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/riskregion2.png?raw=true"><img src="/docs/riskregion2.png?raw=true" alt="Nice form of risk regions" title="Nice formula for risk regions" style="max-width: 100%;"></a></p>
<p dir="auto">where <code>K' = PK</code> and <code>p_k(y)</code> is the projection of the point y onto the cone K.</p>
<p dir="auto">The construction of a risk region requires four parameters: a vector μ, a positive definite matrix Σ=PᵀP, a convex cone K and positive scalar α. The package currently contains two types of cone objects: a FiniteCone and a PolyhedralCone. A FiniteCone object is constructed from a matrix of cone generators where each column corresponds to a cone generator.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="K = FiniteCone(eye(2)) # Constructs cone of positive quadrant in R^2"><pre class="notranslate"><code>K = FiniteCone(eye(2)) # Constructs cone of positive quadrant in R^2
</code></pre></div>
<p dir="auto">We now construct a RiskRegion for Normally distributed returns at the level β = 0.95:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="μ = [0.05, 0.02]
Σ = [[0.5, 0.2] [0.2, 0.5]]
β = 0.95
Ω = RiskRegion(μ, Σ, K, quantile(Normal(), β))"><pre class="notranslate"><code>μ = [0.05, 0.02]
Σ = [[0.5, 0.2] [0.2, 0.5]]
β = 0.95
Ω = RiskRegion(μ, Σ, K, quantile(Normal(), β))
</code></pre></div>
<p dir="auto">Convenience constructors are provided for multivariate normal and t distributions:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Y = MvNormal(μ, Σ)
Ω = RiskRegion(Y, K, β)"><pre class="notranslate"><code>Y = MvNormal(μ, Σ)
Ω = RiskRegion(Y, K, β)
</code></pre></div>
<h1 dir="auto"><a id="user-content-scenario-generation-and-scenario-reduction" class="anchor" aria-hidden="true" href="#scenario-generation-and-scenario-reduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Scenario generation and scenario reduction</h1>
<p dir="auto">Scenario reduction requires a matrix of (equiprobable) scenarios, where each column
corresponds to one scenario, and a risk region. The aggregate_scenarios function
outputs a scenario matrix where all scenarios in the non-risk region have been aggregated into
a single point, and the corresponding vector of scenario probabilities.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="n = 1000                                # Initial number of scenarios
scenarios = rand(Y, num_s)                         # Generate a matrix of scenarios
reduced_set, reduced_probs = aggregate_scenarios(scenarios, Ω) # Reduce scenario set"><pre class="notranslate"><code>n = 1000                                # Initial number of scenarios
scenarios = rand(Y, num_s)                         # Generate a matrix of scenarios
reduced_set, reduced_probs = aggregate_scenarios(scenarios, Ω) # Reduce scenario set
</code></pre></div>
<p dir="auto">A scenario set of specified size can be generated via the <strong>aggregation sampling</strong> algorithm.
This takes a risk region and a distribution, and samples points from this, stores any point in the risk region
and aggregates any in the non-risk region. The algorithm terminates when the required number of points in the risk region have been sampled.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="n = 500 # Scenario set size
scenarios, probs = aggregation_sampling(Y, Ω, n)"><pre class="notranslate"><code>n = 500 # Scenario set size
scenarios, probs = aggregation_sampling(Y, Ω, n)
</code></pre></div>
</article></div>