<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-unitfulassetsjl" class="anchor" aria-hidden="true" href="#unitfulassetsjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>UnitfulAssets.jl</h1>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rmsrosa/UnitfulAssets.jl/workflows/CI/badge.svg"><img src="https://github.com/rmsrosa/UnitfulAssets.jl/workflows/CI/badge.svg" alt="Main Tests Workflow Status" style="max-width: 100%;"></a> <a href="https://codecov.io/gh/rmsrosa/UnitfulAssets.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/3cd1ffc2d4d1aebebcc4e95c6b1b81fd1500927e0cc6051d6613e3224502ffee/68747470733a2f2f636f6465636f762e696f2f67682f726d73726f73612f556e697466756c4173736574732e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/rmsrosa/UnitfulAssets.jl/branch/main/graph/badge.svg" style="max-width: 100%;"></a> <a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/78f47a09877ba9d28da1887a93e5c3bc2efb309c1e910eb21135becd2998238a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d79656c6c6f772e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-yellow.svg" style="max-width: 100%;"></a> <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/0268e5d1033bcd4b94128f9d96d33d3ce0bbfe58dcc2e91e6d32d5a50f101d5d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7265706f2d73697a652f726d73726f73612f556e697466756c4173736574732e6a6c"><img src="https://camo.githubusercontent.com/0268e5d1033bcd4b94128f9d96d33d3ce0bbfe58dcc2e91e6d32d5a50f101d5d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f7265706f2d73697a652f726d73726f73612f556e697466756c4173736574732e6a6c" alt="GitHub repo size" data-canonical-src="https://img.shields.io/github/repo-size/rmsrosa/UnitfulAssets.jl" style="max-width: 100%;"></a> <a href="https://lifecycle.r-lib.org/articles/stages.html" rel="nofollow"><img src="https://camo.githubusercontent.com/42c0373df6a0ab2e26098242307a512273a289eb8581e06fc9acad60121e157a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6966656379636c652d6578706572696d656e74616c2d6f72616e6765" alt="Lifecycle Experimental" data-canonical-src="https://img.shields.io/badge/lifecycle-experimental-orange" style="max-width: 100%;"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="tools/logo/logo_200x200.png"><img src="tools/logo/logo_200x200.png" alt="Logo" style="max-width: 100%;"></a></p>
<p dir="auto">A supplemental units package for <a href="https://github.com/PainterQubits/Unitful.jl">Unitful.jl</a>, adding units for all currently active currencies, some stocks and commodities, along with tools to perform conversions based on exchange market rates.</p>
<p dir="auto"><strong>This package is currently under development and is not yet registered.</strong></p>
<h2 dir="auto"><a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Table of Contents</h2>
<ul dir="auto">
<li><a href="#summary">Summary</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#examples">Examples</a>
<ul dir="auto">
<li><a href="#cost-of-raw-material-for-a-t-shirt">Cost of raw material for a T-shirt</a> - mixing assets with <a href="https://github.com/PainterQubits/Unitful.jl">Unitul.jl</a>'s quantities.</li>
<li><a href="#production-cost">Production cost</a> - creating functions with assets as arguments.</li>
<li><a href="#continuously-varying-interest-rate">Continuously varying interest rate</a> - using <a href="https://github.com/SciML/DifferentialEquations.jl">DifferentialEquations.jl</a> with assets.</li>
<li><a href="#exchange-markets">Exchange markets</a> - generating exchange markets and using different modes of exchange conversion.</li>
<li><a href="#continuously-varying-interest-rate-in-a-foreign-bank">Continuously varying interest rate in a foreign bank</a> - exploiting broadcasting for an array of currency quantities.</li>
<li><a href="#decimal-fixed-decimals-and-rational-rates">Decimal, fixed decimals, and rational rates</a> - using <code>Decimal</code> and <code>Rational</code> types.</li>
</ul>
</li>
<li><a href="#assets-rate-as-unitful-quantity">Assets rate as Unitful quantity</a></li>
<li><a href="#the-list-of-assets">The list of assets</a></li>
<li><a href="#currency-symbols">Currency symbols</a></li>
<li><a href="#to-do">To-do</a></li>
<li><a href="#related-packages">Related packages</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 dir="auto"><a id="user-content-summary" class="anchor" aria-hidden="true" href="#summary"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Summary</h2>
<p dir="auto">Several <strong>assets</strong> such as cash, stock, and commodity are created as Unitful objects. A new dimension is created for each asset, along with its reference unit. Being an extension of <a href="https://github.com/PainterQubits/Unitful.jl">Unitful.jl</a>, asset units play nicely along with Unitful's quantities, units, and dimensions.</p>
<p dir="auto">An <code>ExchangeMarket</code> type is defined as <code>Dict{AssetsPair,Rate}</code>, in which <code>AssetsPair</code> is a tuple of Strings corresponding to the base and quote assets, and <code>Rate</code> contains a positive <code>Unitful.Quantity</code> with the corresponding quote-ask rate for the pair.</p>
<p dir="auto">Based on a given <code>ExchangeMarket</code> instance, a conversion can be made from the "quote" asset to the "base" asset. This conversion is implemented as an extended dispatch for <code>Unitful.uconvert</code>.</p>
<p dir="auto">All defined assets are listed in <a href="src/pkgdefaults.jl">src/pkgdefaults.jl</a>. Some currency symbols are also defined and are listed in <a href="src/currencysymbols.jl">src/currencysymbols.jl</a>.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">This package is compatible with Julia ‚â• 1.2 and Unitful ‚â• 1.0.</p>
<p dir="auto">Since it has not been registered yet, it can be installed directly from the github repo in the Julia REPL, by typing <code>]</code> and <em>adding</em> the url for the repo:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pkg&gt; add https://github.com/rmsrosa/UnitfulAssets.jl"><pre>pkg<span class="pl-k">&gt;</span> add https<span class="pl-k">:</span><span class="pl-k">//</span>github<span class="pl-k">.</span>com<span class="pl-k">/</span>rmsrosa<span class="pl-k">/</span>UnitfulAssets<span class="pl-k">.</span>jl</pre></div>
<h2 dir="auto"><a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Examples</h2>
<p dir="auto">Let us see some examples using <code>UnitfulAssets.jl</code>.</p>
<h3 dir="auto"><a id="user-content-cost-of-raw-material-for-a-t-shirt" class="anchor" aria-hidden="true" href="#cost-of-raw-material-for-a-t-shirt"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Cost of raw material for a T-shirt</h3>
<p dir="auto">As an example, consider a T-shirt with a Julia logo that requires as raw material 1.6 square-meters of 150GSM (grams-per-square-meter) cotton fabric at USD$15 per 44 in x 8 yards bolt; two ounces in dyes at USD$20 per pound; one ounce of dye fixer at US$8 per five pounds; and 48 yards in stitching thread at USD$19 per 1000 yards. Then, we may calculate the cost of the raw material as follows.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Unitful, UnitfulAssets

julia&gt; fabric = 15u&quot;USD&quot;/8u&quot;yd&quot;/44u&quot;inch&quot;
0.04261363636363636 USD inch‚Åª¬π yd‚Åª¬π

julia&gt; dyes = 20u&quot;USD/lb&quot;
20 USD lb‚Åª¬π

julia&gt; fixer = 8u&quot;USD&quot;/5u&quot;lb&quot;
1.6 USD lb‚Åª¬π

julia&gt; thread = 19u&quot;USD&quot;/1000u&quot;yd&quot;
0.019 USD yd‚Åª¬π

julia&gt; cost_per_t_shirt = 1.6u&quot;m^2&quot; * fabric + 2u&quot;oz&quot; * dyes + 1u&quot;oz&quot; * fixer + 48u&quot;yd&quot; * thread;

julia&gt; println(&quot;\nThe cost of raw material per t-shirt is of $cost_per_t_shirt&quot;)

The cost of raw material per t-shirt is of 6.447611931829924 USD"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Unitful, UnitfulAssets

julia<span class="pl-k">&gt;</span> fabric <span class="pl-k">=</span> <span class="pl-c1">15</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">8</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yd<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">44</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>inch<span class="pl-pds">"</span></span>
<span class="pl-c1">0.04261363636363636</span> USD inch‚Åª¬π yd‚Åª¬π

julia<span class="pl-k">&gt;</span> dyes <span class="pl-k">=</span> <span class="pl-c1">20</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD/lb<span class="pl-pds">"</span></span>
<span class="pl-c1">20</span> USD lb‚Åª¬π

julia<span class="pl-k">&gt;</span> fixer <span class="pl-k">=</span> <span class="pl-c1">8</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">5</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>lb<span class="pl-pds">"</span></span>
<span class="pl-c1">1.6</span> USD lb‚Åª¬π

julia<span class="pl-k">&gt;</span> thread <span class="pl-k">=</span> <span class="pl-c1">19</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">1000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yd<span class="pl-pds">"</span></span>
<span class="pl-c1">0.019</span> USD yd‚Åª¬π

julia<span class="pl-k">&gt;</span> cost_per_t_shirt <span class="pl-k">=</span> <span class="pl-c1">1.6</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>m^2<span class="pl-pds">"</span></span> <span class="pl-k">*</span> fabric <span class="pl-k">+</span> <span class="pl-c1">2</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>oz<span class="pl-pds">"</span></span> <span class="pl-k">*</span> dyes <span class="pl-k">+</span> <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>oz<span class="pl-pds">"</span></span> <span class="pl-k">*</span> fixer <span class="pl-k">+</span> <span class="pl-c1">48</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yd<span class="pl-pds">"</span></span> <span class="pl-k">*</span> thread;

julia<span class="pl-k">&gt;</span> <span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>The cost of raw material per t-shirt is of <span class="pl-v">$cost_per_t_shirt</span><span class="pl-pds">"</span></span>)

The cost of raw material per t<span class="pl-k">-</span>shirt is of <span class="pl-c1">6.447611931829924</span> USD</pre></div>
<p dir="auto">Thus, the cost of the raw material is about USD$ 6.45 per T-shirt.</p>
<h3 dir="auto"><a id="user-content-production-cost" class="anchor" aria-hidden="true" href="#production-cost"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Production cost</h3>
<p dir="auto">Suppose, now, that we have a small business to manufacture the T-shirts above. Besides the raw material expenses, we need eletricity for the sewing machine and the workplace, workers, rent, insurance, and so on. With that in mind, we assume we have a fixed overhead cost of USD$ 24000 per year for rent and the essential utilities, insurance and things like that; eletricity expenses for the sewing machine at USD$ 0.13 per kilowatt-hour; and labor at USD$ 10.50 per worker per hour.</p>
<p dir="auto">In order to implement that, we add two nondimensional units, namely <code>tshirt</code> and <code>worker</code>, then we define the price constants above and two functions that give us the total cost and total material used. We do this as follows.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Unitful, UnitfulAssets

julia&gt; module ProductionUnits
           using Unitful
           using Unitful: @unit
           @unit tshirt &quot;tshirt&quot; TShirt 1 false
           @unit worker &quot;worker&quot; Worker 1 false
       end

julia&gt; Unitful.register(ProductionUnits);

julia&gt; fabric = 15u&quot;USD&quot;/8u&quot;yd&quot;/44u&quot;inch&quot;
0.04261363636363636 USD inch‚Åª¬π yd‚Åª¬π

julia&gt; dyes = 20u&quot;USD/lb&quot;
20 USD lb‚Åª¬π

julia&gt; fixer = 8u&quot;USD&quot;/5u&quot;lb&quot;
1.6 USD lb‚Åª¬π

julia&gt; thread = 19u&quot;USD&quot;/1000u&quot;yd&quot;
0.019 USD yd‚Åª¬π

julia&gt; &quot;&quot;&quot;
           raw_material(n::Unitful.Quantity)

       Return the amount of each raw material needed to manufacture `n` T-shirts.

       The argument `n` must be given in `tshirt` units.

       Returns a tuple with the following quantities, respectively:
       * The necessary amount of cotton fabric.
       * The necessary amount of dye.
       * The necessary amount of fixer.
       * The necessary amount of thread.

       &quot;&quot;&quot;
       raw_material(n::Unitful.Quantity) = (1.6u&quot;m^2&quot; * n / u&quot;tshirt&quot;, 2u&quot;oz&quot; * n / u&quot;tshirt&quot;, 1u&quot;oz&quot; * n / u&quot;tshirt&quot;, 48u&quot;yd&quot; * n / u&quot;tshirt&quot;)
raw_material

julia&gt; eletricity_price = 0.13u&quot;USD/kW/hr&quot;
0.13 USD hr‚Åª¬π kW‚Åª¬π

julia&gt; labor_price = 10.50u&quot;USD/worker/hr&quot;
10.5 USD hr‚Åª¬π worker‚Åª¬π

julia&gt; fixed_cost = 24000u&quot;USD/yr&quot;
24000 USD yr‚Åª¬π

julia&gt; &quot;&quot;&quot;
           manufacturing_cost(n::Unitful.Quantity, t::Unitful.Quantity, tlim::Unitful.Quantity=40u&quot;hr/worker/wk&quot;)

       Return the cost of manufacturing `n` T-shirts during a time period `t`.

       The argument `n` must be given in `tshirt` units, and `t`, in time units.
       The optional argument `tlim` is the time limit of work per worker, which       defaults to `40u&quot;hr/worker/wk&quot;`.

       Return a tuple with the following quantities, respectively:
       * The cost of the production, in US Dollars.
       * The cost per T-shirt.
       * The number of labor hours required to produce `n` t-shirts.
       * The minimum number of workers considering the limit given by `tlim`.
       * The eletricity required for the whole manufacturing process.
       &quot;&quot;&quot;
       function production_cost(n::Unitful.Quantity, t::Unitful.Quantity, tlim::Unitful.Quantity=40u&quot;hr/worker/wk&quot;)
           labor_hours = 2u&quot;hr/tshirt&quot; * n
           eletricity_spent = 2u&quot;kW * hr/tshirt&quot; * n
           total_cost = n * raw_material_price + labor_hours * labor_price + eletricity_spent * eletricity_price + fixed_cost * t
           cost_per_tshirt = total_cost / n
           min_num_workers = Int(ceil(labor_hours/tlim/t)) * u&quot;worker&quot;
           return total_cost, cost_per_tshirt, labor_hours, min_num_workers, eletricity_spent
       end
production_cost"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Unitful, UnitfulAssets

julia<span class="pl-k">&gt;</span> <span class="pl-k">module</span> ProductionUnits
           <span class="pl-k">using</span> Unitful
           <span class="pl-k">using</span> Unitful<span class="pl-k">:</span> <span class="pl-c1">@unit</span>
           <span class="pl-c1">@unit</span> tshirt <span class="pl-s"><span class="pl-pds">"</span>tshirt<span class="pl-pds">"</span></span> TShirt <span class="pl-c1">1</span> <span class="pl-c1">false</span>
           <span class="pl-c1">@unit</span> worker <span class="pl-s"><span class="pl-pds">"</span>worker<span class="pl-pds">"</span></span> Worker <span class="pl-c1">1</span> <span class="pl-c1">false</span>
       <span class="pl-k">end</span>

julia<span class="pl-k">&gt;</span> Unitful<span class="pl-k">.</span><span class="pl-c1">register</span>(ProductionUnits);

julia<span class="pl-k">&gt;</span> fabric <span class="pl-k">=</span> <span class="pl-c1">15</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">8</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yd<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">44</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>inch<span class="pl-pds">"</span></span>
<span class="pl-c1">0.04261363636363636</span> USD inch‚Åª¬π yd‚Åª¬π

julia<span class="pl-k">&gt;</span> dyes <span class="pl-k">=</span> <span class="pl-c1">20</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD/lb<span class="pl-pds">"</span></span>
<span class="pl-c1">20</span> USD lb‚Åª¬π

julia<span class="pl-k">&gt;</span> fixer <span class="pl-k">=</span> <span class="pl-c1">8</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">5</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>lb<span class="pl-pds">"</span></span>
<span class="pl-c1">1.6</span> USD lb‚Åª¬π

julia<span class="pl-k">&gt;</span> thread <span class="pl-k">=</span> <span class="pl-c1">19</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-c1">1000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yd<span class="pl-pds">"</span></span>
<span class="pl-c1">0.019</span> USD yd‚Åª¬π

julia<span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">           raw_material(n::Unitful.Quantity)</span>
<span class="pl-s"></span>
<span class="pl-s">       Return the amount of each raw material needed to manufacture `n` T-shirts.</span>
<span class="pl-s"></span>
<span class="pl-s">       The argument `n` must be given in `tshirt` units.</span>
<span class="pl-s"></span>
<span class="pl-s">       Returns a tuple with the following quantities, respectively:</span>
<span class="pl-s">       * The necessary amount of cotton fabric.</span>
<span class="pl-s">       * The necessary amount of dye.</span>
<span class="pl-s">       * The necessary amount of fixer.</span>
<span class="pl-s">       * The necessary amount of thread.</span>
<span class="pl-s"></span>
<span class="pl-s">       <span class="pl-pds">"""</span></span>
       <span class="pl-en">raw_material</span>(n<span class="pl-k">::</span><span class="pl-c1">Unitful.Quantity</span>) <span class="pl-k">=</span> (<span class="pl-c1">1.6</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>m^2<span class="pl-pds">"</span></span> <span class="pl-k">*</span> n <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>oz<span class="pl-pds">"</span></span> <span class="pl-k">*</span> n <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>oz<span class="pl-pds">"</span></span> <span class="pl-k">*</span> n <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>, <span class="pl-c1">48</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yd<span class="pl-pds">"</span></span> <span class="pl-k">*</span> n <span class="pl-k">/</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>)
raw_material

julia<span class="pl-k">&gt;</span> eletricity_price <span class="pl-k">=</span> <span class="pl-c1">0.13</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD/kW/hr<span class="pl-pds">"</span></span>
<span class="pl-c1">0.13</span> USD hr‚Åª¬π kW‚Åª¬π

julia<span class="pl-k">&gt;</span> labor_price <span class="pl-k">=</span> <span class="pl-c1">10.50</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD/worker/hr<span class="pl-pds">"</span></span>
<span class="pl-c1">10.5</span> USD hr‚Åª¬π worker‚Åª¬π

julia<span class="pl-k">&gt;</span> fixed_cost <span class="pl-k">=</span> <span class="pl-c1">24000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD/yr<span class="pl-pds">"</span></span>
<span class="pl-c1">24000</span> USD yr‚Åª¬π

julia<span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">           manufacturing_cost(n::Unitful.Quantity, t::Unitful.Quantity, tlim::Unitful.Quantity=40u"hr/worker/wk")</span>
<span class="pl-s"></span>
<span class="pl-s">       Return the cost of manufacturing `n` T-shirts during a time period `t`.</span>
<span class="pl-s"></span>
<span class="pl-s">       The argument `n` must be given in `tshirt` units, and `t`, in time units.</span>
<span class="pl-s">       The optional argument `tlim` is the time limit of work per worker, which       defaults to `40u"hr/worker/wk"`.</span>
<span class="pl-s"></span>
<span class="pl-s">       Return a tuple with the following quantities, respectively:</span>
<span class="pl-s">       * The cost of the production, in US Dollars.</span>
<span class="pl-s">       * The cost per T-shirt.</span>
<span class="pl-s">       * The number of labor hours required to produce `n` t-shirts.</span>
<span class="pl-s">       * The minimum number of workers considering the limit given by `tlim`.</span>
<span class="pl-s">       * The eletricity required for the whole manufacturing process.</span>
<span class="pl-s">       <span class="pl-pds">"""</span></span>
       <span class="pl-k">function</span> <span class="pl-en">production_cost</span>(n<span class="pl-k">::</span><span class="pl-c1">Unitful.Quantity</span>, t<span class="pl-k">::</span><span class="pl-c1">Unitful.Quantity</span>, tlim<span class="pl-k">::</span><span class="pl-c1">Unitful.Quantity</span><span class="pl-k">=</span><span class="pl-c1">40</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>hr/worker/wk<span class="pl-pds">"</span></span>)
           labor_hours <span class="pl-k">=</span> <span class="pl-c1">2</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>hr/tshirt<span class="pl-pds">"</span></span> <span class="pl-k">*</span> n
           eletricity_spent <span class="pl-k">=</span> <span class="pl-c1">2</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>kW * hr/tshirt<span class="pl-pds">"</span></span> <span class="pl-k">*</span> n
           total_cost <span class="pl-k">=</span> n <span class="pl-k">*</span> raw_material_price <span class="pl-k">+</span> labor_hours <span class="pl-k">*</span> labor_price <span class="pl-k">+</span> eletricity_spent <span class="pl-k">*</span> eletricity_price <span class="pl-k">+</span> fixed_cost <span class="pl-k">*</span> t
           cost_per_tshirt <span class="pl-k">=</span> total_cost <span class="pl-k">/</span> n
           min_num_workers <span class="pl-k">=</span> <span class="pl-c1">Int</span>(<span class="pl-c1">ceil</span>(labor_hours<span class="pl-k">/</span>tlim<span class="pl-k">/</span>t)) <span class="pl-k">*</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>worker<span class="pl-pds">"</span></span>
           <span class="pl-k">return</span> total_cost, cost_per_tshirt, labor_hours, min_num_workers, eletricity_spent
       <span class="pl-k">end</span>
production_cost</pre></div>
<p dir="auto">Now, if we want to see the cost and everything else needed to produce 50 T-shirts <em>per week</em>, we do</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; production_cost(50u&quot;tshirt&quot;, 1u&quot;wk&quot;)
(1845.3395288296892 USD, 36.906790576593785 USD tshirt‚Åª¬π, 100 hr, 3 worker, 100 hr kW)

julia&gt; raw_material(50u&quot;tshirt&quot;)
(80.0 m¬≤, 100 oz, 50 oz, 2400 yd)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">production_cost</span>(<span class="pl-c1">50</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>wk<span class="pl-pds">"</span></span>)
(<span class="pl-c1">1845.3395288296892</span> USD, <span class="pl-c1">36.906790576593785</span> USD tshirt‚Åª¬π, <span class="pl-c1">100</span> hr, <span class="pl-c1">3</span> worker, <span class="pl-c1">100</span> hr kW)

julia<span class="pl-k">&gt;</span> <span class="pl-c1">raw_material</span>(<span class="pl-c1">50</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>)
(<span class="pl-c1">80.0</span> m¬≤, <span class="pl-c1">100</span> oz, <span class="pl-c1">50</span> oz, <span class="pl-c1">2400</span> yd)</pre></div>
<p dir="auto">So, it costs about USD$ 36.91 per T-shirt in this case.</p>
<p dir="auto">If we want to reduce the cost per T-shirt, we increase production, aiming for 2000 T-shirts <em>per month</em>, with workers working 44 hours per week:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; production_cost(2000u&quot;tshirt&quot;, 30u&quot;d&quot;, 44u&quot;hr/worker/wk&quot;)
(57386.47643039496 USD, 28.693238215197482 USD tshirt‚Åª¬π, 4000 hr, 22 worker, 4000 hr kW)

julia&gt; raw_material(2000u&quot;tshirt&quot;)
(3200.0 m¬≤, 4000 oz, 2000 oz, 96000 yd)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">production_cost</span>(<span class="pl-c1">2000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>, <span class="pl-c1">30</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>d<span class="pl-pds">"</span></span>, <span class="pl-c1">44</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>hr/worker/wk<span class="pl-pds">"</span></span>)
(<span class="pl-c1">57386.47643039496</span> USD, <span class="pl-c1">28.693238215197482</span> USD tshirt‚Åª¬π, <span class="pl-c1">4000</span> hr, <span class="pl-c1">22</span> worker, <span class="pl-c1">4000</span> hr kW)

julia<span class="pl-k">&gt;</span> <span class="pl-c1">raw_material</span>(<span class="pl-c1">2000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>tshirt<span class="pl-pds">"</span></span>)
(<span class="pl-c1">3200.0</span> m¬≤, <span class="pl-c1">4000</span> oz, <span class="pl-c1">2000</span> oz, <span class="pl-c1">96000</span> yd)</pre></div>
<p dir="auto">With that, we are able to reduce the cost per T-shirt to about USD$ 28.69.</p>
<p dir="auto"><strong>Exercises:</strong></p>
<ol dir="auto">
<li>
<p dir="auto">Add <em>benefit costs</em> for each worker, so that the number of workers properly affects the cost.</p>
</li>
<li>
<p dir="auto">Add a linear <em>revenue</em> function proportional to the number of T-shirts sold, with proportionality constant being the selling price per T-shirt.</p>
</li>
<li>
<p dir="auto">Add an affine <em>profit</em> function, which is the difference between the revenue function and the cost function.</p>
</li>
<li>
<p dir="auto">Find the <em>break-even</em> point, which is the number of T-shirts where profit vanishes, i.e. neiher profit nor loss is incurred.</p>
</li>
</ol>
<h3 dir="auto"><a id="user-content-continuously-varying-interest-rate" class="anchor" aria-hidden="true" href="#continuously-varying-interest-rate"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Continuously varying interest rate</h3>
<p dir="auto">Here we use the package <a href="https://github.com/SciML/DifferentialEquations.jl">DifferentialEquations.jl</a>.</p>
<p dir="auto">Suppose we have a ¬£1,000 in a savings account in a British bank, with an expected variable interest rate for the next ten years given by</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://render.githubusercontent.com/render/math?math=%5Cqquad%5Cqquad%5Ctext%7Brate%7D(t)=%5Cleft(0.015%2B0.5%5Cfrac%7B(t/%5Ctext%7Byr%7D)%5E2%7D%7B(1%2B(t/%5Ctext%7Byr%7D)%5E3)%7D%5Cright)/yr"><img src="https://render.githubusercontent.com/render/math?math=%5Cqquad%5Cqquad%5Ctext%7Brate%7D(t)=%5Cleft(0.015%2B0.5%5Cfrac%7B(t/%5Ctext%7Byr%7D)%5E2%7D%7B(1%2B(t/%5Ctext%7Byr%7D)%5E3)%7D%5Cright)/yr" alt="formula" style="max-width: 100%;"></a>,</p>
<p dir="auto">and suppose we want to estimate how much we will have after ten years. This can be implemented as follows.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Unitful, UnitfulAssets, DifferentialEquations

julia&gt; rate(t) = (1.5 + 5(t * u&quot;1/yr&quot;)^2 * ( 1 + (t * u&quot;1/yr&quot;)^3)^-1)*u&quot;percent/yr&quot;
rate (generic function with 1 method)

julia&gt; f(u,rate,t) = rate(t) * u
f (generic function with 1 method)

julia&gt; tspan = Tuple([0.0,10.0]*u&quot;yr&quot;)
(0.0 yr, 10.0 yr)

julia&gt; u‚ÇÄ = 1000.0u&quot;GBP&quot;
1000.0 GBP

julia&gt; prob = ODEProblem(f,u‚ÇÄ,tspan,rate)
ODEProblem with uType Quantity{Float64,GBPCURRENCY,Unitful.FreeUnits{(GBP,),GBPCURRENCY,nothing}} and tType Quantity{Float64,ùêì,Unitful.FreeUnits{(yr,),ùêì,nothing}}. In-place: false
timespan: (0.0 yr, 10.0 yr)
u0: 1000.0 GBP

julia&gt; savings = solve(prob);

julia&gt; println(&quot;After $(savings.t[end]), we expect to have $(savings.u[end])&quot;)
After 10.0 yr, we expect to have 1303.6211777402004 GBP"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Unitful, UnitfulAssets, DifferentialEquations

julia<span class="pl-k">&gt;</span> <span class="pl-en">rate</span>(t) <span class="pl-k">=</span> (<span class="pl-c1">1.5</span> <span class="pl-k">+</span> <span class="pl-c1">5</span>(t <span class="pl-k">*</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>1/yr<span class="pl-pds">"</span></span>)<span class="pl-k">^</span><span class="pl-c1">2</span> <span class="pl-k">*</span> ( <span class="pl-c1">1</span> <span class="pl-k">+</span> (t <span class="pl-k">*</span> <span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>1/yr<span class="pl-pds">"</span></span>)<span class="pl-k">^</span><span class="pl-c1">3</span>)<span class="pl-k">^-</span><span class="pl-c1">1</span>)<span class="pl-k">*</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>percent/yr<span class="pl-pds">"</span></span>
rate (generic <span class="pl-k">function</span> with <span class="pl-c1">1</span> method)

julia<span class="pl-k">&gt;</span> <span class="pl-en">f</span>(u,rate,t) <span class="pl-k">=</span> <span class="pl-c1">rate</span>(t) <span class="pl-k">*</span> u
f (generic <span class="pl-k">function</span> with <span class="pl-c1">1</span> method)

julia<span class="pl-k">&gt;</span> tspan <span class="pl-k">=</span> <span class="pl-c1">Tuple</span>([<span class="pl-c1">0.0</span>,<span class="pl-c1">10.0</span>]<span class="pl-k">*</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yr<span class="pl-pds">"</span></span>)
(<span class="pl-c1">0.0</span> yr, <span class="pl-c1">10.0</span> yr)

julia<span class="pl-k">&gt;</span> u‚ÇÄ <span class="pl-k">=</span> <span class="pl-c1">1000.0</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>GBP<span class="pl-pds">"</span></span>
<span class="pl-c1">1000.0</span> GBP

julia<span class="pl-k">&gt;</span> prob <span class="pl-k">=</span> <span class="pl-c1">ODEProblem</span>(f,u‚ÇÄ,tspan,rate)
ODEProblem with uType Quantity{Float64,GBPCURRENCY,Unitful<span class="pl-k">.</span>FreeUnits{(GBP,),GBPCURRENCY,<span class="pl-c1">nothing</span>}} and tType Quantity{Float64,ùêì,Unitful<span class="pl-k">.</span>FreeUnits{(yr,),ùêì,<span class="pl-c1">nothing</span>}}. In<span class="pl-k">-</span>place<span class="pl-k">:</span> <span class="pl-c1">false</span>
timespan<span class="pl-k">:</span> (<span class="pl-c1">0.0</span> yr, <span class="pl-c1">10.0</span> yr)
u0<span class="pl-k">:</span> <span class="pl-c1">1000.0</span> GBP

julia<span class="pl-k">&gt;</span> savings <span class="pl-k">=</span> <span class="pl-c1">solve</span>(prob);

julia<span class="pl-k">&gt;</span> <span class="pl-c1">println</span>(<span class="pl-s"><span class="pl-pds">"</span>After <span class="pl-v">$(savings<span class="pl-k">.</span>t[<span class="pl-c1">end</span>])</span>, we expect to have <span class="pl-v">$(savings<span class="pl-k">.</span>u[<span class="pl-c1">end</span>])</span><span class="pl-pds">"</span></span>)
After <span class="pl-c1">10.0</span> yr, we expect to have <span class="pl-c1">1303.6211777402004</span> GBP</pre></div>
<p dir="auto">Thus, we expect to have about ¬£1,303.62 in our savings account, after ten years.</p>
<h3 dir="auto"><a id="user-content-exchange-markets" class="anchor" aria-hidden="true" href="#exchange-markets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Exchange markets</h3>
<p dir="auto">For exchanging/trading assets, we provide a few dispatches of a function <code>generate_exchmkt</code> to generate a <code>ExchangeMarket</code> instance from a single Tuple, an Array or a Dict with <code>AssetsPair</code> and <code>Rate</code> instances. Consider, for example, the following exchange market:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Unitful, UnitfulAssets

julia&gt; exch_mkt_27nov2020 = generate_exchmkt([
                  (&quot;EUR&quot;,&quot;USD&quot;) =&gt; 1.19536, (&quot;USD&quot;,&quot;EUR&quot;) =&gt; 0.836570,
                  (&quot;EUR&quot;,&quot;GBP&quot;) =&gt; 1.11268, (&quot;GBP&quot;,&quot;EUR&quot;) =&gt; 0.898734,
                  (&quot;USD&quot;,&quot;CAD&quot;) =&gt; 1.29849, (&quot;CAD&quot;,&quot;USD&quot;) =&gt; 0.770125,
                  (&quot;USD&quot;,&quot;BRL&quot;) =&gt; 5.33897, (&quot;BRL&quot;,&quot;USD&quot;) =&gt; 0.187302
              ])
Dict{UnitfulAssets.AssetsPair,UnitfulAssets.Rate} with 8 entries:
  AssetsPair(&quot;USD&quot;, &quot;BRL&quot;) =&gt; Rate(5.33897 BRL USD‚Åª¬π)
  AssetsPair(&quot;USD&quot;, &quot;EUR&quot;) =&gt; Rate(0.83657 EUR USD‚Åª¬π)
  AssetsPair(&quot;EUR&quot;, &quot;GBP&quot;) =&gt; Rate(1.11268 GBP EUR‚Åª¬π)
  AssetsPair(&quot;GBP&quot;, &quot;EUR&quot;) =&gt; Rate(0.898734 EUR GBP‚Åª¬π)
  AssetsPair(&quot;USD&quot;, &quot;CAD&quot;) =&gt; Rate(1.29849 CAD USD‚Åª¬π)
  AssetsPair(&quot;EUR&quot;, &quot;USD&quot;) =&gt; Rate(1.19536 USD EUR‚Åª¬π)
  AssetsPair(&quot;CAD&quot;, &quot;USD&quot;) =&gt; Rate(0.770125 USD CAD‚Åª¬π)
  AssetsPair(&quot;BRL&quot;, &quot;USD&quot;) =&gt; Rate(0.187302 USD BRL‚Åª¬π)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Unitful, UnitfulAssets

julia<span class="pl-k">&gt;</span> exch_mkt_27nov2020 <span class="pl-k">=</span> <span class="pl-c1">generate_exchmkt</span>([
                  (<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">1.19536</span>, (<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.836570</span>,
                  (<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">1.11268</span>, (<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.898734</span>,
                  (<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>CAD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">1.29849</span>, (<span class="pl-s"><span class="pl-pds">"</span>CAD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.770125</span>,
                  (<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">5.33897</span>, (<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.187302</span>
              ])
Dict{UnitfulAssets<span class="pl-k">.</span>AssetsPair,UnitfulAssets<span class="pl-k">.</span>Rate} with <span class="pl-c1">8</span> entries<span class="pl-k">:</span>
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">5.33897</span> BRL USD‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">0.83657</span> EUR USD‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">1.11268</span> GBP EUR‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">0.898734</span> EUR GBP‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>CAD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">1.29849</span> CAD USD‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">1.19536</span> USD EUR‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>CAD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">0.770125</span> USD CAD‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">0.187302</span> USD BRL‚Åª¬π)</pre></div>
<p dir="auto">Then, the conversions between these currencies can be done as follows:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; uconvert(u&quot;BRL&quot;, 100u&quot;USD&quot;, exch_mkt_27nov2020)
533.8969999999999 BRL"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">uconvert</span>(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>BRL<span class="pl-pds">"</span></span>, <span class="pl-c1">100</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span>, exch_mkt_27nov2020)
<span class="pl-c1">533.8969999999999</span> BRL</pre></div>
<p dir="auto">This means that I need about <code>533.90 BRL</code> to buy <code>100 USD</code>.</p>
<p dir="auto">If I have dollars and I want to buy about <code>500 BRL</code>, we do it the other way around:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; uconvert(u&quot;USD&quot;, 500u&quot;BRL&quot;, exch_mkt_27nov2020)
93.651 USD"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">uconvert</span>(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-c1">500</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>BRL<span class="pl-pds">"</span></span>, exch_mkt_27nov2020)
<span class="pl-c1">93.651</span> USD</pre></div>
<p dir="auto">Now, if, instead, I have <code>500 BRL</code> and I want to see how many dollars I can buy with it, I need the same exchange rate as in the first conversion, but in a inverse relation, which is accomplished with the option argument <code>mode=-1</code>, so that</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; uconvert(u&quot;USD&quot;, 500u&quot;BRL&quot;, exch_mkt_27nov2020, mode=-1)
93.65102257551551 USD"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">uconvert</span>(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-c1">500</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>BRL<span class="pl-pds">"</span></span>, exch_mkt_27nov2020, mode<span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">1</span>)
<span class="pl-c1">93.65102257551551</span> USD</pre></div>
<p dir="auto">Another situation is when we don't have a currency pair in the given exchange market, such as <code>("EUR", "CAD")</code>, which is not in <code>exch_mkt_27nov2020</code>. In this case we can use an intermediate currency, if available. In the example market, <code>USD</code> works. The exchange with an intermediate currency is achieved with <code>mode=2</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; uconvert(u&quot;CAD&quot;, 100u&quot;EUR&quot;, exch_mkt_27nov2020, mode=2)
155.21630064 CAD"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">uconvert</span>(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>CAD<span class="pl-pds">"</span></span>, <span class="pl-c1">100</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>EUR<span class="pl-pds">"</span></span>, exch_mkt_27nov2020, mode<span class="pl-k">=</span><span class="pl-c1">2</span>)
<span class="pl-c1">155.21630064</span> CAD</pre></div>
<p dir="auto">Now, if we have <code>150 CAD</code> and want to see how many Euros we can buy with it, we use <code>mode=-2</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; uconvert(u&quot;EUR&quot;, 150u&quot;CAD&quot;, exch_mkt_27nov2020, mode=-2)
96.63933451674102 EUR"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">uconvert</span>(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>EUR<span class="pl-pds">"</span></span>, <span class="pl-c1">150</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>CAD<span class="pl-pds">"</span></span>, exch_mkt_27nov2020, mode<span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">2</span>)
<span class="pl-c1">96.63933451674102</span> EUR</pre></div>
<p dir="auto">There are also a few dispatches of <code>generate_exchmkt</code> to create <code>ExchangeMarket</code> instances from JSON files downloaed from <a href="https://fixer.io" rel="nofollow">fixer.io</a> and <a href="https://currencylayer.com" rel="nofollow">currencylayer.com</a> forex conversion sites. Further conversion providers should be added in the future. In any case, one can easily add a dispatch for the API of one's choice.</p>
<h3 dir="auto"><a id="user-content-continuously-varying-interest-rate-in-a-foreign-bank" class="anchor" aria-hidden="true" href="#continuously-varying-interest-rate-in-a-foreign-bank"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Continuously varying interest rate in a foreign bank</h3>
<p dir="auto">Now, considering again the example above of continuously varying interest rate, suppose that I am actually in Brazil and I want to see the evolution of my savings in terms of Brazillian Reais. Suppose, also, that this happened ten years ago, so we can use some real exchange rates. In this case, I use an exchange rate time series, as follows.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; BRLGBP_timeseries = Dict(
           &quot;2011-01-01&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.38585),
           &quot;2012-01-01&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.34587),
           &quot;2013-01-01&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.29998),
           &quot;2014-01-01&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.25562),
           &quot;2015-01-02&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.24153),
           &quot;2016-01-03&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.17093),
           &quot;2017-01-02&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.24888),
           &quot;2018-01-02&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.22569),
           &quot;2019-01-04&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.21082),
           &quot;2020-01-04&quot; =&gt; generate_exchmkt((&quot;BRL&quot;,&quot;GBP&quot;) =&gt; 0.18784)
       );

julia&gt; uconvert.(u&quot;BRL&quot;, 1000u&quot;GBP&quot;, values(BRLGBP_timeseries), mode=-1)'
1√ó10 LinearAlgebra.Adjoint{Quantity{Float64,BRLCURRENCY,Unitful.FreeUnits{(BRL,),BRLCURRENCY,nothing}},Array{Quantity{Float64,BRLCURRENCY,Unitful.FreeUnits{(BRL,),BRLCURRENCY,nothing}},1}}:
 2591.68 BRL  2891.26 BRL  4018.0 BRL  4743.38 BRL  ‚Ä¶  4140.27 BRL  3912.06 BRL  4430.86 BRL  5323.68 BRL"><pre>julia<span class="pl-k">&gt;</span> BRLGBP_timeseries <span class="pl-k">=</span> <span class="pl-c1">Dict</span>(
           <span class="pl-s"><span class="pl-pds">"</span>2011-01-01<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.38585</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2012-01-01<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.34587</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2013-01-01<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.29998</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2014-01-01<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.25562</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2015-01-02<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.24153</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2016-01-03<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.17093</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2017-01-02<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.24888</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2018-01-02<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.22569</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2019-01-04<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.21082</span>),
           <span class="pl-s"><span class="pl-pds">"</span>2020-01-04<span class="pl-pds">"</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">generate_exchmkt</span>((<span class="pl-s"><span class="pl-pds">"</span>BRL<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>GBP<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">0.18784</span>)
       );

julia<span class="pl-k">&gt;</span> <span class="pl-c1">uconvert</span>.(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>BRL<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>GBP<span class="pl-pds">"</span></span>, <span class="pl-c1">values</span>(BRLGBP_timeseries), mode<span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">1</span>)<span class="pl-k">'</span>
<span class="pl-c1">1</span><span class="pl-k">√ó</span><span class="pl-c1">10</span> LinearAlgebra<span class="pl-k">.</span>Adjoint{Quantity{Float64,BRLCURRENCY,Unitful<span class="pl-k">.</span>FreeUnits{(BRL,),BRLCURRENCY,<span class="pl-c1">nothing</span>}},Array{Quantity{Float64,BRLCURRENCY,Unitful<span class="pl-k">.</span>FreeUnits{(BRL,),BRLCURRENCY,<span class="pl-c1">nothing</span>}},<span class="pl-c1">1</span>}}<span class="pl-k">:</span>
 <span class="pl-c1">2591.68</span> BRL  <span class="pl-c1">2891.26</span> BRL  <span class="pl-c1">4018.0</span> BRL  <span class="pl-c1">4743.38</span> BRL  ‚Ä¶  <span class="pl-c1">4140.27</span> BRL  <span class="pl-c1">3912.06</span> BRL  <span class="pl-c1">4430.86</span> BRL  <span class="pl-c1">5323.68</span> BRL</pre></div>
<p dir="auto">Notice the optional argument <code>mode=-1</code>, so it uses the inverse rate for the conversion. As explained above, this is different than using the rate for the pair <code>("GBP", "BRL")</code> since we don't want to buy <code>GBP</code> with <code>BRL</code>, and neither do we want the direct rate for <code>("BRL", "GBP")</code> since we don't want to buy a specific amount of <code>BRL</code> with <code>GBP</code>. Instead, we want to find out how much <code>BRL</code> we can buy with a given amount of <code>GBP</code>, so we use the inverse of the rate <code>("BRL", "GBP")</code>.</p>
<p dir="auto"><strong>Exercise:</strong> In the <a href="#production-cost">Production cost</a> problem, suppose the raw materials come from a foreign country (or countries). Add an exchange market for properly taking into account the dependency of the production cost, the profit, and the break even point on the foreing currency(ies).</p>
<h3 dir="auto"><a id="user-content-decimal-fixed-decimals-and-rational-rates" class="anchor" aria-hidden="true" href="#decimal-fixed-decimals-and-rational-rates"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Decimal, fixed decimals and rational rates</h3>
<p dir="auto">Since the type <code>Rate</code> has been defined with of value of type <code>Number</code>, it is possible to work with any subtype of <code>Number</code>, such as <code>Decimal</code>, <code>FixedDecimals</code> and <code>Rational</code> rates. For example, the following code generates an <code>ExchangeMarket</code> instance with Rational rates:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; exch_mkt_from_dict_and_rationals = generate_exchmkt(Dict([
                  (&quot;EUR&quot;,&quot;USD&quot;) =&gt; 119536//100000, (&quot;USD&quot;,&quot;EUR&quot;) =&gt; 836570//1000000
              ]))
Dict{UnitfulAssets.AssetsPair,UnitfulAssets.Rate} with 2 entries:
  AssetsPair(&quot;USD&quot;, &quot;EUR&quot;) =&gt; Rate(83657//100000 EUR USD‚Åª¬π)
  AssetsPair(&quot;EUR&quot;, &quot;USD&quot;) =&gt; Rate(7471//6250 USD EUR‚Åª¬π)"><pre>julia<span class="pl-k">&gt;</span> exch_mkt_from_dict_and_rationals <span class="pl-k">=</span> <span class="pl-c1">generate_exchmkt</span>(<span class="pl-c1">Dict</span>([
                  (<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">119536</span><span class="pl-k">//</span><span class="pl-c1">100000</span>, (<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">836570</span><span class="pl-k">//</span><span class="pl-c1">1000000</span>
              ]))
Dict{UnitfulAssets<span class="pl-k">.</span>AssetsPair,UnitfulAssets<span class="pl-k">.</span>Rate} with <span class="pl-c1">2</span> entries<span class="pl-k">:</span>
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">83657</span><span class="pl-k">//</span><span class="pl-c1">100000</span> EUR USD‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">7471</span><span class="pl-k">//</span><span class="pl-c1">6250</span> USD EUR‚Åª¬π)</pre></div>
<p dir="auto">For Decimal rates, it is similar:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using Decimals

julia&gt; exch_mkt_from_dict_and_decimals = generate_exchmkt(Dict([
           (&quot;EUR&quot;,&quot;USD&quot;) =&gt; Decimal(1.19536), (&quot;USD&quot;,&quot;EUR&quot;) =&gt; Decimal(0.836570)
       ]))
Dict{UnitfulAssets.AssetsPair,UnitfulAssets.Rate} with 2 entries:
  AssetsPair(&quot;USD&quot;, &quot;EUR&quot;) =&gt; Rate(0.83657 EUR USD‚Åª¬π)
  AssetsPair(&quot;EUR&quot;, &quot;USD&quot;) =&gt; Rate(1.19536 USD EUR‚Åª¬π)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> Decimals

julia<span class="pl-k">&gt;</span> exch_mkt_from_dict_and_decimals <span class="pl-k">=</span> <span class="pl-c1">generate_exchmkt</span>(<span class="pl-c1">Dict</span>([
           (<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Decimal</span>(<span class="pl-c1">1.19536</span>), (<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Decimal</span>(<span class="pl-c1">0.836570</span>)
       ]))
Dict{UnitfulAssets<span class="pl-k">.</span>AssetsPair,UnitfulAssets<span class="pl-k">.</span>Rate} with <span class="pl-c1">2</span> entries<span class="pl-k">:</span>
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">0.83657</span> EUR USD‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">1.19536</span> USD EUR‚Åª¬π)</pre></div>
<p dir="auto">Similarly for <code>FixedDecimal</code> rates:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using FixedPointDecimals

julia&gt; exch_mkt_from_dict_and_fixeddecimals = generate_exchmkt(Dict([
                         (&quot;EUR&quot;,&quot;USD&quot;) =&gt; FixedDecimal{Int,4}(1.19536), (&quot;USD&quot;,&quot;EUR&quot;) =&gt; FixedDecimal{Int,4}(0.836570)
                     ]))
Dict{UnitfulAssets.AssetsPair, UnitfulAssets.Rate} with 2 entries:
  AssetsPair(&quot;EUR&quot;, &quot;USD&quot;) =&gt; Rate(1.1954 USD EUR‚Åª¬π)
  AssetsPair(&quot;USD&quot;, &quot;EUR&quot;) =&gt; Rate(0.8366 EUR USD‚Åª¬π)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> FixedPointDecimals

julia<span class="pl-k">&gt;</span> exch_mkt_from_dict_and_fixeddecimals <span class="pl-k">=</span> <span class="pl-c1">generate_exchmkt</span>(<span class="pl-c1">Dict</span>([
                         (<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">FixedDecimal</span><span class="pl-c1">{Int,4}</span>(<span class="pl-c1">1.19536</span>), (<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">FixedDecimal</span><span class="pl-c1">{Int,4}</span>(<span class="pl-c1">0.836570</span>)
                     ]))
Dict{UnitfulAssets<span class="pl-k">.</span>AssetsPair, UnitfulAssets<span class="pl-k">.</span>Rate} with <span class="pl-c1">2</span> entries<span class="pl-k">:</span>
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">1.1954</span> USD EUR‚Åª¬π)
  <span class="pl-c1">AssetsPair</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EUR<span class="pl-pds">"</span></span>) <span class="pl-k">=&gt;</span> <span class="pl-c1">Rate</span>(<span class="pl-c1">0.8366</span> EUR USD‚Åª¬π)</pre></div>
<h2 dir="auto"><a id="user-content-assets-rate-as-unitful-quantity" class="anchor" aria-hidden="true" href="#assets-rate-as-unitful-quantity"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Assets rate as Unitful quantity</h2>
<p dir="auto">At some point, I changed the rate from a plain number, such as <code>Rate(1.19536)</code>, to a <code>Unitful.Quantity</code>, such as <code>Rate(1.19536 USD EUR‚Åª¬π)</code>. With that, the associated unit does not need to be formed each time during the conversion from one assets to the other. It becomes simply a multiplication in <code>Unitful</code>. This is especially useful when broadcasting, significantly speeding up the conversion of arrays of currency quantities.</p>
<p dir="auto">For instance, the example in <a href="#continuously-varying-interest-rate-in-a-foreign-bank">Continuously varying interest rate in a foreign bank</a> got more than a 100-fold reduction in speed. These were the respective results in the same machine, using <code>BenchmarkTools</code>, first with the <code>plain rate</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; @btime uconvert.(u&quot;BRL&quot;, 1000u&quot;GBP&quot;, values(BRLGBP_timeseries), mode=-1)'
  2.695 ms (1262 allocations: 71.54 KiB)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">@btime</span> <span class="pl-c1">uconvert</span>.(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>BRL<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>GBP<span class="pl-pds">"</span></span>, <span class="pl-c1">values</span>(BRLGBP_timeseries), mode<span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">1</span>)<span class="pl-k">'</span>
  <span class="pl-c1">2.695</span> ms (<span class="pl-c1">1262</span> allocations<span class="pl-k">:</span> <span class="pl-c1">71.54</span> KiB)</pre></div>
<p dir="auto">and the second with the <code>UnitfulQuantity</code> rate:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; @btime uconvert.(u&quot;BRL&quot;, 1000u&quot;GBP&quot;, values(BRLGBP_timeseries), mode=-1)'
  21.419 Œºs (282 allocations: 14.82 KiB)"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">@btime</span> <span class="pl-c1">uconvert</span>.(<span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>BRL<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>GBP<span class="pl-pds">"</span></span>, <span class="pl-c1">values</span>(BRLGBP_timeseries), mode<span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">1</span>)<span class="pl-k">'</span>
  <span class="pl-c1">21.419</span> Œºs (<span class="pl-c1">282</span> allocations<span class="pl-k">:</span> <span class="pl-c1">14.82</span> KiB)</pre></div>
<h2 dir="auto"><a id="user-content-the-list-of-assets" class="anchor" aria-hidden="true" href="#the-list-of-assets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>The list of assets</h2>
<p dir="auto">The predefined list of assets is obtained from <a href="https://www.currency-iso.org/" rel="nofollow">SNV - Standards Connect the World</a>, more specifically from the <code>xls</code> file in <a href="https://www.currency-iso.org/en/home/tables/table-a1.html" rel="nofollow">Current currency &amp; funds code list</a>, which is converted to a <code>csv</code> file and then to a julia script that calls the macro to generate the assets.</p>
<p dir="auto">The list is supposed to contain all currencies currently active in the world. It also contains some bonds and commodity metals, such as gold and platinum. The full list of currencies, bonds and metals defined in this package are given in <a href="src/pkgdefaults.jl">src/pkgdefaults.jl</a>.</p>
<p dir="auto">More assets can be added by the user.</p>
<h2 dir="auto"><a id="user-content-currency-symbols" class="anchor" aria-hidden="true" href="#currency-symbols"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Currency symbols</h2>
<p dir="auto">Some currency symbols are also defined as Unitful units, namely the US Dollar symbol <code>US\$</code>, equivalent to <code>USD</code>; the Canadian dollar <code>CA\$</code>,equivalent to <code>CAD</code>; the sterling <code>¬£</code>, equivalent to <code>GBR</code>; the euro <code>‚Ç¨</code>, equivalent to <code>EUR</code>; and the Brazilian Real <code>R$</code>, equivalent to <code>BRL</code>.</p>
<p dir="auto">Both the euro and the sterling pound symbols are used as units, so that one may use directly <code>10u"‚Ç¨"</code> and <code>1u"¬£"</code>. Both are unicode characters that can be obtained in the REPL or in some proper Julia environment by tab completion <code>\euro+[TAB]</code> and <code>\sterling+[TAB]</code>.</p>
<p dir="auto">The dollar sign, however, is a reserved sign in Julia, so we do not use it as a unit symbol, but we do use it as an abbreviation. The unit definitions for <code>US\$</code>, <code>CA\$</code>, and <code>R$</code> are, respectively, <code>USdollar</code>, <code>CAdollar</code>, and <code>Real</code>, so for instance we have</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; 1u&quot;USdollar&quot;
1 US$"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>USdollar<span class="pl-pds">"</span></span>
<span class="pl-c1">1</span> US$</pre></div>
<p dir="auto">The list of units with their symbols defined in this package is given in <a href="src/currencysymbols.jl">src/currencysymbols.jl</a></p>
<p dir="auto">Many symbols are used for different currencies, so we do not attempt to define all symbols here. For instance, the yen sign <code>¬•</code> is used both for China's Renminbi, with code <code>CNY</code>, also known as Yuan, as well as for Japan's Yen, with code <code>JPY</code>.</p>
<p dir="auto">If one desires to include the Yen sign for, say China, then one should create a module and not forget about registering the module with Unitful:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module NewUnits
    using Unitful
    using UnitfulAssets

    @unit ¬• &quot;¬•&quot; YuanSign 1.0u&quot;CNY&quot; true
end

Unitful.register(NewUnits)"><pre><span class="pl-k">module</span> NewUnits
    <span class="pl-k">using</span> Unitful
    <span class="pl-k">using</span> UnitfulAssets

    <span class="pl-c1">@unit</span> ¬• <span class="pl-s"><span class="pl-pds">"</span>¬•<span class="pl-pds">"</span></span> YuanSign <span class="pl-c1">1.0</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>CNY<span class="pl-pds">"</span></span> <span class="pl-c1">true</span>
<span class="pl-k">end</span>

Unitful<span class="pl-k">.</span><span class="pl-c1">register</span>(NewUnits)</pre></div>
<p dir="auto">In this case,</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; 1u&quot;¬•&quot;
1 ¬•"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>¬•<span class="pl-pds">"</span></span>
<span class="pl-c1">1</span> ¬•</pre></div>
<p dir="auto">One can even have the same sign for the Chinese yuan and the Japanese yen as abbreviation but with different symbols:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module NewUnits
    using Unitful
    using UnitfulAssets

    @unit yuan &quot;¬•&quot; YuanSign 1.0u&quot;CNY&quot; true
    @unit yen &quot;¬•&quot; YenSign 1.0u&quot;JPY&quot; true
end

Unitful.register(NewUnits)"><pre><span class="pl-k">module</span> NewUnits
    <span class="pl-k">using</span> Unitful
    <span class="pl-k">using</span> UnitfulAssets

    <span class="pl-c1">@unit</span> yuan <span class="pl-s"><span class="pl-pds">"</span>¬•<span class="pl-pds">"</span></span> YuanSign <span class="pl-c1">1.0</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>CNY<span class="pl-pds">"</span></span> <span class="pl-c1">true</span>
    <span class="pl-c1">@unit</span> yen <span class="pl-s"><span class="pl-pds">"</span>¬•<span class="pl-pds">"</span></span> YenSign <span class="pl-c1">1.0</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>JPY<span class="pl-pds">"</span></span> <span class="pl-c1">true</span>
<span class="pl-k">end</span>

Unitful<span class="pl-k">.</span><span class="pl-c1">register</span>(NewUnits)</pre></div>
<p dir="auto">In this case, we have</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; 1u&quot;yen&quot;
1 ¬•

julia&gt; 1u&quot;yuan&quot;
1 ¬•"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yen<span class="pl-pds">"</span></span>
<span class="pl-c1">1</span> ¬•

julia<span class="pl-k">&gt;</span> <span class="pl-c1">1</span><span class="pl-s"><span class="pl-pds"><span class="pl-c1">u</span>"</span>yuan<span class="pl-pds">"</span></span>
<span class="pl-c1">1</span> ¬•</pre></div>
<h2 dir="auto"><a id="user-content-to-do" class="anchor" aria-hidden="true" href="#to-do"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>To do</h2>
<p dir="auto">I have been doing this mostly for learning purposes, but also hoping that it will turn out to be a useful package for the community.</p>
<p dir="auto">There are still a number of things to be added:</p>
<ol dir="auto">
<li>
<p dir="auto">See whether it is possible to display currencies as, say <code>USD$ 10.50</code>, instead of <code>10.50 USD</code>.</p>
</li>
<li>
<p dir="auto">See whether it is possible to display 10-fold multiples of a currency in a better way than say <code>kEUR</code>, <code>MEUR</code>, <code>GMEUR</code>, and so on. It would be great to have <code>USD$ 10k</code>, <code>USD$ 10M</code>, and <code>USD$ 10B</code>.</p>
</li>
<li>
<p dir="auto">Add tools to read exchange markets from web sources other than <a href="https://fixer.io" rel="nofollow">fixer.io</a> and <a href="https://currencylayer.com" rel="nofollow">currencylayer.com</a>.</p>
</li>
<li>
<p dir="auto">Add an option to directly obtain the exchange/trade rates from the web sources using a given API.</p>
</li>
<li>
<p dir="auto">Move README examples to a proper Documenter-generated site.</p>
</li>
</ol>
<h2 dir="auto"><a id="user-content-related-packages" class="anchor" aria-hidden="true" href="#related-packages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Related packages</h2>
<p dir="auto">After I started writing this package, I found out about <a href="https://github.com/bhgomes/UnitfulCurrency.jl">bhgomes/UnitfulCurrency.jl</a>, which, however, has been archived for unknown reasons.</p>
<p dir="auto">Based on <code>bhgomes/UnitfulCurrency</code>, I modified my initial approach of currency pairs to be <code>Rate("EUR", "USD")</code>, instead of a six-length string <code>"EURUSD"</code>, for instance.</p>
<p dir="auto"><code>bhgomes/UnifulCurrency</code>, however, has a single dimension for all currencies, which has the side-effect of allowing to <code>uconvert</code> different quantities without an exchange market rate, on a one-to-one basis. Moreover, all currencies are reference units for the same dimension, which might have further side-effects, although I am not sure.</p>
<p dir="auto">There is no documentation in <code>bhgomes/UnitfulCurrency</code>, and the README is short. It seems, though, that the exchange markets in <code>bhgomes/UnitfulCurrency</code> are defined for each pair, which is different than our approach, in which an exchange market contains a dictionary of currency pairs, allowing for more flexibility, in my point of view.</p>
<p dir="auto">Later I also found out about the github organization <a href="https://github.com/JuliaFinance">JuliaFinance</a>, which has the packages <a href="https://github.com/JuliaFinance/Assets.jl">JuliaFinance/Assets.jl</a> and <a href="https://github.com/JuliaFinance/Currencies.jl">JuliaFinance/Currencies.jl</a>, among others. There are some nice concepts there, distinguishing <em>currencies</em> from <em>assets</em> and <em>cash</em>. Take this excerpt for instance:</p>
<blockquote>
<p dir="auto">"When a currency is thought of as a financial instrument (as opposed to a mere label), we choose to refer to it as "Cash" as it would appear, for example, in a balance sheet. Assets.jl provides a Cash instrument together with a specialized Position type that allows for basic algebraic manipulations of Cash and other financial instrument positions".</p>
</blockquote>
<p dir="auto">However, <code>JuliaFinance/Assets.jl</code> is not based on <code>Unitful</code>, so none of the examples above can be easily implemented.</p>
<p dir="auto">Inspired now by <a href="https://github.com/JuliaFinance">JuliaFinance</a>, and upon realizing that what I have implemented are actually <em>assets</em>, not just currencies, I decided to rename my package to <code>UnitfulAssets.jl</code>. Originally, it was named <code>UnitfulCurrencies.jl</code>.</p>
<h2 dir="auto"><a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">This package is licensed under the <a href="https://opensource.org/licenses/MIT" rel="nofollow">MIT license</a> (see file <a href="LICENSE">LICENSE</a> in the root directory of the project).</p>
</article></div>