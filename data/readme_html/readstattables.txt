<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-readstattablesjl" class="anchor" aria-hidden="true" href="#readstattablesjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ReadStatTables.jl</h1>
<p dir="auto"><em>Read and write Stata, SAS and SPSS data files with Julia tables</em></p>
<p dir="auto"><a href="https://github.com/junyuan-chen/ReadStatTables.jl/actions?query=workflow%3ACI-stable"><img src="https://github.com/junyuan-chen/ReadStatTables.jl/workflows/CI-stable/badge.svg" alt="CI-stable" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/junyuan-chen/ReadStatTables.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/34de369d6301f584e443c94db80f5c3d74b4467de49efd8f4ae4d6bea9c84963/68747470733a2f2f636f6465636f762e696f2f67682f6a756e7975616e2d6368656e2f52656164537461745461626c65732e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e737667" alt="codecov" data-canonical-src="https://codecov.io/gh/junyuan-chen/ReadStatTables.jl/branch/main/graph/badge.svg" style="max-width: 100%;"></a>
<a href="https://juliaci.github.io/NanosoldierReports/pkgeval_badges/R/ReadStatTables.html" rel="nofollow"><img src="https://camo.githubusercontent.com/a7273e6eaffd5adf4fdec5711b4fa32fc592d234db219ab8980b4ec5f8235ef3/68747470733a2f2f6a756c696163692e6769746875622e696f2f4e616e6f736f6c646965725265706f7274732f706b676576616c5f6261646765732f522f52656164537461745461626c65732e737667" alt="PkgEval" data-canonical-src="https://juliaci.github.io/NanosoldierReports/pkgeval_badges/R/ReadStatTables.svg" style="max-width: 100%;"></a>
<a href="https://junyuan-chen.github.io/ReadStatTables.jl/stable/" rel="nofollow"><img src="https://camo.githubusercontent.com/c97f0a5f2ae95755f64a27f1aa8d9a17462941fd3d6c907c7630abd5d3e60acf/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d737461626c652d626c75652e737667" alt="docs-stable" data-canonical-src="https://img.shields.io/badge/docs-stable-blue.svg" style="max-width: 100%;"></a>
<a href="https://junyuan-chen.github.io/ReadStatTables.jl/dev/" rel="nofollow"><img src="https://camo.githubusercontent.com/7fcec4b2d3ab291529fce8ef6a4fcd4129a0683b2f5d5fe2f5c648f02db8b616/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6465762d626c75652e737667" alt="docs-dev" data-canonical-src="https://img.shields.io/badge/docs-dev-blue.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://github.com/junyuan-chen/ReadStatTables.jl">ReadStatTables.jl</a>
is a Julia package for reading and writing Stata, SAS and SPSS data files with
<a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a>-compatible tables.
It utilizes the <a href="https://github.com/WizardMac/ReadStat">ReadStat</a> C library
developed by <a href="https://www.evanmiller.org" rel="nofollow">Evan Miller</a>
for parsing and writing the data files.
The same C library is also the backend of popular packages in other languages such as
<a href="https://github.com/Roche/pyreadstat">pyreadstat</a> for Python
and <a href="https://github.com/tidyverse/haven">haven</a> for R.
As the Julia counterpart for similar purposes,
ReadStatTables.jl leverages the state-of-the-art Julia ecosystem
for usability and performance.
Its read performance, especially when taking advantage of multiple threads,
surpasses all related packages by a sizable margin
based on the benchmark results
<a href="https://github.com/junyuan-chen/ReadStatTablesBenchmarks">here</a>:</p>
<p align="center" dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/junyuan-chen/ReadStatTablesBenchmarks/main/results/stable/stata_10k_500.svg"><img src="https://raw.githubusercontent.com/junyuan-chen/ReadStatTablesBenchmarks/main/results/stable/stata_10k_500.svg" height="252" style="max-width: 100%;"></a><br>
</p>
<h2 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h2>
<p dir="auto">ReadStatTables.jl provides the following features in addition to
wrapping the C interface of ReadStat:</p>
<ul dir="auto">
<li>Fast multi-threaded data collection from ReadStat parsers to a <a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a>-compatible <code>ReadStatTable</code></li>
<li>Interface of file-level and variable-level metadata compatible with <a href="https://github.com/JuliaData/DataAPI.jl">DataAPI.jl</a></li>
<li>Integration of value labels into data columns via a custom array type <code>LabeledArray</code></li>
<li>Translation of date and time values into Julia time types <code>Date</code> and <code>DateTime</code></li>
<li>Write support for <a href="https://github.com/JuliaData/Tables.jl">Tables.jl</a>-compatible tables (experimental)</li>
</ul>
<h2 dir="auto"><a id="user-content-supported-file-formats" class="anchor" aria-hidden="true" href="#supported-file-formats"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Supported File Formats</h2>
<p dir="auto">ReadStatTables.jl recognizes data files with the following file extensions at this moment:</p>
<ul dir="auto">
<li>Stata: <code>.dta</code></li>
<li>SAS: <code>.sas7bdat</code> and <code>.xpt</code></li>
<li>SPSS: <code>.sav</code> and <code>.por</code></li>
</ul>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">ReadStatTables.jl can be installed with the Julia package manager
<a href="https://docs.julialang.org/en/v1/stdlib/Pkg/" rel="nofollow">Pkg</a>.
From the Julia REPL, type <code>]</code> to enter the Pkg REPL and run:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pkg&gt; add ReadStatTables"><pre class="notranslate"><code>pkg&gt; add ReadStatTables
</code></pre></div>
<h2 dir="auto"><a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Quick Start</h2>
<p dir="auto">To read a data file located at <code>data/sample.dta</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; using ReadStatTables

julia&gt; tb = readstat(&quot;data/sample.dta&quot;)
5×7 ReadStatTable:
 Row │  mychar    mynum      mydate                dtime         mylabl           myord               mytime 
     │ String3  Float64       Date?            DateTime?  Labeled{Int8}  Labeled{Int8?}             DateTime 
─────┼───────────────────────────────────────────────────────────────────────────────────────────────────────
   1 │       a      1.1  2018-05-06  2018-05-06T10:10:10           Male             low  1960-01-01T10:10:10
   2 │       b      1.2  1880-05-06  1880-05-06T10:10:10         Female          medium  1960-01-01T23:10:10
   3 │       c  -1000.3  1960-01-01  1960-01-01T00:00:00           Male            high  1960-01-01T00:00:00
   4 │       d     -1.4  1583-01-01  1583-01-01T00:00:00         Female             low  1960-01-01T16:10:10
   5 │       e   1000.3     missing              missing           Male         missing  2000-01-01T00:00:00"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-k">using</span> ReadStatTables

julia<span class="pl-k">&gt;</span> tb <span class="pl-k">=</span> <span class="pl-c1">readstat</span>(<span class="pl-s"><span class="pl-pds">"</span>data/sample.dta<span class="pl-pds">"</span></span>)
<span class="pl-c1">5</span><span class="pl-k">×</span><span class="pl-c1">7</span> ReadStatTable<span class="pl-k">:</span>
 Row │  mychar    mynum      mydate                dtime         mylabl           myord               mytime 
     │ String3  Float64       Date?            DateTime?  Labeled{Int8}  Labeled{Int8?}             DateTime 
─────┼───────────────────────────────────────────────────────────────────────────────────────────────────────
   <span class="pl-c1">1</span> │       a      <span class="pl-c1">1.1</span>  <span class="pl-c1">2018</span><span class="pl-k">-</span><span class="pl-c1">05</span><span class="pl-k">-</span><span class="pl-c1">06</span>  <span class="pl-c1">2018</span><span class="pl-k">-</span><span class="pl-c1">05</span><span class="pl-k">-</span><span class="pl-c1">06</span>T10<span class="pl-k">:</span><span class="pl-c1">10</span><span class="pl-k">:</span><span class="pl-c1">10</span>           Male             low  <span class="pl-c1">1960</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T10<span class="pl-k">:</span><span class="pl-c1">10</span><span class="pl-k">:</span><span class="pl-c1">10</span>
   <span class="pl-c1">2</span> │       b      <span class="pl-c1">1.2</span>  <span class="pl-c1">1880</span><span class="pl-k">-</span><span class="pl-c1">05</span><span class="pl-k">-</span><span class="pl-c1">06</span>  <span class="pl-c1">1880</span><span class="pl-k">-</span><span class="pl-c1">05</span><span class="pl-k">-</span><span class="pl-c1">06</span>T10<span class="pl-k">:</span><span class="pl-c1">10</span><span class="pl-k">:</span><span class="pl-c1">10</span>         Female          medium  <span class="pl-c1">1960</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T23<span class="pl-k">:</span><span class="pl-c1">10</span><span class="pl-k">:</span><span class="pl-c1">10</span>
   <span class="pl-c1">3</span> │       c  <span class="pl-k">-</span><span class="pl-c1">1000.3</span>  <span class="pl-c1">1960</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>  <span class="pl-c1">1960</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T00<span class="pl-k">:</span><span class="pl-c1">00</span><span class="pl-k">:</span><span class="pl-c1">00</span>           Male            high  <span class="pl-c1">1960</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T00<span class="pl-k">:</span><span class="pl-c1">00</span><span class="pl-k">:</span><span class="pl-c1">00</span>
   <span class="pl-c1">4</span> │       d     <span class="pl-k">-</span><span class="pl-c1">1.4</span>  <span class="pl-c1">1583</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>  <span class="pl-c1">1583</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T00<span class="pl-k">:</span><span class="pl-c1">00</span><span class="pl-k">:</span><span class="pl-c1">00</span>         Female             low  <span class="pl-c1">1960</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T16<span class="pl-k">:</span><span class="pl-c1">10</span><span class="pl-k">:</span><span class="pl-c1">10</span>
   <span class="pl-c1">5</span> │       e   <span class="pl-c1">1000.3</span>     <span class="pl-c1">missing</span>              <span class="pl-c1">missing</span>           Male         <span class="pl-c1">missing</span>  <span class="pl-c1">2000</span><span class="pl-k">-</span><span class="pl-c1">01</span><span class="pl-k">-</span><span class="pl-c1">01</span>T00<span class="pl-k">:</span><span class="pl-c1">00</span><span class="pl-k">:</span><span class="pl-c1">00</span></pre></div>
<p dir="auto">To access a column from the above table:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; tb.myord
5-element LabeledVector{Union{Missing, Int8}, Vector{Union{Missing, Int8}}, Union{Char, Int32}}:
 1 =&gt; low
 2 =&gt; medium
 3 =&gt; high
 1 =&gt; low
 missing =&gt; missing"><pre>julia<span class="pl-k">&gt;</span> tb<span class="pl-k">.</span>myord
<span class="pl-c1">5</span><span class="pl-k">-</span>element LabeledVector{Union{Missing, Int8}, Vector{Union{Missing, Int8}}, Union{Char, Int32}}<span class="pl-k">:</span>
 <span class="pl-c1">1</span> <span class="pl-k">=&gt;</span> low
 <span class="pl-c1">2</span> <span class="pl-k">=&gt;</span> medium
 <span class="pl-c1">3</span> <span class="pl-k">=&gt;</span> high
 <span class="pl-c1">1</span> <span class="pl-k">=&gt;</span> low
 <span class="pl-c1">missing</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">missing</span></pre></div>
<p dir="auto">Notice that for data variables with value labels,
both the original values and the value labels are preserved.</p>
<p dir="auto">File-level and variable-level metadata can be retrieved and modified
via methods compatible with <a href="https://github.com/JuliaData/DataAPI.jl">DataAPI.jl</a>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; metadata(tb)
ReadStatMeta:
  row count           =&gt; 5
  var count           =&gt; 7
  modified time       =&gt; 2021-04-23T04:36:00
  file format version =&gt; 118
  file label          =&gt; A test file
  file extension      =&gt; .dta

julia&gt; colmetadata(tb, :mylabl)
ReadStatColMeta:
  label         =&gt; labeled
  format        =&gt; %16.0f
  type          =&gt; READSTAT_TYPE_INT8
  value label   =&gt; mylabl
  storage width =&gt; 1
  display width =&gt; 16
  measure       =&gt; READSTAT_MEASURE_UNKNOWN
  alignment     =&gt; READSTAT_ALIGNMENT_RIGHT"><pre>julia<span class="pl-k">&gt;</span> <span class="pl-c1">metadata</span>(tb)
ReadStatMeta<span class="pl-k">:</span>
  row count           <span class="pl-k">=&gt;</span> <span class="pl-c1">5</span>
  var count           <span class="pl-k">=&gt;</span> <span class="pl-c1">7</span>
  modified time       <span class="pl-k">=&gt;</span> <span class="pl-c1">2021</span><span class="pl-k">-</span><span class="pl-c1">04</span><span class="pl-k">-</span><span class="pl-c1">23</span>T04<span class="pl-k">:</span><span class="pl-c1">36</span><span class="pl-k">:</span><span class="pl-c1">00</span>
  file format version <span class="pl-k">=&gt;</span> <span class="pl-c1">118</span>
  file label          <span class="pl-k">=&gt;</span> A test file
  file extension      <span class="pl-k">=&gt;</span> <span class="pl-k">.</span>dta

julia<span class="pl-k">&gt;</span> <span class="pl-c1">colmetadata</span>(tb, <span class="pl-c1">:mylabl</span>)
ReadStatColMeta<span class="pl-k">:</span>
  label         <span class="pl-k">=&gt;</span> labeled
  format        <span class="pl-k">=&gt;</span> <span class="pl-k">%</span><span class="pl-c1">16.0</span>f
  type          <span class="pl-k">=&gt;</span> READSTAT_TYPE_INT8
  value label   <span class="pl-k">=&gt;</span> mylabl
  storage width <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>
  display width <span class="pl-k">=&gt;</span> <span class="pl-c1">16</span>
  measure       <span class="pl-k">=&gt;</span> READSTAT_MEASURE_UNKNOWN
  alignment     <span class="pl-k">=&gt;</span> READSTAT_ALIGNMENT_RIGHT</pre></div>
<p dir="auto">For more details, please see the <a href="https://junyuan-chen.github.io/ReadStatTables.jl/stable/" rel="nofollow">documentation</a>.</p>
</article></div>