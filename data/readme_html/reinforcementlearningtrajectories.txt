<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-reinforcementlearningtrajectories" class="anchor" aria-hidden="true" href="#reinforcementlearningtrajectories"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ReinforcementLearningTrajectories</h1>
<p dir="auto"><a href="https://github.com/JuliaReinforcementLearning/ReinforcementLearningTrajectories.jl/actions/workflows/CI.yml?query=branch%3Amain"><img src="https://github.com/JuliaReinforcementLearning/ReinforcementLearningTrajectories.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status" style="max-width: 100%;"></a>
<a href="https://codecov.io/gh/JuliaReinforcementLearning/ReinforcementLearningTrajectories.jl" rel="nofollow"><img src="https://camo.githubusercontent.com/fb0be31164573f16c26b2e7dd999e4fb102f7ecbfb3a908c2c6569c9a1bc94ca/68747470733a2f2f636f6465636f762e696f2f67682f4a756c69615265696e666f7263656d656e744c6561726e696e672f5265696e666f7263656d656e744c6561726e696e675472616a6563746f726965732e6a6c2f6272616e63682f6d61696e2f67726170682f62616467652e737667" alt="Coverage" data-canonical-src="https://codecov.io/gh/JuliaReinforcementLearning/ReinforcementLearningTrajectories.jl/branch/main/graph/badge.svg" style="max-width: 100%;"></a>
<a href="https://JuliaCI.github.io/NanosoldierReports/pkgeval_badges/report.html" rel="nofollow"><img src="https://camo.githubusercontent.com/5f1d4b5ef2b91eb2ed0414894c65a117e82c6063b532a644baf8ca5e3544938c/68747470733a2f2f4a756c696143492e6769746875622e696f2f4e616e6f736f6c646965725265706f7274732f706b676576616c5f6261646765732f542f5472616a6563746f726965732e737667" alt="PkgEval" data-canonical-src="https://JuliaCI.github.io/NanosoldierReports/pkgeval_badges/T/Trajectories.svg" style="max-width: 100%;"></a></p>
<h2 dir="auto"><a id="user-content-design" class="anchor" aria-hidden="true" href="#design"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Design</h2>
<p dir="auto">The relationship of several concepts provided in this package:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="┌───────────────────────────────────┐
│ Trajectory                        │
│ ┌───────────────────────────────┐ │
│ │ AbstractTraces                │ │
│ │             ┌───────────────┐ │ │
│ │ :trace_A =&gt; │ AbstractTrace │ │ │
│ │             └───────────────┘ │ │
│ │                               │ │
│ │             ┌───────────────┐ │ │
│ │ :trace_B =&gt; │ AbstractTrace │ │ │
│ │             └───────────────┘ │ │
│ │  ...             ...          │ │
│ └───────────────────────────────┘ │
│          ┌───────────┐            │
│          │  Sampler  │            │
│          └───────────┘            │
│         ┌────────────┐            │
│         │ Controller │            │
│         └────────────┘            │
└───────────────────────────────────┘"><pre class="notranslate"><code>┌───────────────────────────────────┐
│ Trajectory                        │
│ ┌───────────────────────────────┐ │
│ │ AbstractTraces                │ │
│ │             ┌───────────────┐ │ │
│ │ :trace_A =&gt; │ AbstractTrace │ │ │
│ │             └───────────────┘ │ │
│ │                               │ │
│ │             ┌───────────────┐ │ │
│ │ :trace_B =&gt; │ AbstractTrace │ │ │
│ │             └───────────────┘ │ │
│ │  ...             ...          │ │
│ └───────────────────────────────┘ │
│          ┌───────────┐            │
│          │  Sampler  │            │
│          └───────────┘            │
│         ┌────────────┐            │
│         │ Controller │            │
│         └────────────┘            │
└───────────────────────────────────┘
</code></pre></div>
<h2 dir="auto"><a id="user-content-trajectory" class="anchor" aria-hidden="true" href="#trajectory"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><code>Trajectory</code></h2>
<p dir="auto">A <code>Trajectory</code> contains 3 parts:</p>
<ul dir="auto">
<li>A <code>container</code> to store data. (Usually an <code>AbstractTraces</code>)</li>
<li>A <code>sampler</code> to determine how to sample a batch from <code>container</code></li>
<li>A <code>controller</code> to decide when to sample a new batch from the <code>container</code></li>
</ul>
<p dir="auto">Typical usage:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="julia&gt; t = Trajectory(Traces(a=Int[], b=Bool[]), BatchSampler(3), InsertSampleRatioControler(1.0, 3));

julia&gt; for i in 1:5
           push!(t, (a=i, b=iseven(i)))
       end

julia&gt; for batch in t
           println(batch)
       end
(a = [4, 5, 1], b = Bool[1, 0, 0])
(a = [3, 2, 4], b = Bool[0, 1, 1])
(a = [4, 1, 2], b = Bool[1, 0, 1])"><pre>julia<span class="pl-k">&gt;</span> t <span class="pl-k">=</span> <span class="pl-c1">Trajectory</span>(<span class="pl-c1">Traces</span>(a<span class="pl-k">=</span>Int[], b<span class="pl-k">=</span>Bool[]), <span class="pl-c1">BatchSampler</span>(<span class="pl-c1">3</span>), <span class="pl-c1">InsertSampleRatioControler</span>(<span class="pl-c1">1.0</span>, <span class="pl-c1">3</span>));

julia<span class="pl-k">&gt;</span> <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">5</span>
           <span class="pl-c1">push!</span>(t, (a<span class="pl-k">=</span>i, b<span class="pl-k">=</span><span class="pl-c1">iseven</span>(i)))
       <span class="pl-k">end</span>

julia<span class="pl-k">&gt;</span> <span class="pl-k">for</span> batch <span class="pl-k">in</span> t
           <span class="pl-c1">println</span>(batch)
       <span class="pl-k">end</span>
(a <span class="pl-k">=</span> [<span class="pl-c1">4</span>, <span class="pl-c1">5</span>, <span class="pl-c1">1</span>], b <span class="pl-k">=</span> Bool[<span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>])
(a <span class="pl-k">=</span> [<span class="pl-c1">3</span>, <span class="pl-c1">2</span>, <span class="pl-c1">4</span>], b <span class="pl-k">=</span> Bool[<span class="pl-c1">0</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>])
(a <span class="pl-k">=</span> [<span class="pl-c1">4</span>, <span class="pl-c1">1</span>, <span class="pl-c1">2</span>], b <span class="pl-k">=</span> Bool[<span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>])</pre></div>
<p dir="auto"><strong>Traces</strong></p>
<ul dir="auto">
<li><code>Traces</code></li>
<li><code>MultiplexTraces</code></li>
<li><code>CircularSARTTraces</code></li>
<li><code>Episode</code></li>
<li><code>Episodes</code></li>
</ul>
<p dir="auto"><strong>Samplers</strong></p>
<ul dir="auto">
<li><code>BatchSampler</code></li>
<li><code>MetaSampler</code></li>
<li><code>MultiBatchSampler</code></li>
</ul>
<p dir="auto"><strong>Controllers</strong></p>
<ul dir="auto">
<li><code>InsertSampleRatioController</code></li>
<li><code>AsyncInsertSampleRatioController</code></li>
</ul>
<p dir="auto">Please refer tests for common usage. (TODO: generate docs and add links to above data structures)</p>
<h2 dir="auto"><a id="user-content-acknowledgement" class="anchor" aria-hidden="true" href="#acknowledgement"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Acknowledgement</h2>
<p dir="auto">This async version is mainly inspired by <a href="https://github.com/deepmind/reverb">deepmind/reverb</a>.</p>
</article></div>