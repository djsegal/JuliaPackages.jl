<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-earthenginerestjl" class="anchor" aria-hidden="true" href="#earthenginerestjl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>EarthEngineREST.jl</h1>
<p dir="auto">Julia package to send REST API requests to Google Earth Engine</p>
<h2 dir="auto"><a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Introduction</h2>
<p dir="auto">The <code>EarthEngineREST.jl</code> package aims to make connecting Earth Engine (EE) computations with Julia processing easier. This package is meant to interface with <a href="https://kmarkert.github.io/EarthEngine.jl/dev/" rel="nofollow"><code>EarthEngine.jl</code></a> and request Julia types/data from EE Types. While this package provides this fuctionality, the broader goal is to provide the <a href="https://developers.google.com/earth-engine/reference/rest" rel="nofollow">full capabilities of the Earth Engine REST API</a></p>
<p dir="auto">It should be noted that restee relies on fairly new and advanced EE features that may not be suitable for all users (see <a href="https://developers.google.com/earth-engine/reference#audience" rel="nofollow">warning from the EE team</a>). If you are new to Earth Engine, please get started with the <a href="https://developers.google.com/earth-engine/getstarted" rel="nofollow">JavaScript guide</a>.</p>
<h2 dir="auto"><a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto"><code>EarthEngineREST.jl</code> is available through the Julia package registry, therefore you can install using the following code:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ julia
julia&gt; ]
pkg&gt; add EarthEngineREST
julia&gt; using EarthEngineREST"><pre class="notranslate"><code>$ julia
julia&gt; ]
pkg&gt; add EarthEngineREST
julia&gt; using EarthEngineREST
</code></pre></div>
<p dir="auto"><code>EarthEngineREST</code> requires that the <code>EarthEngine</code> Julia packaged is installed as well. To do this, please see the <a href="https://kmarkert.github.io/EarthEngine.jl/dev/#Installation" rel="nofollow"><code>EarthEngine</code> installation guide</a></p>
<h2 dir="auto"><a id="user-content-quick-start" class="anchor" aria-hidden="true" href="#quick-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Quick start</h2>
<p dir="auto">This quick start example illustrates some of the core functionality of requesting Earth Engine computations to Julia types. To get started, you will need to import the packages and authenticate the APIs:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="using EarthEngine
using EarthEngineREST

session = EESession(&quot;secret_key.json&quot;)

Initialize(session)"><pre><span class="pl-k">using</span> EarthEngine
<span class="pl-k">using</span> EarthEngineREST

session <span class="pl-k">=</span> <span class="pl-c1">EESession</span>(<span class="pl-s"><span class="pl-pds">"</span>secret_key.json<span class="pl-pds">"</span></span>)

<span class="pl-c1">Initialize</span>(session)</pre></div>
<p dir="auto">Here the packages are imported and an authorized session for requesting information is created from your private key file for your service account. To get a private key file for your service account see the following the <a href="https://developers.google.com/earth-engine/reference/Quickstart#obtain-a-private-key-file-for-your-service-account" rel="nofollow">offical Earth Engine REST API Quickstart guide</a>. The authorized session can also be used to Initialize the <code>EarthEngine</code> API as above.</p>
<p dir="auto">Next we will using <code>EathEngine</code> to create some computations:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="states = EE.FeatureCollection(&quot;TIGER/2018/States&quot;)
neus = filter(states,inList(&quot;NAME&quot;,(
    &quot;Maine&quot;,&quot;Vermont&quot;,&quot;New Hampshire&quot;, &quot;Massachusetts&quot;
)))


# Imagery: NDVI vegetation index from MODIS.
band = &quot;NDVI&quot;
images = select(EE.ImageCollection(&quot;MODIS/006/MOD13Q1&quot;), band)
image = first(images)

computation = reduceRegions(
    image;
    collection=neus,
    reducer=setOutputs(mean(EE.Reducer()),(band,)),
    scale=nominalScale(projection(image))
)"><pre>states <span class="pl-k">=</span> EE<span class="pl-k">.</span><span class="pl-c1">FeatureCollection</span>(<span class="pl-s"><span class="pl-pds">"</span>TIGER/2018/States<span class="pl-pds">"</span></span>)
neus <span class="pl-k">=</span> <span class="pl-c1">filter</span>(states,<span class="pl-c1">inList</span>(<span class="pl-s"><span class="pl-pds">"</span>NAME<span class="pl-pds">"</span></span>,(
    <span class="pl-s"><span class="pl-pds">"</span>Maine<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>Vermont<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>New Hampshire<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Massachusetts<span class="pl-pds">"</span></span>
)))


<span class="pl-c"><span class="pl-c">#</span> Imagery: NDVI vegetation index from MODIS.</span>
band <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>NDVI<span class="pl-pds">"</span></span>
images <span class="pl-k">=</span> <span class="pl-c1">select</span>(EE<span class="pl-k">.</span><span class="pl-c1">ImageCollection</span>(<span class="pl-s"><span class="pl-pds">"</span>MODIS/006/MOD13Q1<span class="pl-pds">"</span></span>), band)
image <span class="pl-k">=</span> <span class="pl-c1">first</span>(images)

computation <span class="pl-k">=</span> <span class="pl-c1">reduceRegions</span>(
    image;
    collection<span class="pl-k">=</span>neus,
    reducer<span class="pl-k">=</span><span class="pl-c1">setOutputs</span>(<span class="pl-c1">mean</span>(EE<span class="pl-k">.</span><span class="pl-c1">Reducer</span>()),(band,)),
    scale<span class="pl-k">=</span><span class="pl-c1">nominalScale</span>(<span class="pl-c1">projection</span>(image))
)</pre></div>
<p dir="auto">Now that we have defined the computation, we can request that table using <code>computetable</code>.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="tableresult = computetable(session, computation)

# 4×16 DataFrame
#  Row │ ALAND        AWATER       DIVISION  FUNCSTAT  GEOID   INTPTLAT     INTPTLON      LSAD    MTFCC   NAME           NDVI     REGION  STATEFP  STATENS   STUSPS  geom             ⋯
#      │ Int64        Int64        String    String    String  String       String        String  String  String         Float64  String  String   String    String  IGeometr…        ⋯
# ─────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
#    1 │ 23189413166   1026675248  1         A         33      +43.6726907  -071.5843145  00      G4000   New Hampshire  2579.07  1       33       01779794  NH      Geometry: wkbPol ⋯
#    2 │ 23874175944   1030416650  1         A         50      +44.0685773  -072.6691839  00      G4000   Vermont        1940.65  1       50       01779802  VT      Geometry: wkbPol
#    3 │ 79887426037  11746549764  1         A         23      +45.4092843  -068.6666160  00      G4000   Maine          1911.13  1       23       01779787  ME      Geometry: wkbPol
#    4 │ 20205125364   7129925486  1         A         25      +42.1565196  -071.4895915  00      G4000   Massachusetts  4190.74  1       25       00606926  MA      Geometry: wkbPol
#                                                                                                                                                                      1 column omitted"><pre>tableresult <span class="pl-k">=</span> <span class="pl-c1">computetable</span>(session, computation)

<span class="pl-c"><span class="pl-c">#</span> 4×16 DataFrame</span>
<span class="pl-c"><span class="pl-c">#</span>  Row │ ALAND        AWATER       DIVISION  FUNCSTAT  GEOID   INTPTLAT     INTPTLON      LSAD    MTFCC   NAME           NDVI     REGION  STATEFP  STATENS   STUSPS  geom             ⋯</span>
<span class="pl-c"><span class="pl-c">#</span>      │ Int64        Int64        String    String    String  String       String        String  String  String         Float64  String  String   String    String  IGeometr…        ⋯</span>
<span class="pl-c"><span class="pl-c">#</span> ─────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class="pl-c"><span class="pl-c">#</span>    1 │ 23189413166   1026675248  1         A         33      +43.6726907  -071.5843145  00      G4000   New Hampshire  2579.07  1       33       01779794  NH      Geometry: wkbPol ⋯</span>
<span class="pl-c"><span class="pl-c">#</span>    2 │ 23874175944   1030416650  1         A         50      +44.0685773  -072.6691839  00      G4000   Vermont        1940.65  1       50       01779802  VT      Geometry: wkbPol</span>
<span class="pl-c"><span class="pl-c">#</span>    3 │ 79887426037  11746549764  1         A         23      +45.4092843  -068.6666160  00      G4000   Maine          1911.13  1       23       01779787  ME      Geometry: wkbPol</span>
<span class="pl-c"><span class="pl-c">#</span>    4 │ 20205125364   7129925486  1         A         25      +42.1565196  -071.4895915  00      G4000   Massachusetts  4190.74  1       25       00606926  MA      Geometry: wkbPol</span>
<span class="pl-c"><span class="pl-c">#</span>                                                                                                                                                                      1 column omitted</span></pre></div>
<p dir="auto">We can also request image data. To do this, we need to define the geographic coordinate of to the image data we would like and then requst the data using <code>computepixels</code>:</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# define a pixel grid for the Northeast US states at about 1km
pixelgrid = PixelGrid(session, neus, 0.01, &quot;EPSG:4326&quot;)

data = computepixels(session, pixelgrid, image)
# 62x627x1 Array{Int16, 3} with AffineMap([0.01 0.0; 0.0 -0.01], [-73.50818980721034, 47.459858919112]) and CRS EPSG:4326"><pre><span class="pl-c"><span class="pl-c">#</span> define a pixel grid for the Northeast US states at about 1km</span>
pixelgrid <span class="pl-k">=</span> <span class="pl-c1">PixelGrid</span>(session, neus, <span class="pl-c1">0.01</span>, <span class="pl-s"><span class="pl-pds">"</span>EPSG:4326<span class="pl-pds">"</span></span>)

data <span class="pl-k">=</span> <span class="pl-c1">computepixels</span>(session, pixelgrid, image)
<span class="pl-c"><span class="pl-c">#</span> 62x627x1 Array{Int16, 3} with AffineMap([0.01 0.0; 0.0 -0.01], [-73.50818980721034, 47.459858919112]) and CRS EPSG:4326</span></pre></div>
<p dir="auto">If we plot the results we should see something like the following image:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="docs/src/assets/ndvi_example.png"><img src="docs/src/assets/ndvi_example.png" alt="ndvi_example" style="max-width: 100%;"></a></p>
<p dir="auto">Lastly, to illustrate how to get data from non-spatial computations, here we gather some metadata information from the image and make requests.</p>
<div class="highlight highlight-source-julia notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# compute the band names and get a local array
imgbands = bandNames(image)
bandlist = computevalue(session,imgbands)
# 1-element Vector{String}:
#  &quot;NDVI&quot;

# compute the image date and get as local string
imgdate = format(date(image),&quot;YYYY-MM-dd&quot;)
datestr = computevalue(session,imgdate)
# &quot;2000-02-18&quot;"><pre><span class="pl-c"><span class="pl-c">#</span> compute the band names and get a local array</span>
imgbands <span class="pl-k">=</span> <span class="pl-c1">bandNames</span>(image)
bandlist <span class="pl-k">=</span> <span class="pl-c1">computevalue</span>(session,imgbands)
<span class="pl-c"><span class="pl-c">#</span> 1-element Vector{String}:</span>
<span class="pl-c"><span class="pl-c">#</span>  "NDVI"</span>

<span class="pl-c"><span class="pl-c">#</span> compute the image date and get as local string</span>
imgdate <span class="pl-k">=</span> <span class="pl-c1">format</span>(<span class="pl-c1">date</span>(image),<span class="pl-s"><span class="pl-pds">"</span>YYYY-MM-dd<span class="pl-pds">"</span></span>)
datestr <span class="pl-k">=</span> <span class="pl-c1">computevalue</span>(session,imgdate)
<span class="pl-c"><span class="pl-c">#</span> "2000-02-18"</span></pre></div>
<p dir="auto">Sometimes calculating statistics or reading metadata from the image/collections is needed. Using the <code>computevalue</code> above, essentially any EE.ComputedObject can be requested to a local Julia data type and continue using on our local system.</p>
<p dir="auto">More information on the API can be found in the <a href="https://kmarkert.github.io/EarthEngineREST.jl/dev/api/" rel="nofollow">API docs</a></p>
</article></div>